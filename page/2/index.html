<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/anyeansan.github.io/images/an-apple-180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/anyeansan.github.io/images/an-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/anyeansan.github.io/images/an-16.png">
  <link rel="mask-icon" href="/anyeansan.github.io/images/an.svg" color="#222">
  <link rel="alternate" href="/anyeansan.github.io/atom.xml" title="安₃" type="application/atom+xml">

<link rel="stylesheet" href="/anyeansan.github.io/css/main.css">


<link rel="stylesheet" href="/anyeansan.github.io/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/anyeansan.github.io/',
    scheme: 'Gemini',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"hide","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="一蓑烟雨任平生">
<meta property="og:type" content="website">
<meta property="og:title" content="安₃">
<meta property="og:url" content="https:&#x2F;&#x2F;anyeansan.github.io&#x2F;page&#x2F;2&#x2F;">
<meta property="og:site_name" content="安₃">
<meta property="og:description" content="一蓑烟雨任平生">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://anyeansan.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>安₃</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/anyeansan.github.io/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">安₃</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">我未成名君未嫁 可能俱是不如人</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/anyeansan.github.io/" rel="section"><i class="fa fa-fw fa-home"></i>安府</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/anyeansan.github.io/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>琅嬛福地</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/anyeansan.github.io/categories/" rel="section"><i class="fa fa-fw fa-th"></i>门派</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/anyeansan" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/SQL/Mysql%E5%89%8D%E8%A8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/SQL/Mysql%E5%89%8D%E8%A8%80/" class="post-title-link" itemprop="url">Mysql前言</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:13:54 / 修改时间：21:16:09" itemprop="dateCreated datePublished" datetime="2020-11-08T21:13:54+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/SQL/" itemprop="url" rel="index">
                    <span itemprop="name">SQL</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><h2 id="1-1-概念"><a href="#1-1-概念" class="headerlink" title="1.1 概念"></a>1.1 概念</h2><ol>
<li><code>DBMS（Database Management System）</code>：数据库管理系统<ol>
<li>RDBMS（Relational DBMS）<ul>
<li><code>Oracle DB2</code></li>
<li><code>Sql-Server Mysql</code></li>
<li><code>access</code></li>
<li><code>PG MSSQL</code></li>
</ul>
</li>
<li>NoSQL（Not Only SQL）<ul>
<li><code>MongoDB</code></li>
<li><code>Redis</code></li>
<li><code>ES（Elasticsearch）</code></li>
<li><code>memcached</code></li>
</ul>
</li>
<li>NewSQL（分布式）<ul>
<li><code>TiDB Spanner AliSQL OB PolarDB</code></li>
</ul>
</li>
</ol>
</li>
<li><code>DBA（Database Administrator）</code>：数据库管理员</li>
</ol>
<h2 id="1-2-Mysql-GA版本"><a href="#1-2-Mysql-GA版本" class="headerlink" title="1.2 Mysql GA版本"></a>1.2 Mysql GA版本</h2><ol>
<li><code>5.6</code><ul>
<li><code>5.6.38</code>（2017-09-13）</li>
</ul>
</li>
<li><code>5.7</code><ul>
<li><code>5.7.20</code>（2017-09-13）</li>
</ul>
</li>
</ol>
<h2 id="1-3-数据库设计三大范式"><a href="#1-3-数据库设计三大范式" class="headerlink" title="1.3 数据库设计三大范式"></a>1.3 数据库设计三大范式</h2><ol>
<li>每个单元格都应该是单一值，并且列不重复</li>
<li>每个表都应该是单一功能的，即一个表能且仅能表示一个实体类型，表中所有字段都是用来描述此实体的</li>
<li>一个表中的字段不该由表中其它字段推导而来</li>
</ol>
<h1 id="二-Mysql-安装与配置"><a href="#二-Mysql-安装与配置" class="headerlink" title="二 Mysql 安装与配置"></a>二 Mysql 安装与配置</h1><h2 id="2-1-Linux"><a href="#2-1-Linux" class="headerlink" title="2.1 Linux"></a>2.1 Linux</h2><h3 id="1-下载解压"><a href="#1-下载解压" class="headerlink" title="1 下载解压"></a>1 下载解压</h3><ol>
<li>下载 <code>linux-generic</code> 通用二进制包（类似绿色版）</li>
<li>上传到 linux 并解压</li>
</ol>
<h3 id="2-卸载-mariadb"><a href="#2-卸载-mariadb" class="headerlink" title="2 卸载 mariadb"></a>2 卸载 <code>mariadb</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 rpm -qa | grep mariadb</span><br><span class="line">2 yum remove -y xxx</span><br></pre></td></tr></table></figure>

<h3 id="3-创建用户并授权，用于管理mysql"><a href="#3-创建用户并授权，用于管理mysql" class="headerlink" title="3 创建用户并授权，用于管理mysql"></a>3 创建用户并授权，用于管理mysql</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 useradd -s /sbin/nologin mysql</span><br><span class="line">2 chown -R mysql.mysql basedir</span><br><span class="line">3 chown -R mysql.mysql datadir</span><br></pre></td></tr></table></figure>

<h3 id="4-设置环境变量"><a href="#4-设置环境变量" class="headerlink" title="4 设置环境变量"></a>4 设置环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 vim /etc/profile</span><br><span class="line">2 export PATH=basedir/bin:$PATH</span><br><span class="line">3 source /etc/profile</span><br><span class="line">4 mysql -V</span><br></pre></td></tr></table></figure>

<h3 id="5-初始化"><a href="#5-初始化" class="headerlink" title="5 初始化"></a>5 初始化</h3><h4 id="1-无密码"><a href="#1-无密码" class="headerlink" title="1 无密码"></a>1 无密码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize-insecure --user=mysql --basedir=xxx --datadir=xxx</span><br></pre></td></tr></table></figure>

<h4 id="2-有密码"><a href="#2-有密码" class="headerlink" title="2 有密码"></a>2 有密码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize --user=mysql --basedir=xxx --datadir=xxx</span><br></pre></td></tr></table></figure>

<ol>
<li>可能会因为缺少 <code>libaio-devel</code> 依赖而报错</li>
<li><code>--initialize</code><ol>
<li>对密码复杂度进行定制：12位，4种</li>
<li>密码过期时间：180天</li>
<li>给 <code>root@localhost</code> 用户设置临时密码</li>
</ol>
</li>
</ol>
<h3 id="6-配置文件-etc-my-cnf"><a href="#6-配置文件-etc-my-cnf" class="headerlink" title="6 配置文件 /etc/my.cnf"></a>6 配置文件 <code>/etc/my.cnf</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[mysqld] </span><br><span class="line">user=mysql</span><br><span class="line">basedir=</span><br><span class="line">datadir=</span><br><span class="line">socket=/tmp/mysql.sock</span><br><span class="line">port=3306</span><br><span class="line">server_id=6</span><br><span class="line">[mysql]</span><br><span class="line">socket=/tmp/mysql.sock</span><br></pre></td></tr></table></figure>

<h3 id="7-MySQL-服务"><a href="#7-MySQL-服务" class="headerlink" title="7 MySQL 服务"></a>7 MySQL 服务</h3><h4 id="1-服务启动配置"><a href="#1-服务启动配置" class="headerlink" title="1 服务启动配置"></a>1 服务启动配置</h4><h5 id="1-作用"><a href="#1-作用" class="headerlink" title="1 作用"></a>1 作用</h5><ol>
<li>影响数据库的启动</li>
<li>影响客户端的功能</li>
</ol>
<h5 id="2-配置方式"><a href="#2-配置方式" class="headerlink" title="2 配置方式"></a>2 配置方式</h5><ol>
<li>配置文件</li>
<li>命令行启动参数：如果参数冲突，命令行参数会优先级高于配置文件</li>
<li>编译安装时配置</li>
</ol>
<h5 id="3-配置文件"><a href="#3-配置文件" class="headerlink" title="3 配置文件"></a>3 配置文件</h5><h6 id="1-加载顺序"><a href="#1-加载顺序" class="headerlink" title="1 加载顺序"></a>1 加载顺序</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 默认情况下，MySQL启动时，会依序读取配置文件，如果有重复选项，会以最后一个文件设置的为准</span><br><span class="line">// 查看配置文件加载顺序</span><br><span class="line">mysqld --help --verbose | grep my.cnf</span><br><span class="line"></span><br><span class="line">// 如果启动时手动配置了配置文件，则默认配置文件都不再读取</span><br><span class="line">--defaults-file=</span><br></pre></td></tr></table></figure>

<h6 id="2-格式"><a href="#2-格式" class="headerlink" title="2 格式"></a>2 格式</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[module]</span><br><span class="line">key=value</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line">module</span><br><span class="line">	1. 服务端</span><br><span class="line">		1. [mysqld]</span><br><span class="line">		2. [mysqld_safe]</span><br><span class="line">		3. [server]</span><br><span class="line">			* 包括服务端所有</span><br><span class="line">	2. 客户端</span><br><span class="line">		1. [mysql]</span><br><span class="line">		2. [mysqladmin]</span><br><span class="line">		3. [mysqldump]</span><br><span class="line">		4. [client]</span><br><span class="line">			* 包括客户端所有</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h6 id="3-样板"><a href="#3-样板" class="headerlink" title="3 样板"></a>3 样板</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># -----------------服务端配置-------------------------</span><br><span class="line">[mysqld]</span><br><span class="line"># 管理用户</span><br><span class="line">user=mysql</span><br><span class="line"># 软件安装目录</span><br><span class="line">basedir=/app/mysql</span><br><span class="line"># 数据目录</span><br><span class="line">datadir=/data/mysql/data</span><br><span class="line"># 服务端保存 socket 文件路径</span><br><span class="line">socket=/tmp/mysql.sock</span><br><span class="line"># 端口号</span><br><span class="line">port=3306</span><br><span class="line"># 服务器id号 1~65535</span><br><span class="line">server_id=6</span><br><span class="line"># -----------------客户端配置-------------------------</span><br><span class="line">[mysql]</span><br><span class="line"># 客户端登录时寻找 socket 文件路径 </span><br><span class="line">socket=/tmp/mysql.sock</span><br></pre></td></tr></table></figure>

<h4 id="2-服务启动方式"><a href="#2-服务启动方式" class="headerlink" title="2 服务启动方式"></a>2 服务启动方式</h4><h5 id="1-init"><a href="#1-init" class="headerlink" title="1 init"></a>1 <code>init</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 1 配置</span><br><span class="line">cp basedir/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line">// 2 启动</span><br><span class="line">service mysqld start 或者 /etc/init.d/mysqld start</span><br></pre></td></tr></table></figure>

<ul>
<li>其实是调用了 <code>basedir/support-files/mysql.server</code> 脚本<ol>
<li>读取 <code>/etc/my.cnf</code> 配置文件<ol start="2">
<li>调用 <code>basedir/bin/mysqld_safe</code> 来启动 <code>mysqld</code></li>
</ol>
</li>
</ol>
</li>
</ul>
<h5 id="2-systemd"><a href="#2-systemd" class="headerlink" title="2 systemd"></a>2 <code>systemd</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 1 配置 /etc/systemd/system/mysqld.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=MySQL Server</span><br><span class="line">Documentation=man:mysqld(8)</span><br><span class="line">Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.html</span><br><span class="line">After=network.target</span><br><span class="line">After=syslog.target</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">[Service]</span><br><span class="line">User=mysql</span><br><span class="line">Group=mysql</span><br><span class="line">ExecStart=basedir/bin/mysqld --defaults-file=/etc/my.cnf</span><br><span class="line">LimitNOFILE = 5000</span><br><span class="line"></span><br><span class="line">// 2 启动</span><br><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure>

<ul>
<li>其实是加载了 <code>/etc/systemd/system/mysqld.service</code><ol>
<li>读取 <code>/etc/my.cnf</code> 配置文件</li>
<li>启动 <code>mysqld</code></li>
</ol>
</li>
</ul>
<h5 id="3-手动"><a href="#3-手动" class="headerlink" title="3 手动"></a>3 手动</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 维护模式启动</span><br><span class="line">mysqld_safe --skip-grant-tables --skip-networking &amp;</span><br></pre></td></tr></table></figure>

<h2 id="2-2-Windows"><a href="#2-2-Windows" class="headerlink" title="2.2 Windows"></a>2.2 Windows</h2><h3 id="1-配置环境变量"><a href="#1-配置环境变量" class="headerlink" title="1 配置环境变量"></a>1 配置环境变量</h3><h3 id="2-在MySql目录下创建-ini-配置文件"><a href="#2-在MySql目录下创建-ini-配置文件" class="headerlink" title="2 在MySql目录下创建 .ini 配置文件"></a>2 在MySql目录下创建 <code>.ini</code> 配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 服务端配置</span><br><span class="line">[mysqld] </span><br><span class="line">basedir =</span><br><span class="line">datadir =</span><br><span class="line">port = 3306</span><br><span class="line">character-set-server=utf8mb4 // 1</span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8mb4 // 2</span><br></pre></td></tr></table></figure>

<ul>
<li>配置结果：12皆不配置/配置1/配置2<br><img src="https://github.com/anyeansan/pics/raw/master/CS/SQL/%E4%B8%8D%E9%85%8D%E7%BD%AE12%E7%BB%93%E6%9E%9C.png" alt=""><br><img src="https://github.com/anyeansan/pics/raw/master/CS/SQL/%E9%85%8D%E7%BD%AE1%E7%BB%93%E6%9E%9C.png" alt=""><br><img src="https://github.com/anyeansan/pics/raw/master/CS/SQL/%E9%85%8D%E7%BD%AE2%E7%BB%93%E6%9E%9C.png" alt=""></li>
</ul>
<h3 id="3-初始化：在-basedir-bin-下执行命令"><a href="#3-初始化：在-basedir-bin-下执行命令" class="headerlink" title="3 初始化：在 basedir/bin 下执行命令"></a>3 初始化：在 <code>basedir/bin</code> 下执行命令</h3><ol>
<li><code>mysqld --initialize --console</code><ul>
<li>随机密码，并在控制台显示密码</li>
</ul>
</li>
<li><code>mysqld --initialize-insecure</code><ul>
<li>无密码</li>
</ul>
</li>
</ol>
<h3 id="4-服务"><a href="#4-服务" class="headerlink" title="4 服务"></a>4 服务</h3><ol>
<li><code>mysqld --install</code><ul>
<li>安装服务</li>
</ul>
</li>
<li><code>net start mysql</code><ul>
<li>启动服务</li>
</ul>
</li>
<li><code>net stop mysql</code><ul>
<li>停止服务</li>
</ul>
</li>
<li><code>mysqld remove</code> / <code>sc delete mysql</code><ul>
<li>删除服务</li>
</ul>
</li>
</ol>
<h1 id="三-MySQL-的连接"><a href="#三-MySQL-的连接" class="headerlink" title="三 MySQL 的连接"></a>三 MySQL 的连接</h1><h2 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h2><ol>
<li>Mysql 是 C/S 模型</li>
<li>使用 Mysql 需要安装服务端，连接服务端需要通过客户端</li>
</ol>
<h2 id="3-2-客户端"><a href="#3-2-客户端" class="headerlink" title="3.2 客户端"></a>3.2 客户端</h2><h3 id="1-MySQL自带的命令行工具-mysql-exe"><a href="#1-MySQL自带的命令行工具-mysql-exe" class="headerlink" title="1 MySQL自带的命令行工具 mysql.exe"></a>1 MySQL自带的命令行工具 <code>mysql.exe</code></h3><h4 id="1-连接方式"><a href="#1-连接方式" class="headerlink" title="1 连接方式"></a>1 连接方式</h4><table>
<thead>
<tr>
<th>命令</th>
<th>方式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>mysql [-h Host] [-Pport] -uuser -p[password]</code></td>
<td>TCP/IP 方式</td>
<td>本地、远程</td>
</tr>
<tr>
<td><code>mysql -uuser -p[password] [-S /tmp/mysql.sock]</code></td>
<td>Socket 方式</td>
<td>本地</td>
</tr>
</tbody></table>
<h4 id="2-mysql-OPTION-（mysql-命令）"><a href="#2-mysql-OPTION-（mysql-命令）" class="headerlink" title="2 mysql [OPTION] （mysql 命令）"></a>2 <code>mysql [OPTION]</code> （mysql 命令）</h4><table>
<thead>
<tr>
<th>OPTION</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>-u user</code></td>
<td>用户名</td>
</tr>
<tr>
<td><code>-ppassword</code></td>
<td>密码和 <code>p</code> 之间不能有空格</td>
</tr>
<tr>
<td><code>-h host</code></td>
<td>主机地址</td>
</tr>
<tr>
<td><code>-P port</code></td>
<td>端口</td>
</tr>
<tr>
<td><code>-S Socket</code></td>
<td>Socket 文件路径</td>
</tr>
<tr>
<td><code>-e &quot;sql&quot;</code></td>
<td>免交互执行命令（即不连接数据库）</td>
</tr>
<tr>
<td><code>&lt; 脚本路径</code></td>
<td>导入 sql 脚本</td>
</tr>
<tr>
<td><code>-prompt 提示符</code></td>
<td>定义 mysql 提示符，默认为 <code>mysql&gt;</code></td>
</tr>
</tbody></table>
<h4 id="3-mysqldump-命令"><a href="#3-mysqldump-命令" class="headerlink" title="3 mysqldump 命令"></a>3 mysqldump 命令</h4><ul>
<li><code>mysqldump -hhost -Pport -uuser -ppassword --databse 库名 &gt; .sql路径</code><ul>
<li>不登录，导出某个数据库的备份（导出 sql 脚本）</li>
</ul>
</li>
</ul>
<h3 id="2-图形化工具（GUI）"><a href="#2-图形化工具（GUI）" class="headerlink" title="2 图形化工具（GUI）"></a>2 图形化工具（GUI）</h3><table>
<thead>
<tr>
<th align="center">软件</th>
<th align="center">windows</th>
<th align="center">mac</th>
<th align="center">linux</th>
<th align="center">功能</th>
<th align="center">免费版</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>sequelpro</code></td>
<td align="center">&nbsp;</td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">有</td>
</tr>
<tr>
<td align="center"><code>dbeaver</code></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">有</td>
</tr>
<tr>
<td align="center"><code>navicat</code></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">强</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center"><code>SQLyog</code></td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">强</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center"><code>dbForge</code></td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">强</td>
<td align="center">有</td>
</tr>
<tr>
<td align="center"><code>heidisql</code></td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">有</td>
</tr>
<tr>
<td align="center"><code>TablePlus</code></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="四-MySQL-体系结构"><a href="#四-MySQL-体系结构" class="headerlink" title="四 MySQL 体系结构"></a>四 MySQL 体系结构</h1><h2 id="4-1-mysql-实例"><a href="#4-1-mysql-实例" class="headerlink" title="4.1 mysql 实例"></a>4.1 mysql 实例</h2><ol>
<li><code>mysqld</code>（老板）</li>
<li><code>master thread</code>（经理）</li>
<li><code>other thread</code>（员工）</li>
<li><code>预分配内存</code>（办公区）</li>
</ol>
<h2 id="4-2-MySQL-逻辑架构"><a href="#4-2-MySQL-逻辑架构" class="headerlink" title="4.2 MySQL 逻辑架构"></a>4.2 MySQL 逻辑架构</h2><h3 id="1-连接层"><a href="#1-连接层" class="headerlink" title="1 连接层"></a>1 连接层</h3><ol>
<li>提供连接协议：TCP/IP 、SOCKET</li>
<li>提供验证：用户、密码、IP、Port、SOCKET …</li>
<li>提供专用连接线程：接收用户SQL，返回结果<ul>
<li><code>show processlist</code><ul>
<li>查看连接线程</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="2-SQL-层（服务层）"><a href="#2-SQL-层（服务层）" class="headerlink" title="2 SQL 层（服务层）"></a>2 SQL 层（服务层）</h3><ol>
<li>接收上层传送的SQL语句</li>
<li>语法验证模块：验证语句语法,是否满足SQL_MODE</li>
<li>语义检查：判断SQL语句的类型（DQL、DML …）</li>
<li>权限检查：用户对库表有没有权限</li>
<li>解析器：语句执行前进行预处理，生成解析树(执行计划)，说白了就是生成多种执行方案</li>
<li>优化器：根据解析器得出的多种执行计划，进行判断，选择最优的执行计划<ul>
<li>代价模型：资源（CPU IO MEM）的耗损评估性能好坏</li>
</ul>
</li>
<li>执行器：根据最优执行计划，执行SQL语句，产生执行结果（在磁盘上）</li>
<li>提供查询缓存（默认没开启）：会使用redis tair替代查询缓存功能</li>
<li>提供日志记录（默认没开启）：二进制日志 <code>binlog</code> 、审计日志、通用日志 …</li>
</ol>
<h3 id="3-存储引擎层"><a href="#3-存储引擎层" class="headerlink" title="3 存储引擎层"></a>3 存储引擎层</h3><ol>
<li>根据SQL层执行的结果，从磁盘上拿数据</li>
<li>将16进制的磁盘数据，返回给 SQL 层结构化成表</li>
<li>由连接层的专用线程返回给用户</li>
</ol>
<h2 id="4-3-MySQL-逻辑存储结构"><a href="#4-3-MySQL-逻辑存储结构" class="headerlink" title="4.3 MySQL 逻辑存储结构"></a>4.3 MySQL 逻辑存储结构</h2><ol>
<li>库（database）<ol>
<li>库名</li>
<li>库属性（字符集，校对集(排序规则)）</li>
</ol>
</li>
<li>表（table）<ol>
<li>表名</li>
<li>表属性（存储引擎，字符集，校对集(排序规则)）</li>
</ol>
</li>
<li>列（column）/ 字段（field） <ol>
<li>列名</li>
<li>列属性（数据类型，约束，…）</li>
</ol>
</li>
<li>行（row）/ 记录（record）</li>
</ol>
<h2 id="4-4-MySQL-物理存储结构"><a href="#4-4-MySQL-物理存储结构" class="headerlink" title="4.4 MySQL 物理存储结构"></a>4.4 MySQL 物理存储结构</h2><ol>
<li>库（目录）</li>
<li>表<ol>
<li><code>MyISAM</code><ul>
<li><code>.frm</code> ：存储表结构（列名，列属性）</li>
<li><code>.MYD</code> ：存储数据记录</li>
<li><code>.MYI</code> ：存储索引</li>
</ul>
</li>
<li><code>InnoDB</code><ul>
<li><code>.frm</code> ：存储表结构（列名，列属性）</li>
<li><code>.ibd</code> ：存储数据记录和索引</li>
<li><code>.opt</code> ：存储库属性</li>
<li><code>ibdata1</code> ：数据字段信息</li>
</ul>
</li>
</ol>
</li>
<li>InnoDB，一般情况下（非分区表）<ol>
<li>段：一个表就是一个段，一个段由多个区构成</li>
<li>区：一个区由64个连续的页构造，1M 大小（ <code>64*16=1024</code> ）</li>
<li>页：一个页大小为 16 kb</li>
</ol>
</li>
</ol>
<h1 id="五-用户-amp-权限"><a href="#五-用户-amp-权限" class="headerlink" title="五 用户 &amp; 权限"></a>五 用户 &amp; 权限</h1><h2 id="5-1-用户"><a href="#5-1-用户" class="headerlink" title="5.1 用户"></a>5.1 用户</h2><h3 id="1-用户定义"><a href="#1-用户定义" class="headerlink" title="1 用户定义"></a>1 用户定义</h3><ul>
<li><code>user@&#39;Host&#39;</code><ul>
<li><code>Host</code>：白名单，即此用户可以在哪个主机连接数据库</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Host（例）</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>localhost</code></td>
<td>本地</td>
</tr>
<tr>
<td><code>127.0.0.1</code></td>
<td>本地</td>
</tr>
<tr>
<td><code>%</code></td>
<td>任意网段</td>
</tr>
<tr>
<td><code>10.0.0.%</code></td>
<td><code>10.0.0.0~10.0.0.255</code></td>
</tr>
<tr>
<td><code>10.0.0.5%</code></td>
<td><code>10.0.0.50~10.0.0.59</code></td>
</tr>
<tr>
<td><code>10.0.0.0/255.255.255.0</code></td>
<td><code>10.0.0.0~10.0.0.255</code></td>
</tr>
</tbody></table>
<h3 id="2-用户管理"><a href="#2-用户管理" class="headerlink" title="2 用户管理"></a>2 用户管理</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>select user,host,authentication_string from mysql.user</code></td>
<td>查询用户名，主机，密码（用户信息存储在数据库 <code>mysql</code> 中 的 <code>user</code> 表）</td>
</tr>
<tr>
<td><code>create user user@&#39;Host&#39; [identified by &#39;password&#39;]</code></td>
<td>创建用户</td>
</tr>
<tr>
<td><code>drop user user@&#39;Host&#39;</code></td>
<td>删除用户</td>
</tr>
</tbody></table>
<h3 id="3-修改用户密码"><a href="#3-修改用户密码" class="headerlink" title="3 修改用户密码"></a>3 修改用户密码</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>mysqladmin -u用户名 -p[旧密码] password 新密码</code></td>
<td>不需登录</td>
</tr>
<tr>
<td><code>alter user &#39;用户名&#39; @&#39;localhost&#39; identified by &#39;新密码&#39;</code></td>
<td>需要登录</td>
</tr>
<tr>
<td><code>set password for 用户名 = &#39;新密码&#39;</code></td>
<td>修改指定用户密码</td>
</tr>
<tr>
<td><code>set password = &#39;新密码&#39;</code></td>
<td>修改自己密码</td>
</tr>
</tbody></table>
<ul>
<li>忘记 root 密码<ol>
<li>关闭数据库</li>
<li>维护模式启动数据库<ul>
<li><code>mysqld_safe --skip-grant-tables --skip-networking &amp;</code></li>
</ul>
</li>
<li>登录并修改密码（如果修改密码报错，则刷新权限）<ul>
<li><code>flush privileges</code></li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="5-2-权限"><a href="#5-2-权限" class="headerlink" title="5.2 权限"></a>5.2 权限</h2><h3 id="1-权限列表"><a href="#1-权限列表" class="headerlink" title="1 权限列表"></a>1 权限列表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 1 基本权限</span><br><span class="line">SELECT，INSERT，UPDATE，DELETE，CREATE，DROP，ALTER，SHOW DATABASES，CREATE USER，CREATE TEMPORARY TABLES，RELOAD，SHUTDOWN，PROCESS，FILE，REFERENCE，INDEX，SUPER，EXECUTE，REPLICATION，SLAVE，REPLICATION，CLIENT，EVENT，TRIGGER，LOCK TABLES，CREATE VIEW，SHOW VIEW，CREATE ROUTINE，ALTER ROUTINE，CREATE TABLESPACE，</span><br><span class="line"></span><br><span class="line">// 2 特殊权限</span><br><span class="line">// 2.1 所有权限</span><br><span class="line">ALL privileges</span><br><span class="line"></span><br><span class="line">// 2.2 可以给别的用户授权的权限，超级管理员才具备</span><br><span class="line">with grant option</span><br></pre></td></tr></table></figure>

<h3 id="2-权限管理"><a href="#2-权限管理" class="headerlink" title="2 权限管理"></a>2 权限管理</h3><h4 id="1-查看权限"><a href="#1-查看权限" class="headerlink" title="1 查看权限"></a>1 查看权限</h4><ul>
<li><code>show grants [for user@&#39;Host&#39;]</code><ul>
<li>查看自己（或指定用户）的权限</li>
</ul>
</li>
</ul>
<h4 id="2-授权"><a href="#2-授权" class="headerlink" title="2 授权"></a>2 授权</h4><ul>
<li><code>grant 权限 on 目标 to 用户 [identified by &#39;password&#39;] [with grant option]</code><ul>
<li>权限<ol>
<li><code>ALL privileges</code></li>
<li>权限列表，以逗号分隔</li>
</ol>
</li>
<li>目标<ol>
<li><code>*.*</code><ul>
<li>所有数据库的所有表</li>
</ul>
</li>
<li><code>database.*</code><ul>
<li>指定数据库的所有表</li>
</ul>
</li>
<li><code>database.table</code><ul>
<li>指定数据库的指定表</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 id="3-回收权限"><a href="#3-回收权限" class="headerlink" title="3 回收权限"></a>3 回收权限</h4><ul>
<li><code>revoke 权限 on 目标 from user@&#39;Host&#39;</code></li>
</ul>
<h1 id="六-MySQL-内置命令"><a href="#六-MySQL-内置命令" class="headerlink" title="六 MySQL 内置命令"></a>六 MySQL 内置命令</h1><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>help</code></td>
<td>打印帮助</td>
</tr>
<tr>
<td><code>\c</code></td>
<td>放弃本条语句，类似 <code>ctrl + c</code></td>
</tr>
<tr>
<td><code>quit</code> <code>exit</code> <code>ctrl+d</code> <code>\q</code></td>
<td>退出</td>
</tr>
<tr>
<td><code>\G</code></td>
<td>竖形显示数据</td>
</tr>
<tr>
<td><code>source 脚本路径</code></td>
<td>导入SQL脚本</td>
</tr>
<tr>
<td><code>tee 路径</code></td>
<td>将输入的sql语句存储到本地</td>
</tr>
<tr>
<td><code>prompt 提示符</code></td>
<td>定义 mysql 提示符，默认为 <code>mysql&gt;</code></td>
</tr>
<tr>
<td><code>delimiter 符号</code></td>
<td>定义结束符，默认为<code>;</code></td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/jQuery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/jQuery/" class="post-title-link" itemprop="url">jQuery</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:12:55 / 修改时间：21:13:22" itemprop="dateCreated datePublished" datetime="2020-11-08T21:12:55+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-jQuery-概述"><a href="#一-jQuery-概述" class="headerlink" title="一 jQuery 概述"></a>一 jQuery 概述</h1><h2 id="1-1-jQuery-中的顶级对象"><a href="#1-1-jQuery-中的顶级对象" class="headerlink" title="1.1  jQuery 中的顶级对象 $"></a>1.1  jQuery 中的顶级对象 <code>$</code></h2><ol>
<li><code>$</code> 是 <code>jQuery</code> 的别称，在代码中可以使用 <code>jQuery</code> 代替</li>
<li><code>$</code> 是 jQuery 的顶级对象，相当于原生 JavaScript 中的 <code>window</code></li>
</ol>
<h2 id="1-2-jQuery-对象和-DOM-对象"><a href="#1-2-jQuery-对象和-DOM-对象" class="headerlink" title="1.2 jQuery 对象和 DOM 对象"></a>1.2 jQuery 对象和 DOM 对象</h2><ol>
<li>用原生 JS 获取的是 DOM 对象</li>
<li>jQuery 方法获取的是 jQuery 对象，本质是利用 <code>$</code> 对 DOM 对象包装后产生的对象，是一个类数组</li>
<li>隐式迭代：对 jQuery 对象执行操作时，会给内部所有 DOM 元素进行操作</li>
</ol>
<table>
<thead>
<tr>
<th>转换</th>
<th>方式</th>
</tr>
</thead>
<tbody><tr>
<td><strong>DOM → jQuery</strong></td>
<td><code>jQuery = $(DOM)</code></td>
</tr>
<tr>
<td><strong>jQuery → DOM</strong></td>
<td><code>DOM = jQuery[0]</code><br><code>DOM = jQuery.get(0)</code></td>
</tr>
</tbody></table>
<h2 id="1-3"><a href="#1-3" class="headerlink" title="1.3 $()"></a>1.3 <code>$()</code></h2><table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>$()</code></td>
<td>页面 DOM 加载事件，相当于原生 js 中的 <code>DOMContentLoaded</code> 事件</td>
</tr>
<tr>
<td><code>$(DOM)</code></td>
<td>将 DOM 对象转为 jQuery 对象</td>
</tr>
<tr>
<td><code>$(selector)</code></td>
<td>使用选择器获取 jQeury 对象</td>
</tr>
<tr>
<td><code>$(Html)</code></td>
<td>新建一个指定 Html 标签的 jQury 对象</td>
</tr>
</tbody></table>
<h1 id="二-选择器"><a href="#二-选择器" class="headerlink" title="二 选择器"></a>二 选择器</h1><h2 id="2-1-基础选择器"><a href="#2-1-基础选择器" class="headerlink" title="2.1 基础选择器"></a>2.1 基础选择器</h2><table>
<thead>
<tr>
<th>选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>*</code></td>
<td>通配选择器</td>
</tr>
<tr>
<td><code>#id</code></td>
<td>ID 选择器</td>
</tr>
<tr>
<td><code>.class</code></td>
<td>类选择器</td>
</tr>
<tr>
<td><code>html</code></td>
<td>标签选择器</td>
</tr>
<tr>
<td><code>s1,s2,...</code></td>
<td>并集</td>
</tr>
<tr>
<td><code>s1.s2</code></td>
<td>交集</td>
</tr>
</tbody></table>
<h2 id="2-2-层级选择器"><a href="#2-2-层级选择器" class="headerlink" title="2.2 层级选择器"></a>2.2 层级选择器</h2><table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>A E</code></td>
<td>后代元素</td>
</tr>
<tr>
<td><code>A &gt; E</code></td>
<td>子元素</td>
</tr>
<tr>
<td><code>A ~ E</code></td>
<td>兄弟元素</td>
</tr>
<tr>
<td><code>A + E</code></td>
<td>下一个兄弟元素</td>
</tr>
</tbody></table>
<h2 id="2-3-属性选择器"><a href="#2-3-属性选择器" class="headerlink" title="2.3 属性选择器"></a>2.3 属性选择器</h2><table>
<thead>
<tr>
<th>属性选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>[attr]</code></td>
<td>带有 <code>attr</code> 属性的元素</td>
</tr>
<tr>
<td><code>[attr=value]</code></td>
<td><code>attr</code> 属性值为 <code>value</code> 的元素</td>
</tr>
<tr>
<td><code>[attr!=value]</code></td>
<td><code>attr</code> 属性值不为 <code>value</code> 的元素</td>
</tr>
<tr>
<td><code>[attr^=value]</code></td>
<td><code>attr</code> 属性值以 <code>value</code> 开头的元素</td>
</tr>
<tr>
<td><code>[attr$=value]</code></td>
<td><code>attr</code> 属性值以 <code>value</code> 结尾的元素</td>
</tr>
<tr>
<td><code>[attr*=value]</code></td>
<td><code>attr</code> 属性值包含 <code>value</code> 的元素</td>
</tr>
<tr>
<td><code>[s1][s2][sN]</code></td>
<td>相当于 <code>&amp;&amp;</code></td>
</tr>
</tbody></table>
<h2 id="2-4-过滤选择器"><a href="#2-4-过滤选择器" class="headerlink" title="2.4 过滤选择器"></a>2.4 过滤选择器</h2><table>
<thead>
<tr>
<th>过滤选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:first</code></td>
<td>第一个</td>
</tr>
<tr>
<td><code>:last</code></td>
<td>最后一个</td>
</tr>
<tr>
<td><code>:not(s)</code></td>
<td>非</td>
</tr>
<tr>
<td><code>:odd</code></td>
<td>奇数索引</td>
</tr>
<tr>
<td><code>:even</code></td>
<td>偶数索引</td>
</tr>
<tr>
<td><code>:eq(index)</code></td>
<td>等于索引</td>
</tr>
<tr>
<td><code>:gt(index)</code></td>
<td>大于索引</td>
</tr>
<tr>
<td><code>:lt(index)</code></td>
<td>小于索引</td>
</tr>
</tbody></table>
<h2 id="2-5-子元素选择器"><a href="#2-5-子元素选择器" class="headerlink" title="2.5 子元素选择器"></a>2.5 子元素选择器</h2><table>
<thead>
<tr>
<th>子元素选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:first-child</code></td>
<td>第一个子元素</td>
</tr>
<tr>
<td><code>:last-child</code></td>
<td>最后一个子元素</td>
</tr>
<tr>
<td><code>:only-child</code></td>
<td>唯一的子元素</td>
</tr>
<tr>
<td><code>:nth-child(expr)</code></td>
<td><code>expr</code> 可以是 <code>an+b, odd, even</code></td>
</tr>
</tbody></table>
<h2 id="2-6-内容选择器"><a href="#2-6-内容选择器" class="headerlink" title="2.6 内容选择器"></a>2.6 内容选择器</h2><table>
<thead>
<tr>
<th>内容选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:empty</code></td>
<td>不包含子元素或者文本的元素</td>
</tr>
<tr>
<td><code>:contains(text)</code></td>
<td>包含指定文本的元素</td>
</tr>
<tr>
<td><code>:has(selector)</code></td>
<td>包含选择器所匹配元素的元素</td>
</tr>
<tr>
<td><code>:parent</code></td>
<td>含有子元素或者文本的元素</td>
</tr>
</tbody></table>
<h2 id="2-7-可见性选择器"><a href="#2-7-可见性选择器" class="headerlink" title="2.7 可见性选择器"></a>2.7 可见性选择器</h2><table>
<thead>
<tr>
<th>可见性选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:hidden</code></td>
<td>所有不可见元素，<code>display:none, type=hidden ...</code></td>
</tr>
<tr>
<td><code>:visible</code></td>
<td>所有可见元素</td>
</tr>
</tbody></table>
<h2 id="2-8-表单选择器"><a href="#2-8-表单选择器" class="headerlink" title="2.8 表单选择器"></a>2.8 表单选择器</h2><table>
<thead>
<tr>
<th>表单选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:input</code></td>
<td>匹配所有 <code>input textarea select button</code> 元素</td>
</tr>
<tr>
<td><code>:Type</code></td>
<td>匹配 <code>input</code> 指定类型的元素，如 <code>:text :radio ...</code></td>
</tr>
</tbody></table>
<h2 id="2-9-表单属性选择器"><a href="#2-9-表单属性选择器" class="headerlink" title="2.9 表单属性选择器"></a>2.9 表单属性选择器</h2><table>
<thead>
<tr>
<th>表单属性选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:enabled</code></td>
<td>所有可用元素</td>
</tr>
<tr>
<td><code>:disabled</code></td>
<td>所有不可用元素</td>
</tr>
<tr>
<td><code>:checked</code></td>
<td>单/复选框的所有选中元素</td>
</tr>
<tr>
<td><code>:selected</code></td>
<td>下拉框所有选中的 <code>option</code> 元素</td>
</tr>
</tbody></table>
<h2 id="2-10-筛选方法"><a href="#2-10-筛选方法" class="headerlink" title="2.10 筛选方法"></a>2.10 筛选方法</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>选择器能完成的，筛选提供相同方法也能完成</li>
<li>区别在于选择器直接获取筛选后的结果，方法先获取原结果，然后再筛选<ol>
<li><code>$(&quot;div:first&quot;)</code>：直接获取第一个 <code>div</code></li>
<li><code>$(&quot;div&quot;).first()</code>：先获取所有 <code>div</code>，之后筛选出第一个</li>
</ol>
</li>
</ol>
<h3 id="2-查找"><a href="#2-查找" class="headerlink" title="2 查找"></a>2 查找</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>parent()</code></td>
<td>父元素</td>
</tr>
<tr>
<td>childre([selector])</td>
<td>所有匹配子元素</td>
</tr>
<tr>
<td><code>find(selector)</code></td>
<td>查找匹配的元素</td>
</tr>
<tr>
<td><code>siblings([selector])</code></td>
<td>所有兄弟元素</td>
</tr>
<tr>
<td><code>next([selector])</code></td>
<td>下一个兄弟元素</td>
</tr>
<tr>
<td><code>nextAll([selector])</code></td>
<td>之后的所有兄弟元素</td>
</tr>
<tr>
<td><code>prev([selector])</code></td>
<td>上一个兄弟元素</td>
</tr>
<tr>
<td><code>prevAll([selector])</code></td>
<td>之前的所有兄弟元素</td>
</tr>
</tbody></table>
<h3 id="3-过滤"><a href="#3-过滤" class="headerlink" title="3 过滤"></a>3 过滤</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>eq(index)</code></td>
<td>获取指定索引元素</td>
</tr>
<tr>
<td><code>first()</code></td>
<td>第一个</td>
</tr>
<tr>
<td><code>last()</code></td>
<td>最后一个</td>
</tr>
<tr>
<td><code>filter(expr)</code></td>
<td>获取匹配的元素</td>
</tr>
</tbody></table>
<h1 id="三-文档处理"><a href="#三-文档处理" class="headerlink" title="三 文档处理"></a>三 文档处理</h1><h2 id="3-1-元素遍历"><a href="#3-1-元素遍历" class="headerlink" title="3,1 元素遍历"></a>3,1 元素遍历</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>$(Selector).each(callback)</code></td>
<td>遍历 jQuery 对象</td>
</tr>
<tr>
<td><code>$.each(obj, callback)</code></td>
<td>遍历任意对象</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">callback:</span><br><span class="line">function(index, domEle) &#123;</span><br><span class="line">	index：元素的索引</span><br><span class="line">	domEle：遍历的元素，相当于 this，是 DOM 对象</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-添删改"><a href="#3-2-添删改" class="headerlink" title="3.2 添删改"></a>3.2 添删改</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>append(ele)</code></td>
<td>追加到元素内尾部，父子关系</td>
</tr>
<tr>
<td><code>prepend(ele)</code></td>
<td>追加到元素内首部，父子关系</td>
</tr>
<tr>
<td><code>after(ele)</code></td>
<td>添加到元素后面，兄弟关系</td>
</tr>
<tr>
<td><code>before(ele)</code></td>
<td>添加到元素前面，兄弟关系</td>
</tr>
<tr>
<td><code>remove()</code></td>
<td>删除自已及后代节点，移除绑定事件和绑定数据</td>
</tr>
<tr>
<td><code>detach()</code></td>
<td>删除自已及后代节点，保留绑定事件和绑定数据</td>
</tr>
<tr>
<td><code>empty()</code></td>
<td>删除所有后代节点</td>
</tr>
<tr>
<td><code>replaceWith(content)</code></td>
<td>将所有匹配的元素替换成指定的 HTML 或 DOM 元素</td>
</tr>
<tr>
<td><code>replaceAll(selector)</code></td>
<td>替换所有匹配的元素</td>
</tr>
</tbody></table>
<h2 id="3-3-复制"><a href="#3-3-复制" class="headerlink" title="3.3 复制"></a>3.3 复制</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>clone()</code></td>
<td>只复制样式，不复制行为</td>
</tr>
<tr>
<td><code>clone(true)</code></td>
<td>既复制样式，又复制行为</td>
</tr>
</tbody></table>
<h1 id="四-文本"><a href="#四-文本" class="headerlink" title="四 文本"></a>四 文本</h1><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>html([value])</code></td>
<td>获取或设置元素内容，对应 <code>innerHTML</code></td>
</tr>
<tr>
<td><code>text([value])</code></td>
<td>获取或设置元素内容，对应 <code>innerText</code></td>
</tr>
<tr>
<td><code>val([value])</code></td>
<td>获取或设置元素 <code>value</code> 属性的值</td>
</tr>
</tbody></table>
<h1 id="五-数据缓存"><a href="#五-数据缓存" class="headerlink" title="五 数据缓存"></a>五 数据缓存</h1><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>data(key)</code></td>
<td>获取绑定数据</td>
</tr>
<tr>
<td><code>data(key,value)</code></td>
<td>绑定数据，页面刷新移除</td>
</tr>
<tr>
<td><code>removeData(key)</code></td>
<td>移除绑定数据</td>
</tr>
</tbody></table>
<h1 id="六-属性"><a href="#六-属性" class="headerlink" title="六 属性"></a>六 属性</h1><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>attr(key)</code></td>
<td>获取属性的值（自定义属性和标准属性）</td>
</tr>
<tr>
<td><code>attr(key,value)</code></td>
<td>设置属性的值</td>
</tr>
<tr>
<td><code>removeAttr(key)</code></td>
<td>删除属性</td>
</tr>
<tr>
<td><code>prop(key)</code></td>
<td>获取属性的值（Html 标准属性）</td>
</tr>
<tr>
<td><code>prop(key,value)</code></td>
<td>设置属性的值</td>
</tr>
<tr>
<td><code>removeProp(key)</code></td>
<td>删除属性</td>
</tr>
</tbody></table>
<h1 id="七-CSS"><a href="#七-CSS" class="headerlink" title="七 CSS"></a>七 CSS</h1><h2 id="7-1-样式"><a href="#7-1-样式" class="headerlink" title="7.1 样式"></a>7.1 样式</h2><table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>css(key, value)</code></td>
<td>添加属性和值</td>
</tr>
<tr>
<td>css({key:value, key:value, …})</td>
<td>以对象形式添加多组属性和值</td>
</tr>
<tr>
<td><code>addClass(class)</code></td>
<td>添加类</td>
</tr>
<tr>
<td><code>removeClass(class)</code></td>
<td>删除类</td>
</tr>
<tr>
<td><code>toggleClass(class)</code></td>
<td>切换，有类则删除，无类则添加</td>
</tr>
<tr>
<td><code>hasClass(class)</code></td>
<td>判断是否有指定类</td>
</tr>
</tbody></table>
<h2 id="7-2-位置"><a href="#7-2-位置" class="headerlink" title="7.2 位置"></a>7.2 位置</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>offset()</code></td>
<td>获取元素相对于文档的偏移，返回 JSON 对象，有两个属性 <code>top left</code></td>
</tr>
<tr>
<td><code>offset({top:value, left:value})</code></td>
<td>设置元素相对于文档的偏移</td>
</tr>
<tr>
<td><code>position()</code></td>
<td>获取元素相对于有定位祖先元素的偏移，没有则相对于文档偏移，返回 JSON 对象：<code>top left</code></td>
</tr>
<tr>
<td><code>scrollTop([value])</code></td>
<td>获取或设置元素上边被卷去的距离</td>
</tr>
<tr>
<td><code>scrollLeft([value])</code></td>
<td>获取或设置元素左边被卷去的距离</td>
</tr>
</tbody></table>
<h2 id="7-3-尺寸"><a href="#7-3-尺寸" class="headerlink" title="7.3 尺寸"></a>7.3 尺寸</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>width([value])</code></td>
<td>获取或设置元素宽度，<code>content-box</code></td>
</tr>
<tr>
<td><code>height([value])</code></td>
<td>获取或设置元素高度，<code>content-box</code></td>
</tr>
<tr>
<td><code>innerWidth()</code></td>
<td>获取 <code>padding-box</code> 宽度</td>
</tr>
<tr>
<td><code>innerHeight()</code></td>
<td>获取 <code>padding-box</code> 高度</td>
</tr>
<tr>
<td><code>outerWidth()</code></td>
<td>获取 <code>border-box</code> 宽度</td>
</tr>
<tr>
<td><code>outerHeight()</code></td>
<td>获取 <code>border-box</code> 高度</td>
</tr>
<tr>
<td><code>outerWidth(true)</code></td>
<td>获取 <code>margin-box</code> 宽度</td>
</tr>
<tr>
<td><code>outerHeight(true)</code></td>
<td>获取 <code>margin-box</code> 高度</td>
</tr>
</tbody></table>
<h1 id="八-效果"><a href="#八-效果" class="headerlink" title="八 效果"></a>八 效果</h1><h2 id="8-1-显示隐藏"><a href="#8-1-显示隐藏" class="headerlink" title="8.1 显示隐藏"></a>8.1 显示隐藏</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>show([speed], [easing], [callback])</code></td>
<td>显示元素</td>
</tr>
<tr>
<td><code>hide([speed], [easing], [callback])</code></td>
<td>隐藏元素</td>
</tr>
</tbody></table>
<ol>
<li><code>speed</code><ol>
<li><code>slow normal fast</code></li>
<li>毫秒值</li>
</ol>
</li>
<li><code>easing</code><ol>
<li><code>swing</code> ：默认，慢 → 快 → 慢</li>
<li><code>linear</code>：匀速</li>
</ol>
</li>
</ol>
<h2 id="8-2-滑动"><a href="#8-2-滑动" class="headerlink" title="8.2 滑动"></a>8.2 滑动</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>slideDown([speed], [easing], [callback])</code></td>
<td>向下滑动</td>
</tr>
<tr>
<td><code>slideUp([speed], [easing], [callback])</code></td>
<td>向上滑动</td>
</tr>
<tr>
<td><code>slideToggle([speed], [easing], [callback])</code></td>
<td>滑动切换</td>
</tr>
</tbody></table>
<h2 id="8-3-淡入淡出"><a href="#8-3-淡入淡出" class="headerlink" title="8.3 淡入淡出"></a>8.3 淡入淡出</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>fadeIn([speed], [easing], [callback])</code></td>
<td>淡入显示</td>
</tr>
<tr>
<td><code>fadeOut([speed], [easing], [callback])</code></td>
<td>淡出隐藏</td>
</tr>
<tr>
<td><code>fadeToggle([speed], [easing], [callback])</code></td>
<td>淡入淡出切换</td>
</tr>
<tr>
<td><code>fadeTo([speed], opacity, [easing], [callback])</code></td>
<td>调整到指定透明度，<code>opacity</code>：0~1，必须</td>
</tr>
</tbody></table>
<h2 id="8-4-自定义动画"><a href="#8-4-自定义动画" class="headerlink" title="8.4 自定义动画"></a>8.4 自定义动画</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>animate(params, [speed], [easing], [callback])</code></td>
<td>创建动画，<code>params</code>：对象形式的样式属性和值</td>
</tr>
<tr>
<td><code>stop([clearQueue], [gotoEnd])</code></td>
<td>停止所有在指定元素上正在运行的动画</td>
</tr>
<tr>
<td><code>delay(duration, [queueName])</code></td>
<td>动画延迟时间</td>
</tr>
</tbody></table>
<h1 id="九-事件"><a href="#九-事件" class="headerlink" title="九 事件"></a>九 事件</h1><h2 id="9-1-页面加载"><a href="#9-1-页面加载" class="headerlink" title="9.1 页面加载"></a>9.1 页面加载</h2><table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>$(document).ready(fn)</code></td>
<td>标准 API，相当于原生 js 中的 <code>DOMContentLoaded</code> 事件</td>
</tr>
<tr>
<td><code>$(fn)</code></td>
<td>简化版</td>
</tr>
</tbody></table>
<h2 id="9-2-事件绑定"><a href="#9-2-事件绑定" class="headerlink" title="9.2 事件绑定"></a>9.2 事件绑定</h2><h3 id="1-普通方式"><a href="#1-普通方式" class="headerlink" title="1 普通方式"></a>1 普通方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).type(fn);</span><br></pre></td></tr></table></figure>

<h3 id="2-on"><a href="#2-on" class="headerlink" title="2 on"></a>2 on</h3><ol>
<li><p>一个事件对应一个处理函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(selector).on(</span><br><span class="line">    &#123;</span><br><span class="line">		type: fn,</span><br><span class="line">		type: fn,</span><br><span class="line">		...</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>多个事件对应一个处理函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).on(&quot;type type type ...&quot;, fn);</span><br></pre></td></tr></table></figure>
</li>
<li><p>事件委托</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(selector).on(types, childSelector, fn);</span><br><span class="line">// 事件绑定在父元素上，但由子元素触发</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="3-off"><a href="#3-off" class="headerlink" title="3 off"></a>3 off</h3><ol>
<li><p>解绑元素所有事件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).off()</span><br></pre></td></tr></table></figure>
</li>
<li><p>解绑元素指定事件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).off(type)</span><br></pre></td></tr></table></figure>
</li>
<li><p>解绑委托事件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).off(type, childSelector)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="9-3-事件处理"><a href="#9-3-事件处理" class="headerlink" title="9.3 事件处理"></a>9.3 事件处理</h2><table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>$(selector).hover(over, [out])</code></td>
<td><code>mouseenter</code> 触发第一个函数，<code>mouseleave</code> 触发第二个函数，如果只有一个函数，则都触发它</td>
</tr>
<tr>
<td><code>$(selector).trigger(type)</code></td>
<td>自动触发指定事件</td>
</tr>
<tr>
<td><code>$(selector).triggerHandler(type)</code></td>
<td>自动触发指定事件，不会触发元素默认行为</td>
</tr>
</tbody></table>
<h1 id="十-工具"><a href="#十-工具" class="headerlink" title="十 工具"></a>十 工具</h1><h2 id="10-1-拷贝对象"><a href="#10-1-拷贝对象" class="headerlink" title="10.1 拷贝对象"></a>10.1 拷贝对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.extend([deep], target, srcObj1, srcOjb2, ...)</span><br></pre></td></tr></table></figure>

<h2 id="10-2-字符串去空格"><a href="#10-2-字符串去空格" class="headerlink" title="10.2 字符串去空格"></a>10.2 字符串去空格</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.trim(str)</span><br></pre></td></tr></table></figure>

<h2 id="10-3-多库共存"><a href="#10-3-多库共存" class="headerlink" title="10.3 多库共存"></a>10.3 多库共存</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 修改 $ 为自定义变量</span><br><span class="line">let newSymbol = $.noConflict()</span><br></pre></td></tr></table></figure>

<h1 id="十一-AJAX"><a href="#十一-AJAX" class="headerlink" title="十一 AJAX"></a>十一 AJAX</h1><h2 id="11-1-Ajax-请求"><a href="#11-1-Ajax-请求" class="headerlink" title="11.1 Ajax 请求"></a>11.1 Ajax 请求</h2><h3 id="1-ajax"><a href="#1-ajax" class="headerlink" title="1 $.ajax()"></a>1 <code>$.ajax()</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">	url: &quot;&quot;,</span><br><span class="line">	type: &quot;&quot;,</span><br><span class="line">	data: &quot;&quot;,</span><br><span class="line">	async: true,</span><br><span class="line">	dataType: &quot;&quot;,</span><br><span class="line">	contentType: &quot;&quot;,</span><br><span class="line">	beforeSend: function(XHR) &#123;</span><br><span class="line">		XHR：XMLHttpRequest 对象</span><br><span class="line">	&#125;,</span><br><span class="line">	success: function(data,textStatus,XHR)&#123;</span><br><span class="line">		data：响应数据</span><br><span class="line">		textStatus：描述状态的字符串</span><br><span class="line">	&#125;,</span><br><span class="line">	error: function(XHR,textStatus,errorThrown)&#123;</span><br><span class="line">		textStatus：错误信息</span><br><span class="line">		errorThrown：异常对象</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>type</code></td>
<td>请求方式，默认 <code>GET</code></td>
</tr>
<tr>
<td><code>url</code></td>
<td>请求地址</td>
</tr>
<tr>
<td><code>data</code></td>
<td>请求参数，<code>key=value&amp;key=value</code> 字符串或者 JSON</td>
</tr>
<tr>
<td><code>dataType</code></td>
<td>响应数据类型，<code>xml html json text script jsonp ...</code></td>
</tr>
<tr>
<td><code>async</code></td>
<td>是否异步，默认 <code>true</code></td>
</tr>
<tr>
<td><code>contentType</code></td>
<td>请求参数编码类型，默认 <code>application/x-www-form-urlencoded</code></td>
</tr>
<tr>
<td><code>beforeSend</code></td>
<td>发送请求前修改 <code>XMLHttpRequest</code> 对象的函数</td>
</tr>
<tr>
<td><code>success</code></td>
<td>请求成功后的回调函数</td>
</tr>
<tr>
<td><code>error</code></td>
<td>请求失败时调用此函数</td>
</tr>
</tbody></table>
<h3 id="2-get"><a href="#2-get" class="headerlink" title="2 $.get()"></a>2 <code>$.get()</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.get(url, [data], [callback], [dataType])</span><br></pre></td></tr></table></figure>

<h3 id="3-post"><a href="#3-post" class="headerlink" title="3 $.post()"></a>3 <code>$.post()</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.get(post, [data], [callback], [dataType])</span><br></pre></td></tr></table></figure>

<h2 id="11-2-表单序列化"><a href="#11-2-表单序列化" class="headerlink" title="11.2 表单序列化"></a>11.2 表单序列化</h2><h3 id="1-serialize"><a href="#1-serialize" class="headerlink" title="1 serialize()"></a>1 <code>serialize()</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;form&quot;).serialize()</span><br></pre></td></tr></table></figure>

<ol>
<li>必须使用 <code>&lt;form&gt;</code> 元素</li>
<li>表单项必须有 <code>name</code> 属性</li>
<li>将表单中所有项拼凑成一个字符串，格式为 <code>key=value&amp;key=value</code></li>
</ol>
<h3 id="2-serializeArray"><a href="#2-serializeArray" class="headerlink" title="2 serializeArray()"></a>2 <code>serializeArray()</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;form&quot;).serializeArray()</span><br></pre></td></tr></table></figure>

<ol>
<li>必须使用 <code>&lt;form&gt;</code> 元素</li>
<li>表单项必须有 <code>name</code> 属性</li>
<li>将表单中所有项拼凑成一个 <code>json</code> 数组，格式 <code>[{key:value}, {key:value}]</code></li>
</ol>
<h2 id="11-3-Ajax-事件"><a href="#11-3-Ajax-事件" class="headerlink" title="11.3 Ajax 事件"></a>11.3 Ajax 事件</h2><table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>ajaxStart</code></td>
<td>AJAX 请求开始时触发</td>
</tr>
<tr>
<td><code>ajaxComplete</code></td>
<td>AJAX 请求完成时触发</td>
</tr>
<tr>
<td><code>ajaxSuccess</code></td>
<td>AJAX 请求成功时触发</td>
</tr>
<tr>
<td><code>ajaxError</code></td>
<td>AJAX 请求失败时触发</td>
</tr>
</tbody></table>
<h2 id="11-4-跨域"><a href="#11-4-跨域" class="headerlink" title="11.4 跨域"></a>11.4 跨域</h2><ol>
<li><code>$.getJSON()</code></li>
<li><code>$.getScript()</code></li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/AJAX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/AJAX/" class="post-title-link" itemprop="url">AJAX</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:12:47 / 修改时间：21:13:12" itemprop="dateCreated datePublished" datetime="2020-11-08T21:12:47+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-AJAX-概述"><a href="#一-AJAX-概述" class="headerlink" title="一 AJAX 概述"></a>一 AJAX 概述</h1><ol>
<li><code>Asynchronous JavaScript And XML</code><ul>
<li>AJAX 不是一个技术，是多个技术联合实现的产物，且无论服务端编程语言是哪一种都可以，AJAX 只负责发送请求和接收响应</li>
<li>异步提交下 <code>form</code> 标签的 <code>action</code> 和 <code>method</code> 没有意义</li>
<li>服务端不能使用转发或重定向，因为会让浏览器全面刷新，只能以流的方式响应给浏览器</li>
</ul>
</li>
<li>一个页面可以同时发送多个 AJAX 请求</li>
<li>传统的网页（不使用 AJAX）都是同步的，如果需要更新内容，必需重载整个网页面<ul>
<li><code>客户端 → 请求 → 服务端</code></li>
<li><code>服务端 → 响应 → 客户端</code></li>
</ul>
</li>
<li>Ajax：可以使网页实现异步更新，即在不重新加载整个网页的情况下，对网页的某部分进行更新<ul>
<li><code>客户端 → 请求 → ajax engine → 服务端</code></li>
<li><code>服务端 → 响应 → ajax engine → 客户端</code></li>
</ul>
</li>
<li>Ajax 应用场景<ol>
<li>页面向下加载更多数据</li>
<li>列表数据无刷新分页</li>
<li>表单项失去焦点验证</li>
<li>输入框的自动补全（下拉提示）</li>
<li>地图</li>
<li>…</li>
</ol>
</li>
</ol>
<h1 id="二-XMLHttpRequest"><a href="#二-XMLHttpRequest" class="headerlink" title="二 XMLHttpRequest"></a>二 <code>XMLHttpRequest</code></h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><ol>
<li>异步通讯对象</li>
<li>老版本的 IE 中是 <code>ActiveXObject</code></li>
</ol>
<h2 id="2-2-构造"><a href="#2-2-构造" class="headerlink" title="2.2 构造"></a>2.2 构造</h2><table>
<thead>
<tr>
<th>构造函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>XMLHttpRequest()</code></td>
<td>创建 <code>XMLHttpRequest</code> 对象</td>
</tr>
</tbody></table>
<h2 id="2-3-属性"><a href="#2-3-属性" class="headerlink" title="2.3 属性"></a>2.3 属性</h2><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>readyState</code></td>
<td>只读</td>
<td><code>XMLHttpRequest</code> 状态码（<code>0-4</code>）</td>
</tr>
<tr>
<td><code>status</code></td>
<td>只读</td>
<td>响应状态码（<code>200 302 404 500 ...</code>）</td>
</tr>
<tr>
<td><code>responseType</code></td>
<td>读写</td>
<td>在<code>open()</code>之后<code>send()</code>之前设置，告诉服务器返回指定类型的数据，默认 <code>text</code></td>
</tr>
<tr>
<td><code>responseText</code></td>
<td>只读</td>
<td>字符串形式的响应数据</td>
</tr>
<tr>
<td><code>responseXML</code></td>
<td>只读</td>
<td>XML 形式的响应数据</td>
</tr>
<tr>
<td><code>withCredentials</code></td>
<td>读写</td>
<td>跨域请求是否携带 <code>cookie</code>，默认 <code>false</code></td>
</tr>
</tbody></table>
<h3 id="1-readyState"><a href="#1-readyState" class="headerlink" title="1 readyState"></a>1 readyState</h3><table>
<thead>
<tr>
<th>状态码</th>
<th>状态</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>0</code></td>
<td><code>unsent</code></td>
<td>请求未初始化</td>
</tr>
<tr>
<td><code>1</code></td>
<td><code>opened</code></td>
<td>服务器连接已建立</td>
</tr>
<tr>
<td><code>2</code></td>
<td><code>headers_received</code></td>
<td>请求已接收</td>
</tr>
<tr>
<td><code>3</code></td>
<td><code>loading</code></td>
<td>请求处理中</td>
</tr>
<tr>
<td><code>4</code></td>
<td><code>done</code></td>
<td>请求已完成，且响应已就绪</td>
</tr>
</tbody></table>
<h3 id="2-responseType"><a href="#2-responseType" class="headerlink" title="2 responseType"></a>2 responseType</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&quot;&quot;</code></td>
<td>同 <code>text</code></td>
</tr>
<tr>
<td><code>&quot;text&quot;</code>（默认）</td>
<td>表示服务器返回文本数据</td>
</tr>
<tr>
<td><code>&quot;json&quot;</code></td>
<td>表示服务器返回 JSON 数据</td>
</tr>
<tr>
<td><code>&quot;blob&quot;</code></td>
<td>表示服务器返回二进制对象</td>
</tr>
<tr>
<td><code>&quot;document&quot;</code></td>
<td>表示服务器返回一个文档对象，HTML 或 XML</td>
</tr>
<tr>
<td><code>&quot;arraybuffer&quot;</code></td>
<td>表示服务器返回二进制数组</td>
</tr>
</tbody></table>
<h2 id="2-4-方法"><a href="#2-4-方法" class="headerlink" title="2.4 方法"></a>2.4 方法</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>open(method, url, [async], [user], [password])</code></td>
<td>初始化一个请求</td>
</tr>
<tr>
<td><code>send([data])</code></td>
<td>发送请求</td>
</tr>
<tr>
<td><code>setRequestHeader(key, value)</code></td>
<td>设置请求头</td>
</tr>
<tr>
<td><code>getResponseHeader(key)</code></td>
<td>获取响应头信息</td>
</tr>
<tr>
<td><code>getAllResponseHeaders()</code></td>
<td>获取一个包含所有响应头信息的字符串</td>
</tr>
<tr>
<td><code>overrideMimeType(mimeType)</code></td>
<td>指定一个MIME类型用于替代服务器指定的类型，必须在 <code>send()</code> 之前调用</td>
</tr>
</tbody></table>
<h3 id="1-open"><a href="#1-open" class="headerlink" title="1 open()"></a>1 <code>open()</code></h3><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>method</code></td>
<td>请求方法，<code>GET POST PUT DELETE...</code></td>
</tr>
<tr>
<td><code>url</code></td>
<td>请求地址</td>
</tr>
<tr>
<td><code>async</code></td>
<td>是否异步，默认 <code>true</code></td>
</tr>
<tr>
<td><code>user</code></td>
<td>用于认证的用户名，默认为 <code>null</code></td>
</tr>
<tr>
<td><code>password</code></td>
<td>用于认证的密码，默认为 <code>null</code></td>
</tr>
</tbody></table>
<h2 id="2-5-事件及对应属性"><a href="#2-5-事件及对应属性" class="headerlink" title="2.5 事件及对应属性"></a>2.5 事件及对应属性</h2><table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
<th>对应属性</th>
</tr>
</thead>
<tbody><tr>
<td><code>readyStateChange</code></td>
<td>当 <code>readyState</code> 属性改变时，就会触发此事件</td>
<td><code>onreadystatechange</code></td>
</tr>
<tr>
<td><code>load</code></td>
<td>请求成功完成时触发</td>
<td><code>onload</code></td>
</tr>
<tr>
<td><code>error</code></td>
<td>请求出错时触发</td>
<td><code>onerror</code></td>
</tr>
<tr>
<td><code>abort</code></td>
<td>请求中止时触发</td>
<td><code>onabort</code></td>
</tr>
<tr>
<td><code>loadend</code></td>
<td>请求结束时触发，无论成功失败或中止</td>
<td><code>onloadend</code></td>
</tr>
<tr>
<td><code>timeout</code></td>
<td>请求超时时触发</td>
<td><code>ontimeout</code></td>
</tr>
<tr>
<td><code>loadstart</code></td>
<td>接收到响应数据时触发</td>
<td><code>onloadstart</code></td>
</tr>
<tr>
<td><code>progress</code></td>
<td>接收数据开始周期触发，进度条</td>
<td><code>onprogress</code></td>
</tr>
</tbody></table>
<ul>
<li>事件对应属性指向一个函数，是对应事件触发时的处理函数</li>
</ul>
<h1 id="三-AJAX-使用步骤"><a href="#三-AJAX-使用步骤" class="headerlink" title="三 AJAX 使用步骤"></a>三 AJAX 使用步骤</h1><h2 id="3-1-创建-XMLHttpRequest-对象"><a href="#3-1-创建-XMLHttpRequest-对象" class="headerlink" title="3.1 创建 XMLHttpRequest 对象"></a>3.1 创建 XMLHttpRequest 对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ajax;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.XMLHttpRequest)&#123;</span><br><span class="line">	ajax=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	ajax=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ajax;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-初始化请求并发送"><a href="#3-2-初始化请求并发送" class="headerlink" title="3.2 初始化请求并发送"></a>3.2 初始化请求并发送</h2><h3 id="1-GET"><a href="#1-GET" class="headerlink" title="1 GET"></a>1 GET</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 初始化请求</span></span><br><span class="line">ajax.open(<span class="string">"GET"</span>,<span class="string">"url?name=xxx&amp;age=18"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 发送请求</span></span><br><span class="line">ajax.send();</span><br></pre></td></tr></table></figure>

<h3 id="2-POST"><a href="#2-POST" class="headerlink" title="2 POST"></a>2 POST</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 初始化请求</span></span><br><span class="line">ajax.open(<span class="string">"POST"</span>,<span class="string">"url"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 设置请求头并发送请求（POST 请求需要使用表单）</span></span><br><span class="line"><span class="comment">// 2.1 请求参数格式为 application/x-www-form-urlencoded</span></span><br><span class="line">ajax.setRequestHeader(<span class="string">"content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">ajax.send(<span class="string">"name=xxx&amp;age=18"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.2 请求参数格式为  application/json</span></span><br><span class="line">ajax.setRequestHeader(<span class="string">"content-type"</span>,<span class="string">"application/json"</span>);</span><br><span class="line"><span class="comment">// 请求参数必须是字符串，所以需要把 JSON 对象转为字符串</span></span><br><span class="line">ajax.send(<span class="built_in">JSON</span>.stringify(&#123;<span class="attr">name</span>:<span class="string">"xxx"</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;));</span><br></pre></td></tr></table></figure>

<h2 id="3-3-注册回调函数接收服务器响应数据"><a href="#3-3-注册回调函数接收服务器响应数据" class="headerlink" title="3.3 注册回调函数接收服务器响应数据"></a>3.3 注册回调函数接收服务器响应数据</h2><table>
<thead>
<tr>
<th>方式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>onload</code>（推荐）</td>
<td>不兼容旧 IE，不需要判断状态码，被调用一次</td>
</tr>
<tr>
<td><code>onreadystatechange</code></td>
<td>兼容旧 IE，需要判断状态码，被调用多次</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 onreadystatechange</span></span><br><span class="line">ajax.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> res=ajax.responseText;</span><br><span class="line">	<span class="keyword">let</span> res=ajax.responseXml;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 onload</span></span><br><span class="line">ajax.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (ajax.readyState==<span class="number">4</span> &amp;&amp; ajax.status==<span class="number">200</span>)&#123;</span><br><span class="line">		<span class="keyword">let</span> res=ajax.responseText;</span><br><span class="line">		<span class="keyword">let</span> res=ajax.responseXml;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-4-低版本-IE-浏览器缓存问题"><a href="#3-4-低版本-IE-浏览器缓存问题" class="headerlink" title="3.4 低版本 IE 浏览器缓存问题"></a>3.4 低版本 IE 浏览器缓存问题</h2><ol>
<li>问题：在请求地址不变的情况下，只有第一次请求真正发送到服务器，后续请求都从浏览器缓存中获取结果，导致拿到的都是旧数据</li>
<li>解决：发送请求时，添加一个每次都不同的请求参数，如时间戳，随机数</li>
</ol>
<h1 id="四-FormData"><a href="#四-FormData" class="headerlink" title="四 FormData"></a>四 FormData</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><ol>
<li>将表单数据的键值对组合，实现表单数据的序列化，减少表单元素拼接</li>
<li>可以通过 <code>send(formData)</code> 发送</li>
</ol>
<h2 id="4-2-构造"><a href="#4-2-构造" class="headerlink" title="4.2 构造"></a>4.2 构造</h2><table>
<thead>
<tr>
<th>构造函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>FormData(form)</code></td>
<td>将表单元素构造为 <code>FormData</code> 对象</td>
</tr>
</tbody></table>
<h2 id="4-3-方法"><a href="#4-3-方法" class="headerlink" title="4.3 方法"></a>4.3 方法</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>get(key)</code></td>
<td>返回 <code>FormData</code> 对象中与给定键关联的第一个值</td>
</tr>
<tr>
<td><code>getAll(key)</code></td>
<td>返回 <code>FormData</code> 对象中与给定键关联的所有值的数组</td>
</tr>
<tr>
<td><code>set(key, value)</code></td>
<td>给 <code>FormData</code> 设置键值对，键不存在则添加，存在则覆盖</td>
</tr>
<tr>
<td><code>append(key, value,[fileName])</code></td>
<td>给 <code>formData</code> 追加键值对，键存在也不会覆盖，如果是文件，可以添加文件名</td>
</tr>
<tr>
<td><code>delete(key)</code></td>
<td>从 <code>FormData</code> 对象里面删除一个键值对</td>
</tr>
<tr>
<td><code>has(key)</code></td>
<td>判断 <code>FormData</code> 对象是否包含指定键</td>
</tr>
<tr>
<td><code>kes()</code></td>
<td>返回一个包含所有键的迭代器对象</td>
</tr>
<tr>
<td><code>values()</code></td>
<td>返回一个包含所有值的迭代器对象</td>
</tr>
<tr>
<td><code>entries()</code></td>
<td>返回一个包含所有键值对的迭代器对象</td>
</tr>
</tbody></table>
<h1 id="五-跨域"><a href="#五-跨域" class="headerlink" title="五 跨域"></a>五 跨域</h1><h2 id="5-1-同源政策"><a href="#5-1-同源政策" class="headerlink" title="5.1 同源政策"></a>5.1 同源政策</h2><ol>
<li>同源：协议、域名和端口都相同</li>
<li>Ajax 只能向同源服务器发送HTTP 请求，如果发出跨域请求，就会报错</li>
<li>同源政策是为了用户信息安全，防止恶意窃取数据</li>
<li>解决同源的方式有许多，如 <code>JSONP</code></li>
</ol>
<h2 id="5-2-JSONP"><a href="#5-2-JSONP" class="headerlink" title="5.2 JSONP"></a>5.2 JSONP</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li><code>json with padding</code></li>
<li>JSONP 不属于 Ajax 请求，但可以模拟 Ajax 请求</li>
<li>是 <code>json</code> 的一种 “使用模式”，可以从别的域请求资源</li>
</ol>
<h3 id="2-使用"><a href="#2-使用" class="headerlink" title="2 使用"></a>2 使用</h3><ol>
<li>在客户端全局作用域定义一个函数</li>
<li>客户端 <code>&lt;script src=&quot;&quot;&gt;</code> 是不受同源限制的，非同源请求地址写在<code>src</code> 中</li>
<li>在请求地址中将函数名发送给服务器</li>
<li>服务器响应数据必须是客户端所定义函数的调用，真正发给客户端的数据作为函数调用的参数</li>
<li>客户端接收到实参，执行函数</li>
</ol>
<h3 id="3-动态请求"><a href="#3-动态请求" class="headerlink" title="3 动态请求"></a>3 动态请求</h3><ol>
<li><code>&lt;script&gt;</code> 标签可以不写死，而是用 JS 动态生成</li>
<li>添加监听事件 <code>onload</code>，在请求完成后，删除 <code>&lt;script src=&quot;&quot;&gt;</code> ，避免多次请求产生多个 <code>&lt;script src=&quot;&quot;&gt;</code></li>
</ol>
<h3 id="4-跨域-Cookie"><a href="#4-跨域-Cookie" class="headerlink" title="4 跨域 Cookie"></a>4 跨域 Cookie</h3><ol>
<li><code>withCredentials</code> 设置为 <code>true</code></li>
<li><code>Access-Control-Allow-Credentials</code> 设置为 <code>true</code></li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/DOM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/DOM/" class="post-title-link" itemprop="url">DOM</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:09:31 / 修改时间：21:10:45" itemprop="dateCreated datePublished" datetime="2020-11-08T21:09:31+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-DOM-概述"><a href="#一-DOM-概述" class="headerlink" title="一 DOM 概述"></a>一 DOM 概述</h1><ol>
<li><code>Document Object Model</code> 文档对象模型</li>
<li>DOM 是 HTML 和 XML 文档的编程接口，用于改变文档的结构，样式和内容</li>
<li>DOM 的最小组成单位叫做节点（node），DOM 树由各种不同类型的节点组成</li>
<li>页面中所有内容都是节点（标签，属性，文本，注释等）</li>
</ol>
<h1 id="二-NodeList-amp-HTMLCollection"><a href="#二-NodeList-amp-HTMLCollection" class="headerlink" title="二 NodeList &amp; HTMLCollection"></a>二 NodeList &amp; HTMLCollection</h1><h2 id="2-1-NodeList"><a href="#2-1-NodeList" class="headerlink" title="2.1 NodeList"></a>2.1 NodeList</h2><ol>
<li><code>NodeList</code> 是节点的集合，是类数组对象</li>
<li><code>Node.childNodes</code> 返回的是一个动态集合，即文档中的节点树发生变化，<code>NodeList</code> 也会随之变化</li>
<li>其他的 <code>NodeList</code> 都是静态集合</li>
<li><code>NodeList</code> 的 <code>length</code> 属性表示其包含的节点数量</li>
<li><code>NodeList</code> 的遍历<ol>
<li><code>item(index)</code><ul>
<li>获取指定索引的值，可以用 <code>nodeList[index]</code> 代替</li>
</ul>
</li>
<li><code>for</code> 循环<ul>
<li>因为是类数组对象，有索引</li>
</ul>
</li>
<li><code>forEach()</code></li>
<li><code>keys()</code></li>
<li><code>values()</code></li>
<li><code>entries()</code></li>
</ol>
</li>
</ol>
<h2 id="2-2-HTMLCollection"><a href="#2-2-HTMLCollection" class="headerlink" title="2.2 HTMLCollection"></a>2.2 HTMLCollection</h2><ol>
<li><code>HTMLCollection</code> 元素节点的集合，是类数组对象</li>
<li><code>HTMLCollection</code> 都是动态集合</li>
<li><code>HTMLCollection</code> 的 <code>length</code> 属性表示其包含的节点数量</li>
<li><code>HTMLCollection</code> 不能使用 <code>foreach</code> 遍历</li>
</ol>
<h1 id="三-Node"><a href="#三-Node" class="headerlink" title="三 Node"></a>三 Node</h1><h2 id="3-1-分类"><a href="#3-1-分类" class="headerlink" title="3.1 分类"></a>3.1 分类</h2><table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
<th>说明</th>
<th align="center"><code>nodeType</code></th>
<th><code>nodeName</code></th>
<th><code>nodeValue</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>Document</code></td>
<td>文档节点</td>
<td>整个页面</td>
<td align="center"><code>9</code></td>
<td><code>#document</code></td>
<td><code>null</code></td>
</tr>
<tr>
<td><code>Element</code></td>
<td>元素节点</td>
<td>页面 HTML 标签</td>
<td align="center"><code>1</code></td>
<td>大写的标签名</td>
<td><code>null</code></td>
</tr>
<tr>
<td><code>Attr</code></td>
<td>属性节点</td>
<td>页面标签的属性</td>
<td align="center"><code>2</code></td>
<td>属性名</td>
<td>属性值</td>
</tr>
<tr>
<td><code>Text</code></td>
<td>文本节点</td>
<td>页面中的文本</td>
<td align="center"><code>3</code></td>
<td><code>#text</code></td>
<td>文本内容</td>
</tr>
<tr>
<td><code>Comment</code></td>
<td>注释节点</td>
<td>注释</td>
<td align="center"><code>8</code></td>
<td><code>#comment</code></td>
<td>注释内容</td>
</tr>
<tr>
<td><code>DocumentType</code></td>
<td>文档类型节点</td>
<td><code>&lt;!DOCTYPE html&gt;</code></td>
<td align="center"><code>10</code></td>
<td>文档的类型</td>
<td><code>null</code></td>
</tr>
<tr>
<td><code>DocumentFragment</code></td>
<td>文档片段节点</td>
<td>一个没有父级文件的最小文档对象</td>
<td align="center"><code>11</code></td>
<td><code>#document-fragment</code></td>
<td><code>null</code></td>
</tr>
</tbody></table>
<h2 id="3-2-属性"><a href="#3-2-属性" class="headerlink" title="3.2 属性"></a>3.2 属性</h2><h3 id="1-节点信息"><a href="#1-节点信息" class="headerlink" title="1 节点信息"></a>1 节点信息</h3><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>nodeType</code></td>
<td>只读</td>
<td>节点类型（整数值）</td>
</tr>
<tr>
<td><code>nodeName</code></td>
<td>只读</td>
<td>节点名</td>
</tr>
<tr>
<td><code>nodeValue</code></td>
<td>读写</td>
<td>获取或设置当前节点的值</td>
</tr>
<tr>
<td><code>baseURI</code></td>
<td>只读</td>
<td>当前网页的绝对路径 URI</td>
</tr>
</tbody></table>
<h3 id="2-节点结构"><a href="#2-节点结构" class="headerlink" title="2 节点结构"></a>2 节点结构</h3><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>parentNode</code></td>
<td>只读</td>
<td>父节点</td>
</tr>
<tr>
<td><code>childNodes</code></td>
<td>只读</td>
<td>所有子节点的 <code>NodeList</code> 集合</td>
</tr>
<tr>
<td><code>firstChild</code></td>
<td>只读</td>
<td>第一个子节点</td>
</tr>
<tr>
<td><code>lastChild</code></td>
<td>只读</td>
<td>最后一个子节点</td>
</tr>
<tr>
<td><code>nextSibling</code></td>
<td>只读</td>
<td>弟节点</td>
</tr>
<tr>
<td><code>previousSibling</code></td>
<td>只读</td>
<td>兄节点</td>
</tr>
</tbody></table>
<h3 id="3-元素节点结构"><a href="#3-元素节点结构" class="headerlink" title="3 元素节点结构"></a>3 元素节点结构</h3><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>parentElement</code></td>
<td>只读</td>
<td>父元素节点，若没有父节点或父节点不是元素节点则返回 <code>null</code></td>
</tr>
<tr>
<td><code>children</code></td>
<td>只读</td>
<td>所有子元素节点，非标准，但推荐使用</td>
</tr>
<tr>
<td><code>firstElementChild</code></td>
<td>只读</td>
<td>第一个子元素节点，有兼容问题，推荐 <code>children[0]</code></td>
</tr>
<tr>
<td><code>lastElementChild</code></td>
<td>只读</td>
<td>最后一个子元素节点，有兼容问题，推荐 <code>children[children.length-1]</code></td>
</tr>
<tr>
<td><code>nextElementSibling</code></td>
<td>只读</td>
<td>弟元素节点，有兼容问题</td>
</tr>
<tr>
<td><code>previousElementSibling</code></td>
<td>只读</td>
<td>兄元素节点，有兼容问题</td>
</tr>
</tbody></table>
<h2 id="3-3-方法"><a href="#3-3-方法" class="headerlink" title="3.3 方法"></a>3.3 方法</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>parentNode.appendChild(childNode)</code></td>
<td>追加子节点</td>
</tr>
<tr>
<td><code>parentNode.removeChild(childNode)</code></td>
<td>删除子节点</td>
</tr>
<tr>
<td><code>parentNode.replaceChild(newNode, oldNode)</code></td>
<td>替换子节点</td>
</tr>
<tr>
<td><code>parentNode.insertBefore(childNode, targetNode)</code></td>
<td>将子节点插入到目标节点之前</td>
</tr>
<tr>
<td><code>node.cloneNode([flag])</code></td>
<td>克隆节点，无参或 <code>false</code> 为浅拷贝，<code>true</code> 为深拷贝</td>
</tr>
<tr>
<td><code>node.hasChildNodes()</code></td>
<td>判断是否有子节点</td>
</tr>
<tr>
<td><code>node.contains(node)</code></td>
<td>判断是否是其自己或后代节点</td>
</tr>
</tbody></table>
<h1 id="四-Document"><a href="#四-Document" class="headerlink" title="四 Document"></a>四 Document</h1><h2 id="4-1-属性"><a href="#4-1-属性" class="headerlink" title="4.1 属性"></a>4.1 属性</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>forms</code></td>
<td>返回所有 <code>&lt;form&gt;</code> 表单节点的  <code>HTMLCollection</code> 集合</td>
</tr>
<tr>
<td><code>documentURI</code></td>
<td>文档的 URI</td>
</tr>
<tr>
<td><code>location</code></td>
<td>浏览器地址栏对象</td>
</tr>
<tr>
<td><code>body</code></td>
<td>获取 <code>&lt;body&gt;</code> 元素节点</td>
</tr>
<tr>
<td><code>documentElement</code></td>
<td>获取 <code>&lt;html&gt;</code> 元素节点</td>
</tr>
</tbody></table>
<h2 id="4-2-方法"><a href="#4-2-方法" class="headerlink" title="4.2 方法"></a>4.2 方法</h2><h3 id="1-获取"><a href="#1-获取" class="headerlink" title="1 获取"></a>1 获取</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>getElementById(id)</code></td>
<td>根据元素 ID 获取 <code>Element</code> 对象</td>
</tr>
<tr>
<td><code>getElementsByTagName(tagName)</code></td>
<td>根据标签名获取元素节点的 <code>HTMLCollection</code> 集合</td>
</tr>
<tr>
<td><code>getElementsByClassName(class)</code></td>
<td>根据 <code>class</code> 属性值获取元素节点的 <code>HTMLCollection</code> 集合</td>
</tr>
<tr>
<td><code>getElementsByName(name)</code></td>
<td>根据元素 <code>name</code> 属性的值获取节点的 <code>NodeList</code> 集合</td>
</tr>
<tr>
<td><code>querySelector(selector)</code></td>
<td>返回第一个匹配的节点</td>
</tr>
<tr>
<td><code>querySelectorAll(selector)</code></td>
<td>返回所有匹配节点的 <code>NodeList</code> 集合</td>
</tr>
</tbody></table>
<h3 id="2-创建"><a href="#2-创建" class="headerlink" title="2 创建"></a>2 创建</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>createElement(tageName)</code></td>
<td>创建元素节点</td>
</tr>
<tr>
<td><code>createAttribute(attrName)</code></td>
<td>创建属性节点</td>
</tr>
<tr>
<td><code>createTextNode(text)</code></td>
<td>创建文本节点</td>
</tr>
<tr>
<td><code>createComment(comment)</code></td>
<td>创建注释节点</td>
</tr>
</tbody></table>
<ul>
<li>另外两种创建节点的方式<ol>
<li><code>document.write()</code><ul>
<li>是直接将内容写入页面，如果文档流加载完毕才执行，会导致页面重绘（仍掉原页面，创建新页面且只有写出的内容）</li>
</ul>
</li>
<li><code>innerHTML</code><ul>
<li>创建多个元素通过拼接字符串创建，效率底</li>
<li>创建多个元素通过数组形式拼接，效率高，但复杂</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="五-Element"><a href="#五-Element" class="headerlink" title="五 Element"></a>五 Element</h1><h2 id="5-1-属性"><a href="#5-1-属性" class="headerlink" title="5.1 属性"></a>5.1 属性</h2><h3 id="1-信息属性"><a href="#1-信息属性" class="headerlink" title="1 信息属性"></a>1 信息属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td>读写</td>
<td>元素 id</td>
</tr>
<tr>
<td><code>tagName</code></td>
<td>只读</td>
<td>元素标签名</td>
</tr>
<tr>
<td><code>className</code></td>
<td>读写</td>
<td>返回 class 属性的字符串，多个用空格分隔</td>
</tr>
<tr>
<td><code>classList</code></td>
<td>只读</td>
<td>返回 class 属性的类数组对象</td>
</tr>
<tr>
<td><code>innerHTML</code></td>
<td>读写</td>
<td>识别 Html 标签，保留Html 标签、空格和换行，w3c 标准</td>
</tr>
<tr>
<td><code>innerText</code></td>
<td>读写</td>
<td>不识别 Html 标签，会去除 Html标签以及空格和换行，非标准</td>
</tr>
<tr>
<td><code>dataset</code></td>
<td>只读</td>
<td>存放了所有以 <code>data-</code> 开头的自定义属性的集合</td>
</tr>
<tr>
<td><code>hiddent</code></td>
<td>读写</td>
<td>元素是否隐藏</td>
</tr>
<tr>
<td><code>style</code></td>
<td>读写</td>
<td>元素的行内样式信息，带单位</td>
</tr>
</tbody></table>
<h3 id="2-offset-系列属性"><a href="#2-offset-系列属性" class="headerlink" title="2 offset 系列属性"></a>2 offset 系列属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>offsetParent</code></td>
<td>只读</td>
<td>返回该元素带有定位的祖先元素，如果没有则返回 <code>body</code></td>
</tr>
<tr>
<td><code>offsetTop</code></td>
<td>只读</td>
<td>返回元素相对定位祖先元素上方的偏移量，不带单位</td>
</tr>
<tr>
<td><code>offsetLeft</code></td>
<td>只读</td>
<td>返回元素相对定位祖先元素左方的偏移量，不带单位</td>
</tr>
<tr>
<td><code>offsetWidth</code></td>
<td>只读</td>
<td>返回 <code>boder-box</code> 的宽度，不带单位</td>
</tr>
<tr>
<td><code>offsetHeight</code></td>
<td>只读</td>
<td>返回 <code>boder-box</code> 的高度，不带单位</td>
</tr>
</tbody></table>
<h4 id="offset-amp-style-的区别"><a href="#offset-amp-style-的区别" class="headerlink" title="offset &amp; style 的区别"></a>offset &amp; style 的区别</h4><table>
<thead>
<tr>
<th><code>offset</code></th>
<th><code>style</code></th>
</tr>
</thead>
<tbody><tr>
<td>获取任意样式表的值</td>
<td>获取行内样式表的值</td>
</tr>
<tr>
<td>获取的值没有单位</td>
<td>获取的值有单位</td>
</tr>
<tr>
<td><code>offsetWidth = width + padding + border</code></td>
<td><code>style.width = width</code></td>
</tr>
<tr>
<td>只读</td>
<td>读写</td>
</tr>
</tbody></table>
<h3 id="3-client-系列属性"><a href="#3-client-系列属性" class="headerlink" title="3 client 系列属性"></a>3 client 系列属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>clientTop</code></td>
<td>只读</td>
<td>元素上边框大小</td>
</tr>
<tr>
<td><code>clientLeft</code></td>
<td>只读</td>
<td>元素左边框大小</td>
</tr>
<tr>
<td><code>clientWidth</code></td>
<td>只读</td>
<td><code>padding-box</code> 的可视宽度，不带单位</td>
</tr>
<tr>
<td><code>clientHeight</code></td>
<td>只读</td>
<td><code>padding-box</code> 的可视高度，不带单位</td>
</tr>
</tbody></table>
<h3 id="4-scroll-系列属性"><a href="#4-scroll-系列属性" class="headerlink" title="4 scroll 系列属性"></a>4 scroll 系列属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>scrollLeft</code></td>
<td>被卷去的上侧距离，不带单位</td>
<td></td>
</tr>
<tr>
<td><code>scrollTop</code></td>
<td>被卷去的左侧距离，不带单位</td>
<td></td>
</tr>
<tr>
<td><code>scrollWidth</code></td>
<td><code>padding-box</code> 的实际宽度，不带单位</td>
<td></td>
</tr>
<tr>
<td><code>scrollHeight</code></td>
<td><code>padding-box</code> 的实际高度，不带单位</td>
<td></td>
</tr>
</tbody></table>
<h2 id="5-2-方法"><a href="#5-2-方法" class="headerlink" title="5.2 方法"></a>5.2 方法</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>getAttribute(key)</code></td>
<td>获取属性的值</td>
</tr>
<tr>
<td><code>setAttribute(key, value)</code></td>
<td>设置属性的值</td>
</tr>
<tr>
<td><code>removeAttribute(key)</code></td>
<td>删除属性</td>
</tr>
<tr>
<td><code>getAttributeNames()</code></td>
<td>返回当前元素所有属性名</td>
</tr>
<tr>
<td><code>hasAttribute(key)</code></td>
<td>某个属性是否存在</td>
</tr>
<tr>
<td><code>hasAttributes()</code></td>
<td>当前元素是否有属性</td>
</tr>
<tr>
<td><code>click()</code></td>
<td>模拟鼠标左键单击一个元素</td>
</tr>
</tbody></table>
<ul>
<li><code>Document</code> 中用来获取元素节点的方法，<code>Element</code> 也能用，只是匹配范围是当前元素而非整个文档</li>
</ul>
<h1 id="六-事件"><a href="#六-事件" class="headerlink" title="六 事件"></a>六 事件</h1><h2 id="6-1-EventTarget"><a href="#6-1-EventTarget" class="headerlink" title="6.1 EventTarget"></a>6.1 EventTarget</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ul>
<li>DOM 的事件操作（监听和触发），都定义在 <code>EventTarget</code> 接口</li>
</ul>
<h3 id="2-API"><a href="#2-API" class="headerlink" title="2 API"></a>2 API</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>addEventListener(type, listener [,useCapture])</code></td>
<td>添加事件监听</td>
</tr>
<tr>
<td><code>removeEventListener(type, listener [,useCapture])</code></td>
<td>移除事件监听</td>
</tr>
<tr>
<td><code>dispatchEvent(event)</code></td>
<td>触发指定事件</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>type</code></td>
<td>事件类型字符串，大小写敏感，如 click focus …</td>
</tr>
<tr>
<td><code>listener</code></td>
<td>监听函数</td>
</tr>
<tr>
<td><code>useCapture</code></td>
<td>默认 <code>false</code>：冒泡阶段触发，<code>true</code>：捕获阶段触发</td>
</tr>
</tbody></table>
<h2 id="6-2-事件绑定和解绑"><a href="#6-2-事件绑定和解绑" class="headerlink" title="6.2 事件绑定和解绑"></a>6.2 事件绑定和解绑</h2><h3 id="1-传统注册方式"><a href="#1-传统注册方式" class="headerlink" title="1 传统注册方式"></a>1 传统注册方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 绑定事件</span><br><span class="line">element.onEventType = function()&#123;&#125; </span><br><span class="line"># 解绑事件</span><br><span class="line">element.onclick=null;</span><br></pre></td></tr></table></figure>

<ol>
<li>利用 <code>on</code> 开头的事件</li>
<li>只在冒泡阶段触发</li>
<li>注册事件的唯一性：同一个元素同一个事件只能定义一个监听函数，多次定义会覆盖</li>
</ol>
<h3 id="2-方法监听注册方式"><a href="#2-方法监听注册方式" class="headerlink" title="2 方法监听注册方式"></a>2 方法监听注册方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 绑定事件</span><br><span class="line">element.addEventListener(type, listener [,useCapture]) </span><br><span class="line"># 解绑事件</span><br><span class="line">element.removeEventListener(type, listener [,useCapture])</span><br></pre></td></tr></table></figure>

<ol>
<li>同一个元素同一个事件可以添加多个监听函数</li>
<li>能够指定在哪个阶段（捕获阶段 or 冒泡阶段）触发监听函数</li>
<li>是整个 JavaScript 统一的监听函数接口</li>
</ol>
<h2 id="6-3-DOM-事件流"><a href="#6-3-DOM-事件流" class="headerlink" title="6.3 DOM 事件流"></a>6.3 DOM 事件流</h2><h3 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>事件流描述的是从页面中接收事件的顺序</li>
<li>事件发生时会在元素节点之间按照特定的顺序传播，此传播过程即 DOM 事件流</li>
<li>JS 代码中只能执行捕获或者冒泡中的一个阶段</li>
<li>冒泡阶段更常用，但某些事件没有冒泡阶段，如 <code>focus blur mouseenter mouseleave</code></li>
</ol>
<h3 id="2-事件流三个阶段"><a href="#2-事件流三个阶段" class="headerlink" title="2 事件流三个阶段"></a>2 事件流三个阶段</h3><p><img src="https://gitee.com/anis5/pic/raw/master/UI/JS/%E4%BA%8B%E4%BB%B6%E6%B5%81.png" alt=""></p>
<table>
<thead>
<tr>
<th>阶段</th>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>capture phase</code></td>
<td>捕获阶段</td>
<td>从 window 对象传导到目标节点（上层传到底层）</td>
</tr>
<tr>
<td><code>target phase</code></td>
<td>目标阶段</td>
<td>在目标节点上触发</td>
</tr>
<tr>
<td><code>bubbling phase</code></td>
<td>冒泡阶段</td>
<td>从目标节点传导回 window 对象（从底层传回上层）</td>
</tr>
</tbody></table>
<h3 id="3-事件委托（代理-委派）"><a href="#3-事件委托（代理-委派）" class="headerlink" title="3 事件委托（代理/委派）"></a>3 事件委托（代理/委派）</h3><ol>
<li>由于事件会在冒泡阶段向上传播到父节点，因此可以把子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件</li>
<li>优点：只操作一次DOM，性能更高</li>
<li>如果希望事件到某个节点为止，不再传播，<code>event.stopPropagation()</code> 阻止冒泡</li>
<li>获取触发事件的对象 <code>event.target</code></li>
<li>获取绑定事件的对象 <code>this</code> </li>
</ol>
<h2 id="6-4-Event"><a href="#6-4-Event" class="headerlink" title="6.4 Event"></a>6.4 Event</h2><h3 id="1-概述-2"><a href="#1-概述-2" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>事件发生以后，系统会自动创建一个事件对象 <code>Event</code>，作为参数传给监听函数</li>
<li>事件对象是一系列与事件相关的数据的集合</li>
<li><code>Event</code> 有许多字类，如 <code>MouseEvent, KeyboardEvent, TouchEvent...</code> </li>
</ol>
<h3 id="2-属性"><a href="#2-属性" class="headerlink" title="2 属性"></a>2 属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>target</code></td>
<td>触发事件的对象，<code>this</code> ：绑定事件的对象</td>
</tr>
<tr>
<td><code>type</code></td>
<td>事件类型（名称）</td>
</tr>
<tr>
<td><code>returnValue</code></td>
<td>阻止事件的默认行为，低版本浏览器使用</td>
</tr>
</tbody></table>
<h3 id="3-方法"><a href="#3-方法" class="headerlink" title="3 方法"></a>3 方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>preventDefault()</code></td>
<td>阻止事件的默认行为（如跳转，提交…）</td>
</tr>
<tr>
<td><code>stopPropagation()</code></td>
<td>阻止事件传播（捕获和冒泡）</td>
</tr>
</tbody></table>
<h3 id="4-阻止事件的默认行为方式"><a href="#4-阻止事件的默认行为方式" class="headerlink" title="4 阻止事件的默认行为方式"></a>4 阻止事件的默认行为方式</h3><table>
<thead>
<tr>
<th>方式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>returnValue</code></td>
<td>低版本浏览器 IE678 使用</td>
</tr>
<tr>
<td><code>return false</code></td>
<td>没有兼容性问题，但是会结束代码，且只限于传统事件注册方式</td>
</tr>
<tr>
<td><code>preventDefault()</code></td>
<td>W3C 标准，低版本可能不支持</td>
</tr>
</tbody></table>
<h2 id="6-5-鼠标事件"><a href="#6-5-鼠标事件" class="headerlink" title="6.5 鼠标事件"></a>6.5 鼠标事件</h2><h3 id="1-事件"><a href="#1-事件" class="headerlink" title="1 事件"></a>1 事件</h3><table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>click</code></td>
<td>单击</td>
</tr>
<tr>
<td><code>dblclick</code></td>
<td>双击</td>
</tr>
<tr>
<td><code>focus</code></td>
<td>获取焦点，该事件不会冒泡</td>
</tr>
<tr>
<td><code>blur</code></td>
<td>失去焦点，该事件不会冒泡</td>
</tr>
<tr>
<td><code>mousedown</code></td>
<td>鼠标键按下</td>
</tr>
<tr>
<td><code>mouseup</code></td>
<td>鼠标键弹起</td>
</tr>
<tr>
<td><code>mousemove</code></td>
<td>鼠标移动</td>
</tr>
<tr>
<td><code>mouseenter</code></td>
<td>鼠标经过，该事件不会冒泡</td>
</tr>
<tr>
<td><code>mouseleave</code></td>
<td>鼠标离开，该事件不会冒泡</td>
</tr>
<tr>
<td><code>mouseover</code></td>
<td>鼠标经过</td>
</tr>
<tr>
<td><code>mouseout</code></td>
<td>鼠标离开</td>
</tr>
<tr>
<td><code>contextmenu</code></td>
<td>右键菜单，常使用 <code>event.preventDefault()</code> 来禁止右键菜单</td>
</tr>
<tr>
<td><code>selectstart</code></td>
<td>选中文字，常使用 <code>event.preventDefault()</code> 来禁止选中文字</td>
</tr>
</tbody></table>
<h3 id="2-MouseEvent"><a href="#2-MouseEvent" class="headerlink" title="2 MouseEvent"></a>2 MouseEvent</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>clientX</code></td>
<td>鼠标相对于浏览器窗口可视区的 X 坐标</td>
</tr>
<tr>
<td><code>clientY</code></td>
<td>鼠标相对于浏览器窗口可视区的 Y 坐标</td>
</tr>
<tr>
<td><code>pageX</code></td>
<td>鼠标相对于文档页面的 X 坐标</td>
</tr>
<tr>
<td><code>pageY</code></td>
<td>鼠标相对于文档页面的 Y 坐标</td>
</tr>
<tr>
<td><code>screenX</code></td>
<td>鼠标相对于电脑屏幕的 X 坐标</td>
</tr>
<tr>
<td><code>screenY</code></td>
<td>鼠标相对于电脑屏幕的 Y 坐标</td>
</tr>
</tbody></table>
<h2 id="6-6-键盘事件"><a href="#6-6-键盘事件" class="headerlink" title="6.6 键盘事件"></a>6.6 键盘事件</h2><h3 id="1-事件-1"><a href="#1-事件-1" class="headerlink" title="1 事件"></a>1 事件</h3><table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>keydown</code></td>
<td>按下键盘按键之后文字未输入之前触发，顺序在 <code>keypress</code> 之前，不区分大小写</td>
</tr>
<tr>
<td><code>keypress</code></td>
<td>按下有值的键之后文字未输入之前触发触发，区分大小写，不识别功能键如 <code>→ ← ctrl alt shift...</code></td>
</tr>
<tr>
<td><code>keyup</code></td>
<td>弹起键盘按键触发，不区分大小写</td>
</tr>
</tbody></table>
<h3 id="2-KeyboardEvent"><a href="#2-KeyboardEvent" class="headerlink" title="2 KeyboardEvent"></a>2 KeyboardEvent</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>keyCode</code></td>
<td>按键对应的 ASCII 码值</td>
</tr>
</tbody></table>
<h2 id="6-7-触屏事件"><a href="#6-7-触屏事件" class="headerlink" title="6.7 触屏事件"></a>6.7 触屏事件</h2><h3 id="1-事件-2"><a href="#1-事件-2" class="headerlink" title="1 事件"></a>1 事件</h3><table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>touchstart</code></td>
<td>触摸到一个 DOM 元素时触发</td>
</tr>
<tr>
<td><code>touchmove</code></td>
<td>在一个 DOM 元素上滑动时触发</td>
</tr>
<tr>
<td><code>touchend</code></td>
<td>从一个 DOM 元素上移开时触发</td>
</tr>
</tbody></table>
<h3 id="2-概念"><a href="#2-概念" class="headerlink" title="2 概念"></a>2 概念</h3><table>
<thead>
<tr>
<th>对象</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Touch</code></td>
<td>单个触摸点。触摸点可能是一根手指，也可能是一根触摸笔</td>
</tr>
<tr>
<td><code>TouchList</code></td>
<td>多个触摸点的集合</td>
</tr>
<tr>
<td><code>TouchEvent</code></td>
<td>触摸引发的事件实例</td>
</tr>
</tbody></table>
<h3 id="3-TouchEvent"><a href="#3-TouchEvent" class="headerlink" title="3 TouchEvent"></a>3 TouchEvent</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>touches</code></td>
<td><code>TouchList</code>，正在触摸屏幕的触点的列表</td>
</tr>
<tr>
<td><code>targetTouches</code></td>
<td><code>TouchList</code>，正在触摸当前 DOM 元素的触点的列表</td>
</tr>
<tr>
<td><code>changedTouches</code></td>
<td><code>TouchList</code>，状态发生改变的触点的列表</td>
</tr>
</tbody></table>
<h3 id="4-TouchList"><a href="#4-TouchList" class="headerlink" title="4 TouchList"></a>4 TouchList</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>length</code></td>
<td>节点数量</td>
</tr>
<tr>
<td><code>item(index)</code></td>
<td>获取指定索引的节点，可以用 <code>list[index]</code> 代替</td>
</tr>
</tbody></table>
<h3 id="5-Touch"><a href="#5-Touch" class="headerlink" title="5 Touch"></a>5 Touch</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>identifier</code></td>
<td>返回一个整数，表示触摸点的唯一 ID</td>
</tr>
<tr>
<td><code>target</code></td>
<td>触摸的节点</td>
</tr>
<tr>
<td><code>clientX</code></td>
<td>触点相对于可见视区左边沿的的 X 坐标</td>
</tr>
<tr>
<td><code>clientY</code></td>
<td>触点相对于可见视区上边沿的的 Y 坐标.</td>
</tr>
<tr>
<td><code>pageX</code></td>
<td>触点相对于 HTML 文档左边沿的的 X 坐标</td>
</tr>
<tr>
<td><code>pageY</code></td>
<td>触点相对于 HTML 文档上边沿的的 Y 坐标</td>
</tr>
<tr>
<td><code>screenX</code></td>
<td>触点相对于屏幕左边沿的的 X 坐标</td>
</tr>
<tr>
<td><code>screenY</code></td>
<td>触点相对于屏幕上边沿的的 Y 坐标</td>
</tr>
</tbody></table>
<h2 id="6-8-表单事件"><a href="#6-8-表单事件" class="headerlink" title="6.8 表单事件"></a>6.8 表单事件</h2><table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>input</code></td>
<td>当 <code>&lt;input&gt;、&lt;select&gt;、&lt;textarea&gt;</code> 的值发生变化时触发</td>
</tr>
<tr>
<td><code>change</code></td>
<td>同 <code>input</code> 区别是如果有连续变化，<code>input</code> 事件会触发多次，而 <code>change</code> 事件只在失去焦点时触发一次</td>
</tr>
<tr>
<td><code>select</code></td>
<td>在<code>&lt;input&gt;、&lt;textarea&gt;</code> 里面选中文本时触发</td>
</tr>
<tr>
<td><code>invalid</code></td>
<td>提交表单时，如果表单元素的值不满足校验条件时触发</td>
</tr>
<tr>
<td><code>reset</code></td>
<td>重置表单时触发</td>
</tr>
<tr>
<td><code>submit</code></td>
<td>提交表单时触发</td>
</tr>
</tbody></table>
<h1 id="七-元素的属性操作"><a href="#七-元素的属性操作" class="headerlink" title="七 元素的属性操作"></a>七 元素的属性操作</h1><h2 id="7-1-attribute-amp-property"><a href="#7-1-attribute-amp-property" class="headerlink" title="7.1 attribute &amp; property"></a>7.1 attribute &amp; property</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>attribute</code></td>
<td>HTML 标准属性和自定义属性</td>
</tr>
<tr>
<td><code>property</code></td>
<td>DOM 属性（HTML 元素的标准属性会自动成为元素节点对象的属性）</td>
</tr>
</tbody></table>
<h2 id="7-2-操作方式"><a href="#7-2-操作方式" class="headerlink" title="7.2 操作方式"></a>7.2 操作方式</h2><h3 id="1-attribute"><a href="#1-attribute" class="headerlink" title="1 attribute"></a>1 attribute</h3><table>
<thead>
<tr>
<th>操作</th>
<th>原生 DOM</th>
<th>jQuery</th>
</tr>
</thead>
<tbody><tr>
<td>读</td>
<td><code>element.getAttribute(name)</code></td>
<td><code>$element.attr(name)</code></td>
</tr>
<tr>
<td>写</td>
<td><code>element.setAttribute(name, value)</code></td>
<td><code>$element.attr(name, value)</code></td>
</tr>
<tr>
<td>删</td>
<td><code>element.removeAttribute(name)</code></td>
<td><code>$element.removeAttr(name)</code></td>
</tr>
</tbody></table>
<h3 id="2-property"><a href="#2-property" class="headerlink" title="2 property"></a>2 property</h3><table>
<thead>
<tr>
<th>操作</th>
<th>原生 DOM</th>
<th>jQuery</th>
</tr>
</thead>
<tbody><tr>
<td>读</td>
<td><code>element.name</code></td>
<td><code>$element.prop(name)</code></td>
</tr>
<tr>
<td>写</td>
<td><code>element.name=value</code></td>
<td><code>$element.prop(name, value)</code></td>
</tr>
<tr>
<td>删</td>
<td><code>delete element.name</code></td>
<td><code>$element.removeProp(name)</code></td>
</tr>
</tbody></table>
<h2 id="7-3-总结"><a href="#7-3-总结" class="headerlink" title="7.3 总结"></a>7.3 总结</h2><h3 id="1-HTML-标准属性"><a href="#1-HTML-标准属性" class="headerlink" title="1 HTML 标准属性"></a>1 HTML 标准属性</h3><ol>
<li><code>attribute</code></li>
<li><code>property</code></li>
</ol>
<h3 id="2-自定义属性"><a href="#2-自定义属性" class="headerlink" title="2 自定义属性"></a>2 自定义属性</h3><ol>
<li><code>attribute</code><ul>
<li>能够操作，但是不符合标准，导致网页代码通不过校验</li>
</ul>
</li>
</ol>
<h3 id="3-HTML5-自定义属性规范"><a href="#3-HTML5-自定义属性规范" class="headerlink" title="3 HTML5 自定义属性规范"></a>3 HTML5 自定义属性规范</h3><ol>
<li>自定义属性名以 <code>data-</code> 开头，如 <code>data-test</code></li>
<li>获取标准自定义属性有两种方式<ol>
<li>如：<code>data-test</code><ol>
<li><code>getAttribute(&#39;data-test&#39;)</code></li>
<li><code>element.dataset.test</code></li>
</ol>
</li>
<li>如：<code>data-test-name</code><ol>
<li><code>getAttribute(&#39;data-test-name&#39;)</code> </li>
<li><code>element.dataset.testName</code><ul>
<li>如果名称有多个以 <code>-</code> 连接的单词，使用驼峰</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/BOM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/BOM/" class="post-title-link" itemprop="url">BOM</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:09:25 / 修改时间：21:10:39" itemprop="dateCreated datePublished" datetime="2020-11-08T21:09:25+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-BOM-概述"><a href="#一-BOM-概述" class="headerlink" title="一 BOM 概述"></a>一 BOM 概述</h1><ol>
<li><code>Browser Object Model</code> 浏览器对象模型，提供了独立于内容而与浏览器窗口进行交互的对象</li>
<li>BOM 由浏览器厂商各自定义，兼容性较差</li>
<li>BOM 包含 DOM</li>
<li>BOM 都有一个顶级对象，不同的环境顶级对象也不同，浏览器环境是 <code>window</code></li>
</ol>
<h1 id="二-window"><a href="#二-window" class="headerlink" title="二 window"></a>二 window</h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><ol>
<li><code>window</code> 是浏览器的顶级对象，是 JS 访问浏览器窗口的一个接口</li>
<li><code>window</code> 是一个全局对象，定义在全局作用域的变量、函数都会变成 <code>window</code> 对象的属性和方法</li>
</ol>
<h2 id="2-2-属性"><a href="#2-2-属性" class="headerlink" title="2.2 属性"></a>2.2 属性</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>name</code></td>
<td>窗口名</td>
</tr>
<tr>
<td><code>innerWidth</code></td>
<td>窗口可视宽度</td>
</tr>
<tr>
<td><code>innerHeight</code></td>
<td>窗口可视高度</td>
</tr>
<tr>
<td><code>pageXOffset</code></td>
<td>页面的水平滚动距离</td>
</tr>
<tr>
<td><code>pageYOffset</code></td>
<td>页面的垂直滚动距离</td>
</tr>
<tr>
<td><code>document</code></td>
<td>返回 Document 对象</td>
</tr>
<tr>
<td><code>location</code></td>
<td>返回 Location 对象</td>
</tr>
<tr>
<td><code>navigator</code></td>
<td>返回 Navigator 对象</td>
</tr>
<tr>
<td><code>history</code></td>
<td>返回 History 对象</td>
</tr>
<tr>
<td><code>console</code></td>
<td>返回 Console 对象</td>
</tr>
<tr>
<td><code>screen</code></td>
<td>返回 Screen 对象</td>
</tr>
<tr>
<td><code>localStorage</code></td>
<td>本地储存的 <code>localStorage</code> 数据</td>
</tr>
<tr>
<td><code>sessionStorage</code></td>
<td>本地储存的 <code>sessionStorage</code> 数据</td>
</tr>
</tbody></table>
<h2 id="2-3-方法"><a href="#2-3-方法" class="headerlink" title="2.3 方法"></a>2.3 方法</h2><h3 id="1-弹窗"><a href="#1-弹窗" class="headerlink" title="1 弹窗"></a>1 弹窗</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>alert(message)</code></td>
<td>提示框</td>
</tr>
<tr>
<td><code>confirm(message)</code></td>
<td>确认框</td>
</tr>
<tr>
<td><code>prompt([message,] value)</code></td>
<td>输入框</td>
</tr>
</tbody></table>
<h3 id="2-定时器"><a href="#2-定时器" class="headerlink" title="2 定时器"></a>2 定时器</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>setTimeout(function [, time])</code></td>
<td>指定时间后调用一次函数，<code>time</code>：毫秒值，默认为 <code>0</code> 即立即执行；通常会给定时器一个标识符，用于清除</td>
</tr>
<tr>
<td><code>clearTimeout(定时器标识符)</code></td>
<td>清除定时器</td>
</tr>
<tr>
<td><code>setInterval(function [, time])</code></td>
<td>每隔指定时间调用一此函数</td>
</tr>
<tr>
<td><code>clearInterval(定时器标识符)</code></td>
<td>清除定时器</td>
</tr>
</tbody></table>
<h3 id="3-滚动"><a href="#3-滚动" class="headerlink" title="3 滚动"></a>3 滚动</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>scrollTo(x-coord, y-coord )</code></td>
<td>滚动到指定位置</td>
</tr>
<tr>
<td><code>scrollBy(x-coord, y-coord)</code></td>
<td>滚动指定距离</td>
</tr>
</tbody></table>
<h2 id="2-4-窗口-window-事件"><a href="#2-4-窗口-window-事件" class="headerlink" title="2.4 窗口 window 事件"></a>2.4 窗口 window 事件</h2><table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>beforeunload</code></td>
<td>窗口关闭前</td>
</tr>
<tr>
<td><code>unload</code></td>
<td>窗口关闭</td>
</tr>
<tr>
<td><code>load</code></td>
<td>窗口加载完毕，包含 dom 元素，图片，flash，css …</td>
</tr>
<tr>
<td><code>DOMContentLoaded</code></td>
<td>DOM 加载完毕，不包含其它，事件源为 <code>document</code></td>
</tr>
<tr>
<td><code>error</code></td>
<td>窗口加载失败</td>
</tr>
<tr>
<td><code>resize</code></td>
<td>窗口大小改变</td>
</tr>
<tr>
<td><code>scroll</code></td>
<td>滚动条滚动</td>
</tr>
</tbody></table>
<h1 id="三-Location"><a href="#三-Location" class="headerlink" title="三 Location"></a>三 Location</h1><h2 id="3-1-属性"><a href="#3-1-属性" class="headerlink" title="3.1 属性"></a>3.1 属性</h2><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>href</code></td>
<td>读写</td>
<td>URL，格式 <code>protocal://host[:port]/path/[?query] # fragment</code></td>
</tr>
<tr>
<td><code>protocal</code></td>
<td>读写</td>
<td>协议</td>
</tr>
<tr>
<td><code>host</code></td>
<td>读写</td>
<td>主机，如果端口不是默认 <code>80 433</code>，则包含端口</td>
</tr>
<tr>
<td><code>hostname</code></td>
<td>读写</td>
<td>主机，不含端口</td>
</tr>
<tr>
<td><code>port</code></td>
<td>读写</td>
<td>端口</td>
</tr>
<tr>
<td><code>pathname</code></td>
<td>读写</td>
<td>资源路径</td>
</tr>
<tr>
<td><code>search</code></td>
<td>读写</td>
<td>参数，<code>?key=value&amp;key=value</code></td>
</tr>
<tr>
<td><code>hash</code></td>
<td>读写</td>
<td>片段，<code>#</code> 后面的内容，如链接 锚点</td>
</tr>
</tbody></table>
<h2 id="3-2-方法"><a href="#3-2-方法" class="headerlink" title="3.2 方法"></a>3.2 方法</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>assign(url)</code></td>
<td>重定向，记录浏览历史，可以回退，效果同 <code>href</code> 属性</td>
</tr>
<tr>
<td><code>replace(url)</code></td>
<td>重定向，不记录浏览历史，不能回退</td>
</tr>
<tr>
<td><code>reload([flag])</code></td>
<td>无参或 <code>false</code> 表示刷新 <code>F5</code>，<code>true</code> 表示强制刷新 <code>ctrl + F5</code></td>
</tr>
</tbody></table>
<h1 id="四-Navigator"><a href="#四-Navigator" class="headerlink" title="四 Navigator"></a>四 Navigator</h1><table>
<thead>
<tr>
<th>属性</th>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>userAgent</code></td>
<td>只读</td>
<td>客户端发送给服务器的 <code>user-agent</code> 头部的值</td>
</tr>
</tbody></table>
<h1 id="五-History"><a href="#五-History" class="headerlink" title="五 History"></a>五 History</h1><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>back()</code></td>
<td>后退</td>
</tr>
<tr>
<td><code>forward()</code></td>
<td>前进</td>
</tr>
<tr>
<td><code>go(n)</code></td>
<td><code>0</code> 表示刷新，正数表示前进 n 个页面，负数表示后退 n 个页面</td>
</tr>
</tbody></table>
<h1 id="六-本地存储（Storage）"><a href="#六-本地存储（Storage）" class="headerlink" title="六 本地存储（Storage）"></a>六 本地存储（Storage）</h1><h2 id="6-1-概述"><a href="#6-1-概述" class="headerlink" title="6.1 概述"></a>6.1 概述</h2><ol>
<li>数据存储在用户浏览器中，只能存字符串，以键值对的形式存储</li>
<li><code>Storage</code> 下有两个子接口 <code>localStorage</code> 和 <code>sessionStorage</code></li>
</ol>
<h2 id="6-2-属性"><a href="#6-2-属性" class="headerlink" title="6.2 属性"></a>6.2 属性</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>length</code></td>
<td>保存的数据项个数</td>
</tr>
</tbody></table>
<h2 id="6-3-方法"><a href="#6-3-方法" class="headerlink" title="6.3 方法"></a>6.3 方法</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>setItem(key, value)</code></td>
<td>存储数据</td>
</tr>
<tr>
<td><code>getItem(key)</code></td>
<td>获取数据</td>
</tr>
<tr>
<td><code>removeItem(key)</code></td>
<td>移除数据</td>
</tr>
<tr>
<td><code>clear()</code></td>
<td>清空</td>
</tr>
<tr>
<td><code>key(index)</code></td>
<td>返回指定索引的键，从 0 开始</td>
</tr>
</tbody></table>
<h2 id="6-4-sessionStorage-amp-localStorage"><a href="#6-4-sessionStorage-amp-localStorage" class="headerlink" title="6.4 sessionStorage &amp; localStorage"></a>6.4 sessionStorage &amp; localStorage</h2><table>
<thead>
<tr>
<th>对象</th>
<th>生命周期</th>
<th>数据共享</th>
<th>容量</th>
</tr>
</thead>
<tbody><tr>
<td><code>sessionStorage</code></td>
<td>一次会话（窗口关闭结束）</td>
<td>本页面</td>
<td><code>≈ 5M</code></td>
</tr>
<tr>
<td><code>localStorage</code></td>
<td>长期</td>
<td>本页面和其它页面</td>
<td><code>≈ 20M</code></td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/Promise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/Promise/" class="post-title-link" itemprop="url">Promise</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:09:19 / 修改时间：21:12:15" itemprop="dateCreated datePublished" datetime="2020-11-08T21:09:19+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="二-promise"><a href="#二-promise" class="headerlink" title="二 promise"></a>二 promise</h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><ol>
<li>Promise 对象本质上表示的是一系列操作的中间状态，或者说是未来某时刻一个操作完成或失败后返回的结果。</li>
<li>Promise 的回调函数不是正常的异步任务（宏任务），而是微任务（microtask）<ul>
<li>正常异步任务追加到下一轮事件循环，微任务追加到本轮事件循环。这意味着，微任务的执行时间一定早于正常异步任务</li>
</ul>
</li>
</ol>
<h2 id="2-2-promise-状态"><a href="#2-2-promise-状态" class="headerlink" title="2.2 promise 状态"></a>2.2 promise 状态</h2><h3 id="1-三种状态"><a href="#1-三种状态" class="headerlink" title="1 三种状态"></a>1 三种状态</h3><ol>
<li><code>pending</code> ：初始状态，初始化 promise 时的状态</li>
<li><code>fulfilled</code>：异步操作成功</li>
<li><code>rejected</code>：异步操作失败</li>
</ol>
<h3 id="2-说明"><a href="#2-说明" class="headerlink" title="2 说明"></a>2 说明</h3><ol>
<li><code>fulfilled</code> 和 <code>rejected</code> 统称 <code>settled</code> </li>
<li><code>resolved</code><ol>
<li>promise 已经 <code>settled</code></li>
<li>promise 已经使用另一个promise（B）来resolve <ul>
<li>此时promise的状态由B来决定，可能是<code>pending fulfilled rejected</code> 的任何一种</li>
</ul>
</li>
</ol>
</li>
<li><code>unresolved</code> &amp; <code>resolved</code><ul>
<li><code>unresolved</code> ：promise的状态只能是pending</li>
<li><code>resolved</code>：promise的状态可能是pending、fulfilled、rejected 的任何一种</li>
</ul>
</li>
</ol>
<h2 id="2-3-Promise-API"><a href="#2-3-Promise-API" class="headerlink" title="2.3 Promise API"></a>2.3 Promise API</h2><h3 id="1-构造函数"><a href="#1-构造函数" class="headerlink" title="1 构造函数"></a>1 构造函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new Promise(executor)</span><br><span class="line">// executor</span><br><span class="line">function(resolve, reject) &#123;&#125;</span><br><span class="line">// 或</span><br><span class="line">(resolve, reject) =&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>executor</code><ol>
<li>指带有 resolve 和 reject 两个参数的函数</li>
<li>Promise构造函数执行时立即调用executor 函数</li>
<li>resolve 和 reject 是JavaScript 提供提供的两个函数<ol>
<li>resolve被调用时，将promise的状态改为<code>fulfilled</code></li>
<li>reject被调用时，将promise的状态改为<code>rejected</code></li>
</ol>
</li>
<li>如果executor内部出错，将promise的状态改为<code>rejected</code>，且忽略executor返回值</li>
</ol>
</li>
</ul>
<h3 id="2-静态方法"><a href="#2-静态方法" class="headerlink" title="2 静态方法"></a>2 静态方法</h3><ol>
<li><p><code>Promise.resolve(value)</code></p>
<ul>
<li>返回一个以给定值解析后的Promise 对象。</li>
<li>value<ol>
<li>如果该value值为promise，返回这个promise；</li>
<li>如果该value值是thenable（即带有”then” 方法），会将thenable对象包装为promise并返回;</li>
<li>否则，返回的promise将以此value值完成，即此promise的成功值是value，也就是then方法中第一个函数的参数。</li>
</ol>
</li>
</ul>
</li>
<li><p><code>Promise.reject(reason)</code></p>
<ul>
<li>返回一个带有拒绝原因的Promise对象</li>
<li>reason<ul>
<li>拒绝的原因，通常是一个Error对象，也就是then方法中第二个函数的参数</li>
</ul>
</li>
</ul>
</li>
<li><p><code>Promise.all(iterable)</code><br>// TODO</p>
<ul>
<li>注：iterable中非promise元素会被转为promise</li>
</ul>
<ol>
<li>如果参数是一个空的可迭代对象<ol>
<li>返回一个已完成（already resolved）的 Promise。</li>
<li>此promise会调用成功回调函数，成功值是空数组</li>
</ol>
</li>
</ol>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Promis.all([]).then(</span><br><span class="line">	value =&gt; console.log(value), // []</span><br><span class="line">	reason =&gt; console.log(reason)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<pre><code>2. 如果iterable参数不包含任何 promise
    1. 返回一个异步完成（asynchronously resolved） Promise
    2. 此promise会调用成功回调函数，成功值是由参数的元素构成的数组</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Promis.all(&quot;abc&quot;).then(</span><br><span class="line">	value =&gt; console.log(value), // [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]</span><br><span class="line">	reason =&gt; console.log(reason)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<pre><code>3. 其它情况下返回一个处理中（pending）的Promise
    1. 如果iterable参数中包含的所有promise都成功，则此返回的promise调用成功函数，成功值为一个数组，数组元素为所有promise的成功值和非promise的值</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const p1 = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">	resolve(&apos;p1-success&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">Promis.all([p1, 3, 4, &apos;abc&apos;]).then(</span><br><span class="line">	value =&gt; console.log(value), // [&apos;p1-success&apos;,3,4,&apos;abc&apos;]</span><br><span class="line">	reason =&gt; console.log(reason)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<pre><code>2. 如果iterable参数中 包含的promise 有一个失败，则此返回的promise调用失败函数，失败原因是第一个失败的promise的原因</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const p1 = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">	reject(&apos;p1-fail&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">Promis.all([p1, 3, 4, &apos;abc&apos;]).then(</span><br><span class="line">	value =&gt; console.log(value), </span><br><span class="line">	reason =&gt; console.log(reason) // p1-fail</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><code>Promise.allSettled(iterable)</code><ul>
<li>返回一个fulfilled状态的promise，成功值为一个对象数组，每个对象包含两个属性，表示对应的iterable元素的结果</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;status: &quot;fulfilled&quot;, value: ...&#125;</span><br><span class="line">&#123;status: &quot;rejected&quot;, reason: ...&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><code>Promise.race(iterable)</code><ul>
<li>返回一个promise，此返回promise的状态取决于iterable参数中promise 成功/失败的最快的那个。 </li>
</ul>
</li>
</ol>
<h3 id="3-原型方法"><a href="#3-原型方法" class="headerlink" title="3 原型方法"></a>3 原型方法</h3><h4 id="1-then"><a href="#1-then" class="headerlink" title="1 then"></a>1 then</h4><h5 id="1-语法"><a href="#1-语法" class="headerlink" title="1 语法"></a>1 语法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">then(onFulfilled[, onRejected])</span><br><span class="line"></span><br><span class="line">then(value =&gt; &#123;</span><br><span class="line">	// fulfillment</span><br><span class="line">&#125;, reason =&gt; &#123;</span><br><span class="line">	// rejection</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="2-参数"><a href="#2-参数" class="headerlink" title="2 参数"></a>2 参数</h5><ul>
<li>onFulfilled    ，可选<ul>
<li>当 Promise 变成fulfilled状态时调用的函数，参数为 <code>fulfillment  value</code>，表示成功的值</li>
<li>如果onFulfilled不是一个函数，会被忽略，内部变成<code>(value) =&gt; value</code>，即将<code>fulfillment  value</code>原样返回</li>
</ul>
</li>
<li>onRejected，可选<ul>
<li>当 Promise 变成rejected状态时调用的函数，参数为<code>rejection reason</code>，表示失败原因</li>
<li>如果onRejected不是函数，则会在内部被替换为一个 “Thrower” 函数，抛出失败原因</li>
</ul>
</li>
</ul>
<h5 id="3-返回值"><a href="#3-返回值" class="headerlink" title="3 返回值"></a>3 返回值</h5><ol>
<li>如果then没有参数，或者要执行的回调函数对应的参数不是一个函数，则返回的promise与原promise状态相同，且成功值和失败原因也相同。</li>
<li>如果then没有返回值，则返回的promise，状态为fulfilled，成功值为undefined</li>
<li>如果then返回一个值，则返回的promise，状态为fulfilled，成功值为返回的值</li>
<li>如果then抛出错误，则返回的promise，状态为rejected，失败原因为抛出的错误</li>
<li>如果then返回一个promise（三种状态都有可能），则可以当作是最终返回的promise，即状态，成功值或者失败原因都是一样的</li>
</ol>
<table>
<thead>
<tr>
<th>内部返回值</th>
<th>最终返回promise状态</th>
<th>成功的值</th>
<th>失败原因</th>
</tr>
</thead>
<tbody><tr>
<td>错误</td>
<td>rejected</td>
<td>-</td>
<td>错误</td>
</tr>
<tr>
<td>无</td>
<td>fulfilled</td>
<td>undefined</td>
<td>-</td>
</tr>
<tr>
<td>非promise的值</td>
<td>fulfilled</td>
<td>非promise的值</td>
<td>-</td>
</tr>
<tr>
<td>promise值</td>
<td>同promise值</td>
<td>同promise值</td>
<td>同promise值</td>
</tr>
</tbody></table>
<h4 id="2-catch"><a href="#2-catch" class="headerlink" title="2 catch"></a>2 catch</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">catch(onRejected)</span><br><span class="line"></span><br><span class="line">catch(reason =&gt; &#123;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol>
<li>等同于 <code>then(undefined, onRejected)</code></li>
<li>catch之前任一promise状态变为rejected，如果此promise自己没有处理，则会被catch捕获 </li>
<li>catch返回一个promise，其状态取决于catch内部onRejected函数<ol>
<li>如果onRejected返回一个rejected状态的Promise或着抛出一个错误，则catch返回的promise状态为rejected</li>
<li>否则，catch返回的promise状态为fulfilled</li>
</ol>
</li>
</ol>
<h4 id="3-finally"><a href="#3-finally" class="headerlink" title="3 finally"></a>3 finally</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">finally(onFinally)</span><br><span class="line"></span><br><span class="line">finally(() =&gt; &#123;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>onFinally<ul>
<li>Promise 结束后，无论结果是fulfilled或者是rejected，都会执行onFinally回调函数</li>
</ul>
</li>
<li>返回一个设置了 finally 回调函数的Promise对象</li>
</ul>
<h1 id="三-async-await"><a href="#三-async-await" class="headerlink" title="三 async / await"></a>三 async / await</h1><h2 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h2><ol>
<li>async/await 是promise 的语法糖</li>
<li>async用来声明一个异步函数（async function），await操作符只能用在异步函数中</li>
</ol>
<h2 id="3-2-async"><a href="#3-2-async" class="headerlink" title="3.2 async"></a>3.2 async</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">async function show()&#123;&#125;</span><br><span class="line"></span><br><span class="line">let show = async function()&#123;&#125;</span><br><span class="line"></span><br><span class="line">let obj = &#123;</span><br><span class="line">	async show()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class xxx&#123;</span><br><span class="line">	async show() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>异步函数返回一个promise<ol>
<li>如果异步函数正常执行，则返回的promise会调用成功函数，成功值为异步函数内部返回值。</li>
<li>如果异步函数抛出异常，则返回的promise会调用失败函数，失败原因是抛出异常</li>
</ol>
</li>
<li>错误处理<ul>
<li>async返回一个promise，可以调用catch来处理错误</li>
</ul>
</li>
</ol>
<h2 id="3-3-await"><a href="#3-3-await" class="headerlink" title="3.3 await"></a>3.3 await</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[return_value] = await expression;</span><br></pre></td></tr></table></figure>

<ol>
<li>await 表达式会暂停当前 async function 的执行，等待 Promise 处理完成<ol>
<li>如果表达式是一个promise，则返回值为promise的处理结果</li>
<li>如果表达式不是一个promise，则返回该值本身</li>
</ol>
</li>
<li>错误处理<ol>
<li>await后边的promise出错，相当于async函数返回的promise为reject，所以可以在外部调用catch方法处理</li>
<li>可以在内部用try…catch…处理</li>
</ol>
</li>
<li>await的并行<ol>
<li>让promise先执行后再使用await处理结果</li>
<li>使用 Promise.all() 处理多个promise并行执行</li>
</ol>
</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/JS%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/JS%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6/" class="post-title-link" itemprop="url">JS执行机制</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:09:13 / 修改时间：21:12:00" itemprop="dateCreated datePublished" datetime="2020-11-08T21:09:13+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li>JavaScript 是单线程语言</li>
<li>单线程意味着，所有任务都需要排队，前一个任务结束，才会执行后一个任务</li>
<li>HTML 5 提出 Web Worker 标准，允许 JavaScript 创建多线程，于是 JS 中出现了同步和异步</li>
</ol>
<h1 id="二-JS-任务"><a href="#二-JS-任务" class="headerlink" title="二 JS 任务"></a>二 JS 任务</h1><h2 id="2-1-任务分类（类型）"><a href="#2-1-任务分类（类型）" class="headerlink" title="2.1 任务分类（类型）"></a>2.1 任务分类（类型）</h2><h3 id="1-同步任务"><a href="#1-同步任务" class="headerlink" title="1 同步任务"></a>1 同步任务</h3><ol>
<li>在主线程上排队执行的任务，形成一个执行栈</li>
<li>前一个任务执行完毕，才能执行后一个任务</li>
</ol>
<h3 id="2-异步任务"><a href="#2-异步任务" class="headerlink" title="2 异步任务"></a>2 异步任务</h3><ol>
<li>JS 的异步是通过回调函数实现的</li>
<li>异步任务相关回调函数会进入任务队列（消息队列）</li>
<li>异步任务不具有“堵塞”效应</li>
<li>异步任务通常有三种<ol>
<li>普通事件，如 <code>click resize ...</code></li>
<li>资源加载，如 <code>load, error ...</code></li>
<li>定时器</li>
</ol>
</li>
</ol>
<h2 id="2-2-任务分类（机制）"><a href="#2-2-任务分类（机制）" class="headerlink" title="2.2 任务分类（机制）"></a>2.2 任务分类（机制）</h2><h3 id="1-宏任务（macrotask）"><a href="#1-宏任务（macrotask）" class="headerlink" title="1 宏任务（macrotask）"></a>1 宏任务（macrotask）</h3><ol>
<li>整个脚本代码（第一个宏任务）</li>
<li>定时器（setTimeout setInterval ..）</li>
<li>事件 I/O</li>
<li>UI 渲染</li>
<li>…</li>
</ol>
<h3 id="2-微任务（microtask）"><a href="#2-微任务（microtask）" class="headerlink" title="2 微任务（microtask）"></a>2 微任务（microtask）</h3><ol>
<li><code>promise.then</code></li>
<li>…</li>
</ol>
<h1 id="三-JS-执行机制"><a href="#三-JS-执行机制" class="headerlink" title="三 JS 执行机制"></a>三 JS 执行机制</h1><h2 id="3-1-概念"><a href="#3-1-概念" class="headerlink" title="3.1 概念"></a>3.1 概念</h2><ol>
<li>任务队列（task queue）<ul>
<li>用于存放异步任务</li>
<li>根据异步任务的类型，可以存在多个任务队列</li>
</ul>
</li>
<li>事件循环（Event Loop）<ul>
<li>同步任务执行完毕后，引擎会在任务队列循环检查，如果有可以执行的异步任务，则结束等待状态，进入主线程开始执行</li>
</ul>
</li>
</ol>
<h2 id="3-2-步骤"><a href="#3-2-步骤" class="headerlink" title="3.2 步骤"></a>3.2 步骤</h2><p><img src="https://gitee.com/anis5/pic/raw/master/UI/JS/JS%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6.png" alt=""></p>
<ol>
<li>脚本代码作为第一个宏任务开始执行，同步任务进入主线程执行栈</li>
<li>异步任务（宏任务和微任务）交给各自异步处理进程，当满足条件时（如 事件触发，定时器到时…）<ol>
<li>宏任务进入宏任务队列 <code>macrotask queue</code></li>
<li>微任务进入微任务队列 <code>microtask queue</code></li>
</ol>
</li>
<li>同步任务执行完毕后，事件循环微任务队列，依次读入主线程执行栈并执行</li>
<li>微任务队列完毕后，事件循环宏任务队列，每个宏任务与第一个宏任务一样重复以上步骤</li>
</ol>
<h2 id="3-3-总结"><a href="#3-3-总结" class="headerlink" title="3.3 总结"></a>3.3 总结</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 有点类似递归的感觉</span><br><span class="line">* 宏任务</span><br><span class="line">	* 同步任务</span><br><span class="line">	* 异步任务</span><br><span class="line">		* 微任务</span><br><span class="line">		* 宏任务</span><br><span class="line">			* 同步任务</span><br><span class="line">			* 异步任务</span><br><span class="line">				* 微任务</span><br><span class="line">				* 宏任务</span><br><span class="line">					* ...</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/JS%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/JS%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">JS模块</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:09:06 / 修改时间：21:11:08" itemprop="dateCreated datePublished" datetime="2020-11-08T21:09:06+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li><a href="https://segmentfault.com/a/1190000015302578" target="_blank" rel="noopener">网上概述</a></li>
<li>ES6 之前有许多方式来实现模块<ul>
<li><code>AMD</code>：用于浏览器</li>
<li><code>CommonJS</code>：用于 Node.js</li>
<li><code>UMD</code>：浏览器/Node.js</li>
</ul>
</li>
<li>ES6 JS有了模块</li>
<li>模块就是一个独立的文件，文件内部的变量，函数，类…外部无法获取</li>
<li>使用模块可以解决全局变量冲突</li>
<li>模块需要隐藏内部实现，只对外开发接口</li>
<li>模块可以避免滥用全局变量，造成代码不可控</li>
<li>模块可以被不同的应用使用，提高编码效率</li>
<li>模块默认运行在严格模式</li>
<li>模块都有独立的顶级作用域，不同模块间不能相互访问，类似函数作用域</li>
<li>模块在导入时只执行一次解析，之后的导入不会再执行模块代码，而使用第一次解析结果，并共享数据</li>
</ol>
<h1 id="三-加载"><a href="#三-加载" class="headerlink" title="三 加载"></a>三 加载</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;module&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>异步加载，即模块总是会在所有html解析后才执行</li>
</ul>
<h1 id="四-export"><a href="#四-export" class="headerlink" title="四 export"></a>四 export</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><ul>
<li>模块中的功能默认外部无法使用，使用<code>export</code>命令规定模块的对面接口，即将指定功能导出供外部使用。</li>
</ul>
<h2 id="4-2-导出单个"><a href="#4-2-导出单个" class="headerlink" title="4.2 导出单个"></a>4.2 导出单个</h2><ul>
<li><code>export 声明语句</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export let name = &apos;xiaoqiang&apos;;</span><br><span class="line">export let obj = &#123;&#125;;</span><br><span class="line">export function show() &#123;&#125;;</span><br><span class="line">export class User &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-3-导出列表"><a href="#4-3-导出列表" class="headerlink" title="4.3 导出列表"></a>4.3 导出列表</h2><ul>
<li><code>export { name1, name2, …, nameN };</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export let name = &apos;xiaoqiang&apos;;</span><br><span class="line">export let obj = &#123;&#125;;</span><br><span class="line">export function show() &#123;&#125;;</span><br><span class="line">export class User &#123;&#125;</span><br><span class="line">export &#123;name, obj, show, User&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="4-4-别名"><a href="#4-4-别名" class="headerlink" title="4.4 别名"></a>4.4 别名</h2><ul>
<li><code>export { variable1 as name1, variable2 as name2, …, nameN };</code></li>
</ul>
<h2 id="4-5-默认导出"><a href="#4-5-默认导出" class="headerlink" title="4.5 默认导出"></a>4.5 默认导出</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export default expression;</span><br><span class="line">export default function (…) &#123; … &#125; // also class, function*</span><br><span class="line">export default function name1(…) &#123; … &#125; // also class, function*</span><br><span class="line">export &#123; name1 as default, … &#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>默认导出接口只能有一个，但默认导出可以与普通导出共存</li>
<li>本质上，<code>export default</code>就是输出一个叫做default的变量或方法，然后系统允许你为它取任意名字</li>
<li>默认导出时，函数和类可以具名也可以匿名，变量不能具名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export default let a = 1; // 错误</span><br><span class="line">let a = 1;</span><br><span class="line">export default a; // 正确，相当于把a的值赋予default</span><br><span class="line">export default 1; // 正确，相当于直接把值赋予default</span><br></pre></td></tr></table></figure>

<h1 id="五-import（静态导入）"><a href="#五-import（静态导入）" class="headerlink" title="五 import（静态导入）"></a>五 import（静态导入）</h1><h2 id="5-1-概述"><a href="#5-1-概述" class="headerlink" title="5.1 概述"></a>5.1 概述</h2><ol>
<li>import用于导入其它模块提供的功能。</li>
<li>import导入的变量名要与export导出的一致</li>
<li>import导入的变量是只读的</li>
<li>import命令具有提升效果，会提升到整个模块的头部，首先执行 </li>
<li>import是静态导入，不能使用表达式和变量</li>
<li>在浏览器中引用模块必须添加路径，但在打包工具如webpack中则不需要，因为他们有自己的存放方式。</li>
</ol>
<h2 id="5-2-导入所有导出接口"><a href="#5-2-导入所有导出接口" class="headerlink" title="5.2 导入所有导出接口"></a>5.2 导入所有导出接口</h2><ul>
<li><code>import * as name from &quot;module-name&quot;;</code><ul>
<li><code>name</code><ul>
<li>导入模块的命名空间</li>
</ul>
</li>
<li><code>module-name</code><ul>
<li>要导入的模块。通常是包含目标模块的.js文件的相对或绝对路径名，可以不包括.js扩展名。</li>
</ul>
</li>
<li>使用<code>default</code>获取默认导出</li>
</ul>
</li>
</ul>
<h2 id="5-3-导入指定导出接口"><a href="#5-3-导入指定导出接口" class="headerlink" title="5.3 导入指定导出接口"></a>5.3 导入指定导出接口</h2><ul>
<li><code>import { export1, export2, ..., exportN } from &quot;module-name&quot;;</code></li>
</ul>
<h2 id="5-4-别名"><a href="#5-4-别名" class="headerlink" title="5.4 别名"></a>5.4 别名</h2><ul>
<li><code>import { export1 as alias1, export2, ..., exportN } from &quot;module-name&quot;;</code></li>
</ul>
<h2 id="5-5-导入默认导出"><a href="#5-5-导入默认导出" class="headerlink" title="5.5 导入默认导出"></a>5.5 导入默认导出</h2><ul>
<li><code>import defaultExport from &quot;module-name&quot;;</code><ol>
<li>导入默认导出时名称任意</li>
<li>由于默认导出只有一个，所以不需要<code>{}</code></li>
</ol>
</li>
</ul>
<h2 id="5-6-混合导入"><a href="#5-6-混合导入" class="headerlink" title="5.6 混合导入"></a>5.6 混合导入</h2><ul>
<li><code>import defaultExport, { export1, export2, ..., exportN} from &quot;module-name&quot;;</code></li>
</ul>
<h1 id="六-export-default"><a href="#六-export-default" class="headerlink" title="六 export default"></a>六 export default</h1><h2 id="6-1-概述"><a href="#6-1-概述" class="headerlink" title="6.1 概述"></a>6.1 概述</h2><ol>
<li>使用<code>import</code>命令时，需要知道<code>export</code>导出的变量名。</li>
<li><code>export default</code> 本质是导出一个名为<code>defualt</code>的变量，使用<code>import</code>导入时可以以任意名称导入。</li>
<li>一个模块只能有一个默认输出，可以与普通导出共存</li>
</ol>
<h2 id="6-2-语法"><a href="#6-2-语法" class="headerlink" title="6.2 语法"></a>6.2 语法</h2><ol>
<li><code>export default expression</code><ul>
<li>将<code>expression</code>表达式的值赋给<code>default</code>导出</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let a = 1;</span><br><span class="line">export default a; // 将a的值1赋给default</span><br><span class="line">export default 1; // 将1赋给default</span><br><span class="line">export default let a = 1; // 错误 因为let a = 1不能计算出一个值</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>export default function(){}  // also class, function*</code><ul>
<li>导出匿名函数/类，名称为<code>default</code></li>
</ul>
</li>
<li><code>export default function name(…) { … } // also class, function*</code><ul>
<li>导出具名函数/类，名称为<code>default</code>，原有名称会被忽略</li>
</ul>
</li>
<li><code>export { name1 as default, … };</code><ul>
<li>由于 <code>export default</code> 本质是导出一个名为<code>default</code>的变量</li>
<li>可以使用<code>export</code>导出一个别名为<code>default</code>的变量</li>
</ul>
</li>
</ol>
<h1 id="七-export-import"><a href="#七-export-import" class="headerlink" title="七 export + import"></a>七 export + import</h1><h2 id="7-1-概述"><a href="#7-1-概述" class="headerlink" title="7.1 概述"></a>7.1 概述</h2><ol>
<li>可以将导入的模块再次导出</li>
<li>如果<code>export</code>和<code>import</code>结合在一起，其实就相当于一个转发，并没有导入到当前模块，即当前模块不能使用导入导出的功能。</li>
</ol>
<h2 id="7-2-语法"><a href="#7-2-语法" class="headerlink" title="7.2 语法"></a>7.2 语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export * from …;</span><br><span class="line">export &#123; name1, name2, …, nameN &#125; from …;</span><br><span class="line">export &#123; import1 as name1, import2 as name2, …, nameN &#125; from …;</span><br><span class="line">export &#123; default &#125; from …;</span><br></pre></td></tr></table></figure>

<h1 id="八-import-（动态导入）"><a href="#八-import-（动态导入）" class="headerlink" title="八 import()（动态导入）"></a>八 import()（动态导入）</h1><ol>
<li>接收参数与静态导入一致 </li>
<li>使用<code>import()</code> 函数可以动态导入模块，它返回一个 promise 对象，可以按需加载</li>
<li><code>import()</code> 函数可以用在任何地方，不仅仅是模块，非模块的脚本也可以使用。它是运行时执行，也就是说，什么时候运行到这一句，就会加载指定的模块</li>
</ol>
<h1 id="九-工具"><a href="#九-工具" class="headerlink" title="九 工具"></a>九 工具</h1><ol>
<li>转译器 Transpiler：将现代 JS 代码翻译成所有浏览器都能看懂的代码<ul>
<li>Babel</li>
</ul>
</li>
<li>打包器 Bundler<ul>
<li>WebPack</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/JS%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/JS%E7%B1%BB/" class="post-title-link" itemprop="url">JS类</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:09:01 / 修改时间：21:11:03" itemprop="dateCreated datePublished" datetime="2020-11-08T21:09:01+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li>class 只是语法糖，为了让类的声明与继承更加简洁清晰，底层实现机制依然是原型继承，与其它语言的 class 不一样</li>
<li>class 其实就是函数，<code>typeof 类 -&gt; function</code></li>
<li>class 内部代码始终以严格模式执行</li>
<li>class 不存在变量提升</li>
<li>class 中的属性名可以采用表达式<code>[]</code></li>
<li>class 中定义的属性都是实例属性，定义的方法都是原型方法且不可枚举</li>
</ol>
<h1 id="二-语法"><a href="#二-语法" class="headerlink" title="二 语法"></a>二 语法</h1><h2 id="2-1-类"><a href="#2-1-类" class="headerlink" title="2.1 类"></a>2.1 类</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 类声明</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> 类名 </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 类表达式</span></span><br><span class="line"><span class="keyword">let</span> 类名= <span class="class"><span class="keyword">class</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两种方式都不会提升</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-构造函数"><a href="#2-2-构造函数" class="headerlink" title="2.2 构造函数"></a>2.2 构造函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数语法</span></span><br><span class="line"><span class="keyword">constructor</span>(参数列表) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 基类默认构造函数</span></span><br><span class="line"><span class="keyword">constructor</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 派生类默认构造函数</span></span><br><span class="line"><span class="keyword">constructor</span>(...args) &#123;</span><br><span class="line">	<span class="keyword">super</span>(...args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>使用类 <code>new</code> 一个对象时会自动调用构造函数</li>
<li>如果省略，则会有默认构造函数</li>
<li><code>constructor</code> 默认返回实例对象（即 <code>this</code>），可以改为返回另一个对象</li>
<li>类的原型的 <code>constructor</code> 属性指向类本身：<code>类.prototype.constructor = 类</code></li>
</ol>
<h2 id="2-3-属性-amp-方法"><a href="#2-3-属性-amp-方法" class="headerlink" title="2.3 属性 &amp; 方法"></a>2.3 属性 &amp; 方法</h2><h3 id="1-实例属性"><a href="#1-实例属性" class="headerlink" title="1 实例属性"></a>1 实例属性</h3><ol>
<li><p>使用<code>this.</code> 定义在<code>constructor</code>中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(age) &#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在类中直接定义的属性就是实例属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	age = <span class="number">18</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="2-原型方法"><a href="#2-原型方法" class="headerlink" title="2 原型方法"></a>2 原型方法</h3><ol>
<li><p>在类的原型上定义方法，是可枚举的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User.prototype.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在类中直接定义的方法就是原型方法，且不可枚举（non-enumerable）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	show()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="3-静态属性-方法"><a href="#3-静态属性-方法" class="headerlink" title="3 静态属性/方法"></a>3 静态属性/方法</h3><ol>
<li><p>定义在类上</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User.age = <span class="number">10</span>;</span><br><span class="line">User.show() = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在类中定义的属性/方法前加<code>static</code>关键字</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> age = <span class="number">10</span>;</span><br><span class="line">	<span class="comment">// 静态方法可以包含 this 关键字，this 指的是类本身，而不是实例对象 </span></span><br><span class="line">	<span class="keyword">static</span> show() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h3 id="4-私有属性-方法"><a href="#4-私有属性-方法" class="headerlink" title="4 私有属性 / 方法"></a>4 私有属性 / 方法</h3><h4 id="1-利用-Symbol"><a href="#1-利用-Symbol" class="headerlink" title="1 利用 Symbol"></a>1 利用 Symbol</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _name = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> _show = <span class="built_in">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">this</span>[_name] = name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [_show]()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-利用集合"><a href="#2-利用集合" class="headerlink" title="2 利用集合"></a>2 利用集合</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _name = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="keyword">const</span> _show = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        _name.set(<span class="keyword">this</span>, name);</span><br><span class="line">        _show.set(<span class="keyword">this</span>, () =&gt; &#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-约定"><a href="#3-约定" class="headerlink" title="3 约定"></a>3 约定</h4><ol>
<li><p>私有属性：在属性名前加 <code>#</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	#phone = '13800000000';   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>私有方法：以表达式形式定义方法并在方法前加<code>#</code> ，可以理解为就是定义私有属性，不过属性的值是一个函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class User &#123;</span><br><span class="line">	#say = function() &#123;&#125;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="5-受保护属性-方法"><a href="#5-受保护属性-方法" class="headerlink" title="5 受保护属性 / 方法"></a>5 受保护属性 / 方法</h3><ul>
<li>在属性/方法名前加 <code>_</code>，这只是约定不是语法也不是规范</li>
<li>可以通过 <code>symbol weakmap ...</code> 人为实现保护</li>
</ul>
<h2 id="2-4-访问器-getter-setter"><a href="#2-4-访问器-getter-setter" class="headerlink" title="2.4 访问器 getter/setter"></a>2.4 访问器 getter/setter</h2><ul>
<li>类中同样可以使用访问器，且访问器也是定义在属性的属性描述符上</li>
</ul>
<h1 id="三-class-的继承"><a href="#三-class-的继承" class="headerlink" title="三 class 的继承"></a>三 class 的继承</h1><h2 id="3-1-extends"><a href="#3-1-extends" class="headerlink" title="3.1 extends"></a>3.1 extends</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fu</span> </span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Zi</span> <span class="keyword">extends</span> <span class="title">Fu</span> </span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="comment">// 子类构造函数第一行必须先调用父类构造函数</span></span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-super"><a href="#3-2-super" class="headerlink" title="3.2 super"></a>3.2 super</h2><h3 id="1-问题"><a href="#1-问题" class="headerlink" title="1 问题"></a>1 问题</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 子 父：在子类中调用父类方法</span></span><br><span class="line">子：<span class="keyword">this</span>.__proto__.__proto__</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 子 父 爷：在子类中调用父类方法，父类方法中又调用了父类的父类的方法</span></span><br><span class="line">子：<span class="keyword">this</span>.__proto__.__proto__</span><br><span class="line">父：<span class="keyword">this</span>.__proto__</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 父 爷：直接在父类中调用父类的父类的方法</span></span><br><span class="line">父：<span class="keyword">this</span>.__proto__.__proto__</span><br></pre></td></tr></table></figure>

<ul>
<li>如果只有双层继承，使用 <code>this</code>是可以的，如果有多重继承，同一个类中的代码不同情况是不一样的</li>
</ul>
<h3 id="2-用法"><a href="#2-用法" class="headerlink" title="2 用法"></a>2 用法</h3><h4 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li><p>super 只能在类或对象的方法中使用，而不能在函数中使用</p>
</li>
<li><p>使用super的时候，必须显式指定是作为函数、还是作为对象使用，否则会报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误，无法看出是函数还是对象</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">super</span>);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="2-调用父类构造"><a href="#2-调用父类构造" class="headerlink" title="2 调用父类构造"></a>2 调用父类构造</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此时 super 代表父类的构造函数</span></span><br><span class="line"><span class="keyword">super</span>([<span class="built_in">arguments</span>]);</span><br></pre></td></tr></table></figure>

<h4 id="3-调用父类方法"><a href="#3-调用父类方法" class="headerlink" title="3 调用父类方法"></a>3 调用父类方法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此时 super 代表父类原型对象，如果是静态方法则 super 代表父类本身</span></span><br><span class="line"><span class="keyword">super</span>.functionOnParent([<span class="built_in">arguments</span>]);</span><br></pre></td></tr></table></figure>

<h2 id="3-3-原生构造函数的继承"><a href="#3-3-原生构造函数的继承" class="headerlink" title="3.3 原生构造函数的继承"></a>3.3 原生构造函数的继承</h2><ol>
<li>之前，这些内置的构造函数如<code>Object() Array() ...</code> 是无法继承的</li>
<li>ES6 允许继承</li>
</ol>
<h2 id="3-4-mixin"><a href="#3-4-mixin" class="headerlink" title="3.4 mixin"></a>3.4 mixin</h2><ol>
<li>创建一个 mixin 类，包含许多供其它类使用的方法</li>
<li>将 mixin 类合并到要使用功能的类的原型上</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/JS%E5%8E%9F%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/JS%E5%8E%9F%E5%9E%8B/" class="post-title-link" itemprop="url">JS原型</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:08:56 / 修改时间：21:11:55" itemprop="dateCreated datePublished" datetime="2020-11-08T21:08:56+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><h2 id="1-1-原型"><a href="#1-1-原型" class="headerlink" title="1.1 原型"></a>1.1 原型</h2><p><img src="https://github.com/anyeansan/pics/raw/master/CS/UI/JS/%E5%8E%9F%E5%9E%8B.png" alt=""></p>
<h3 id="1-proto"><a href="#1-proto" class="headerlink" title="1 __proto__"></a>1 <code>__proto__</code></h3><ol>
<li><p><code>__proto__</code> 是浏览器实现的非 JavaScript 标准的属性，在ES6写入了附录，用于获取或设置对象的原型，由于非标准，浏览器有这个属性，其它环境未必有。建议使用 Object中 的方法 替代<code>__proto__</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- <span class="built_in">Object</span>.getPrototypeOf(obj)</span><br><span class="line">- <span class="built_in">Object</span>.setPrototypeOf(obj, prototype)</span><br><span class="line">- <span class="built_in">Object</span>.create(proto[, propertiesObject])</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>obj.__proto__</code> 并非是普通的属性访问方式，而是通过 <code>getter/setter</code> 访问器，可以理解为 <code>prototype</code> 属性的 <code>getter/setter</code> 实现</p>
</li>
<li><p>每个对象都有 <code>__proto__</code> 属性，指向它的构造函数的原型对象，即如果A对象是由B函数构造的，则 <code>A.__proto__ === B.prototype</code></p>
<ol>
<li>普通对象的构造函数是其对应的构造函数，原型对象也是普通对象，其默认构造函数是 Object，则<ul>
<li><code>对象.__proto__ === 构造函数.prototype</code></li>
<li><code>原型对象.__proto__ === Object.prototype</code></li>
</ul>
</li>
<li>原型对象中有两个特殊<ol>
<li><code>Object.prototype</code>：它是原型链的顶端，<code>Object.prototype.__proto__ === null</code></li>
<li><code>Function.prototype</code><ul>
<li>它是原型对象，但不属于普通对象而属于函数对象</li>
<li>它是函数对象，但它没有 <code>prototype</code> 属性</li>
</ul>
</li>
</ol>
</li>
<li>函数对象（包括 Function 自身）的构造函数是 Function，则 <ul>
<li><code>函数.__proto__ === Function.prototype</code></li>
<li><code>Function.__proto__ === Function.prototype</code></li>
</ul>
</li>
</ol>
</li>
</ol>
<h3 id="2-prototype"><a href="#2-prototype" class="headerlink" title="2 prototype"></a>2 <code>prototype</code></h3><ol>
<li>每个构造函数都有 <code>prototype</code> 属性，指向其原型对象，原型对象用于所有实例共享属性和方法</li>
<li>函数作为对象有 <code>__proto__</code> 属性，又可以作为构造函数有<code>prototype</code> 属性</li>
<li>原型的作用是让该构造函数所实例化的对象们都可以找到公用的属性和方法，所以 JS 的继承是通过 <code>prototype</code> 实现的</li>
</ol>
<h3 id="3-constructor"><a href="#3-constructor" class="headerlink" title="3 constructor"></a>3 <code>constructor</code></h3><ul>
<li>只有原型对象才有 <code>constructor</code> 属性，指向对应构造函数<ul>
<li><code>实例对象.__proto__ === 原型对象</code></li>
<li><code>构造函数.prototype === 原型对象</code></li>
<li><code>原型对象.constructor === 构造函数</code></li>
</ul>
</li>
</ul>
<h2 id="1-2-原型链"><a href="#1-2-原型链" class="headerlink" title="1.2 原型链"></a>1.2 原型链</h2><p><img src="https://github.com/anyeansan/pics/raw/master/CS/UI/JS/%E5%8E%9F%E5%9E%8B%E9%93%BE.png" alt=""></p>
<ul>
<li>对象有自己的原型对象，而对象又可以充当其他对象的原型，就会形成一个“原型链”（prototype chain）</li>
</ul>
<h2 id="1-3-new"><a href="#1-3-new" class="headerlink" title="1.3 new"></a>1.3 new</h2><h3 id="1-new的执行过程"><a href="#1-new的执行过程" class="headerlink" title="1 new的执行过程"></a>1 new的执行过程</h3><ol>
<li>创建一个空对象 <code>let obj = {};</code></li>
<li>将新建对象的 <code>__proto__</code> 指向构造函数的原型对象，<code>obj.__proto__ = 构造函数.prototype</code></li>
<li>将新建对象作为构造函数执行的上下文，即将构造函数内部的 <code>this</code> 指向新建对象</li>
<li>执行构造函数，如果构造函数没有返回引用类型的值，则返回新建对象</li>
</ol>
<h3 id="2-自定义-new"><a href="#2-自定义-new" class="headerlink" title="2 自定义 new"></a>2 自定义 new</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myNew = <span class="function"><span class="keyword">function</span>(<span class="params">cons, args</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> obj = &#123;&#125;; <span class="comment">// 步骤1</span></span><br><span class="line">	obj.__proto__ = cons.prototype; <span class="comment">// 步骤2</span></span><br><span class="line">	<span class="comment">// let obj = Object.create(cons.prototype); 步骤1，2合在一起</span></span><br><span class="line">	<span class="keyword">let</span> result = cons.apply(obj, args); <span class="comment">// 步骤3</span></span><br><span class="line">	<span class="keyword">return</span> result <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? result : obj; <span class="comment">// 步骤4</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-new-target-属性"><a href="#3-new-target-属性" class="headerlink" title="3 new.target 属性"></a>3 <code>new.target</code> 属性</h3><ul>
<li>用来检测函数是否通过<code>new</code>或者<code>Reflect.construct()</code>调用的<ol>
<li>如果在普通函数中使用，返回 <code>undefined</code></li>
<li>在构造函数中使用指向被 new 调用的构造函数</li>
<li>在 <code>class</code> 的 <code>constructor</code> 函数中使用指向被 new 调用的 <code>class</code></li>
</ol>
</li>
</ul>
<h1 id="二-构造函数中的属性和方法"><a href="#二-构造函数中的属性和方法" class="headerlink" title="二 构造函数中的属性和方法"></a>二 构造函数中的属性和方法</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> age = <span class="number">18</span>; <span class="comment">// 私有属性</span></span><br><span class="line">	<span class="keyword">let</span> test = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; <span class="comment">// 私有方法</span></span><br><span class="line">	<span class="keyword">this</span>.name = name; <span class="comment">// 实例属性</span></span><br><span class="line">	<span class="keyword">this</span>.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;<span class="comment">// 实例方法</span></span><br><span class="line">&#125;</span><br><span class="line">User.country = <span class="string">'中国'</span>; <span class="comment">// 静态属性</span></span><br><span class="line">User.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; <span class="comment">// 静态方法</span></span><br><span class="line">User.prototype.gender = <span class="string">'男'</span>; <span class="comment">// 原型属性</span></span><br><span class="line">User.prototype.change = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; <span class="comment">// 原型方法</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>概念</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>私有属性 / 方法</td>
<td>在对象内部使用 <code>var/let/const</code>声明的属性/方法（严格来说只是内部的局部变量不属于对象）</td>
</tr>
<tr>
<td>实例属性 / 方法</td>
<td>在对象内部使用<code>this.</code>声明的属性/方法</td>
</tr>
<tr>
<td>静态属性 / 方法</td>
<td>定义在构造函数上的属性/方法</td>
</tr>
<tr>
<td>原型属性 / 方法</td>
<td>定义在构造函数原型上的属性/方法 ，<strong>原型方法默认可枚举</strong></td>
</tr>
</tbody></table>
<h1 id="三-继承"><a href="#三-继承" class="headerlink" title="三 继承"></a>三 继承</h1><h2 id="3-1-继承原理"><a href="#3-1-继承原理" class="headerlink" title="3.1 继承原理"></a>3.1 继承原理</h2><p><img src="https://github.com/anyeansan/pics/raw/master/CS/UI/JS/%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF.png" alt=""></p>
<ul>
<li><code>1 -&gt; 2</code>：将子类构造函数的原型对象的原型指向父类构造函数的原型对象</li>
</ul>
<h2 id="3-2-设置原型方式"><a href="#3-2-设置原型方式" class="headerlink" title="3.2 设置原型方式"></a>3.2 设置原型方式</h2><ol>
<li><p>设置构造函数原型，使用函数的 <code>prototype</code> 属性</p>
</li>
<li><p>设置对象的原型</p>
<ol>
<li><p>Object 的方法，创建对象时指定原型（只是定义无法获取）：<code>Object.create(proto[, propertiesObject])</code> </p>
</li>
<li><p>使用对象的属性<code>__proto__</code> 获取或设置原型，在浏览器之外的环境可能不行。</p>
</li>
<li><p>Object 的方法，与<code>__proto__</code>效果一样，但是是 JS 标准</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getPrototypeOf(obj)</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj, prototype)</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<h2 id="3-3-实现继承的方式"><a href="#3-3-实现继承的方式" class="headerlink" title="3.3 实现继承的方式"></a>3.3 实现继承的方式</h2><h3 id="1-原型链-1"><a href="#1-原型链-1" class="headerlink" title="1 原型链-1"></a>1 原型链-1</h3><p><img src="https://github.com/anyeansan/pics/raw/master/CS/UI/JS/%E7%BB%A7%E6%89%BF1.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A.prototype.__proto__ = B.prototype;</span><br></pre></td></tr></table></figure>

<ul>
<li>将子类构造函数的原型对象的原型直接指向父类构造函数的原型</li>
<li>好处<ul>
<li>父类原型在子类原型链上，则子类可以继承父类的原型属性/方法</li>
</ul>
</li>
<li>弊端<ul>
<li>创建子类时不会调用父类构造函数，无法继承父类的实例属性/方法</li>
</ul>
</li>
</ul>
<h3 id="2-构造函数"><a href="#2-构造函数" class="headerlink" title="2 构造函数"></a>2 构造函数</h3><ul>
<li><p>在子类构造函数中通过<code>call/apply</code>调用父类构造函数，并指定this为子类对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fu</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Zi</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">	Fu(name,age); <span class="comment">// 不行，因为直接调用时，父类构造函数this是指向window的</span></span><br><span class="line">	Fu.call(<span class="keyword">this</span>, name, age); </span><br><span class="line">	Fu.apply(<span class="keyword">this</span>, [name, age])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>好处</p>
<ul>
<li>创建的子类实例具备父类实例属性/方法</li>
</ul>
</li>
<li><p>弊端</p>
<ol>
<li>只是子类的实例，不是父类的实例（只是通过调用父类构造函数模拟继承）</li>
<li>无法继承父类原型属性/方法</li>
</ol>
</li>
</ul>
<h3 id="3-原型链-2"><a href="#3-原型链-2" class="headerlink" title="3 原型链-2"></a>3 原型链-2</h3><h4 id="1-说明"><a href="#1-说明" class="headerlink" title="1 说明"></a>1 说明</h4><p><img src="https://github.com/anyeansan/pics/raw/master/CS/UI/JS/%E7%BB%A7%E6%89%BF2.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A.prototype = new B();</span><br></pre></td></tr></table></figure>

<ul>
<li>将子类构造函数的原型对象修改为一个父类实例（舍弃原有原型对象）</li>
<li>好处<ul>
<li>父类实例对象具有父类的实例属性/方法，父类实例对象的原型又指向父类构造函数原型，所以父类的实例属性/方法 和 原型属性/方法，子类都可以继承</li>
</ul>
</li>
<li>弊端<ol>
<li>父类的实例属性/方法是在子类原型对象上，这就导致父类的实例属性/方法实际上变成了子类的原型属性/方法。</li>
<li>需要手动为新的子类原型对象添加 <code>constructor</code>属性</li>
</ol>
</li>
</ul>
<h4 id="2-对新增对象的影响"><a href="#2-对新增对象的影响" class="headerlink" title="2 对新增对象的影响"></a>2 对新增对象的影响</h4><ul>
<li>如果新增对象在修改原型操作之前，那就意味着，新增对象指向的原型还是原来被舍弃的原型，所以这种方式只对修改原型操作之后新增的对象有效 </li>
</ul>
<h4 id="3-对constructor的影响"><a href="#3-对constructor的影响" class="headerlink" title="3 对constructor的影响"></a>3 对constructor的影响</h4><ul>
<li><p>由于这种方式是将子类原型修改成了一个新的对象，而这个新对象中是没有<code>constructor</code>属性的，所以需要手动为新对象添加<code>constructor</code>属性，并指向子类构造函数</p>
<ol>
<li><p>直接添加（有一个弊端，就是<code>constructor</code>属性默认可遍历）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A.prototype.constructor = A;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用Object的 <code>defineProperty()</code> 添加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(A.prototype, <span class="string">"constructor"</span>, &#123;</span><br><span class="line">	value: A,</span><br><span class="line">	enumerable: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ul>
<h3 id="4-组合继承1（构造函数-原型链2）"><a href="#4-组合继承1（构造函数-原型链2）" class="headerlink" title="4 组合继承1（构造函数+原型链2）"></a>4 组合继承1（构造函数+原型链2）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">B.prototype.gender = <span class="string">'nan'</span>;</span><br><span class="line">B.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">	B.call(<span class="keyword">this</span>, <span class="string">'小猫'</span>); <span class="comment">// 第一次调用</span></span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype = <span class="keyword">new</span> B(<span class="string">'小狗'</span>); <span class="comment">// 第二次调用</span></span><br><span class="line">A.prototype.constructor = A;</span><br></pre></td></tr></table></figure>

<ul>
<li>好处<ul>
<li>通过构造函数方式可以继承到父类的实例属性/方法</li>
<li>通过原型链方式可以继承到父类的原型属性/方法</li>
</ul>
</li>
<li>弊端<ol>
<li>父类的实例属性会在子类实例和子类原型上都定义一份，不过不影响，因为会先使用实例自己的属性</li>
<li>会调用两次父类构造函数</li>
<li>需要手动为新的子类原型对象添加 <code>constructor</code>属性</li>
<li>子类原有的原型对象上的属性和方法没有了</li>
</ol>
</li>
</ul>
<h3 id="5-组合继承2（构造函数-原型链1）"><a href="#5-组合继承2（构造函数-原型链1）" class="headerlink" title="5 组合继承2（构造函数+原型链1）"></a>5 组合继承2（构造函数+原型链1）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">B.prototype.gender = <span class="string">'nan'</span>;</span><br><span class="line">B.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">	B.call(<span class="keyword">this</span>, <span class="string">'小猫'</span>); </span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype.__proto__ = B.prototype</span><br></pre></td></tr></table></figure>

<ul>
<li>好处<ul>
<li>通过构造函数方式可以继承到父类的实例属性/方法</li>
<li>通过原型链方式可以继承到父类的原型属性/方法</li>
</ul>
</li>
<li>弊端<ul>
<li><code>__proto__</code> 在浏览器之外的环境可能不行。</li>
<li><code>B.prototype</code> 中的 <code>constructor</code> 指向的是父类构造函数</li>
</ul>
</li>
</ul>
<h3 id="6-最终方式"><a href="#6-最终方式" class="headerlink" title="6 最终方式"></a>6 最终方式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">B.prototype.gender = <span class="string">'nan'</span>;</span><br><span class="line">B.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 1 继承父类实例属性/方法</span></span><br><span class="line">	B.call(<span class="keyword">this</span>, <span class="string">'小猫'</span>); </span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2 设置子类原型对象</span></span><br><span class="line">A.prototype = <span class="built_in">Object</span>.create(B.prototype);</span><br><span class="line"><span class="comment">// 3 为子类原型对象添加 constructor</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(A.prototype, <span class="string">"constructor"</span>, &#123;</span><br><span class="line">	value: A,</span><br><span class="line">	enumerable: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="3-4-对象工厂"><a href="#3-4-对象工厂" class="headerlink" title="3.4 对象工厂"></a>3.4 对象工厂</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fu</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createObj</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> obj = <span class="built_in">Object</span>.create(Fu.prototype);</span><br><span class="line">	Fu.call(obj, ...args); <span class="comment">//通过调用父类</span></span><br><span class="line">	<span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>与继承方式类似，只是通过对象工厂创建子类对象，不需要子类构造函数<ol>
<li>创建一个以父类原型为原型的对象，相当于继承了父类原型属性/方法</li>
<li>调用父类构造函数，并设置this为新建对象，即相当于继承了父类实例属性</li>
<li>返回新建对象</li>
</ol>
</li>
</ul>
<h2 id="3-5-静态属性-方法的继承"><a href="#3-5-静态属性-方法的继承" class="headerlink" title="3.5 静态属性/方法的继承"></a>3.5 静态属性/方法的继承</h2><ul>
<li><p>静态属性/方法即在构造函数上定义的属性/方法，继承原理都是一样的，函数也是对象，把子类构造函数看作对象，设置其原型为父类构造函数，即可继承静态属性/方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fu</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Fu.haha = <span class="string">"wangcai"</span>;</span><br><span class="line">Fu.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'fu static show'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Zi</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Zi.__proto__ = Fu;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="3-6-Mixin-模式"><a href="#3-6-Mixin-模式" class="headerlink" title="3.6 Mixin 模式"></a>3.6 Mixin 模式</h2><ol>
<li><p>JS 不支持多继承，也没有接口实现，如果要使用多个类的方法时可以使用 mixin 混合模式来完成</p>
</li>
<li><p>Mixin模式 指的是多个对象合成一个新的对象，新对象具有各个组成成员的接口</p>
</li>
<li><p>Mixin 可以看作是一个包含许多功能的对象，使用时将这些功能合并到要使用功能的对象原型上即可</p>
</li>
<li><p>例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myMix = &#123;</span><br><span class="line">	sayHi() &#123;&#125;,</span><br><span class="line">	sayBye() &#123;&#125;,</span><br><span class="line">	eat()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 合并之后，User的实例就有了myMix的所有功能了</span></span><br><span class="line"><span class="built_in">Object</span>.assign(User.prototype, myMix);</span><br><span class="line"><span class="comment">// 手动添加某个功能</span></span><br><span class="line">User.prototype.eat = myHix.eat;</span><br></pre></td></tr></table></figure>

</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/anyeansan.github.io/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/anyeansan.github.io/">1</a><span class="page-number current">2</span><a class="page-number" href="/anyeansan.github.io/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/anyeansan.github.io/page/8/">8</a><a class="extend next" rel="next" href="/anyeansan.github.io/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          秘笈
        </li>
        <li class="sidebar-nav-overview">
          安₃
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="安₃"
      src="/anyeansan.github.io/images/an3.png">
  <p class="site-author-name" itemprop="name">安₃</p>
  <div class="site-description" itemprop="description">一蓑烟雨任平生</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/anyeansan.github.io/archives/">
        
          <span class="site-state-item-count">71</span>
          <span class="site-state-item-name">琅嬛福地</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/anyeansan.github.io/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">门派</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/anyeansan.github.io/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-star-half-full"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">安₃</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/anyeansan.github.io/lib/anime.min.js"></script>
  <script src="/anyeansan.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/anyeansan.github.io/lib/velocity/velocity.ui.min.js"></script>
<script src="/anyeansan.github.io/js/utils.js"></script><script src="/anyeansan.github.io/js/motion.js"></script>
<script src="/anyeansan.github.io/js/schemes/pisces.js"></script>
<script src="/anyeansan.github.io/js/next-boot.js"></script>



  




  <script src="/anyeansan.github.io/js/local-search.js"></script>













  

  

</body>
</html>

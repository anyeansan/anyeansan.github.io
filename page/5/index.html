<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/anyeansan.github.io/images/an-apple-180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/anyeansan.github.io/images/an-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/anyeansan.github.io/images/an-16.png">
  <link rel="mask-icon" href="/anyeansan.github.io/images/an.svg" color="#222">
  <link rel="alternate" href="/anyeansan.github.io/atom.xml" title="安₃" type="application/atom+xml">

<link rel="stylesheet" href="/anyeansan.github.io/css/main.css">


<link rel="stylesheet" href="/anyeansan.github.io/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/anyeansan.github.io/',
    scheme: 'Gemini',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"hide","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="一蓑烟雨任平生">
<meta property="og:type" content="website">
<meta property="og:title" content="安₃">
<meta property="og:url" content="https:&#x2F;&#x2F;anyeansan.github.io&#x2F;page&#x2F;5&#x2F;">
<meta property="og:site_name" content="安₃">
<meta property="og:description" content="一蓑烟雨任平生">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://anyeansan.github.io/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>安₃</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/anyeansan.github.io/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">安₃</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">我未成名君未嫁 可能俱是不如人</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/anyeansan.github.io/" rel="section"><i class="fa fa-fw fa-home"></i>安府</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/anyeansan.github.io/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>琅嬛福地</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/anyeansan.github.io/categories/" rel="section"><i class="fa fa-fw fa-th"></i>门派</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/anyeansan" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/CSS%E6%A0%B7%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/CSS%E6%A0%B7%E5%BC%8F/" class="post-title-link" itemprop="url">CSS样式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:01:44 / 修改时间：21:06:03" itemprop="dateCreated datePublished" datetime="2020-11-08T21:01:44+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-background（背景）"><a href="#一-background（背景）" class="headerlink" title="一 background（背景）"></a>一 background（背景）</h1><h2 id="1-1-语法"><a href="#1-1-语法" class="headerlink" title="1.1 语法"></a>1.1 语法</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">background-color ||</span><br><span class="line">background-image ||</span><br><span class="line">background-position [ / background-size]? || </span><br><span class="line">background-repeat ||</span><br><span class="line">background-attachment ||</span><br><span class="line"><span class="selector-attr">[background-origin background-clip?]</span></span><br></pre></td></tr></table></figure>

<h2 id="1-2-属性说明"><a href="#1-2-属性说明" class="headerlink" title="1.2 属性说明"></a>1.2 属性说明</h2><h3 id="1-background-color"><a href="#1-background-color" class="headerlink" title="1 background-color"></a>1 background-color</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>transparent</code>（默认）</td>
<td>透明</td>
</tr>
<tr>
<td><code>currentColor</code></td>
<td>当前元素的字体颜色</td>
</tr>
<tr>
<td><code>&lt;color&gt;</code></td>
<td>设置颜色</td>
</tr>
</tbody></table>
<h3 id="2-background-image"><a href="#2-background-image" class="headerlink" title="2 background-image"></a>2 background-image</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>none</code>（默认）</td>
<td>无背景图</td>
</tr>
<tr>
<td><code>url</code></td>
<td><code>url(地址不提倡加引号)</code></td>
</tr>
<tr>
<td><code>&lt;gradient&gt;</code></td>
<td>渐变</td>
</tr>
</tbody></table>
<h3 id="3-background-repeat"><a href="#3-background-repeat" class="headerlink" title="3 background-repeat"></a>3 background-repeat</h3><ul>
<li>css3 定义时使用两个值，如果只设置一个，也会被解析成两个</li>
</ul>
<table>
<thead>
<tr>
<th>单值</th>
<th>说明</th>
<th>双值</th>
</tr>
</thead>
<tbody><tr>
<td><code>repeat</code>（默认）</td>
<td>平铺</td>
<td><code>repeat repeat</code></td>
</tr>
<tr>
<td><code>repeat-x</code></td>
<td>x 轴平铺</td>
<td><code>repeat no-repeat</code></td>
</tr>
<tr>
<td><code>repeat-y</code></td>
<td>y 轴平铺</td>
<td><code>no-repeat repeat</code></td>
</tr>
<tr>
<td><code>no-repeat</code></td>
<td>不平铺</td>
<td><code>no-repeat no-repeat</code></td>
</tr>
<tr>
<td><code>space</code></td>
<td>两端对齐平铺，多出来的空间用空白代替</td>
<td><code>space space</code></td>
</tr>
<tr>
<td><code>round</code></td>
<td>两端对齐平铺，多出来空间通过自身的拉伸来填充</td>
<td><code>round round</code></td>
</tr>
</tbody></table>
<h3 id="4-background-position"><a href="#4-background-position" class="headerlink" title="4 background-position"></a>4 background-position</h3><ul>
<li><code>x轴 y轴</code>，如果只设置一个值，另一个默认居中</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>关键字</code></td>
<td><code>left right top bottom center</code></td>
</tr>
<tr>
<td><code>&lt;length&gt;</code></td>
<td>长度 <code>px em ...</code></td>
</tr>
<tr>
<td><code>&lt;percentage&gt;</code></td>
<td>百分比</td>
</tr>
</tbody></table>
<h3 id="5-background-size"><a href="#5-background-size" class="headerlink" title="5 background-size"></a>5 background-size</h3><ul>
<li><code>宽 高</code>，如果只设置一个值，另一个值为 <code>auto</code>，保持宽高比</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>auto</code>（默认）</td>
<td>以背景图片的比例缩放背景图片</td>
</tr>
<tr>
<td><code>cover</code></td>
<td>缩放背景图片以完全覆盖背景区，可能背景图片部分看不见</td>
</tr>
<tr>
<td><code>contain</code></td>
<td>缩放背景图片以完全装入背景区，可能背景区部分空白</td>
</tr>
<tr>
<td><code>&lt;length&gt;</code></td>
<td>长度</td>
</tr>
<tr>
<td><code>&lt;percentage&gt;</code></td>
<td>背景图片相对背景区的百分比</td>
</tr>
</tbody></table>
<h3 id="6-background-attachment"><a href="#6-background-attachment" class="headerlink" title="6 background-attachment"></a>6 background-attachment</h3><ul>
<li>决定背景图像的位置是在视口内固定，还是随着包含它的区块滚动。</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
<th>元素滚动条</th>
<th>页面滚动条</th>
</tr>
</thead>
<tbody><tr>
<td><code>scroll</code>（默认）</td>
<td>背景相对于元素本身固定，融为一体</td>
<td>背景不动</td>
<td>背景会动</td>
</tr>
<tr>
<td><code>fixed</code></td>
<td>背景相对于视口固定</td>
<td>背景不动</td>
<td>背景不动</td>
</tr>
<tr>
<td><code>local</code></td>
<td>背景相对于元素的内容固定</td>
<td>背景会动</td>
<td>背景会动</td>
</tr>
</tbody></table>
<h3 id="7-background-origin"><a href="#7-background-origin" class="headerlink" title="7 background-origin"></a>7 background-origin</h3><ul>
<li>决定背景图片相对于哪个盒子定位</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>padding-box</code>（默认）</td>
<td>相对于 <code>padding-box</code> 定位</td>
</tr>
<tr>
<td><code>content-box</code></td>
<td>相对于 <code>content-box</code> 定位</td>
</tr>
<tr>
<td><code>border-box</code></td>
<td>相对于 <code>border-box</code> 定位</td>
</tr>
</tbody></table>
<h3 id="8-background-clip"><a href="#8-background-clip" class="headerlink" title="8 background-clip"></a>8 background-clip</h3><ul>
<li>设置元素的背景切割范围，相对于哪个盒子定位不变</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>border-box</code>（默认）</td>
<td>背景延伸至边框外沿（但是在边框下层）</td>
</tr>
<tr>
<td><code>content-box</code></td>
<td>背景被裁剪至内容区外沿</td>
</tr>
<tr>
<td><code>padding-box</code></td>
<td>背景延伸至内边距外沿</td>
</tr>
</tbody></table>
<h1 id="二-list-style（列表）"><a href="#二-list-style（列表）" class="headerlink" title="二 list-style（列表）"></a>二 list-style（列表）</h1><h2 id="2-1-语法"><a href="#2-1-语法" class="headerlink" title="2.1 语法"></a>2.1 语法</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list-style-type ||</span><br><span class="line">list-style-image ||</span><br><span class="line"><span class="selector-tag">list-style-position</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-属性说明"><a href="#2-2-属性说明" class="headerlink" title="2.2 属性说明"></a>2.2 属性说明</h2><h3 id="1-list-style-type"><a href="#1-list-style-type" class="headerlink" title="1 list-style-type"></a>1 list-style-type</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>disc</code>（默认）</td>
<td>实心圆点</td>
</tr>
<tr>
<td><code>none</code></td>
<td>无样式</td>
</tr>
<tr>
<td><code>circle</code></td>
<td>空心圆点</td>
</tr>
<tr>
<td><code>square</code></td>
<td>实心方块</td>
</tr>
<tr>
<td><code>decimal</code></td>
<td>从1开始的数字</td>
</tr>
<tr>
<td><code>......</code></td>
<td>还有许多样式</td>
</tr>
</tbody></table>
<h3 id="2-list-style-image"><a href="#2-list-style-image" class="headerlink" title="2 list-style-image"></a>2 list-style-image</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>none</code>（默认）</td>
<td>会使用 <code>list-style-type</code></td>
</tr>
<tr>
<td><code>&lt;url&gt;</code></td>
<td><code>url(地址不提倡加引号)</code></td>
</tr>
</tbody></table>
<h3 id="3-list-style-position"><a href="#3-list-style-position" class="headerlink" title="3 list-style-position"></a>3 list-style-position</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>outside</code>（默认）</td>
<td>标记盒 <code>::marker</code> 在主块盒之外</td>
</tr>
<tr>
<td><code>inside</code></td>
<td>标记盒 <code>::marker</code> 在主块盒之内，是主块盒中的第一个行内盒</td>
</tr>
</tbody></table>
<h1 id="三-表格"><a href="#三-表格" class="headerlink" title="三 表格"></a>三 表格</h1><h2 id="3-1-border-collapse"><a href="#3-1-border-collapse" class="headerlink" title="3.1 border-collapse"></a>3.1 border-collapse</h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>separate</code>（默认）</td>
<td>分离，HTML 表格的传统模式，相邻单元格都拥有独立的边框</td>
</tr>
<tr>
<td><code>collapse</code></td>
<td>合并，表格中相邻单元格共享边框</td>
</tr>
</tbody></table>
<h2 id="3-2-border-spacing（单元格内边距）"><a href="#3-2-border-spacing（单元格内边距）" class="headerlink" title="3.2 border-spacing（单元格内边距）"></a>3.2 border-spacing（单元格内边距）</h2><ol>
<li>只有 <code>border-collapse: separate</code> 时才有效</li>
<li>单元格没有外边距，有边框和内边距</li>
<li><code>&lt;length&gt; &lt;length&gt;?</code>：<code>水平 垂直</code> 如果省略垂直则与水平间距相等</li>
</ol>
<h2 id="3-3-empty-cells"><a href="#3-3-empty-cells" class="headerlink" title="3.3 empty-cells"></a>3.3 empty-cells</h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>show</code>（默认）</td>
<td>空单元格的背景和边框正常显示</td>
</tr>
<tr>
<td><code>hide</code></td>
<td>空单元格的背景和边框隐藏</td>
</tr>
</tbody></table>
<h2 id="3-4-caption-side"><a href="#3-4-caption-side" class="headerlink" title="3.4 caption-side"></a>3.4 caption-side</h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>top</code>（默认）</td>
<td>标题在表格顶部，标题是在表格外面的</td>
</tr>
<tr>
<td><code>bottom</code></td>
<td>标题在表格底部，标题是在表格外面的</td>
</tr>
</tbody></table>
<h2 id="3-5-table-layout"><a href="#3-5-table-layout" class="headerlink" title="3.5 table-layout"></a>3.5 table-layout</h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>auto</code>（默认）</td>
<td>表格及单元格的宽度取决于其包含的内容</td>
</tr>
<tr>
<td><code>fixed</code></td>
<td>表格和列的宽度通过表格的宽度来设置，某一列的宽度仅由该列首行的单元格决定</td>
</tr>
</tbody></table>
<h1 id="四-元素的显示和隐藏"><a href="#四-元素的显示和隐藏" class="headerlink" title="四 元素的显示和隐藏"></a>四 元素的显示和隐藏</h1><h2 id="4-1-方式"><a href="#4-1-方式" class="headerlink" title="4.1 方式"></a>4.1 方式</h2><table>
<thead>
<tr>
<th>方式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>display: none</code></td>
<td>该元素以及它的所有后代元素都会隐藏，不保留位置，不影响计数器的值</td>
</tr>
<tr>
<td><code>visibility: hidden</code></td>
<td>隐藏元素，如果后代元素 <code>visibility: visible</code>，则后代元素依然可见，保留位置，会影响计数器的值</td>
</tr>
</tbody></table>
<h2 id="4-2-visibility（元素可见性）"><a href="#4-2-visibility（元素可见性）" class="headerlink" title="4.2 visibility（元素可见性）"></a>4.2 visibility（元素可见性）</h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>visible</code>（默认）</td>
<td>元素正常显示</td>
</tr>
<tr>
<td><code>hidden</code></td>
<td>隐藏元素，但是其他元素的布局不改变，相当于此元素变成透明。若其子元素设为visible，则子元素依然可见</td>
</tr>
<tr>
<td><code>collapse</code></td>
<td>用于 <code>&lt;table&gt;</code> 行、列、列组和行组，隐藏表格的行或列，并且不占用任何空间，就好像折叠了单元格一般（效果同 <code>display:none</code> ）</td>
</tr>
</tbody></table>
<h1 id="五-overflow（元素溢出）"><a href="#五-overflow（元素溢出）" class="headerlink" title="五 overflow（元素溢出）"></a>五 overflow（元素溢出）</h1><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>visible</code>（默认）</td>
<td>内容不会被修剪，超出内容可见</td>
</tr>
<tr>
<td><code>hidden</code></td>
<td>内容会被修剪，超出内容不可见</td>
</tr>
<tr>
<td><code>scroll</code></td>
<td>内容会被修剪，浏览器会显示滚动条以便查看超出内容</td>
</tr>
<tr>
<td><code>auto</code></td>
<td>如果内容超出，就显示滚动条，反之则不显示</td>
</tr>
</tbody></table>
<h1 id="六-opacity（元素透明度）"><a href="#六-opacity（元素透明度）" class="headerlink" title="六 opacity（元素透明度）"></a>六 opacity（元素透明度）</h1><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>1</code>（默认）</td>
<td>元素完全不透明</td>
</tr>
<tr>
<td><code>0~1</code></td>
<td>元素半透明</td>
</tr>
<tr>
<td><code>0</code></td>
<td>元素完全透明</td>
</tr>
</tbody></table>
<h1 id="七-用户界面样式"><a href="#七-用户界面样式" class="headerlink" title="七 用户界面样式"></a>七 用户界面样式</h1><h2 id="7-1-cursor（鼠标样式）"><a href="#7-1-cursor（鼠标样式）" class="headerlink" title="7.1 cursor（鼠标样式）"></a>7.1 cursor（鼠标样式）</h2><ul>
<li>定义鼠标悬浮在元素上方时的样式</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>auto</code>（默认）</td>
<td>浏览器根据内容类别自动选择光标形状</td>
</tr>
<tr>
<td><code>default</code></td>
<td>箭头</td>
</tr>
<tr>
<td><code>pointer</code></td>
<td>小手</td>
</tr>
<tr>
<td><code>move</code></td>
<td>移动</td>
</tr>
<tr>
<td><code>text</code></td>
<td>文本</td>
</tr>
<tr>
<td><code>not-allowed</code></td>
<td>禁止</td>
</tr>
<tr>
<td><code>none</code></td>
<td>隐藏光标，比如看视频时</td>
</tr>
<tr>
<td><code>help</code></td>
<td>帮助</td>
</tr>
<tr>
<td><code>...</code></td>
<td>还有很多样式</td>
</tr>
</tbody></table>
<h2 id="7-2-outline（轮廓线）"><a href="#7-2-outline（轮廓线）" class="headerlink" title="7.2 outline（轮廓线）"></a>7.2 outline（轮廓线）</h2><h3 id="1-语法"><a href="#1-语法" class="headerlink" title="1 语法"></a>1 语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">outline-style ||</span><br><span class="line">outline-width ||</span><br><span class="line">outline-color</span><br></pre></td></tr></table></figure>

<ol>
<li>轮廓线不占据空间</li>
<li>通常不使用轮廓线 <code>outline: none;</code></li>
</ol>
<h3 id="2-outline-width"><a href="#2-outline-width" class="headerlink" title="2 outline-width"></a>2 outline-width</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;legnth&gt;</code></td>
<td>指定值</td>
</tr>
<tr>
<td><code>thin</code></td>
<td>薄</td>
</tr>
<tr>
<td><code>medium</code></td>
<td>中等</td>
</tr>
<tr>
<td><code>thick</code></td>
<td>厚</td>
</tr>
</tbody></table>
<h3 id="3-outline-style"><a href="#3-outline-style" class="headerlink" title="3 outline-style"></a>3 outline-style</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>none</code></td>
<td>无轮廓线</td>
</tr>
<tr>
<td><code>solid</code></td>
<td>单实线</td>
</tr>
<tr>
<td><code>double</code></td>
<td>双实线</td>
</tr>
<tr>
<td><code>dotted</code></td>
<td>点画线</td>
</tr>
<tr>
<td><code>dashed</code></td>
<td>虚线</td>
</tr>
<tr>
<td><code>groove</code></td>
<td>雕刻效果，与ridge相反</td>
</tr>
<tr>
<td><code>ridge</code></td>
<td>浮雕效果，与groove相反</td>
</tr>
<tr>
<td><code>inset</code></td>
<td>陷入效果</td>
</tr>
<tr>
<td><code>outset</code></td>
<td>突出效果</td>
</tr>
</tbody></table>
<h2 id="7-3-resize"><a href="#7-3-resize" class="headerlink" title="7.3 resize"></a>7.3 resize</h2><ol>
<li><code>resize</code>：是否可以调整元素大小</li>
<li>文本域 <code>textarea</code> 默认是可以调整的，通常会 <code>resize: none;</code></li>
</ol>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>none</code></td>
<td>不允许用户缩放元素</td>
</tr>
<tr>
<td><code>both</code></td>
<td>允许用户在水平和垂直方向上调整元素的大小</td>
</tr>
<tr>
<td><code>horizontal</code></td>
<td>允许用户在水平方向上调整元素的大小</td>
</tr>
<tr>
<td><code>vertical</code></td>
<td>允许用户在垂直方向上调整元素的大小</td>
</tr>
</tbody></table>
<h1 id="八-技巧"><a href="#八-技巧" class="headerlink" title="八 技巧"></a>八 技巧</h1><h2 id="8-1-CSS-精灵技术"><a href="#8-1-CSS-精灵技术" class="headerlink" title="8.1 CSS 精灵技术"></a>8.1 CSS 精灵技术</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>为了有效地减少服务器接受和发送请求的次数，提高页面的加载速度</li>
<li>CSS 精灵其实是将网页中的一些背景图像整合到一张大图中（精灵图），这样只需要一次请求即可</li>
<li>CSS 精灵技术主要针对于背景图片，插入的图片 img 是不需要这个技术的</li>
</ol>
<h3 id="2-使用"><a href="#2-使用" class="headerlink" title="2 使用"></a>2 使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* background-image</span><br><span class="line">* background-repeat</span><br><span class="line">* background-position </span><br><span class="line">* 最关键的是使用background-position 属性精确地定位精灵图中的指定部分</span><br></pre></td></tr></table></figure>

<ol>
<li>精确测量每个小背景图片的大小和位置</li>
<li>与小背景图大小相同的盒子，并给盒子指定背景图位置</li>
<li>给盒子指定小背景图片时， 背景定位基本都是 负值。</li>
</ol>
<h2 id="8-2-推拉门"><a href="#8-2-推拉门" class="headerlink" title="8.2 推拉门"></a>8.2 推拉门</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a&gt;</span><br><span class="line">	&lt;span&gt;首页&lt;/span&gt;</span><br><span class="line">&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>a 设置 背景左侧，padding撑开合适宽度。    </li>
<li>span 设置背景右侧， padding撑开合适宽度 剩下由文字继续撑开宽度。</li>
<li>之所以a包含span就是因为 整个导航都是可以点击的。</li>
</ol>
<h2 id="8-3-margin-负值"><a href="#8-3-margin-负值" class="headerlink" title="8.3 margin 负值"></a>8.3 margin 负值</h2><ul>
<li>盒子浮动后两个边框挨在一起，设置 <code>margin-left: -1</code> 即可压住一个边</li>
</ul>
<h2 id="8-4-css-图形"><a href="#8-4-css-图形" class="headerlink" title="8.4 css 图形"></a>8.4 css 图形</h2><h3 id="1-三角形"><a href="#1-三角形" class="headerlink" title="1 三角形"></a>1 三角形</h3><ol>
<li>宽高为 0</li>
<li>4 个边框都要写， 只保留需要的边框颜色，其余的都改为 <code>transparent</code>透明</li>
</ol>
<h2 id="8-5-浏览器私有前缀"><a href="#8-5-浏览器私有前缀" class="headerlink" title="8.5 浏览器私有前缀"></a>8.5 浏览器私有前缀</h2><ul>
<li>为了兼容老版本</li>
</ul>
<table>
<thead>
<tr>
<th>前缀</th>
<th>浏览器</th>
</tr>
</thead>
<tbody><tr>
<td><code>-webkit-</code></td>
<td><code>chrome safari</code></td>
</tr>
<tr>
<td><code>-moz-</code></td>
<td><code>firefox</code></td>
</tr>
<tr>
<td><code>-ms-</code></td>
<td><code>ie</code></td>
</tr>
<tr>
<td><code>-o-</code></td>
<td><code>Opera</code></td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/CSS%E6%96%87%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/CSS%E6%96%87%E6%9C%AC/" class="post-title-link" itemprop="url">CSS文本</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:01:39 / 修改时间：21:05:40" itemprop="dateCreated datePublished" datetime="2020-11-08T21:01:39+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-字体"><a href="#一-字体" class="headerlink" title="一 字体"></a>一 字体</h1><h2 id="1-1-font-face"><a href="#1-1-font-face" class="headerlink" title="1.1 @font face"></a>1.1 <code>@font face</code></h2><h3 id="1-作用"><a href="#1-作用" class="headerlink" title="1 作用"></a>1 作用</h3><ol>
<li>自定义字体或字体集</li>
<li>它允许网页开发者为其网页指定在线字体，可以消除对用户电脑字体的依赖</li>
</ol>
<h3 id="2-语法"><a href="#2-语法" class="headerlink" title="2 语法"></a>2 语法</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">font-face</span> &#123;</span><br><span class="line">	[ font-family: &lt;family-name&gt;; ] ||</span><br><span class="line">	[ src: &lt;src&gt;; ] ||</span><br><span class="line">	[ unicode-range: &lt;unicode-range&gt;; ] ||</span><br><span class="line">	[ font-variant: &lt;font-variant&gt;; ] ||</span><br><span class="line">	[ font-feature-settings: &lt;font-feature-settings&gt;; ] ||</span><br><span class="line">	[ font-variation-settings: &lt;font-variation-settings&gt;; ] ||</span><br><span class="line">	[ font-stretch: &lt;font-stretch&gt;; ] ||</span><br><span class="line">	[ font-weight: &lt;font-weight&gt;; ] ||</span><br><span class="line">	<span class="selector-attr">[ font-style: &lt;font-style&gt;; ]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>font-family</code></td>
<td>自定义字体的名称，特殊符号必须使用引号</td>
</tr>
<tr>
<td><code>src</code></td>
<td>指定在线字体或本地字体，<code>fromat(&#39;woff2&#39;)</code> 转换字体格式，用于浏览器识别</td>
</tr>
<tr>
<td><code>unicode-range</code></td>
<td>可以让特定的字符或者字符片段使用特定的字体</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>字体格式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>TrueType（.ttf）</code></td>
<td>Windows和Mac上常见的字体格式，是一种原始格式，因此它并没有为网页进行优化处理</td>
</tr>
<tr>
<td><code>OpenType（.otf）</code></td>
<td>以TrueType为基础，也是一种原始格式，但提供更多的功能</td>
</tr>
<tr>
<td><code>Web Open Font（.woff）</code></td>
<td>针对网页进行特殊优化，因此是Web字体中最佳格式</td>
</tr>
<tr>
<td><code>SVG（.svg）</code></td>
<td>基于SVG字体渲染的格式</td>
</tr>
<tr>
<td><code>Embedded Open Type（.eot）</code></td>
<td>IE专用字体格式，可以从TrueType格式创建此格式字体</td>
</tr>
</tbody></table>
<h2 id="1-2-font"><a href="#1-2-font" class="headerlink" title="1.2 font"></a>1.2 <code>font</code></h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[ font-style || font-variant || font-weight || font-stretch ]</span>? </span><br><span class="line"><span class="selector-tag">font-size</span> <span class="selector-attr">[ / line-height ]</span>? </span><br><span class="line"><span class="selector-tag">font-family</span></span><br></pre></td></tr></table></figure>

<h3 id="1-font-size"><a href="#1-font-size" class="headerlink" title="1 font-size"></a>1 font-size</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>关键字</code></td>
<td><code>xx-small, x-small, small, medium, large, x-large, xx-large, xxx-large, larger, smaller</code></td>
</tr>
<tr>
<td><code>&lt;length&gt;</code></td>
<td>长度，如 <code>px em ex rem</code></td>
</tr>
<tr>
<td><code>&lt;percentage&gt;</code></td>
<td>相对父元素字体大小的百分比</td>
</tr>
</tbody></table>
<h3 id="2-line-height"><a href="#2-line-height" class="headerlink" title="2 line-height"></a>2 line-height</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>normal</code>（默认）</td>
<td>与 <code>font-family</code> 有关，不同浏览器和系统字体不同，默认值就不同，所以通常需要重新设置</td>
</tr>
<tr>
<td><code>&lt;number&gt;</code></td>
<td>推荐，字体大小的倍数。</td>
</tr>
<tr>
<td><code>&lt;length&gt;</code></td>
<td>长度值（如 <code>px，em</code>）</td>
</tr>
<tr>
<td><code>&lt;percentage&gt;</code></td>
<td>字体大小的百分比</td>
</tr>
</tbody></table>
<ul>
<li><code>line-height:1.5</code>、<code>line-height:150%</code> 和 <code>line-height:1.5em</code> <ol>
<li>计算方式相同： <code>line-height = font-size * 1.5</code></li>
<li>继承时数值继承的是数值本身，长度和百分比继承的是计算结果，即对于子元素<ol>
<li>数值：<code>line-height = 子元素font-size * 1.5</code></li>
<li>长度和百分比：<code>line-height = 父元素font-size * 1.5</code></li>
</ol>
</li>
</ol>
</li>
</ul>
<h3 id="3-font-family"><a href="#3-font-family" class="headerlink" title="3 font-family"></a>3 font-family</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;family-name&gt;</code></td>
<td>字体名称，多个用逗号隔开</td>
</tr>
<tr>
<td><code>&lt;generic-name&gt;</code></td>
<td>字体系列名称</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>通用字体系列</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>monospace</code></td>
<td>等宽字体，即字体中每个字宽度相同</td>
</tr>
<tr>
<td><code>sans-serif</code></td>
<td>无衬线字体，即笔画结尾是平滑的字体</td>
</tr>
<tr>
<td><code>serif</code></td>
<td>带衬线字体，笔画结尾有特殊的装饰线或衬线</td>
</tr>
<tr>
<td><code>cursive</code></td>
<td>草书字体</td>
</tr>
<tr>
<td><code>fantasy</code></td>
<td>艺术字体</td>
</tr>
</tbody></table>
<h3 id="4-font-style"><a href="#4-font-style" class="headerlink" title="4 font-style"></a>4 font-style</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>normal</code>（默认）</td>
<td>常规</td>
</tr>
<tr>
<td><code>italic</code></td>
<td>斜体</td>
</tr>
<tr>
<td><code>oblique &lt;angle&gt;?</code></td>
<td>倾斜体 可以附加角度</td>
</tr>
</tbody></table>
<h3 id="5-font-weight"><a href="#5-font-weight" class="headerlink" title="5 font-weight"></a>5 font-weight</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>normal</code>（默认）</td>
<td>常规，相当于 <code>400</code></td>
</tr>
<tr>
<td><code>bold</code></td>
<td>加粗，相当于 <code>700</code></td>
</tr>
<tr>
<td><code>lighter</code></td>
<td>较细</td>
</tr>
<tr>
<td><code>bolder</code></td>
<td>较粗</td>
</tr>
<tr>
<td><code>&lt;number&gt;</code></td>
<td>介于 1 和 1000 (包含) 之间</td>
</tr>
</tbody></table>
<h3 id="6-font-variant-amp-font-stretch"><a href="#6-font-variant-amp-font-stretch" class="headerlink" title="6 font-variant &amp; font-stretch"></a>6 font-variant &amp; font-stretch</h3><ul>
<li>更像是专为英文设计的，默认即可</li>
</ul>
<h2 id="1-3-Unicode-字体"><a href="#1-3-Unicode-字体" class="headerlink" title="1.3 Unicode 字体"></a>1.3 Unicode 字体</h2><table>
<thead>
<tr>
<th>字体名称</th>
<th>英文名称</th>
<th>Unicode 编码</th>
</tr>
</thead>
<tbody><tr>
<td>宋体</td>
<td>SimSun</td>
<td>\5B8B\4F53</td>
</tr>
<tr>
<td>微软雅黑</td>
<td>Microsoft YaHei</td>
<td>\5FAE\8F6F\96C5\9ED1</td>
</tr>
<tr>
<td>新宋体</td>
<td>NSimSun</td>
<td>\65B0\5B8B\4F53</td>
</tr>
<tr>
<td>黑体</td>
<td>SimHei</td>
<td>\9ED1\4F53</td>
</tr>
<tr>
<td>楷体_GB2312</td>
<td>KaiTi_GB2312</td>
<td>\6977\4F53_GB2312</td>
</tr>
<tr>
<td>隶书</td>
<td>LiSu</td>
<td>\96B6\4E66</td>
</tr>
<tr>
<td>幼园</td>
<td>YouYuan</td>
<td>\5E7C\5706</td>
</tr>
<tr>
<td>华文细黑</td>
<td>STXihei</td>
<td>\534E\6587\7EC6\9ED1</td>
</tr>
<tr>
<td>细明体</td>
<td>MingLiU</td>
<td>\7EC6\660E\4F53</td>
</tr>
<tr>
<td>新细明体</td>
<td>PMingLiU</td>
<td>\65B0\7EC6\660E\4F53</td>
</tr>
</tbody></table>
<h2 id="1-4-color（字体颜色）"><a href="#1-4-color（字体颜色）" class="headerlink" title="1.4 color（字体颜色）"></a>1.4 color（字体颜色）</h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>关键字</code></td>
<td><code>black red green blue ...</code></td>
</tr>
<tr>
<td><code>十六进制</code></td>
<td><code>#000 # FFF # 66CCFF ...</code></td>
</tr>
<tr>
<td><code>RGB</code></td>
<td><code>rgb(r, g, b [, a])</code>，<code>a</code> 透明度（0~1）</td>
</tr>
<tr>
<td><code>HSL</code></td>
<td><code>hsl(h, s, l [,a]</code></td>
</tr>
<tr>
<td><code>transparent</code></td>
<td>透明，可以近似认为是 <code>rgba(0,0,0,0)</code>的缩写</td>
</tr>
</tbody></table>
<h1 id="二-文本排版"><a href="#二-文本排版" class="headerlink" title="二 文本排版"></a>二 文本排版</h1><h2 id="2-1-text-indent"><a href="#2-1-text-indent" class="headerlink" title="2.1 text-indent"></a>2.1 text-indent</h2><ul>
<li>首行缩进量</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;length&gt;</code></td>
<td>长度值 <code>px em ...</code>，允许为负</td>
</tr>
<tr>
<td><code>&lt;percentage&gt;</code></td>
<td>使用包含块宽度的百分比作为缩进</td>
</tr>
</tbody></table>
<h2 id="2-2-text-align"><a href="#2-2-text-align" class="headerlink" title="2.2 text-align"></a>2.2 text-align</h2><ul>
<li>定义 <strong>文字、行内元素（inline，inline-block）</strong> 相对它的包围块元素水平对齐方式</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>left</code></td>
<td>左对齐</td>
</tr>
<tr>
<td><code>right</code></td>
<td>右对齐</td>
</tr>
<tr>
<td><code>center</code></td>
<td>居中对齐</td>
</tr>
<tr>
<td><code>justify</code></td>
<td>两端对齐，对最后一行无效</td>
</tr>
</tbody></table>
<h2 id="2-3-vertical-align"><a href="#2-3-vertical-align" class="headerlink" title="2.3 vertical-align"></a>2.3 vertical-align</h2><ul>
<li>定义 <strong>文字、行内元素（inline，inline-block，inline-table，table-cell）</strong>的垂直对齐方式</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>baseline</code>（默认）</td>
<td>相对于父元素基线对齐</td>
</tr>
<tr>
<td><code>middle</code></td>
<td>相对于与父元素中部对齐，<code>中部 = 基线 + x-heifht/2</code></td>
</tr>
<tr>
<td><code>top</code></td>
<td>相对于整行的顶部对齐</td>
</tr>
<tr>
<td><code>bottom</code></td>
<td>相对于整行底部对齐</td>
</tr>
</tbody></table>
<h2 id="2-4-text-overflow"><a href="#2-4-text-overflow" class="headerlink" title="2.4 text-overflow"></a>2.4 text-overflow</h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>clip</code>（默认）</td>
<td>将溢出的文本裁减掉</td>
</tr>
<tr>
<td><code>ellipsis</code></td>
<td>将溢出的文本用省略号 <code>...</code> 来表示</td>
</tr>
</tbody></table>
<h2 id="2-5-overflow-wrap"><a href="#2-5-overflow-wrap" class="headerlink" title="2.5 overflow-wrap"></a>2.5 overflow-wrap</h2><ul>
<li>原 <code>word-wrap</code>，指定一个不可分割的字符串过长，超过容器盒的宽时应该如何处理</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th><code>CJK</code>（中日韩）</th>
<th><code>non-CJK</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>normal</code>（默认）</td>
<td>单个字符之间换行</td>
<td>在正常的单词结束处换行，保留完整性，可能会溢出容器）</td>
</tr>
<tr>
<td><code>break-word</code></td>
<td>单个字符之间换行</td>
<td>内容将在边界内换行。如果需要，单词内部允许断行</td>
</tr>
</tbody></table>
<h2 id="2-6-white-space"><a href="#2-6-white-space" class="headerlink" title="2.6 white-space"></a>2.6 white-space</h2><ul>
<li>设置如何处理空白（空格 <code>space</code>，制表符 <code>tab</code>，换行符 <code>enter</code>）</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>空白</th>
<th>换行</th>
</tr>
</thead>
<tbody><tr>
<td><code>normal</code>（默认）</td>
<td>空格、制表符、换行符合并成一个空格</td>
<td>文本自动换行</td>
</tr>
<tr>
<td><code>nowrap</code></td>
<td>空格、制表符、换行符合并成一个空格</td>
<td>文本不换行，即强制一行显示</td>
</tr>
<tr>
<td><code>pre</code></td>
<td>所有东西原样输出</td>
<td>文本不换行</td>
</tr>
<tr>
<td><code>pre-wrap</code></td>
<td>所有东西原样输出</td>
<td>文本换行</td>
</tr>
<tr>
<td><code>pre-line</code></td>
<td>空格、制表符合并成一个空格，换行符不变</td>
<td>文本换行</td>
</tr>
<tr>
<td><code>break-spaces</code></td>
<td>同<code>pre-wrap</code>，但有一些区别</td>
<td></td>
</tr>
</tbody></table>
<h2 id="2-7-word-break"><a href="#2-7-word-break" class="headerlink" title="2.7 word-break"></a>2.7 word-break</h2><ul>
<li>控制单词如何被拆分</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th><code>CJK</code>（中日韩）</th>
<th><code>non-CJK</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>normal</code>（默认）</td>
<td>可在任意 2 个字符间断行</td>
<td>只能再空白符处断行</td>
</tr>
<tr>
<td><code>keep-all</code></td>
<td>只能在空白符处断行</td>
<td>只能在空白符处断行</td>
</tr>
<tr>
<td><code>break-all</code></td>
<td>可在任意位置断行</td>
<td>可在任意位置断行</td>
</tr>
</tbody></table>
<h2 id="2-8-word-spacing"><a href="#2-8-word-spacing" class="headerlink" title="2.8 word-spacing"></a>2.8 word-spacing</h2><ul>
<li>设置单词之间的距离，中文无效</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>normal</code>（默认）</td>
<td>常规</td>
</tr>
<tr>
<td><code>&lt;length&gt;</code></td>
<td>长度 <code>px em ...</code></td>
</tr>
<tr>
<td><code>&lt;percentage&gt;</code></td>
<td>百分比</td>
</tr>
</tbody></table>
<h2 id="2-9-letter-spacing"><a href="#2-9-letter-spacing" class="headerlink" title="2.9 letter-spacing"></a>2.9 letter-spacing</h2><ul>
<li>设置字符之间的距离，中文有效</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>normal</code>（默认）</td>
<td>常规</td>
</tr>
<tr>
<td><code>&lt;length&gt;</code></td>
<td>长度 <code>px em ...</code></td>
</tr>
</tbody></table>
<h1 id="三-文本装饰"><a href="#三-文本装饰" class="headerlink" title="三 文本装饰"></a>三 文本装饰</h1><h2 id="3-1-text-decoration"><a href="#3-1-text-decoration" class="headerlink" title="3.1 text-decoration"></a>3.1 text-decoration</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">text-decoration-line ||</span><br><span class="line">text-decoration-style ||</span><br><span class="line">text-decoration-color ||</span><br><span class="line"><span class="selector-tag">text-decoration-thickness</span></span><br></pre></td></tr></table></figure>

<h3 id="1-text-decoration-line"><a href="#1-text-decoration-line" class="headerlink" title="1 text-decoration-line"></a>1 text-decoration-line</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>none</code>（默认）</td>
<td>无线</td>
</tr>
<tr>
<td><code>underline</code></td>
<td>下划线</td>
</tr>
<tr>
<td><code>overline</code></td>
<td>上划线</td>
</tr>
<tr>
<td><code>line-through</code></td>
<td>删除线</td>
</tr>
</tbody></table>
<h3 id="2-text-decoration-style"><a href="#2-text-decoration-style" class="headerlink" title="2 text-decoration-style"></a>2 text-decoration-style</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>solid</code>（默认）</td>
<td>单实线</td>
</tr>
<tr>
<td><code>double</code></td>
<td>双实线</td>
</tr>
<tr>
<td><code>dotted</code></td>
<td>点划线</td>
</tr>
<tr>
<td><code>dashed</code></td>
<td>虚线</td>
</tr>
<tr>
<td><code>wavy</code></td>
<td>波浪线</td>
</tr>
</tbody></table>
<h3 id="3-text-decoration-color"><a href="#3-text-decoration-color" class="headerlink" title="3 text-decoration-color"></a>3 text-decoration-color</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;color&gt;</code></td>
<td>设置装饰线的颜色</td>
</tr>
</tbody></table>
<h3 id="4-text-decoration-thickness"><a href="#4-text-decoration-thickness" class="headerlink" title="4 text-decoration-thickness"></a>4 text-decoration-thickness</h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>auto</code></td>
<td>浏览器为文本装饰线选择合适的宽度</td>
</tr>
<tr>
<td><code>from-font</code></td>
<td>如果字体文件中包含了首选的宽度值，则使用此字体文件的宽度值，否则同auto</td>
</tr>
<tr>
<td><code>&lt;length&gt;</code></td>
<td>指定装饰线宽度 <code>px em ...</code></td>
</tr>
</tbody></table>
<h2 id="3-2-text-transform"><a href="#3-2-text-transform" class="headerlink" title="3.2 text-transform"></a>3.2 text-transform</h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>none</code>（默认）</td>
<td>无影响</td>
</tr>
<tr>
<td><code>capitalize</code></td>
<td>每个单词首字母大写</td>
</tr>
<tr>
<td><code>uppercase</code></td>
<td>所有字母大写</td>
</tr>
<tr>
<td><code>lowercase</code></td>
<td>所有字母小写</td>
</tr>
</tbody></table>
<h2 id="3-3-text-shadow"><a href="#3-3-text-shadow" class="headerlink" title="3.3 text-shadow"></a>3.3 text-shadow</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[&lt;length&gt; &lt;length&gt;]   // 元素在 X 和 Y 方向的偏移量（必须）</span><br><span class="line">&lt;length&gt;? ||		// 模糊半径（可选）</span><br><span class="line">color?		// 阴影颜色（可选）</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/CSS%E9%80%89%E6%8B%A9%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/CSS%E9%80%89%E6%8B%A9%E5%99%A8/" class="post-title-link" itemprop="url">CSS选择器</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:01:33 / 修改时间：21:05:52" itemprop="dateCreated datePublished" datetime="2020-11-08T21:01:33+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-权重"><a href="#一-权重" class="headerlink" title="一 权重"></a>一 权重</h1><table>
<thead>
<tr>
<th>规则</th>
<th>粒度</th>
</tr>
</thead>
<tbody><tr>
<td><code>!important</code></td>
<td><code>∞</code></td>
</tr>
<tr>
<td><code>行内样式 style</code></td>
<td><code>1, 0, 0, 0</code></td>
</tr>
<tr>
<td><code>id</code></td>
<td><code>0, 1, 0, 0</code></td>
</tr>
<tr>
<td><code>class</code>，<code>伪类</code>，<code>属性</code></td>
<td><code>0, 0, 1, 0</code></td>
</tr>
<tr>
<td><code>标签</code>，<code>伪元素</code></td>
<td><code>0, 0, 0, 1</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td><code>0, 0, 0, 0</code></td>
</tr>
<tr>
<td><code>继承</code></td>
<td><code>null</code>（继承没有权重，比 <code>0</code> 小）</td>
</tr>
</tbody></table>
<ol>
<li>比较样式的优先级：算出所有选择器权重之和，然后从左到右比较大小</li>
<li>注意四个数有低位高位的概念，但不会进位，如 <code>0,0,0,8 + 0,0,0,7 = 0,0,0,15</code></li>
</ol>
<h1 id="二-基础选择器"><a href="#二-基础选择器" class="headerlink" title="二 基础选择器"></a>二 基础选择器</h1><table>
<thead>
<tr>
<th>选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>html</code></td>
<td>标签选择器</td>
</tr>
<tr>
<td><code>#id</code></td>
<td>id 选择器</td>
</tr>
<tr>
<td><code>.class</code></td>
<td>class 选择器</td>
</tr>
<tr>
<td><code>*</code></td>
<td>通配选择器</td>
</tr>
<tr>
<td><code>S₁, S₂, S₃, ...</code></td>
<td>并集</td>
</tr>
<tr>
<td><code>S₁S₂S₃...</code></td>
<td>交集</td>
</tr>
</tbody></table>
<h1 id="三-关系选择器"><a href="#三-关系选择器" class="headerlink" title="三 关系选择器"></a>三 关系选择器</h1><table>
<thead>
<tr>
<th>关系选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>A E</code></td>
<td>E 为 A 的后代元素</td>
</tr>
<tr>
<td><code>A &gt; E</code></td>
<td>E 为 A 的子元素</td>
</tr>
<tr>
<td><code>A ~ E</code></td>
<td>E 为 A 的兄弟元素</td>
</tr>
<tr>
<td><code>A + E</code></td>
<td>E 为 A 的下一个兄弟元素</td>
</tr>
</tbody></table>
<h1 id="三-属性选择器"><a href="#三-属性选择器" class="headerlink" title="三 属性选择器"></a>三 属性选择器</h1><table>
<thead>
<tr>
<th>属性选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>[attr]</code></td>
<td>带有 <code>attr</code> 属性的元素</td>
</tr>
<tr>
<td><code>[attr=value]</code></td>
<td><code>attr</code> 属性值为 <code>value</code> 的元素</td>
</tr>
<tr>
<td><code>[attr^=value]</code></td>
<td><code>attr</code> 属性值以 <code>value</code> 开头的元素</td>
</tr>
<tr>
<td><code>[attr$=value]</code></td>
<td><code>attr</code> 属性值以 <code>value</code> 结尾的元素</td>
</tr>
<tr>
<td><code>[attr*=value]</code></td>
<td><code>attr</code> 属性值包含 <code>value</code> 的元素</td>
</tr>
</tbody></table>
<h1 id="四-伪类选择器"><a href="#四-伪类选择器" class="headerlink" title="四 伪类选择器"></a>四 伪类选择器</h1><h2 id="4-1-链接伪类"><a href="#4-1-链接伪类" class="headerlink" title="4.1 链接伪类"></a>4.1 链接伪类</h2><table>
<thead>
<tr>
<th>选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:link</code></td>
<td>未访问</td>
</tr>
<tr>
<td><code>:visited</code></td>
<td>已访问</td>
</tr>
<tr>
<td><code>:hover</code></td>
<td>悬停</td>
</tr>
<tr>
<td><code>:active</code></td>
<td>点击</td>
</tr>
</tbody></table>
<ol>
<li>只能用于 <code>&lt;a&gt; &lt;button&gt;</code>，且按顺序 <code>LVHA</code></li>
<li>其它标签也能用，但有兼容性问题 </li>
</ol>
<h2 id="4-2-结构伪类"><a href="#4-2-结构伪类" class="headerlink" title="4.2 结构伪类"></a>4.2 结构伪类</h2><ol>
<li><p>所有类型子元素从 1 开始编号（可以指定类型，如  <code>E:nth-child(3)</code>，但对应编号必须是此类型，否则取不到）</p>
<table>
<thead>
<tr>
<th>选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:first-child</code></td>
<td>第一个子元素</td>
</tr>
<tr>
<td><code>:last-child</code></td>
<td>最后一个子元素</td>
</tr>
<tr>
<td><code>:noly-child</code></td>
<td>唯一子元素</td>
</tr>
<tr>
<td><code>:nth-child(表达式)</code></td>
<td>从前向后匹配符合表达式结果的子元素</td>
</tr>
<tr>
<td><code>:nth-last-child(表达式)</code></td>
<td>从后向前匹配符合表达式结果的子元素</td>
</tr>
</tbody></table>
</li>
<li><p>所有指定类型子元素从 1 开始编号（若不指定类型则默认父元素类型）</p>
<table>
<thead>
<tr>
<th>选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:fitst-of-type</code></td>
<td>第一个指定类型的子元素</td>
</tr>
<tr>
<td><code>:last-of-type</code></td>
<td>最后一个指定类型的子元素</td>
</tr>
<tr>
<td><code>:noly-of-type</code></td>
<td>唯一指定类型的子元素</td>
</tr>
<tr>
<td><code>:nth-of-type(表达式)</code></td>
<td>从前向后匹配符合表达式结果的指定类型的子元素</td>
</tr>
<tr>
<td><code>:nth-last-of-type(表达式)</code></td>
<td>从后向前匹配符合表达式结果的指定类型的子元素</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>表达式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>An+B</code></td>
<td><code>A B</code> 为整数，<code>n</code> 为 非负整数</td>
</tr>
<tr>
<td><code>odd</code></td>
<td>奇数</td>
</tr>
<tr>
<td><code>even</code></td>
<td>偶数</td>
</tr>
</tbody></table>
</li>
</ol>
<h2 id="4-3-状态伪类"><a href="#4-3-状态伪类" class="headerlink" title="4.3 状态伪类"></a>4.3 状态伪类</h2><table>
<thead>
<tr>
<th>选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>:checked</code></td>
<td>选中的 <code>radio checkbox option</code></td>
</tr>
<tr>
<td><code>:default</code></td>
<td>默认选中的 <code>radio checkbox option</code></td>
</tr>
<tr>
<td><code>:disabled</code></td>
<td>禁用的元素</td>
</tr>
<tr>
<td><code>:enabled</code></td>
<td>启用的元素</td>
</tr>
<tr>
<td><code>:empty</code></td>
<td>没有子元素的元素</td>
</tr>
<tr>
<td><code>:focus</code></td>
<td>获取焦点的元素</td>
</tr>
<tr>
<td><code>:not()</code></td>
<td>非（权重由括号内决定，自身0，不支持复杂选择器）</td>
</tr>
</tbody></table>
<h1 id="五-伪元素选择器"><a href="#五-伪元素选择器" class="headerlink" title="五 伪元素选择器"></a>五 伪元素选择器</h1><table>
<thead>
<tr>
<th>伪元素选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>::before</code></td>
<td>创建一个伪元素（行内元素），作为元素的第一个子元素</td>
</tr>
<tr>
<td><code>::after</code></td>
<td>创建一个伪元素（行内元素），作为元素的最后一个子元素</td>
</tr>
<tr>
<td><code>::first-letter</code></td>
<td>匹配块级元素第一行的第一个字母</td>
</tr>
<tr>
<td><code>::first-line</code></td>
<td>匹配块级元素第一行</td>
</tr>
<tr>
<td><code>::selection</code></td>
<td>匹配被用户选中或者处于高亮状态的部分</td>
</tr>
</tbody></table>
<ul>
<li><code>::before, ::after</code> 必须有 <code>content</code> 属性</li>
</ul>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/CSS%E8%AF%AD%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/CSS%E8%AF%AD%E6%B3%95/" class="post-title-link" itemprop="url">CSS语法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:01:26 / 修改时间：21:06:17" itemprop="dateCreated datePublished" datetime="2020-11-08T21:01:26+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><h2 id="1-1-CSS"><a href="#1-1-CSS" class="headerlink" title="1.1 CSS"></a>1.1 CSS</h2><ol>
<li><code>Cascading Style Sheets</code> 层叠样式表</li>
<li>负责页面的布局和样式</li>
</ol>
<h2 id="1-2-相关"><a href="#1-2-相关" class="headerlink" title="1.2 相关"></a>1.2 相关</h2><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>CSS1 &amp; CSS2</code></td>
<td>单一规范</td>
</tr>
<tr>
<td><code>CSS3</code></td>
<td>内容增多，CSS 划分了多个模块</td>
</tr>
<tr>
<td><code>less css</code></td>
<td>一种简化的功能更多的 css 语言</td>
</tr>
<tr>
<td><code>sass</code></td>
<td>一种简化的功能更多的 css 语言</td>
</tr>
<tr>
<td><code>postcss</code></td>
<td>一种 css 处理程序</td>
</tr>
</tbody></table>
<h1 id="二-CSS-样式"><a href="#二-CSS-样式" class="headerlink" title="二 CSS 样式"></a>二 CSS 样式</h1><h2 id="2-1-语法"><a href="#2-1-语法" class="headerlink" title="2.1 语法"></a>2.1 语法</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* CSS 注释 */</span></span><br><span class="line">选择器 &#123;</span><br><span class="line">	属性 : 值;</span><br><span class="line">	属性 : 值1 值2 值3 ...;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-2-Html-引入-CSS的方式"><a href="#2-2-Html-引入-CSS的方式" class="headerlink" title="2.2 Html 引入 CSS的方式"></a>2.2 Html 引入 CSS的方式</h2><ol>
<li><p>行内样式（内联样式）：每个 html 标签都有一个 <strong>style 属性</strong>，该属性的值就是 css 样式</p>
</li>
<li><p>内部样式（内嵌样式）：在当前页面的 <code>&lt;style&gt;</code> 标签中书写 css 样式</p>
</li>
<li><p>外部样式（外链样式）：在外部 <code>.css</code> 文件中书写 css 样式，之后导入当前页面</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 方式 1 */</span></span><br><span class="line">&lt;link rel="stylesheet" type="text/css" href=".css 文件路径"&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 方式 2 */</span></span><br><span class="line">@<span class="keyword">import</span> url(<span class="string">".css 文件路径"</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>link</code> 和 <code>@import</code> 方式的区别<ol>
<li><code>link</code> 属于 HTML 标签，而 <code>@import</code> 是 CSS 提供的，需要写在 <code>&lt;style&gt;</code> 中</li>
<li><code>@import</code> 只在 IE 5 以上才能识别，而 <code>link</code> 是 HTML 标签，无兼容问题</li>
<li>页面被加载时，<code>link</code> 会同时被加载，而 <code>@import</code> 引用的 CSS 会等到页面被加载完再加载</li>
<li><code>link</code> 方式的样式的权重高于 <code>@import</code> 权重</li>
<li><code>@import</code> 不支持js的动态修改</li>
<li>一般推荐<code>link</code>，<code>@import</code> 补充使用</li>
</ol>
</li>
</ul>
</li>
</ol>
<h1 id="三-CSS-文档语法中的符号说明"><a href="#三-CSS-文档语法中的符号说明" class="headerlink" title="三 CSS 文档语法中的符号说明"></a>三 CSS 文档语法中的符号说明</h1><table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>[]</td>
<td>表示组</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>空格前后的各部分必须按顺序出现</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>各部分必须出现，但可以不按顺序</td>
</tr>
<tr>
<td>&#124;&#124;</td>
<td>各部分至少出现一个，可以不按顺序</td>
</tr>
<tr>
<td>&#124;</td>
<td>各部分只能出现一个</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>值类型</td>
</tr>
<tr>
<td>*</td>
<td>任意次数</td>
</tr>
<tr>
<td>?</td>
<td>零次或一次</td>
</tr>
<tr>
<td>+</td>
<td>一次或多次</td>
</tr>
<tr>
<td>#</td>
<td>一次或多次，多次出现必须以逗号分隔</td>
</tr>
<tr>
<td>{m,n}</td>
<td>至少m次，至多n次</td>
</tr>
<tr>
<td>!</td>
<td>组后面的叹号表示该组是必需的，并且至少产生一个值；即使组内项目的语法允许省略全部的值，也至少要保留一个值</td>
</tr>
</tbody></table>
<h1 id="四-CSS-属性值单位"><a href="#四-CSS-属性值单位" class="headerlink" title="四 CSS 属性值单位"></a>四 CSS 属性值单位</h1><h2 id="4-1-lt-length-gt"><a href="#4-1-lt-length-gt" class="headerlink" title="4.1 &lt;length&gt;"></a>4.1 <code>&lt;length&gt;</code></h2><table>
<thead>
<tr>
<th>单位</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>px</code></td>
<td>像素</td>
</tr>
<tr>
<td><code>rem</code></td>
<td>相对于根元素的字体大小 <code>&lt;html&gt;</code></td>
</tr>
<tr>
<td><code>em</code></td>
<td>相对于父元素的字体大小</td>
</tr>
<tr>
<td><code>ex</code></td>
<td>相对于小写字母 <code>x</code> 的高度即 <code>x-height</code></td>
</tr>
<tr>
<td><code>ch</code></td>
<td>相对于字符数字 <code>0</code> 的宽度</td>
</tr>
<tr>
<td><code>vw</code></td>
<td>相对于视窗的宽度：视窗宽度是100 vw</td>
</tr>
<tr>
<td><code>vh</code></td>
<td>相对于视窗的高度：视窗高度是100 vh</td>
</tr>
<tr>
<td><code>vmin</code></td>
<td>等于 <code>vh</code> 和 <code>vw</code> 中较小的值</td>
</tr>
<tr>
<td><code>vmax</code></td>
<td>等于 <code>vh</code> 和 <code>vw</code> 中较大的值</td>
</tr>
</tbody></table>
<h2 id="4-2-lt-angle-gt"><a href="#4-2-lt-angle-gt" class="headerlink" title="4.2 &lt;angle&gt;"></a>4.2 <code>&lt;angle&gt;</code></h2><table>
<thead>
<tr>
<th>单位</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>deg</code></td>
<td>角度，一个完整圆角度是 <code>360deg</code></td>
</tr>
<tr>
<td><code>rad</code></td>
<td>弧度，一个完整圆弧度是 <code>2π</code></td>
</tr>
<tr>
<td><code>turn</code></td>
<td>圈数，一个完整圆圈数是 <code>1turn</code></td>
</tr>
</tbody></table>
<h2 id="4-3-lt-time-gt"><a href="#4-3-lt-time-gt" class="headerlink" title="4.3 &lt;time&gt;"></a>4.3 <code>&lt;time&gt;</code></h2><table>
<thead>
<tr>
<th>单位</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>s</td>
<td>秒</td>
</tr>
<tr>
<td>ms</td>
<td>毫秒</td>
</tr>
</tbody></table>
<h2 id="4-4-lt-frequency-gt-（频率）"><a href="#4-4-lt-frequency-gt-（频率）" class="headerlink" title="4.4 &lt;frequency&gt; （频率）"></a>4.4 <code>&lt;frequency&gt;</code> （频率）</h2><table>
<thead>
<tr>
<th>单位</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Hz</code></td>
<td>赫兹</td>
</tr>
<tr>
<td><code>kHz</code></td>
<td>千赫兹</td>
</tr>
</tbody></table>
<h2 id="4-5-lt-resolution-gt-（分辨率）"><a href="#4-5-lt-resolution-gt-（分辨率）" class="headerlink" title="4.5 &lt;resolution&gt; （分辨率）"></a>4.5 <code>&lt;resolution&gt;</code> （分辨率）</h2><table>
<thead>
<tr>
<th>单位</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>dpi</code></td>
<td>表示每英寸点数</td>
</tr>
<tr>
<td><code>dpcm</code></td>
<td>表示每厘米点数</td>
</tr>
<tr>
<td><code>dppx</code></td>
<td>表示每像素点数</td>
</tr>
<tr>
<td><code>x</code></td>
<td><code>dppx</code> 的别名</td>
</tr>
</tbody></table>
<h1 id="五-CSS-属性值类型"><a href="#五-CSS-属性值类型" class="headerlink" title="五 CSS 属性值类型"></a>五 CSS 属性值类型</h1><h2 id="5-1-文本类型"><a href="#5-1-文本类型" class="headerlink" title="5.1 文本类型"></a>5.1 文本类型</h2><table>
<thead>
<tr>
<th>类型</th>
<th>取值</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;string&gt;</code></td>
<td><code>&#39;&#39;, &quot;&quot;</code></td>
</tr>
<tr>
<td><code>&lt;url&gt;</code></td>
<td><code>url(绝对/相对地址，地址不建议加引号)</code></td>
</tr>
</tbody></table>
<h2 id="5-2-数值类型"><a href="#5-2-数值类型" class="headerlink" title="5.2 数值类型"></a>5.2 数值类型</h2><table>
<thead>
<tr>
<th>类型</th>
<th>取值</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;integer&gt;</code></td>
<td>整数，可以有正负 <code>+ -</code></td>
</tr>
<tr>
<td><code>&lt;number&gt;</code></td>
<td>整数或小数，可以有正负 <code>+ -</code></td>
</tr>
<tr>
<td><code>&lt;percentage&gt;</code></td>
<td><code>%</code></td>
</tr>
<tr>
<td><code>&lt;dimension&gt;</code></td>
<td>尺寸，由数字和单位构成，即 <code>&lt;number&gt; + unit = &lt;dimension&gt;</code></td>
</tr>
</tbody></table>
<h2 id="5-3-lt-color-gt"><a href="#5-3-lt-color-gt" class="headerlink" title="5.3 &lt;color&gt;"></a>5.3 <code>&lt;color&gt;</code></h2><table>
<thead>
<tr>
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>颜色关键字</code></td>
<td><code>black red green blue white yelow ...</code></td>
</tr>
<tr>
<td><code>transparent</code></td>
<td>透明，可以近似认为是 <code>rgba(0,0,0,0)</code>的缩写</td>
</tr>
<tr>
<td><code>currentColor</code></td>
<td>当前元素的字体颜色，即 <code>color</code> 的值</td>
</tr>
<tr>
<td><code>#十六进制</code></td>
<td><code>#000 #FFF #1234AB ...</code></td>
</tr>
<tr>
<td><code>RGB</code></td>
<td><code>rgb(r, g, b)</code>，可以使用数值和百分比</td>
</tr>
<tr>
<td><code>RGBA</code></td>
<td><code>rgba(r, g, b, a)</code>，a：<code>alpha</code>，透明度（0~1）</td>
</tr>
<tr>
<td><code>HSL</code></td>
<td><code>hsl(h, s, l)</code>，色调（0<del>360），饱和度（0%</del>100%），亮度（0%~100%）</td>
</tr>
<tr>
<td><code>HSLA</code></td>
<td><code>hsla(h, s, l, a)</code></td>
</tr>
</tbody></table>
<h2 id="5-4-lt-color-stop-gt"><a href="#5-4-lt-color-stop-gt" class="headerlink" title="5.4 &lt;color-stop&gt;"></a>5.4 <code>&lt;color-stop&gt;</code></h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 使用长度或百分比指定颜色起止位置，如果省略，默认 50% */</span></span><br><span class="line">&lt;<span class="selector-tag">color</span>&gt; <span class="selector-attr">[ &lt;length&gt; | &lt;percentage&gt; ]</span>?</span><br></pre></td></tr></table></figure>

<h2 id="5-5-lt-image-gt"><a href="#5-5-lt-image-gt" class="headerlink" title="5.5 &lt;image&gt;"></a>5.5 <code>&lt;image&gt;</code></h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;url&gt;</code></td>
<td><code>url(绝对/相对地址，地址不建议加引号)</code></td>
</tr>
<tr>
<td><code>&lt;gradient&gt;</code></td>
<td>使用渐变</td>
</tr>
<tr>
<td><code>element()</code></td>
<td>可以把页面元素当作背景图片</td>
</tr>
</tbody></table>
<h2 id="5-6-lt-position-gt"><a href="#5-6-lt-position-gt" class="headerlink" title="5.6 &lt;position&gt;"></a>5.6 <code>&lt;position&gt;</code></h2><ul>
<li><code>x轴 y轴</code>，如果只设置一个值，则另一个默认居中</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>位置关键字</code></td>
<td><code>left right top bottom center</code></td>
</tr>
<tr>
<td><code>&lt;length&gt;</code></td>
<td>指定长度</td>
</tr>
<tr>
<td><code>&lt;percentage&gt;</code></td>
<td>指定百分比</td>
</tr>
</tbody></table>
<h2 id="5-7-lt-gradient-gt"><a href="#5-7-lt-gradient-gt" class="headerlink" title="5.7 &lt;gradient&gt;"></a>5.7 <code>&lt;gradient&gt;</code></h2><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>linear-gradient()</code></td>
<td>线性渐变，颜色值沿着一条隐式的直线逐渐过渡</td>
</tr>
<tr>
<td><code>radial-gradient()</code></td>
<td>径向渐变，颜色值由一个中心点（原点）向外扩散并逐渐过渡到其他颜色值</td>
</tr>
<tr>
<td><code>repeating-linear-gradient()</code></td>
<td>重复线性渐变，重复多次渐变图案直到足够填满指定元素</td>
</tr>
<tr>
<td><code>repeating-radial-gradient()</code></td>
<td>重复径向渐变</td>
</tr>
<tr>
<td><code>conic-gradient()</code></td>
<td>锥形渐变，颜色值围绕圆逐渐过渡</td>
</tr>
</tbody></table>
<h3 id="1-线性渐变"><a href="#1-线性渐变" class="headerlink" title="1 线性渐变"></a>1 线性渐变</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&lt;angle&gt; | [to [ left | right ] || [ top | bottom ]] ,]?</span><br><span class="line">&lt;color-stop&gt; [, &lt;color-stop&gt;]+</span><br></pre></td></tr></table></figure>

<h4 id="1-第一行用于指定渐变方向"><a href="#1-第一行用于指定渐变方向" class="headerlink" title="1 第一行用于指定渐变方向"></a>1 第一行用于指定渐变方向</h4><h5 id="1-角度"><a href="#1-角度" class="headerlink" title="1 角度"></a>1 角度</h5><table>
<thead>
<tr>
<th>例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>0deg</code></td>
<td>向上，即 <code>to top</code></td>
</tr>
<tr>
<td><code>45deg</code></td>
<td>右上，即 <code>to right top</code></td>
</tr>
<tr>
<td><code>90deg</code></td>
<td>向右，即 <code>to right</code></td>
</tr>
<tr>
<td><code>180deg</code></td>
<td>向下，即 <code>to bottom</code></td>
</tr>
</tbody></table>
<h5 id="2-方向关键字"><a href="#2-方向关键字" class="headerlink" title="2 方向关键字"></a>2 方向关键字</h5><table>
<thead>
<tr>
<th>例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>to left</code></td>
<td>向左</td>
</tr>
<tr>
<td><code>to left top</code></td>
<td>左上</td>
</tr>
<tr>
<td><code>to left bottom</code></td>
<td>左下</td>
</tr>
<tr>
<td><code>to right</code></td>
<td>向右</td>
</tr>
<tr>
<td><code>to right top</code></td>
<td>右上</td>
</tr>
<tr>
<td><code>to right bottom</code></td>
<td>右下</td>
</tr>
<tr>
<td><code>to top</code></td>
<td>向上</td>
</tr>
<tr>
<td><code>to bottom</code></td>
<td>向下</td>
</tr>
</tbody></table>
<h4 id="2-第二行指定颜色以及颜色起止位置"><a href="#2-第二行指定颜色以及颜色起止位置" class="headerlink" title="2 第二行指定颜色以及颜色起止位置"></a>2 第二行指定颜色以及颜色起止位置</h4><table>
<thead>
<tr>
<th>例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;color&gt;, &lt;color&gt;, ...</code></td>
<td>至少有两个颜色，不指定位置则颜色平均分配</td>
</tr>
<tr>
<td><code>&lt;color&gt; &lt;length&gt;, &lt;color&gt; &lt;percentage&gt;, ...</code></td>
<td>可以使用长度或百分比指定颜色所占的范围</td>
</tr>
</tbody></table>
<h3 id="2-径向渐变"><a href="#2-径向渐变" class="headerlink" title="2 径向渐变"></a>2 径向渐变</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[ &lt;ending-shape&gt; || &lt;size&gt; ]? [ at &lt;position&gt; ]? ,]?</span><br><span class="line"> &lt;color-stop&gt; [, &lt;color-stop&gt;]+</span><br></pre></td></tr></table></figure>

<h4 id="1-第一行指定渐变形状大小和位置"><a href="#1-第一行指定渐变形状大小和位置" class="headerlink" title="1 第一行指定渐变形状大小和位置"></a>1 第一行指定渐变形状大小和位置</h4><h5 id="1-形状-ending-shape"><a href="#1-形状-ending-shape" class="headerlink" title="1 形状 ending-shape"></a>1 形状 <code>ending-shape</code></h5><table>
<thead>
<tr>
<th>形状</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>ellipse</code>（默认）</td>
<td>椭圆</td>
</tr>
<tr>
<td><code>circle</code></td>
<td>圆形</td>
</tr>
</tbody></table>
<h5 id="2-大小-size"><a href="#2-大小-size" class="headerlink" title="2 大小 size"></a>2 大小 <code>size</code></h5><table>
<thead>
<tr>
<th>大小</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>closest-side</code></td>
<td>近边</td>
</tr>
<tr>
<td><code>farthest-side</code></td>
<td>远边</td>
</tr>
<tr>
<td><code>closest-corner</code></td>
<td>近角</td>
</tr>
<tr>
<td><code>farthest-corner</code></td>
<td>远角</td>
</tr>
</tbody></table>
<h1 id="六-CSS-属性书写顺序"><a href="#六-CSS-属性书写顺序" class="headerlink" title="六 CSS 属性书写顺序"></a>六 CSS 属性书写顺序</h1><table>
<thead>
<tr>
<th>顺序</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>1 布局定位属性</td>
<td><code>display position float clear visibility overflow</code></td>
</tr>
<tr>
<td>2 自身属性</td>
<td><code>width height margin padding border background</code></td>
</tr>
<tr>
<td>3 文本属性</td>
<td><code>color font text-decoration text-align vertical-align white-space break-word</code></td>
</tr>
<tr>
<td>4 其它属性（CSS 3）</td>
<td><code>content cursor border-raduis box-shadow text-shadow 渐变</code></td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/Emmet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/Emmet/" class="post-title-link" itemprop="url">Emmet</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 21:00:11 / 修改时间：21:06:51" itemprop="dateCreated datePublished" datetime="2020-11-08T21:00:11+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li>Emmet (前身为 Zen Coding) 是一个能大幅度提高前端开发效率的一个工具</li>
<li>语法默认以 <code>tab</code> 结束</li>
</ol>
<h1 id="二-语法"><a href="#二-语法" class="headerlink" title="二 语法"></a>二 语法</h1><h2 id="2-1-Html"><a href="#2-1-Html" class="headerlink" title="2.1 Html"></a>2.1 Html</h2><h3 id="1-元素"><a href="#1-元素" class="headerlink" title="1 元素"></a>1 元素</h3><ol>
<li><p>快速生成Html模板</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!</span><br><span class="line">html:5</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用元素名称生成html标签：<code>元素名</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// div</span><br><span class="line">&lt;div&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>数量：<code>元素名*num</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// li*3</span><br><span class="line">&lt;li&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>自增符号：<code>$</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// div.$*3</span><br><span class="line">&lt;div class=&quot;1&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;2&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;3&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">// div.$$*3</span><br><span class="line">&lt;div class=&quot;01&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;02&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;03&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">// 使用`@`来表示从第几开始</span><br><span class="line">// div.$@4*3</span><br><span class="line">&lt;div class=&quot;4&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;5&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;6&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="2-层级"><a href="#2-层级" class="headerlink" title="2 层级"></a>2 层级</h3><ol>
<li><p>父子：<code>父元素&gt;子元素</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// div&gt;ul&gt;li&gt;a</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;ul&gt;</span><br><span class="line">		&lt;li&gt;</span><br><span class="line">			&lt;a&gt;&lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">	&lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>兄弟：<code>兄元素+弟元素</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// div+span+p</span><br><span class="line">&lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;span&gt;&lt;/span&gt;</span><br><span class="line">&lt;p&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意：会先算兄弟后算父子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// div&gt;p+a</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;p&gt;&lt;/p&gt;</span><br><span class="line">	&lt;a href=&quot;&quot;&gt;&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>优先级：<code>()</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// div&gt;(header&gt;ul&gt;li*2)+footer</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;header&gt;</span><br><span class="line">		&lt;ul&gt;</span><br><span class="line">			&lt;li&gt;&lt;/li&gt;</span><br><span class="line">			&lt;li&gt;&lt;/li&gt;</span><br><span class="line">		&lt;/ul&gt;</span><br><span class="line">	&lt;/header&gt;</span><br><span class="line">	&lt;footer&gt;&lt;/footer&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="3-属性"><a href="#3-属性" class="headerlink" title="3 属性"></a>3 属性</h3><ol>
<li><p>创建带 id 的标签：<code>元素名#id</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// div#test</span><br><span class="line">&lt;div id=&quot;test&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建带 class 的标签：<code>元素名.class</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// div.test</span><br><span class="line">&lt;div class=&quot;test&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">// div.test1.test2.test3</span><br><span class="line">&lt;div class=&quot;test1 test2 test3&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建带属性的标签：<code>元素名[属性名=&#39;属性值&#39;]</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// div[girl=&quot;beauty&quot;]</span><br><span class="line">&lt;div girl=&quot;beauty&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建带内容的标签：<code>元素名{内容}</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// div&#123;haha&#125;</span><br><span class="line">&lt;div&gt;haha&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>隐式标签</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// #test</span><br><span class="line">&lt;div id=&quot;test&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">// .test</span><br><span class="line">&lt;div class=&quot;test&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">// ul&gt;.class</span><br><span class="line"> &lt;ul&gt;</span><br><span class="line">	&lt;li class=&quot;class&quot;&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="2-2-CSS"><a href="#2-2-CSS" class="headerlink" title="2.2 CSS"></a>2.2 CSS</h2><ol>
<li><p>常见的CSS样式可以使用省略写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// w20</span><br><span class="line">width: 20px;</span><br></pre></td></tr></table></figure>

</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/UI/HTML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/UI/HTML/" class="post-title-link" itemprop="url">HTML</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 20:59:42 / 修改时间：21:07:02" itemprop="dateCreated datePublished" datetime="2020-11-08T20:59:42+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li><p>HTML（Hyper Text Markup Language）：超文本标记语言</p>
</li>
<li><p>XHTML：可扩展超文本标记语言，是更严格更纯净的 HTML 版本</p>
</li>
<li><p>WEB 标准：W3C 组织及其它标准化组织制定的一系列标准的集合</p>
<ul>
<li><p>结构：Html</p>
</li>
<li><p>表现：Css</p>
</li>
<li><p>行为：Javascript</p>
</li>
</ul>
</li>
</ol>
<h1 id="二-标签"><a href="#二-标签" class="headerlink" title="二 标签"></a>二 标签</h1><h2 id="2-1-文档声明"><a href="#2-1-文档声明" class="headerlink" title="2.1 文档声明"></a>2.1 文档声明</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 告诉浏览器使用哪个 Html 版本显示 --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-结构标签"><a href="#2-2-结构标签" class="headerlink" title="2.2 结构标签"></a>2.2 结构标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-lt-html-gt"><a href="#1-lt-html-gt" class="headerlink" title="1 &lt;html&gt;"></a>1 <code>&lt;html&gt;</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>lang 属性<ol>
<li>作用<ul>
<li>搜索引擎无法判断页面中的内容是什么语言，需要我们告诉它</li>
<li>浏览器会将读取到的页面语言和本地语言进行比较判断，如果一致，不做处理，否则提示是否需要翻译（如果有此功能），有时候明明页面是中文由于设置的 <code>lang=&quot;en&quot;</code>，还会提示是否翻译，就是此原因</li>
</ul>
</li>
<li>取值<ul>
<li>英文<ul>
<li><code>en</code></li>
</ul>
</li>
<li>中文<ul>
<li><code>zh-CN</code> 用的最多其实已过时</li>
<li><code>zh-Hans</code> 简体中文</li>
<li><code>zh-cmn-Hans</code> 以简体中文书写的普通话用词</li>
<li><code>zh-yue-Hans</code> 以简体中文书写的粤语用词</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="2-lt-head-gt"><a href="#2-lt-head-gt" class="headerlink" title="2 &lt;head&gt;"></a>2 <code>&lt;head&gt;</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 文档元数据定义在 head 标签中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		width：视口 viewport 宽度</span></span><br><span class="line"><span class="comment">		initial-scale：初始缩放比</span></span><br><span class="line"><span class="comment">		maximum-scale：最大缩放比</span></span><br><span class="line"><span class="comment">		minimum-scale：最小缩放比</span></span><br><span class="line"><span class="comment">		user-scalable：是否可以缩放</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximu-scale=1.0, minimum-scale=1.0, user-scalable=n0"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">""</span> <span class="attr">content</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">"此页面中所有相对 URL 的根 URL"</span> <span class="attr">target</span>=<span class="string">"此页面新连接的打开方式 _self 或 _blank"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-lt-body-gt-中的标签"><a href="#2-4-lt-body-gt-中的标签" class="headerlink" title="2.4 &lt;body&gt; 中的标签"></a>2.4 <code>&lt;body&gt;</code> 中的标签</h2><h3 id="1-语义化标签"><a href="#1-语义化标签" class="headerlink" title="1 语义化标签"></a>1 语义化标签</h3><p><img src="https://github.com/anyeansan/pics/raw/master/CS/UI/Html/yuyibq.png" alt=""></p>
<table>
<thead>
<tr>
<th>标签</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;header&gt;</code></td>
<td>头部标签</td>
</tr>
<tr>
<td><code>&lt;nav&gt;</code></td>
<td>导航栏标签</td>
</tr>
<tr>
<td><code>&lt;main&gt;</code></td>
<td>文档主体，只能有一个</td>
</tr>
<tr>
<td><code>&lt;artical&gt;</code></td>
<td>内容标签</td>
</tr>
<tr>
<td><code>&lt;section&gt;</code></td>
<td>区块标签</td>
</tr>
<tr>
<td><code>&lt;aside&gt;</code></td>
<td>侧边栏标签</td>
</tr>
<tr>
<td><code>&lt;footer&gt;</code></td>
<td>尾部标签</td>
</tr>
</tbody></table>
<h3 id="2-排版标签"><a href="#2-排版标签" class="headerlink" title="2 排版标签"></a>2 排版标签</h3><table>
<thead>
<tr>
<th>标签</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;!-- --&gt;</code></td>
<td>注释</td>
</tr>
<tr>
<td><code>&lt;br&gt;</code></td>
<td>换行</td>
</tr>
<tr>
<td><code>&lt;hr&gt;</code></td>
<td>横线</td>
</tr>
<tr>
<td><code>&lt;h1&gt;~&lt;h6&gt;</code></td>
<td>标题标签</td>
</tr>
<tr>
<td><code>&lt;div&gt;</code></td>
<td>块标签</td>
</tr>
<tr>
<td><code>&lt;span&gt;</code></td>
<td>行内标签</td>
</tr>
<tr>
<td><code>&lt;p&gt;</code></td>
<td>段落标签</td>
</tr>
</tbody></table>
<h3 id="3-文本格式化标签"><a href="#3-文本格式化标签" class="headerlink" title="3 文本格式化标签"></a>3 文本格式化标签</h3><table>
<thead>
<tr>
<th>标签</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;strong&gt;</code></td>
<td>强调，加粗显示</td>
</tr>
<tr>
<td><code>&lt;em&gt;</code></td>
<td>着重，斜体显示</td>
</tr>
<tr>
<td><code>&lt;del&gt;</code></td>
<td>删除线</td>
</tr>
<tr>
<td><code>&lt;ins&gt;</code></td>
<td>下划线</td>
</tr>
<tr>
<td><code>&lt;pre&gt;</code></td>
<td>原样显示文本内容包括空白、换行等</td>
</tr>
<tr>
<td><code>&lt;abbr&gt;</code></td>
<td>缩写</td>
</tr>
<tr>
<td><code>&lt;sub&gt;</code></td>
<td>下标</td>
</tr>
<tr>
<td><code>&lt;sup&gt;</code></td>
<td>上标</td>
</tr>
<tr>
<td><code>&lt;blockquote&gt;</code></td>
<td>块引用</td>
</tr>
<tr>
<td><code>&lt;q&gt;</code></td>
<td>行内引用文本</td>
</tr>
<tr>
<td><code>&lt;progress&gt;</code></td>
<td>进度条</td>
</tr>
</tbody></table>
<h3 id="3-图片标签"><a href="#3-图片标签" class="headerlink" title="3 图片标签"></a>3 图片标签</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"图片地址"</span> <span class="attr">alt</span>=<span class="string">"图片无法正常显示时的替换文字"</span> <span class="attr">title</span>=<span class="string">"鼠标悬浮时的提示文字"</span> <span class="attr">width</span>=<span class="string">""</span> <span class="attr">height</span>=<span class="string">""</span> <span class="attr">border</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-超链接标签"><a href="#4-超链接标签" class="headerlink" title="4 超链接标签"></a>4 超链接标签</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 超链接标签可以用在网页中的各种元素，如文本、图像、表格、音频、视频等等 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">target</span>=<span class="string">""</span> <span class="attr">title</span>=<span class="string">"链接提示文本"</span>&gt;</span> 链接显示文本 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>href</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>url</code></td>
<td>外部链接：如<code>&lt;a href=&quot;www.baidu.com&quot;&gt;</code><br>内部链接：如 <code>&lt;a href=&quot;index.html&quot;&gt;</code><br>下载链接：url 是一个文件（如 exe, zip…）</td>
</tr>
<tr>
<td><code>#id</code></td>
<td>锚点，跳转到当前页面指定位置</td>
</tr>
<tr>
<td><code>#</code></td>
<td>跳转到当前页面</td>
</tr>
<tr>
<td><code>javascript:void(0);</code></td>
<td>不跳转</td>
</tr>
<tr>
<td><code>javascript:;</code></td>
<td>不跳转</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>target</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>_selt（默认）</code></td>
<td>当前窗口打开</td>
</tr>
<tr>
<td><code>_blank</code></td>
<td>新窗口打开</td>
</tr>
<tr>
<td><code>_parent</code></td>
<td>父级窗口打开</td>
</tr>
<tr>
<td><code>_top</code></td>
<td>祖先窗口打开</td>
</tr>
</tbody></table>
<h3 id="5-表格标签"><a href="#5-表格标签" class="headerlink" title="5 表格标签"></a>5 表格标签</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">cellspacing</span>=<span class="string">"单元格边框之间的距离"</span> <span class="attr">cellpadding</span>=<span class="string">"单元格内容和边框的距离"</span> <span class="attr">align</span>=<span class="string">"水平对齐方式"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">caption</span>&gt;</span>表格标题<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">th</span>&gt;</span>表头单元格，内容默认居中，加粗<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span>	</span><br><span class="line">	<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"列合并"</span> <span class="attr">rowspan</span>=<span class="string">"行合并"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>使用<code>&lt;thead&gt;&lt;tbody&gt;&lt;tfoot&gt;</code>的好处是规定位置，即使代码的顺序是乱的，显示也是正确的。</li>
<li><code>&lt;thead&gt;&lt;tfoot&gt;</code>可以没有，<code>&lt;tbody&gt;</code>不写也存在，且可以有多个</li>
</ol>
<h3 id="6-列表标签"><a href="#6-列表标签" class="headerlink" title="6 列表标签"></a>6 列表标签</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1 无序列表 unorder list --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span>&gt;</span>ul中只能容纳li，li中可以容纳所有元素<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	...</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2 有序列表 order list --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">type</span>=<span class="string">"1、A、a、I、i"</span> <span class="attr">start</span>=<span class="string">"首项从第几个开始"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	...</span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 3 定义列表 definition list --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dt</span>&gt;</span>名词：孙悟空<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dd</span>&gt;</span>解释1：美猴王<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dd</span>&gt;</span>解释2：齐天大圣<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dd</span>&gt;</span>解释3：斗战胜佛<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-表单标签"><a href="#7-表单标签" class="headerlink" title="7 表单标签"></a>7 表单标签</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">""</span> <span class="attr">name</span>=<span class="string">"提交key"</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"提交key"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"提交值"</span> <span class="attr">selected</span>=<span class="string">""</span>&gt;</span>页面显示值<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"提交key"</span> <span class="attr">cols</span>=<span class="string">"每行字符数"</span> <span class="attr">rows</span>=<span class="string">"显示的行数"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h4><table>
<thead>
<tr>
<th>标签</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;label&gt;</code></td>
<td>用于描述表单元素，点击时可以使表单元素获取焦点</td>
</tr>
<tr>
<td><code>&lt;button&gt;</code></td>
<td>按钮</td>
</tr>
<tr>
<td><code>&lt;input&gt;</code></td>
<td>表单交互式元素</td>
</tr>
<tr>
<td><code>&lt;select&gt;</code></td>
<td>下拉菜单</td>
</tr>
<tr>
<td><code>&lt;textarea&gt;</code></td>
<td>文本域</td>
</tr>
<tr>
<td><code>&lt;datalist&gt;</code></td>
<td>为表单输入框准备一些选项列表</td>
</tr>
</tbody></table>
<h4 id="2-lt-form-gt"><a href="#2-lt-form-gt" class="headerlink" title="2 &lt;form&gt;"></a>2 <code>&lt;form&gt;</code></h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>action</code></td>
<td>提交 url 地址</td>
</tr>
<tr>
<td><code>method</code></td>
<td>提交方式，默认 <code>get</code></td>
</tr>
<tr>
<td><code>enctype</code></td>
<td><code>post</code> 提交时表单内容提交给服务器的 MIME 类型</td>
</tr>
<tr>
<td><code>name</code></td>
<td>表单名称，用于区分同一个页面中的多个表单</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>enctype</code> 取值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>application/x-www-form-urlencoded</code>（默认）</td>
<td>在发送前编码所有字符，空格转换为 <code>+</code> 加号 ，特殊字符转换为 <code>ASCII HEX</code> 值</td>
</tr>
<tr>
<td><code>multipart/form-data</code></td>
<td>不对字符编码，用于文件上传</td>
</tr>
<tr>
<td><code>text/plain</code></td>
<td>空格转换为 <code>+</code> 加号，但不对特殊字符编码</td>
</tr>
</tbody></table>
<h4 id="3-lt-label-gt"><a href="#3-lt-label-gt" class="headerlink" title="3 &lt;label&gt;"></a>3 <code>&lt;label&gt;</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1 直接包裹要描述的表单元素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">	描述 <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2 使用 for-id --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"test"</span>&gt;</span>描述<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-lt-input-gt"><a href="#4-lt-input-gt" class="headerlink" title="4 &lt;input&gt;"></a>4 <code>&lt;input&gt;</code></h4><h5 id="1-属性"><a href="#1-属性" class="headerlink" title="1 属性"></a>1 属性</h5><table>
<thead>
<tr>
<th>属性</th>
<th>适用于</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>type</code></td>
<td><code>All</code></td>
<td>表单类型，默认为 <code>text</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>All</code></td>
<td>提交的键名</td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>All</code></td>
<td>默认值</td>
</tr>
<tr>
<td><code>disabled</code></td>
<td><code>All</code></td>
<td>表单控件是否被禁用</td>
</tr>
<tr>
<td><code>checked</code></td>
<td><code>radio checkbox</code></td>
<td>单/复选框是否选中</td>
</tr>
<tr>
<td><code>selecked</code></td>
<td><code>option</code></td>
<td>下拉框是否选中</td>
</tr>
<tr>
<td><code>placeholder</code></td>
<td><code>text password ...</code></td>
<td>提示文本内容，得到焦点不会消失，一输入值就消失</td>
</tr>
<tr>
<td><code>multiple</code></td>
<td><code>file email select</code></td>
<td>是否允许多选</td>
</tr>
<tr>
<td><code>required</code></td>
<td><code>almost All</code></td>
<td>必须输入</td>
</tr>
<tr>
<td><code>readonly</code></td>
<td><code>almost All</code></td>
<td>只读，不能修改值，可提交到后台</td>
</tr>
<tr>
<td><code>minlength</code></td>
<td><code>text password ...</code></td>
<td><code>value</code> 的最小长度（最小字符数目）</td>
</tr>
<tr>
<td><code>maxlength</code></td>
<td><code>text password ...</code></td>
<td><code>value</code> 的最大长度（最大字符数目）</td>
</tr>
<tr>
<td><code>autocomplete</code></td>
<td><code>All</code></td>
<td>表单的自动填充功能，<code>off / on</code></td>
</tr>
</tbody></table>
<h5 id="2-type-属性"><a href="#2-type-属性" class="headerlink" title="2 type 属性"></a>2 type 属性</h5><table>
<thead>
<tr>
<th>type</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>text（默认）</code></td>
<td>文本框</td>
</tr>
<tr>
<td><code>password</code></td>
<td>密码框</td>
</tr>
<tr>
<td><code>radio</code></td>
<td>单选框，<code>name</code> 相同的是一个组，<code>value</code> 为提交值</td>
</tr>
<tr>
<td><code>checkbox</code></td>
<td>复选框，<code>name</code> 相同的是一个组，<code>value</code> 为提交值</td>
</tr>
<tr>
<td><code>file</code></td>
<td>上传文件，<code>multiple=&quot;multiple&quot;</code> 支持多选</td>
</tr>
<tr>
<td><code>button</code></td>
<td>没有默认行为的按钮，<code>value</code> 显示值</td>
</tr>
<tr>
<td><code>image</code></td>
<td>图片提交按钮</td>
</tr>
<tr>
<td><code>hidden</code></td>
<td>隐藏域</td>
</tr>
<tr>
<td><code>submit</code></td>
<td>提交按钮，不指定服务端会提交到当前页面</td>
</tr>
<tr>
<td><code>reset</code></td>
<td>复位按钮</td>
</tr>
<tr>
<td><code>number</code></td>
<td>数字框</td>
</tr>
<tr>
<td><code>tel</code></td>
<td>用于输入电话号码的控件</td>
</tr>
<tr>
<td><code>search</code></td>
<td>搜索框</td>
</tr>
<tr>
<td><code>email</code></td>
<td>邮件框</td>
</tr>
<tr>
<td><code>url</code></td>
<td>URL 框</td>
</tr>
<tr>
<td><code>color</code></td>
<td>颜色选择框</td>
</tr>
<tr>
<td><code>datetime-local</code></td>
<td>输入日期和时间的控件</td>
</tr>
<tr>
<td><code>date</code></td>
<td>日期</td>
</tr>
<tr>
<td><code>time</code></td>
<td>时间</td>
</tr>
<tr>
<td><code>month</code></td>
<td>月</td>
</tr>
<tr>
<td><code>week</code></td>
<td>周</td>
</tr>
</tbody></table>
<h5 id="3-表单提交方式"><a href="#3-表单提交方式" class="headerlink" title="3 表单提交方式"></a>3 表单提交方式</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1 如果设置了name，按钮数据也会提交到后台，如果有多个表单项可以判断是哪个表单提交的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">"点我提交"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2 html5 推荐使用&lt;button&gt; 而不是表单的 &lt;input type=button&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>点我提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 3 图片也能提交 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"image"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-lt-select-gt"><a href="#5-lt-select-gt" class="headerlink" title="5 &lt;select&gt;"></a>5 <code>&lt;select&gt;</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"提交值"</span>&gt;</span>显示值<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	// optfroup 仅仅是将 option 分了一下组</span><br><span class="line">	<span class="tag">&lt;<span class="name">optgroup</span> <span class="attr">label</span>=<span class="string">"体育"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"lanqiu"</span>&gt;</span>篮球<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"zuqiu"</span>&gt;</span>足球<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"wangqiu"</span> <span class="attr">selected</span>&gt;</span>网球<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">optgroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-lt-button-gt"><a href="#5-lt-button-gt" class="headerlink" title="5 &lt;button&gt;"></a>5 <code>&lt;button&gt;</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>type</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>submit（默认）</code></td>
<td>提交按钮</td>
</tr>
<tr>
<td><code>reset</code></td>
<td>重置按钮</td>
</tr>
<tr>
<td><code>button</code></td>
<td>纯按钮，没有默认行为</td>
</tr>
</tbody></table>
<h4 id="6-lt-textarea-gt"><a href="#6-lt-textarea-gt" class="headerlink" title="6 &lt;textarea&gt;"></a>6 <code>&lt;textarea&gt;</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">cols</span>=<span class="string">"每行中的字符数"</span> <span class="attr">rows</span>=<span class="string">"显示的行数"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-lt-datalist-gt"><a href="#7-lt-datalist-gt" class="headerlink" title="7 &lt;datalist&gt;"></a>7 <code>&lt;datalist&gt;</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 表示从已有数据中选择数据，而不是自定义输入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">list</span>=<span class="string">"dataID"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">datalist</span> <span class="attr">id</span>=<span class="string">"dataID"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">datalist</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-多媒体标签"><a href="#8-多媒体标签" class="headerlink" title="8 多媒体标签"></a>8 多媒体标签</h3><h4 id="1-lt-audio-gt"><a href="#1-lt-audio-gt" class="headerlink" title="1 &lt;audio&gt;"></a>1 <code>&lt;audio&gt;</code></h4><table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>src</code></td>
<td><code>url</code></td>
<td>音频源</td>
</tr>
<tr>
<td><code>autoplay</code></td>
<td><code>autoplay</code></td>
<td>自动播放，默认 <code>false</code></td>
</tr>
<tr>
<td><code>controls</code></td>
<td><code>controls</code></td>
<td>显示控件</td>
</tr>
<tr>
<td><code>loop</code></td>
<td><code>loop</code></td>
<td>循环播放</td>
</tr>
<tr>
<td><code>muted</code></td>
<td><code>muted</code></td>
<td>静音，默认 <code>false</code></td>
</tr>
<tr>
<td><code>preload</code></td>
<td><code>metadata</code></td>
<td>预加载</td>
</tr>
<tr>
<td><code>volume</code></td>
<td><code>0.0~1.0</code></td>
<td>音量</td>
</tr>
</tbody></table>
<h4 id="2-lt-video-gt"><a href="#2-lt-video-gt" class="headerlink" title="2 &lt;video&gt;"></a>2 <code>&lt;video&gt;</code></h4><table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>src</code></td>
<td><code>url</code></td>
<td>视频源</td>
</tr>
<tr>
<td><code>autoplay</code></td>
<td><code>autoplay</code></td>
<td>自动播放，默认 <code>false</code>，需要静音才生效</td>
</tr>
<tr>
<td><code>controls</code></td>
<td><code>controls</code></td>
<td>显示控件</td>
</tr>
<tr>
<td><code>loop</code></td>
<td><code>loop</code></td>
<td>循环播放</td>
</tr>
<tr>
<td><code>muted</code></td>
<td><code>muted</code></td>
<td>静音，默认 <code>false</code></td>
</tr>
<tr>
<td><code>poster</code></td>
<td><code>url</code></td>
<td>视频封面图</td>
</tr>
<tr>
<td><code>preload</code></td>
<td><code>metadata</code></td>
<td>预加载</td>
</tr>
<tr>
<td><code>width</code></td>
<td><code>px</code></td>
<td>视频宽度</td>
</tr>
<tr>
<td><code>height</code></td>
<td><code>px</code></td>
<td>视频高度</td>
</tr>
</tbody></table>
<h1 id="三-特殊字符"><a href="#三-特殊字符" class="headerlink" title="三 特殊字符"></a>三 特殊字符</h1><table>
<thead>
<tr>
<th>字符</th>
<th>名称</th>
<th>字符代码</th>
<th>码点</th>
</tr>
</thead>
<tbody><tr>
<td>&nbsp;</td>
<td>空格</td>
<td><code>&amp;nbsp;</code></td>
<td><code>&amp;#160;</code></td>
</tr>
<tr>
<td>&gt;</td>
<td>大于号</td>
<td><code>&amp;gt;</code></td>
<td><code>&amp;#62;</code></td>
</tr>
<tr>
<td>&lt;</td>
<td>小于号</td>
<td><code>&amp;lt;</code></td>
<td><code>&amp;#60;</code></td>
</tr>
<tr>
<td>&amp;</td>
<td>与</td>
<td><code>&amp;amp;</code></td>
<td><code>&amp;#38;</code></td>
</tr>
<tr>
<td>“</td>
<td>双引号</td>
<td><code>&amp;quot;</code></td>
<td><code>&amp;#34;</code></td>
</tr>
<tr>
<td>‘</td>
<td>单引号</td>
<td>&nbsp;</td>
<td><code>&amp;#39;</code></td>
</tr>
<tr>
<td>&#96;</td>
<td>反引号</td>
<td>&nbsp;</td>
<td><code>&amp;#96;</code></td>
</tr>
<tr>
<td>&#124;</td>
<td>竖线</td>
<td>&nbsp;</td>
<td><code>&amp;#124</code></td>
</tr>
<tr>
<td>©</td>
<td>版权</td>
<td><code>&amp;copy;</code></td>
<td><code>&amp;#169;</code></td>
</tr>
<tr>
<td>®</td>
<td>注册</td>
<td><code>&amp;reg;</code></td>
<td><code>&amp;#174;</code></td>
</tr>
<tr>
<td>™</td>
<td>商标</td>
<td><code>&amp;trade;</code></td>
<td><code>&amp;#8482;</code></td>
</tr>
<tr>
<td>℃</td>
<td>摄氏度</td>
<td><code>&amp;deg;</code></td>
<td>&nbsp;</td>
</tr>
<tr>
<td>±</td>
<td>正负</td>
<td><code>&amp;plusmn;</code></td>
<td>&nbsp;</td>
</tr>
<tr>
<td>×</td>
<td>乘号</td>
<td><code>&amp;times;</code></td>
<td><code>&amp;#215;</code></td>
</tr>
<tr>
<td>÷</td>
<td>除号</td>
<td><code>&amp;divide;</code></td>
<td><code>&amp;#247;</code></td>
</tr>
</tbody></table>
<h1 id="四-前端字符的表示方式"><a href="#四-前端字符的表示方式" class="headerlink" title="四 前端字符的表示方式"></a>四 前端字符的表示方式</h1><ol>
<li>Html 中使用 <code>&amp;#码点;</code><ul>
<li>码点<ul>
<li>指字符在编码表中对应的编码值</li>
<li>Unicode 采用十六制书写并加上前缀 <code>\u</code></li>
</ul>
</li>
</ul>
</li>
<li>CSS 伪元素的 <code>content</code> 属性，直接使用 <code>\u码点</code></li>
<li>JavaScript 文件中为防止乱码转义，使用 <code>\u码点</code></li>
<li><code>unicode-range</code> 是 <code>U+码点</code></li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/%E6%A1%86%E6%9E%B6/SSM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/%E6%A1%86%E6%9E%B6/SSM/" class="post-title-link" itemprop="url">SSM</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 20:58:13 / 修改时间：20:58:28" itemprop="dateCreated datePublished" datetime="2020-11-08T20:58:13+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/Frame/" itemprop="url" rel="index">
                    <span itemprop="name">Frame</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-包"><a href="#一-包" class="headerlink" title="一 包"></a>一 包</h1><ol>
<li><p><code>Spring + SpringMVC</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">01 spring-core</span><br><span class="line">02 spring-beans</span><br><span class="line">03 spring-context</span><br><span class="line">04 spring-expression</span><br><span class="line">05 spring-jcl（commons-logging）</span><br><span class="line">06 spring-aop</span><br><span class="line">07 spring-aspects</span><br><span class="line">08 aspectjweaver</span><br><span class="line">09 spring-web</span><br><span class="line">10 spring-webmvc</span><br><span class="line">11 spring-tx</span><br><span class="line">12 spring-jdbc</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>mybatis</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">01 mybatis</span><br><span class="line">02 mybatis-spring</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>SQL</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">01 连接池：c3p0 dbcp druid ...</span><br><span class="line">02 数据库驱动</span><br></pre></td></tr></table></figure>
</li>
<li><p>日志</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log4j2 slf4j ...</span><br></pre></td></tr></table></figure>
</li>
<li><p>JSON</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JackSon GSON FastSon ...</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="二-Spring-Springmvc"><a href="#二-Spring-Springmvc" class="headerlink" title="二 Spring + Springmvc"></a>二 Spring + Springmvc</h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><ol>
<li>SpringMVC 扫描控制层</li>
<li>Spring 扫描所有并排除控制层，避免创建两次 Bean</li>
<li>Spring 的 IOC 容器包含 SpringMVC 的 IOC 容器，即 Spring 的容器是父级<ol>
<li>SpringMVC 的 IOC 容器可以获取 Spring IOC 容器中的 Bean</li>
<li>Spring 的 IOC 容器不能获取 SpringMVC IOC 容器中的 Bean</li>
</ol>
</li>
</ol>
<h2 id="2-2-配置"><a href="#2-2-配置" class="headerlink" title="2.2 配置"></a>2.2 配置</h2><h3 id="1-web-xml"><a href="#1-web-xml" class="headerlink" title="1 web.xml"></a>1 <code>web.xml</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--1 配置 ContextLoaderListener--&gt;</span><br><span class="line">&lt;listener&gt;</span><br><span class="line">    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br><span class="line">&lt;/listener&gt;</span><br><span class="line">&lt;context-param&gt;</span><br><span class="line">    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">    &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;</span><br><span class="line">&lt;/context-param&gt;</span><br><span class="line">&lt;!--2 配置 DispatcherServlet --&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;classpath:springMVC.xml&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--3 配置编码过滤器 CharacterEncodingFilter--&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;UTF-8&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--4 配置 RestFul 请求处理过滤器--&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">    &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-springMVC-xml"><a href="#2-springMVC-xml" class="headerlink" title="2 springMVC.xml"></a>2 <code>springMVC.xml</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 1 扫描控制层--&gt;</span><br><span class="line">&lt;context:component-scan base-package=&quot;cn.an.controller&quot;/&gt;</span><br><span class="line">&lt;!-- 2 注解驱动--&gt;</span><br><span class="line">&lt;mvc:annotation-driven/&gt;</span><br><span class="line">&lt;!-- 3 静态资源--&gt;</span><br><span class="line">&lt;mvc:default-servlet-handler/&gt;</span><br><span class="line">&lt;!-- 4 视图解析器--&gt;</span><br><span class="line">&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/pages/&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-applicationContext-xml"><a href="#3-applicationContext-xml" class="headerlink" title="3 applicationContext.xml"></a>3 <code>applicationContext.xml</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 扫描控制层之外的注解--&gt;</span><br><span class="line">&lt;context:component-scan base-package=&quot;cn.an&quot;&gt;</span><br><span class="line">    &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</span><br><span class="line">&lt;/context:component-scan&gt;</span><br></pre></td></tr></table></figure>

<h1 id="三-Spring-Mybatis"><a href="#三-Spring-Mybatis" class="headerlink" title="三 Spring + Mybatis"></a>三 Spring + Mybatis</h1><h2 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h2><ol>
<li>Mybatis 只配置自己特有的东西<ol>
<li>主配置： <code>setting ...</code></li>
<li>映射配置</li>
</ol>
</li>
<li>交给 Spring 管理：<ol>
<li>数据源和事务</li>
<li><code>SqlSession</code> 对象的创建和管理<ul>
<li><code>mybatis-spring</code> 中的 <code>SqlSessionFactoryBean</code></li>
</ul>
</li>
<li><code>Mapper</code> 接口代理实现类对象的创建和管理<ul>
<li><code>mybatis-spring</code> 中的 <code>MapperScannerConfigurer</code></li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 id="3-2-配置"><a href="#3-2-配置" class="headerlink" title="3.2 配置"></a>3.2 配置</h2><h3 id="1-mybatis-config-xml"><a href="#1-mybatis-config-xml" class="headerlink" title="1 mybatis-config.xml"></a>1 <code>mybatis-config.xml</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;settings&gt;</span><br><span class="line">        &lt;!--开启懒加载 --&gt;</span><br><span class="line">        &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;!--开启时，任一方法的调用都会加载该对象的所有延迟加载属性 --&gt;</span><br><span class="line">        &lt;setting name=&quot;aggressiveLazyLoading&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;!--开启数据库下划线和Java属性驼峰命名的映射--&gt;</span><br><span class="line">        &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;/settings&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-applicationContext-xml"><a href="#2-applicationContext-xml" class="headerlink" title="2 applicationContext.xml"></a>2 <code>applicationContext.xml</code></h3><h4 id="1-数据源和事务"><a href="#1-数据源和事务" class="headerlink" title="1 数据源和事务"></a>1 数据源和事务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 1 引入资源文件--&gt;</span><br><span class="line">&lt;context:property-placeholder location=&quot;classpath:druid.properties&quot;/&gt;</span><br><span class="line">&lt;!-- 2 配置数据源--&gt;</span><br><span class="line">&lt;bean id=&quot;druidDataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;druid.driverClassName&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;url&quot; value=&quot;$&#123;druid.url&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;username&quot; value=&quot;$&#123;druid.username&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;password&quot; value=&quot;$&#123;druid.password&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;initialSize&quot; value=&quot;$&#123;druid.initialSize&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;maxActive&quot; value=&quot;$&#123;druid.maxActive&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;minIdle&quot; value=&quot;$&#123;druid.minIdle&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;maxWait&quot; value=&quot;$&#123;druid.maxWait&#125;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;!-- 3 事务--&gt;</span><br><span class="line">&lt;!-- 3.1 事务管理器--&gt;</span><br><span class="line">&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;dataSource&quot; ref=&quot;druidDataSource&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;!--3.2 开启事务注解驱动--&gt;</span><br><span class="line">&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-管理-SqlSession"><a href="#2-管理-SqlSession" class="headerlink" title="2 管理 SqlSession"></a>2 管理 <code>SqlSession</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;</span><br><span class="line">    &lt;!--1 数据源--&gt;</span><br><span class="line">    &lt;property name=&quot;dataSource&quot; ref=&quot;druidDataSource&quot;/&gt;</span><br><span class="line">    &lt;!--2 mybatis 主配置文件位置--&gt;</span><br><span class="line">    &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;/&gt;</span><br><span class="line">    &lt;!--3 mybatis 映射配置文件位置--&gt;</span><br><span class="line">    &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:cn/an/mapper/*.xml&quot;/&gt;</span><br><span class="line">    &lt;!--4 为包及其子包配置别名--&gt;</span><br><span class="line">    &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-管理-Mapper-接口代理实现类"><a href="#3-管理-Mapper-接口代理实现类" class="headerlink" title="3 管理 Mapper 接口代理实现类"></a>3 管理 <code>Mapper</code> 接口代理实现类</h4><h5 id="1-单个配置"><a href="#1-单个配置" class="headerlink" title="1 单个配置"></a>1 单个配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean class=&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;&gt;</span><br><span class="line">	// 指定 Mapper 接口</span><br><span class="line">    &lt;property name=&quot;mapperInterface&quot; value=&quot;&quot;/&gt;</span><br><span class="line">    // 注入 SqlSessionFactory</span><br><span class="line">    &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-批量配置"><a href="#2-批量配置" class="headerlink" title="2 批量配置"></a>2 批量配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</span><br><span class="line">	// 为包下所有 Mapper 接口生成代理实现类，并由 Spring 容器管理</span><br><span class="line">    &lt;property name=&quot;basePackage&quot; value=&quot;cn.an.mapper&quot;/&gt;</span><br><span class="line">    // 注入 SqlSessionFactory</span><br><span class="line">    &lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>代理实现类默认 <code>BeanID</code> 为接口名首字母小写</li>
<li><code>SqlSessionFactory</code> 全局只有一个，所以可以省略</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/%E6%A1%86%E6%9E%B6/SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/%E6%A1%86%E6%9E%B6/SpringMVC/" class="post-title-link" itemprop="url">SpringMVC</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 20:56:26 / 修改时间：20:57:16" itemprop="dateCreated datePublished" datetime="2020-11-08T20:56:26+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/Frame/" itemprop="url" rel="index">
                    <span itemprop="name">Frame</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li>轻量级的控制层 MVC 框架</li>
<li>与 Spring 无缝结合，功能强大：RESTful，数据验证，格式化，本地化，主题…</li>
</ol>
<h1 id="二-执行流程"><a href="#二-执行流程" class="headerlink" title="二 执行流程"></a>二 执行流程</h1><p><img src="https://github.com/anyeansan/pics/raw/master/CS/Frame/SpringMVC/SpringMVC%E6%B5%81%E7%A8%8B.png" alt=""></p>
<ol>
<li>客户端发送请求，<code>DispatcherServlet</code> 捕获请求</li>
<li><code>DispatcherServlet</code>  根据请求从映射器获取 <code>Handler</code> 以及 <code>Handler</code> 对应的拦截器，以 <code>HandlerExcutionChain</code> 的形式返回<ol>
<li>映射器中存储了控制器及其能够处理的请求信息</li>
<li>如果映射不存在，如静态资源，会判断是否配置了 <code>mvc:default-servlet-handler</code></li>
</ol>
</li>
<li><code>DispatcherServlet</code>  根据 <code>Handler</code> 选择适配器执行它，并返回 <code>ModelAndView</code><ol>
<li>正向执行拦截器链的 <code>preHandler()</code></li>
<li>执行 <code>Handler</code></li>
<li>逆向执行拦截器链的 <code>postHandler()</code></li>
</ol>
</li>
<li>使用视图解析器解析 <code>ModelAndView</code></li>
<li>渲染视图</li>
<li>逆向执行拦截器链的 <code>AfterCompletion()</code></li>
<li>响应</li>
</ol>
<h1 id="三-前端控制器-DispatcherServlet"><a href="#三-前端控制器-DispatcherServlet" class="headerlink" title="三 前端控制器 DispatcherServlet"></a>三 前端控制器 <code>DispatcherServlet</code></h1><h2 id="3-1-配置"><a href="#3-1-配置" class="headerlink" title="3.1 配置"></a>3.1 配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">    &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>默认加载的配置文件为 <code>WEB-INF/&lt;servlet-name&gt;-servlet.xml</code></li>
<li><code>&lt;url-pattern&gt;</code><ol>
<li><code>/</code>（建议）<ul>
<li>拦截所有，不包含<code>.jsp</code></li>
</ul>
</li>
<li><code>/*</code>（不建议）<ul>
<li>拦截所有</li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 id="3-2-组件"><a href="#3-2-组件" class="headerlink" title="3.2 组件"></a>3.2 组件</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>一启动就会初始化所有组件，去容器中寻找，如果没有配置则使用默认</li>
<li>默认加载的组件在 <code>DispatcherServlet.properties</code>中</li>
</ol>
<h3 id="2-分类"><a href="#2-分类" class="headerlink" title="2 分类"></a>2 分类</h3><table>
<thead>
<tr>
<th>组件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>List&lt;HandlerMapping&gt;</code></td>
<td>处理器映射器</td>
</tr>
<tr>
<td><code>List&lt;HandlerAdapter&gt;</code></td>
<td>处理器适配器</td>
</tr>
<tr>
<td><code>List&lt;ViewResolver&gt;</code></td>
<td>视图解析器</td>
</tr>
<tr>
<td><code>MultipartResolver</code></td>
<td>文件上传解析器</td>
</tr>
<tr>
<td><code>List&lt;HandlerExceptionResolver&gt;</code></td>
<td>异常解析器</td>
</tr>
<tr>
<td><code>LocaleResolver</code></td>
<td>区域信息解析器，国际化相关</td>
</tr>
<tr>
<td><code>FlashMapManager</code></td>
<td>重定向携带数据的功能</td>
</tr>
<tr>
<td><code>ThemeResolver</code></td>
<td>主题解析器</td>
</tr>
<tr>
<td><code>RequestToViewNameTranslator</code></td>
<td>请求到视图名转换器</td>
</tr>
</tbody></table>
<h3 id="3-处理器映射器-HandlerMapping"><a href="#3-处理器映射器-HandlerMapping" class="headerlink" title="3 处理器映射器 HandlerMapping"></a>3 处理器映射器 <code>HandlerMapping</code></h3><table>
<thead>
<tr>
<th>映射器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>BeanNameUrlHandlerMapping</code></td>
<td>请求 URL 与处理器 <code>BeanID</code> 进行匹配，<code>BeanID</code> 必须以 <code>/</code> 开头</td>
</tr>
<tr>
<td><code>SimpleUrlHandlerMaping</code></td>
<td>请求 URL 与配置的 <code>key</code> 进行匹配获取 <code>value</code> 即为处理器 <code>BeanID</code></td>
</tr>
<tr>
<td><code>RequestMappingHandlerMapping</code></td>
<td>注解映射器</td>
</tr>
</tbody></table>
<h3 id="4-处理器适配器-HandlerAdapter"><a href="#4-处理器适配器-HandlerAdapter" class="headerlink" title="4 处理器适配器 HandlerAdapter"></a>4 处理器适配器 <code>HandlerAdapter</code></h3><table>
<thead>
<tr>
<th>适配器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>HttpRequestHandlerAdapter</code></td>
<td><code>Controller</code> 必须实现 <code>HttpRequesHandler</code>接口</td>
</tr>
<tr>
<td><code>SimpleControllerHandlerAdapter</code></td>
<td><code>Controller</code> 必须实现 <code>Controller</code> 接口</td>
</tr>
<tr>
<td><code>RequestMappingHandlerAdapter</code></td>
<td>注解适配器</td>
</tr>
</tbody></table>
<h3 id="5-视图解析器-ViewResolver"><a href="#5-视图解析器-ViewResolver" class="headerlink" title="5 视图解析器 ViewResolver"></a>5 视图解析器 <code>ViewResolver</code></h3><h4 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>无论处理器返回值是什么，最终都会变成 <code>ModelAndView</code> 被视图解析器解析</li>
<li>SpringMVC 借助视图解析器得到视图对象 <code>View</code>，最终的视图可以是 <code>Jsp Excel JFreeChart ...</code></li>
<li>所有视图解析器都必须实现 <code>ViewResolve</code> 接口，常用视图解析器<ol>
<li><code>InternalResourceViewResolver</code></li>
<li><code>BeanNameViewResolver</code></li>
</ol>
</li>
<li>视图对象才能真正的转发（会将模型数据全部取出存到请求域中）或重定向</li>
<li>视图对象才能真正的渲染视图，将模型中的数据以某种形式呈现给用户</li>
</ol>
<h4 id="2-InternalResourceViewResolver-配置"><a href="#2-InternalResourceViewResolver-配置" class="headerlink" title="2 InternalResourceViewResolver 配置"></a>2 <code>InternalResourceViewResolver</code> 配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;prefix&quot; value=&quot;/&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>物理视图 = 前缀(prefix) + 逻辑视图 + 后缀(suffix)</code></li>
</ul>
<h4 id="3-lt-mvc-view-controller-gt"><a href="#3-lt-mvc-view-controller-gt" class="headerlink" title="3 &lt;mvc:view-controller&gt;"></a>3 <code>&lt;mvc:view-controller&gt;</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:view-controller path=&quot;请求路径&quot; view-name=&quot;响应的页面&quot;/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>无需经过控制器来执行结果，直接响应 SpringMVC  渲染的页面</li>
</ul>
<h3 id="6-控制器-Controller-amp-处理器-Handler"><a href="#6-控制器-Controller-amp-处理器-Handler" class="headerlink" title="6 控制器 Controller &amp; 处理器 Handler"></a>6 控制器 <code>Controller</code> &amp; 处理器 <code>Handler</code></h3><ol>
<li><code>Controller</code>：指控制器类</li>
<li><code>Handler</code>：控制器类中的方法</li>
</ol>
<h1 id="五-配置"><a href="#五-配置" class="headerlink" title="五 配置"></a>五 配置</h1><h2 id="5-1-静态资源处理"><a href="#5-1-静态资源处理" class="headerlink" title="5.1 静态资源处理"></a>5.1 静态资源处理</h2><h3 id="1-概述-2"><a href="#1-概述-2" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>所有项目的 <code>web.xml</code> 都继承了 Tomcat 的 <code>web.xml</code>，所以相同配置会覆盖</li>
<li>Tomcat 的 <code>web.xml</code> 中<ol>
<li><code>DefaultServlet</code>：<code>url-pattern = /</code></li>
<li><code>JspServlet</code>：<code>url-pattern = *.jsp</code></li>
</ol>
</li>
<li><code>DispatcheServlet</code> 的 <code>url-pattern = /*</code>，表示所有请求都由 SpringMVC 处理<ol>
<li>静态资源请求：没有对应的处理器，会报错</li>
<li><code>.jsp</code> 请求：没有对应的处理器，会报错</li>
</ol>
</li>
<li><code>DispatcheServlet</code> 的 <code>url-pattern = /</code>，表示除了 <code>.jsp</code> 外的请求由 SpringMVC 处理<ol>
<li>静态资源请求：没有对应的处理器，会报错</li>
<li><code>.jsp</code> 请求：由 Tomcat 的 <code>JspServlet</code> 处理，没有问题</li>
</ol>
</li>
</ol>
<h3 id="2-解决"><a href="#2-解决" class="headerlink" title="2 解决"></a>2 解决</h3><h4 id="1-在-SpringMVC-核心配置文件中配置"><a href="#1-在-SpringMVC-核心配置文件中配置" class="headerlink" title="1 在 SpringMVC 核心配置文件中配置"></a>1 在 SpringMVC 核心配置文件中配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:default-servlet-handler default-servlet-name=&quot;&quot;/&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>将在 SpringMVC上下文中定义一个 <code>DefaultServletHttpRequestHandler</code>，它会对进入 <code>DispatcheServlet</code> 的请求进行筛选<ol>
<li>如果不是静态资源的请求，由 <code>DispatcheServlet</code> 处理</li>
<li>如果是静态资源的请求，即没有匹配映射的请求，则交给 WEB应用服务器默认的 Servlet 处理</li>
</ol>
</li>
<li><code>default-servlet-name</code><ul>
<li>一般 WEB应用服务器（如 <code>Tomcat</code>）默认的 Servlet 名称都是 <code>default</code>，此属性可以省略，否则需要手动配置</li>
</ul>
</li>
</ol>
<h4 id="2-在-SpringMVC-核心配置文件中配置"><a href="#2-在-SpringMVC-核心配置文件中配置" class="headerlink" title="2 在 SpringMVC 核心配置文件中配置"></a>2 在 SpringMVC 核心配置文件中配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--配置静态资源访问 **表示的包含自身包和子包的所有文件--&gt;</span><br><span class="line">&lt;mvc:resources mapping=&quot;/statics/**&quot; location=&quot;/statics/&quot; &gt;&lt;/mvc:resources&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-2-lt-mvc-annotation-driven-gt"><a href="#5-2-lt-mvc-annotation-driven-gt" class="headerlink" title="5.2 &lt;mvc:annotation-driven/&gt;"></a>5.2 <code>&lt;mvc:annotation-driven/&gt;</code></h2><ol>
<li>注册 <code>RequestMappingHandlerMapping</code></li>
<li>注册<code>RequestMappingHandlerAdapter</code></li>
<li>注册<code>ExceptionHandlerExceptionResolver</code></li>
<li>支持<ol>
<li><code>ConversionService</code></li>
<li><code>@NumberFormat annotation 、@DateTimeFormat</code>完成数据类型格式化</li>
<li><code>@Valid</code> 对 JavaBean 进行 JSR303 校验</li>
<li><code>@RequestBody 和 @ResponseBody</code></li>
</ol>
</li>
</ol>
<h1 id="六-原生-Servlet"><a href="#六-原生-Servlet" class="headerlink" title="六 原生 Servlet"></a>六 原生 Servlet</h1><ol>
<li>想获取谁直接在方法上添加相应的形参即可获取</li>
<li>默认支持：<ol>
<li><code>HttpServletRequest</code></li>
<li><code>HttpServletResponse</code></li>
<li><code>HttpSession</code></li>
<li><code>java.security.Principal</code></li>
<li><code>Locale</code></li>
<li><code>InputStream</code></li>
<li><code>OutputStream</code></li>
<li><code>Reader</code></li>
<li><code>Writer</code></li>
</ol>
</li>
</ol>
<h1 id="七-请求"><a href="#七-请求" class="headerlink" title="七 请求"></a>七 请求</h1><h2 id="7-1-概述"><a href="#7-1-概述" class="headerlink" title="7.1 概述"></a>7.1 概述</h2><table>
<thead>
<tr>
<th>注解</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>@RequestMapping</code></td>
<td>请求映射，即确定处理指定请求的方法</td>
</tr>
<tr>
<td><code>@PathVariable</code></td>
<td>请求路径占位符映射</td>
</tr>
<tr>
<td><code>@RequestParam</code></td>
<td>请求参数映射</td>
</tr>
<tr>
<td><code>@RequestHeader</code></td>
<td>获取请求头中的值</td>
</tr>
<tr>
<td><code>@RequestBody</code></td>
<td>获取请求体中的值</td>
</tr>
<tr>
<td><code>@CookieValue</code></td>
<td>获取 <code>Cookie</code>中的值</td>
</tr>
<tr>
<td><code>@RequestAttribute</code></td>
<td>获取 <code>request</code> 域中的值</td>
</tr>
<tr>
<td><code>@SessionAttribute</code></td>
<td>获取 <code>session</code> 域中的值</td>
</tr>
</tbody></table>
<h2 id="7-2-请求映射"><a href="#7-2-请求映射" class="headerlink" title="7.2 请求映射"></a>7.2 请求映射</h2><h3 id="1-RequestMapping"><a href="#1-RequestMapping" class="headerlink" title="1 @RequestMapping"></a>1 <code>@RequestMapping</code></h3><h4 id="1-说明"><a href="#1-说明" class="headerlink" title="1 说明"></a>1 说明</h4><ol>
<li>定义在类上：第一级的访问路径</li>
<li>定义在方法上：第二级的访问路径</li>
</ol>
<h4 id="2-属性"><a href="#2-属性" class="headerlink" title="2 属性"></a>2 属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String[] value() default {}</code></td>
<td>同 <code>path()</code></td>
</tr>
<tr>
<td><code>String[] path() default {}</code></td>
<td>指定请求路径</td>
</tr>
<tr>
<td><code>RequestMethod[] method() default {}</code></td>
<td>指定请求方法，值为枚举类 <code>RequestMethod</code> 的值 <code>GET POST...</code></td>
</tr>
<tr>
<td><code>String[] params() default {}</code></td>
<td>指定必须匹配的请求参数，支持简单表达式</td>
</tr>
<tr>
<td><code>String[] headers() default {}</code></td>
<td>指定必须包含的请求头</td>
</tr>
</tbody></table>
<h3 id="2-其它映射注解"><a href="#2-其它映射注解" class="headerlink" title="2 其它映射注解"></a>2 其它映射注解</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 请求方法确定可以直接使用以下注解代替 @RequestMapping</span><br><span class="line">@GetMapping</span><br><span class="line">@PostMapping</span><br><span class="line">@PutMapping</span><br><span class="line">@DeleteMapping</span><br></pre></td></tr></table></figure>

<h2 id="7-3-请求路径占位符"><a href="#7-3-请求路径占位符" class="headerlink" title="7.3 请求路径占位符"></a>7.3 请求路径占位符</h2><h3 id="1-PathVariable"><a href="#1-PathVariable" class="headerlink" title="1 @PathVariable"></a>1 <code>@PathVariable</code></h3><h4 id="1-说明-1"><a href="#1-说明-1" class="headerlink" title="1 说明"></a>1 说明</h4><ul>
<li>定义在形参上：映射请求 URL 中的占位符，即指定形参与占位符进行匹配的名称</li>
<li>占位符：<code>/usr/{id}</code></li>
</ul>
<h4 id="2-属性-1"><a href="#2-属性-1" class="headerlink" title="2 属性"></a>2 属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>同 <code>name()</code></td>
</tr>
<tr>
<td><code>String name() default &quot;&quot;</code></td>
<td>指定占位符映射名称</td>
</tr>
<tr>
<td><code>boolean required() default true</code></td>
<td>请求是否必须包含指定占位符</td>
</tr>
</tbody></table>
<h3 id="2-RESTFul-风格"><a href="#2-RESTFul-风格" class="headerlink" title="2 RESTFul 风格"></a>2 RESTFul 风格</h3><h4 id="1-请求格式"><a href="#1-请求格式" class="headerlink" title="1 请求格式"></a>1 请求格式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">增: /user POST</span><br><span class="line">删: /user/1 DELETE</span><br><span class="line">改: /user/1 PUT</span><br><span class="line">查: /user/1 GET</span><br></pre></td></tr></table></figure>

<h4 id="2-发送-put-delete-请求"><a href="#2-发送-put-delete-请求" class="headerlink" title="2 发送 put delete 请求"></a>2 发送 <code>put delete</code> 请求</h4><ol>
<li>使用 Spring 提供的过滤器 <code>HiddenHttpMethodFilter</code></li>
<li>创建一个 <code>POST</code> 请求的表单</li>
<li>表单项包含一个 <code>name=&quot;_method&quot; value=&quot;put delete...中的一个&quot;</code></li>
<li>可以自动将 <code>Post</code> 请求转换成 <code>_method</code> 指定的请求</li>
</ol>
<h2 id="7-4-请求参数"><a href="#7-4-请求参数" class="headerlink" title="7.4 请求参数"></a>7.4 请求参数</h2><h3 id="1-RequestParam"><a href="#1-RequestParam" class="headerlink" title="1 @RequestParam"></a>1 <code>@RequestParam</code></h3><h4 id="1-说明-2"><a href="#1-说明-2" class="headerlink" title="1 说明"></a>1 说明</h4><ul>
<li>定义在形参上：将指定名称的请求参数的值赋给形参</li>
</ul>
<h4 id="2-属性-2"><a href="#2-属性-2" class="headerlink" title="2 属性"></a>2 属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>同 <code>name()</code></td>
</tr>
<tr>
<td><code>String name() default &quot;&quot;</code></td>
<td>指定请求参数名称</td>
</tr>
<tr>
<td><code>boolean required() default true</code></td>
<td>请求参数中是否必须包含此参数</td>
</tr>
<tr>
<td><code>String defaultValue() default ValueConstants.DEFAULT_NONE</code></td>
<td>指定默认值来取代 <code>null</code></td>
</tr>
</tbody></table>
<h3 id="2-请求参数绑定"><a href="#2-请求参数绑定" class="headerlink" title="2 请求参数绑定"></a>2 请求参数绑定</h3><h4 id="1-绑定机制"><a href="#1-绑定机制" class="headerlink" title="1 绑定机制"></a>1 绑定机制</h4><ol>
<li>表单提交数据都是 <code>k=v</code> 格式</li>
<li>SpringMVC 请求参数绑定：指控制器中方法的形参与请求参数绑定，即用形参获取请求参数</li>
</ol>
<h4 id="2-获取请求参数的方式"><a href="#2-获取请求参数的方式" class="headerlink" title="2 获取请求参数的方式"></a>2 获取请求参数的方式</h4><h5 id="1-直接获取"><a href="#1-直接获取" class="headerlink" title="1 直接获取"></a>1 直接获取</h5><ol>
<li>方法形参名称与请求参数名称（表单 <code>name</code>）一致</li>
<li>如果不一致，使用 <code>@RequestParam</code> 指定</li>
</ol>
<h5 id="2-封装对象"><a href="#2-封装对象" class="headerlink" title="2 封装对象"></a>2 封装对象</h5><ol>
<li>如果请求参数过多，可以用 <code>JavaBean</code> 接收，会自动封装</li>
<li>方法形参名称任意，类型为 <code>JavaBean</code> 类型，<code>JavaBean</code> 中的属性名称与请求参数名称（表单 <code>name</code>）一致</li>
</ol>
<h2 id="7-5-请求头：-RequestHeader"><a href="#7-5-请求头：-RequestHeader" class="headerlink" title="7.5 请求头：@RequestHeader"></a>7.5 请求头：<code>@RequestHeader</code></h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>同 <code>name()</code></td>
</tr>
<tr>
<td><code>String name() default &quot;&quot;</code></td>
<td>指定请求头的键</td>
</tr>
<tr>
<td><code>boolean required() default true</code></td>
<td>请求头是否必须包含指定键</td>
</tr>
</tbody></table>
<ul>
<li>定义在形参上：将请求头中指定键的值赋给形参</li>
</ul>
<h2 id="7-7-Cookie：-CookieValue"><a href="#7-7-Cookie：-CookieValue" class="headerlink" title="7.7 Cookie：@CookieValue"></a>7.7 Cookie：<code>@CookieValue</code></h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>同 <code>name()</code></td>
</tr>
<tr>
<td><code>String name() default &quot;&quot;</code></td>
<td>指定 Cookie 中的键</td>
</tr>
<tr>
<td><code>boolean required() default true</code></td>
<td>Cookie 是否必须包含指定键</td>
</tr>
</tbody></table>
<ul>
<li>定义在形参上：将 Cookie 中指定键的值赋给形参</li>
</ul>
<h2 id="7-8-域"><a href="#7-8-域" class="headerlink" title="7.8 域"></a>7.8 域</h2><h3 id="1-request-域：-RequestAttribute"><a href="#1-request-域：-RequestAttribute" class="headerlink" title="1 request 域：@RequestAttribute"></a>1 <code>request</code> 域：<code>@RequestAttribute</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>同 <code>name()</code></td>
</tr>
<tr>
<td><code>String name() default &quot;&quot;</code></td>
<td>指定 <code>request</code> 域的键</td>
</tr>
<tr>
<td><code>boolean required() default true</code></td>
<td><code>request</code> 域是否必须包含指定键</td>
</tr>
</tbody></table>
<ul>
<li>定义在形参上：将 <code>request</code> 域中指定键的值赋给形参</li>
</ul>
<h3 id="2-session-域：-SessionAttribute"><a href="#2-session-域：-SessionAttribute" class="headerlink" title="2 session 域：@SessionAttribute"></a>2 <code>session</code> 域：<code>@SessionAttribute</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>同 <code>name()</code></td>
</tr>
<tr>
<td><code>String name() default &quot;&quot;</code></td>
<td>指定 <code>session</code>域的键</td>
</tr>
<tr>
<td><code>boolean required() default true</code></td>
<td><code>session</code>域是否必须包含指定键</td>
</tr>
</tbody></table>
<ul>
<li>定义在形参上：将 <code>session</code> 域中指定键的值赋给形参</li>
</ul>
<h2 id="7-9-POST-请求乱码"><a href="#7-9-POST-请求乱码" class="headerlink" title="7.9 POST 请求乱码"></a>7.9 POST 请求乱码</h2><ul>
<li>在<code>web.xml</code>中配置 Spring 提供的过滤器 <code>CharacterEncodingFilter</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;characterFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;UTF-8&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">    &lt;filter-name&gt;characterFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>

<h1 id="八-响应"><a href="#八-响应" class="headerlink" title="八 响应"></a>八 响应</h1><h2 id="8-1-响应数据"><a href="#8-1-响应数据" class="headerlink" title="8.1 响应数据"></a>8.1 响应数据</h2><h3 id="1-Map-Model-ModelMap"><a href="#1-Map-Model-ModelMap" class="headerlink" title="1 Map Model ModelMap"></a>1 <code>Map</code> <code>Model</code> <code>ModelMap</code></h3><p><img src="https://github.com/anyeansan/pics/raw/master/CS/Frame/SpringMVC/Model%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt=""></p>
<ol>
<li><p>形参声明对应类型，之后添加数据即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Model addAttribute(String attributeName, Object attributeValue)</span><br><span class="line">Model addAllAttributes(Map&lt;String, ?&gt; attributes)</span><br></pre></td></tr></table></figure>
</li>
<li><p>这三种类型最终都是使用 <code>BindingAwareModelMap</code></p>
</li>
<li><p>数据保存在 <code>request</code> 域中</p>
</li>
</ol>
<h3 id="2-ModelAndView"><a href="#2-ModelAndView" class="headerlink" title="2 ModelAndView"></a>2 <code>ModelAndView</code></h3><ol>
<li><p>创建 <code>ModelAndView</code>，之后添加数据，设置视图，最后返回即可</p>
</li>
<li><p>数据保存在  <code>request</code> 域中</p>
</li>
<li><p>处理器无论返回值是什么，其实最终返回的都是 <code>ModelAndView</code></p>
</li>
<li><p>添加数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ModelAndView addObject(String attributeName, Object attributeValue)</span><br><span class="line">ModelAndView addAllObjects(@Nullable Map&lt;String, ?&gt; modelMap)</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置视图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">void setViewName(String viewName)</span><br><span class="line">void setView(View view)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="3-SessionAttributes"><a href="#3-SessionAttributes" class="headerlink" title="3 @SessionAttributes"></a>3 <code>@SessionAttributes</code></h3><h4 id="1-说明-3"><a href="#1-说明-3" class="headerlink" title="1 说明"></a>1 说明</h4><ol>
<li>定义在类上</li>
<li>根据配置（属性名称或类型）将存储在 <code>BindingAwareModelMap</code> （即使用 <code>Map Model ModelMap</code>）中的数据，存储一份到  <code>session</code> 域中</li>
</ol>
<h4 id="2-属性-3"><a href="#2-属性-3" class="headerlink" title="2 属性"></a>2 属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String[] value() default {}</code></td>
<td>同 <code>names()</code></td>
</tr>
<tr>
<td><code>String[] names() default {}</code></td>
<td>指定被存入 <code>session</code> 域的 <code>key</code> 名称</td>
</tr>
<tr>
<td><code>Class&lt;?&gt;[] types() default {}</code></td>
<td>指定被存入 <code>session</code> 域的 <code>value</code> 类型</td>
</tr>
</tbody></table>
<h3 id="4-ModelAttribute"><a href="#4-ModelAttribute" class="headerlink" title="4 @ModelAttribute"></a>4 <code>@ModelAttribute</code></h3><h4 id="1-说明-4"><a href="#1-说明-4" class="headerlink" title="1 说明"></a>1 说明</h4><ol>
<li>定义在方法上：则当前方法会在 <code>Controller</code> 中每个方法执行前执行</li>
<li>定义在形参上：以指定 <code>key</code> 从 <code>BindingAwareModelMap</code> 获取数据</li>
</ol>
<h4 id="2-属性-4"><a href="#2-属性-4" class="headerlink" title="2 属性"></a>2 属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>同 <code>name()</code></td>
</tr>
<tr>
<td><code>String name() default &quot;&quot;</code></td>
<td>指定 <code>key</code></td>
</tr>
</tbody></table>
<h4 id="3-应用场景"><a href="#3-应用场景" class="headerlink" title="3 应用场景"></a>3 应用场景</h4><h5 id="1-说明-5"><a href="#1-说明-5" class="headerlink" title="1 说明"></a>1 说明</h5><ol>
<li><p>更新操作时，使用实体类接收表单请求数据，而有些字段并不想修改，所以表单提交的数据可能不是全字段，那么封装的实体类中没有提交的字段就为空，如果此时执行更新操作，就会导致数据库丢失相应字段的原有数据</p>
</li>
<li><p>例如，更新用户的 <code>name</code>，表单提交数据只有 <code>name</code> 的值，使用实体类 <code>name age</code> 接收，则 <code>age</code> 为空，更新之后，就会导致数据库中用户丢失原有 <code>age</code> 值</p>
</li>
<li><p>解决方式</p>
<ol>
<li>使用隐藏域（不安全，字段多麻烦）</li>
<li>在处理方法中，更新前手动设置（麻烦）</li>
<li>不使用新封装的实体类对象，而是从数据库中查询对应对象，需要更新的字段使用提交的更新数据，不需要更新的字段使用数据库中原有数据（店长推荐）</li>
</ol>
</li>
</ol>
<h5 id="2-步骤"><a href="#2-步骤" class="headerlink" title="2 步骤"></a>2 步骤</h5><ol>
<li><code>@ModelAttribute</code> 定义在一个方法上，此方法会在目标方法执行前执行，所以可以在此方法中从数据库查询数据，并存入 <code>BindingAwareModelMap</code></li>
<li>在目标方法中，使用 <code>@ModelAttribute</code>  修饰形参，则 SpringMVC 不会直接创建相应对象，而是从  <code>BindingAwareModelMap</code> 获取，则使用的就是从数据库中查询到的实体类对象</li>
</ol>
<h2 id="8-2-转发和重定向"><a href="#8-2-转发和重定向" class="headerlink" title="8.2 转发和重定向"></a>8.2 转发和重定向</h2><ol>
<li>处理器返回指定前缀的字符串<ol>
<li><code>forward:转发路径</code>：转发</li>
<li><code>redirect:重定向路径</code>：重定向<ul>
<li>SpringMVC 会自动为重定向路径添加应用名，所以不用加应用名</li>
</ul>
</li>
</ol>
</li>
<li>带有前缀时，不会走视图解析器</li>
</ol>
<h1 id="九-JSON"><a href="#九-JSON" class="headerlink" title="九 JSON"></a>九 JSON</h1><h2 id="9-1-HttpMessageConverter-lt-T-gt"><a href="#9-1-HttpMessageConverter-lt-T-gt" class="headerlink" title="9.1 HttpMessageConverter&lt;T&gt;"></a>9.1 <code>HttpMessageConverter&lt;T&gt;</code></h2><h3 id="1-概述-3"><a href="#1-概述-3" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>Spring3.0 新添加的接口 </li>
<li>负责将请求信息转换为 T 类型，或将 T 类型输出为响应信息</li>
<li><code>DispatcherServlet</code> 默认装配 <code>RequestMappingHandlerAdapter</code>，而 <code>RequestMappingHandlerAdapter</code> 默认装配了一些 <code>HttpMessageConverter</code> 的实现</li>
<li>如果导入了 <code>JackSon</code> 的包，<code>RequestMappingHandlerAdapter</code> 就会多装配一个 <code>MappingJackson2HttpMessageConverter</code></li>
</ol>
<h3 id="2-实现类"><a href="#2-实现类" class="headerlink" title="2 实现类"></a>2 实现类</h3><table>
<thead>
<tr>
<th>实现类</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>StringHttpMessageConverter</code></td>
<td>读写 String</td>
</tr>
<tr>
<td><code>ByteArrayHttpMessageConverter</code></td>
<td>读写二进制数据</td>
</tr>
<tr>
<td><code>MappingJackson2HttpMessageConverter</code></td>
<td>利用 <code>JackSon</code> 的 <code>ObjectMapper</code> 读写 JSON 数据</td>
</tr>
</tbody></table>
<h2 id="9-2-ResponseBody"><a href="#9-2-ResponseBody" class="headerlink" title="9.2 @ResponseBody"></a>9.2 <code>@ResponseBody</code></h2><ol>
<li>定义在类上或方法上</li>
<li>添加了此注解，则方法不再响应视图，而是直接响应数据</li>
<li>如果想响应 JSON 数据，在方法内部转为 JSON 并返回即可</li>
</ol>
<h2 id="9-3-RequestBody"><a href="#9-3-RequestBody" class="headerlink" title="9.3 @RequestBody"></a>9.3 <code>@RequestBody</code></h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>boolean required() default true</code></td>
<td>是否必须有请求体</td>
</tr>
</tbody></table>
<ul>
<li>定义在形参上：用于获取请求体的内容（GET 不可用）</li>
</ul>
<h2 id="9-4-RestController"><a href="#9-4-RestController" class="headerlink" title="9.4 @RestController"></a>9.4 <code>@RestController</code></h2><ol>
<li>定义在类上</li>
<li>相当于同时添加了 <code>@Controller</code> 和 <code>@ResponseBody</code></li>
</ol>
<h2 id="9-5-JSON-处理"><a href="#9-5-JSON-处理" class="headerlink" title="9.5 JSON 处理"></a>9.5 JSON 处理</h2><ol>
<li><p>配置 <code>&lt;mvc:annotation-driven/&gt;</code>，为了支持 <code>@RequestBody 和 @ResponseBody</code></p>
</li>
<li><p>在处理方法上添加 <code>@ResponseBody</code> 注解</p>
</li>
<li><p>导入所使用的工具包：</p>
<ol>
<li><code>JackSon</code><ul>
<li>SpringMVC 内部有 <code>JackSon</code> 转换器，添加了 <code>JackSon</code> 的依赖后，会自动将返回值转为 JSON</li>
</ul>
</li>
<li><code>GSON FastJson ...</code><ul>
<li>在方法内部手动转为 JSON 并返回</li>
</ul>
</li>
</ol>
</li>
<li><p>注意：</p>
<ul>
<li><p>当使用分步查询时，如果开启了延迟加载，关联属性没有值会导致转 json 异常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.s_id,s.s_name,s.gender,s.hobby,s.birthday,s.t_id,t.t_id,t.t_name,t.gender sex from student s,teacher t where s.s_id=#&#123;id&#125; and s.t_id=t.t_id</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ol>
<h1 id="十-数据绑定的处理"><a href="#十-数据绑定的处理" class="headerlink" title="十 数据绑定的处理"></a>十 数据绑定的处理</h1><h2 id="10-1-概述"><a href="#10-1-概述" class="headerlink" title="10.1 概述"></a>10.1 概述</h2><ol>
<li>数据绑定的核心部件是 <code>DataBinder</code></li>
<li><code>ConversionService</code>：数据类型转换和格式化</li>
<li><code>Validator</code>：数据校验</li>
</ol>
<h2 id="10-2-类型转换"><a href="#10-2-类型转换" class="headerlink" title="10.2 类型转换"></a>10.2 类型转换</h2><h3 id="1-概述-4"><a href="#1-概述-4" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>页面提交的数据都是字符串，而 <code>JavaBean</code> 中属性有各种各样的类型</li>
<li>SpringMVC 提供了许多转换器可以完成大多数的转换，如果有特殊需求可以自定义转换器</li>
</ol>
<h3 id="2-自定义转换器"><a href="#2-自定义转换器" class="headerlink" title="2 自定义转换器"></a>2 自定义转换器</h3><ol>
<li><p>Spring 定义了 3 中类型转换接口，实现任意一种</p>
<ol>
<li><code>Converter&lt;S,T&gt;</code></li>
<li><code>ConverterFactory</code></li>
<li><code>GenericConverter</code></li>
</ol>
</li>
<li><p>配置 <code>ConversionService</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;转换器工厂id&quot; class=&quot;org.springframework.format.support.ConversionServiceFactoryBean&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;converters&quot;&gt;</span><br><span class="line">        &lt;set&gt;</span><br><span class="line">            &lt;bean class=&quot;自定义转换器全类名&quot;/&gt;</span><br><span class="line">        &lt;/set&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>让 SpringMVC 使用自定义 <code>ConversionService</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:annotation-driven conversion-service=“转换器工厂id”/&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="10-3-格式化"><a href="#10-3-格式化" class="headerlink" title="10.3 格式化"></a>10.3 格式化</h2><h3 id="1-FormattingConversionService"><a href="#1-FormattingConversionService" class="headerlink" title="1 FormattingConversionService"></a>1 <code>FormattingConversionService</code></h3><ul>
<li>既具有 类 型 转换功能又具有格式化功能</li>
</ul>
<h3 id="2-FormattingConversionServiceFactroyBean"><a href="#2-FormattingConversionServiceFactroyBean" class="headerlink" title="2 FormattingConversionServiceFactroyBean"></a>2 <code>FormattingConversionServiceFactroyBean</code></h3><ol>
<li><code>&lt;mvc:annotation-driven/&gt;</code> 默认创建的 <code>ConversionService</code> 实例即为此工厂 bean</li>
<li><code>@DateTiemFormat</code></li>
<li><code>@NumberFormat</code></li>
</ol>
<h2 id="10-4-校验"><a href="#10-4-校验" class="headerlink" title="10.4 校验"></a>10.4 校验</h2><h3 id="1-JSR303"><a href="#1-JSR303" class="headerlink" title="1 JSR303"></a>1 JSR303</h3><ol>
<li>java 为 bean 数据合法校验提供的标准框架，包含在 javaee6.0 中</li>
<li>通过在字段上加注解<ol>
<li><code>@Null</code></li>
<li><code>@NotNull</code></li>
<li><code>@Pattern(value)</code></li>
<li><code>...</code></li>
</ol>
</li>
</ol>
<h3 id="2-Spring-的校验"><a href="#2-Spring-的校验" class="headerlink" title="2 Spring 的校验"></a>2 Spring 的校验</h3><ol>
<li>Spring 有自己的校验框架，同时支持 jsr303</li>
<li><code>LocalValidatorFactoryBean</code> <ol>
<li>实现了 Spring 的 <code>Validator</code>接口，也实现了 jsr303 的 <code>Validator</code> 接口</li>
<li><code>&lt;mvc:annotation-driver/&gt;</code> 默认会装配好一个此对象</li>
</ol>
</li>
</ol>
<h1 id="十一-拦截器"><a href="#十一-拦截器" class="headerlink" title="十一 拦截器"></a>十一 拦截器</h1><h2 id="11-1-概述"><a href="#11-1-概述" class="headerlink" title="11.1 概述"></a>11.1 概述</h2><ol>
<li>过滤器是 JavaWeb 技术，而拦截器是 SpringMVC 独有的</li>
<li>过滤器可以过滤任意请求，而拦截器只拦截 <code>Controller</code> 中的目标方法</li>
</ol>
<h2 id="11-2-HandlerInterceptor"><a href="#11-2-HandlerInterceptor" class="headerlink" title="11.2 HandlerInterceptor"></a>11.2 <code>HandlerInterceptor</code></h2><h3 id="1-API"><a href="#1-API" class="headerlink" title="1 API"></a>1 API</h3><ol>
<li><code>boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)</code><ul>
<li>目标方法执行前调用，<code>true</code>：放行，<code>false</code>：不放行</li>
</ul>
</li>
<li><code>void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</code><ul>
<li>目标方法执行后，渲染视图前调用</li>
</ul>
</li>
<li><code>void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</code><ul>
<li>渲染视图后调用，即到达目标页面之后</li>
</ul>
</li>
<li>`</li>
</ol>
<h3 id="2-多个拦截器执行顺序"><a href="#2-多个拦截器执行顺序" class="headerlink" title="2 多个拦截器执行顺序"></a>2 多个拦截器执行顺序</h3><ol>
<li>按照配置顺序<ol>
<li>正序 <code>preHandler</code></li>
<li>目标方法</li>
<li>逆序 <code>postHandler</code></li>
<li>渲染视图后</li>
<li>逆序 <code>afterCompletion</code></li>
</ol>
</li>
<li>假如有三个拦截器 `1 2 3``<ul>
<li><code>pre1 pre2 pre3 handler post3 post2 post1 after3 after2 after1</code></li>
</ul>
</li>
</ol>
<h2 id="11-3-自定义拦截器"><a href="#11-3-自定义拦截器" class="headerlink" title="11.3 自定义拦截器"></a>11.3 自定义拦截器</h2><ol>
<li><p>实现<code>HandlerInterceptor</code> 或 继承<code>HandlerInterceptorAdapter</code></p>
</li>
<li><p>在 SpringMVC 配置文件中注册拦截器</p>
<ol>
<li><p>拦截所有方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:interceptors&gt;</span><br><span class="line">	// 1 注册拦截器</span><br><span class="line">	&lt;bean class=&quot;自定义拦截器全类名&quot;/&gt; </span><br><span class="line">	// 2 注册拦截器</span><br><span class="line">	&lt;ref bean=&quot;bean的id&quot;/&gt;</span><br><span class="line">&lt;/mvc:interceptors&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义拦截规则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:interceptors&gt;</span><br><span class="line">	// 一个拦截器对应一个 &lt;mvc:interceptor&gt;</span><br><span class="line">	&lt;mvc:interceptor&gt;</span><br><span class="line">		&lt;!-- 哪些方法进行拦截 --&gt;</span><br><span class="line">		&lt;mvc:mapping path=&quot;/user/*&quot;/&gt;</span><br><span class="line">		&lt;!-- 哪些方法不进行拦截 --&gt;</span><br><span class="line">		&lt;mvc:exclude-mapping path=&quot;&quot;/&gt;</span><br><span class="line">		&lt;!-- 注册拦截器--&gt;</span><br><span class="line">		&lt;bean class=&quot;自定义拦截器全类名&quot;/&gt;</span><br><span class="line">	&lt;/mvc:interceptor&gt;</span><br><span class="line">&lt;/mvc:interceptors&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<h1 id="十二-异常处理"><a href="#十二-异常处理" class="headerlink" title="十二 异常处理"></a>十二 异常处理</h1><h2 id="12-1-异常解析器"><a href="#12-1-异常解析器" class="headerlink" title="12.1 异常解析器"></a>12.1 异常解析器</h2><ol>
<li>SpringMVC 的 <code>DispatcherServlet</code> 组件中有异常解析器<code>HandlerExceptionResolver</code></li>
<li><code>dao，service，controller...</code> 出现异常都往上抛，最后抛给<code>DispatcherServlet</code></li>
<li><code>DispatcherServlet</code><ol>
<li>有异常解析器，则交给异常解析器，能处理则处理，不能处理则继续抛</li>
<li>无异常解析器，则什么都不做直接响应到页面</li>
</ol>
</li>
</ol>
<h2 id="12-2-默认装配解析器"><a href="#12-2-默认装配解析器" class="headerlink" title="12.2 默认装配解析器"></a>12.2 默认装配解析器</h2><table>
<thead>
<tr>
<th>异常解析器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>ExceptionHandlerExcptionResolver</code></td>
<td>处理标有 <code>@ExceptionHandler</code> 注解的异常</td>
</tr>
<tr>
<td><code>ResponseStatusExceptionResolver</code></td>
<td>处理标有 <code>@ResponseStatues</code> 注解的异常</td>
</tr>
<tr>
<td><code>DefaultHandlerExceptionResolver</code></td>
<td>处理 SpringMVC 自己的异常</td>
</tr>
</tbody></table>
<h3 id="1-ExceptionHandler"><a href="#1-ExceptionHandler" class="headerlink" title="1 @ExceptionHandler"></a>1 <code>@ExceptionHandler</code></h3><h4 id="1-说明-6"><a href="#1-说明-6" class="headerlink" title="1 说明"></a>1 说明</h4><ol>
<li>定义在方法上，对当前类有效</li>
<li>表示此方法用来处理此类发生的指定异常<ol>
<li>用形参 <code>Exception e</code> 接收异常</li>
<li>携带异常信息只能使用  <code>ModelAndView</code> ，<code>String Model Map...</code> 不行</li>
</ol>
</li>
</ol>
<h4 id="2-属性-5"><a href="#2-属性-5" class="headerlink" title="2 属性"></a>2 属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Class&lt;? extends Throwable&gt;[] value() default {}</code></td>
<td>指定处理哪些异常</td>
</tr>
</tbody></table>
<h4 id="3-ControllerAdvice"><a href="#3-ControllerAdvice" class="headerlink" title="3 @ControllerAdvice"></a>3 <code>@ControllerAdvice</code></h4><ol>
<li>定义在类上，全局有效</li>
<li>表示此类是一个全局的异常处理类</li>
<li>在类中用 <code>@ExceptionHandler</code> 定义异常处理方法</li>
</ol>
<h3 id="2-ResponseStatues"><a href="#2-ResponseStatues" class="headerlink" title="2 @ResponseStatues"></a>2 <code>@ResponseStatues</code></h3><ol>
<li><p>定义在方法上：方法发生异常时就会触发</p>
</li>
<li><p>定义在自定义异常类上：发生此自定义异常时就会触发</p>
</li>
<li><p>属性</p>
<ol>
<li><code>value</code>：状态码</li>
<li><code>reason</code>：错误信息</li>
</ol>
</li>
</ol>
<h2 id="12-3-手动装配解析器"><a href="#12-3-手动装配解析器" class="headerlink" title="12.3 手动装配解析器"></a>12.3 手动装配解析器</h2><h3 id="SimpleMappingExceptionResolver"><a href="#SimpleMappingExceptionResolver" class="headerlink" title="SimpleMappingExceptionResolver"></a><code>SimpleMappingExceptionResolver</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;&gt;</span><br><span class="line">	// 配置哪些异常去哪些页面</span><br><span class="line">	&lt;property name=&quot;exceptionMappings&quot;&gt;</span><br><span class="line">		&lt;props&gt;</span><br><span class="line">			&lt;prop key=&quot;异常全类名&quot;&gt;页面视图名&lt;/prop&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	// 错误信息</span><br><span class="line">	&lt;property name=&quot;exceptionAttribute&quot; value=&quot;自定义request域的key&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>



<ul>
<li>为每个异常指定特定页面，会自动将异常存入request域默认key为<code>exception</code>，也可以自定义</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean class=&quot;SimpleMappingExceptionResolver&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;exceptionAttribute&quot; value=&quot;自定义request域的key&quot;/&gt;</span><br><span class="line">	&lt;property name=&quot;exceptionMappings&quot;&gt;</span><br><span class="line">		&lt;props&gt;</span><br><span class="line">			&lt;prop key=&quot;java.lang.NullPointException&quot;&gt;error1&lt;/prop&gt;</span><br><span class="line">			&lt;prop key=&quot;java.lang.IndexOutOfBoundsException&quot;&gt;error2&lt;/prop&gt;</span><br><span class="line">		&lt;/props&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h3 id="处理步骤"><a href="#处理步骤" class="headerlink" title="处理步骤"></a>处理步骤</h3><ol>
<li>使用自定义异常类 或 已有异常类<ul>
<li>用于设置异常信息</li>
</ul>
</li>
<li>异常处理器<ol>
<li>使用内置异常处理器<ul>
<li>内置异常处理器有相应注解来实现携带异常信息跳到特定页面等</li>
</ul>
</li>
<li>自定义异常处理器<ol>
<li>实现<code>HandlerExceptionResoler</code><ul>
<li>在自定义处理器中携带异常信息跳到特定页面</li>
</ul>
</li>
<li>在<code>springmvc.xml</code>中配置异常处理器bean</li>
</ol>
</li>
</ol>
</li>
</ol>
<h1 id="文件上传-amp-下载"><a href="#文件上传-amp-下载" class="headerlink" title="文件上传 &amp; 下载"></a>文件上传 &amp; 下载</h1><h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><ul>
<li>其实也是一种参数绑定(安)</li>
<li>使用的是MultipartResolver接口，实现使用的是<code>commons-fileupload</code></li>
</ul>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><ol>
<li>form表单post请求，<code>enctype=multipart/form-data</code></li>
<li>配置MultipartResolver接口实现类<code>CommonsMultipartResolver</code><ul>
<li>bean id 必须为<code>multipartResolver</code></li>
<li>依赖<code>commons-fileupload和commons-io</code></li>
</ul>
</li>
<li>上传方法中形参<code>MultipartFile file</code><ul>
<li><code>file</code>为表单上传name属性名</li>
</ul>
</li>
<li>使用<code>MultipartFile</code>可以获取文件名，输入流，保存文件等等</li>
</ol>
<h3 id="MultipartFile"><a href="#MultipartFile" class="headerlink" title="MultipartFile"></a>MultipartFile</h3><ul>
<li><code>getOriginalFilename()</code></li>
<li><code>getInputStream()</code></li>
<li><code>void transferTo(File file)</code></li>
<li><code>default void transferTo(Path path)</code></li>
</ul>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><h3 id="基于ResponseEntity实现"><a href="#基于ResponseEntity实现" class="headerlink" title="基于ResponseEntity实现"></a>基于ResponseEntity实现</h3><ul>
<li>返回一个<code>ResponseEntity</code></li>
</ul>
<h3 id="Java通用下载实现"><a href="#Java通用下载实现" class="headerlink" title="Java通用下载实现"></a>Java通用下载实现</h3><ul>
<li>设置响应头告诉浏览器是下载文件<ul>
<li><code>response.setHeader(&quot;content-disposition&quot;, &quot;attachment;filename=&quot;+fileName);</code></li>
</ul>
</li>
<li>设置响应头说明是文件类型<ul>
<li><code>response.setHeader(&quot;content-type&quot;, &quot;image/jpeg&quot;);</code><ul>
<li>设置文件类型是图片</li>
</ul>
</li>
<li><code>response.setContentType(this.getServletContext().getMimeType(fileName))</code><ul>
<li>设置类型为根据文件名获取的类型</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/%E6%A1%86%E6%9E%B6/Spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/%E6%A1%86%E6%9E%B6/Spring/" class="post-title-link" itemprop="url">Spring</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 20:56:21 / 修改时间：20:57:25" itemprop="dateCreated datePublished" datetime="2020-11-08T20:56:21+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/Frame/" itemprop="url" rel="index">
                    <span itemprop="name">Frame</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li><p>Spring 是一个轻量级的控制反转 <code>IOD(DI)</code> 和 面向切面编程 <code>AOP</code> 的开源框架</p>
</li>
<li><p>下载 <code>https://repo.spring.io/webapp/#/home</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">artifacts → libs-release-loacl → springframework → spring</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="二-Spring-优良特性"><a href="#二-Spring-优良特性" class="headerlink" title="二 Spring 优良特性"></a>二 Spring 优良特性</h1><ol>
<li>非侵入式<ul>
<li>基于Spring开发的应用中的对象可以不依赖于 Spring 的 API</li>
</ul>
</li>
<li>依赖注入<ul>
<li><code>DI——Dependency Injection</code>，反转控制（IOC）最经典的实现</li>
</ul>
</li>
<li>面向切面编程<ul>
<li>Aspect Oriented Programming——AOP</li>
</ul>
</li>
<li>容器<ul>
<li>Spring 是一个容器，因为它包含并且管理应用对象的生命周期</li>
</ul>
</li>
<li>组件化<ul>
<li>Spring 实现了使用简单的组件配置组合成一个复杂的应用。在 Spring 中可以使用 XML 和 Java 注解组合这些对象</li>
</ul>
</li>
<li>一站式<ul>
<li>在 IOC 和 AOP 的基础上可以整合各种企业应用的开源框架和优秀的第三方类库（实际上 Spring 自身也提供了表述层的 SpringMVC 和持久层的 Spring JDBC）</li>
</ul>
</li>
</ol>
<h1 id="三-Spring-模块"><a href="#三-Spring-模块" class="headerlink" title="三 Spring 模块"></a>三 Spring 模块</h1><p><img src="https://github.com/anyeansan/pics/raw/master/CS/Frame/Spring/spring-overview.png" alt=""></p>
<h1 id="四-IOC"><a href="#四-IOC" class="headerlink" title="四 IOC"></a>四 IOC</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><ol>
<li><code>Inversion of Control</code> 控制反转</li>
<li>控制：资源的获取方式<ol>
<li>主动式：需要什么资源自己创建</li>
<li>被动式：资源不是自己创建的，而是由容器来创建和管理，需要什么资源由容器注入</li>
</ol>
</li>
<li>控制反转：主动的创建资源变为被动的接受资源</li>
</ol>
<h2 id="4-2-DI"><a href="#4-2-DI" class="headerlink" title="4.2 DI"></a>4.2 DI</h2><ol>
<li><code>Dependency Injection</code> 依赖注入</li>
<li><code>IOC</code> 是一种思想，<code>DI</code> 是 <code>IOC</code> 的一种实现</li>
<li>bean 之间的关系<ol>
<li>依赖： <code>has a</code></li>
<li>继承： <code>is a</code></li>
</ol>
</li>
<li>容器通过反射为组件（类）注入运行时所依赖的其它组件</li>
</ol>
<h2 id="4-3-IOC-容器"><a href="#4-3-IOC-容器" class="headerlink" title="4.3 IOC 容器"></a>4.3 IOC 容器</h2><h3 id="1-BeanFactory"><a href="#1-BeanFactory" class="headerlink" title="1 BeanFactory"></a>1 <code>BeanFactory</code></h3><h4 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>IOC 容器的基本实现，Spring 最底层的接口，负责 Bean 的创建</li>
<li>延迟加载，第一次获取对象 <code>getBean()</code> 时才实例化 Bean</li>
</ol>
<h4 id="2-API"><a href="#2-API" class="headerlink" title="2 API"></a>2 API</h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Object getBean(String name)</code></td>
<td>根据名称获取 Bean 对象</td>
</tr>
<tr>
<td><code>T getBean(String name, Class&lt;T&gt; requiredType)</code></td>
<td>根据名称和类型获取 Bean 对象</td>
</tr>
</tbody></table>
<h3 id="2-ApplicationContext"><a href="#2-ApplicationContext" class="headerlink" title="2 ApplicationContext"></a>2 <code>ApplicationContext</code></h3><h4 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li><code>BeanFactory</code> 子接口，更多的负责容器功能的实现</li>
<li>立即加载，创建容器时就会实例化配置的所有 Bean</li>
</ol>
<h4 id="2-小弟"><a href="#2-小弟" class="headerlink" title="2 小弟"></a>2 小弟</h4><table>
<thead>
<tr>
<th>小弟</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>ClassPathXmlApplicationContext</code></td>
<td>加载类路径下的 XML 配置创建容器</td>
</tr>
<tr>
<td><code>AnnotationConfigApplicationContext</code></td>
<td>加载注解配置创建容器</td>
</tr>
<tr>
<td><code>FileSystemXmlApplicaitonContext</code></td>
<td>加载磁盘路径下的 XML 配置创建容器</td>
</tr>
<tr>
<td><code>WebApplicationContext</code></td>
<td>WEB 容器</td>
</tr>
</tbody></table>
<h1 id="五-XML-配置"><a href="#五-XML-配置" class="headerlink" title="五 XML 配置"></a>五 XML 配置</h1><h2 id="5-1-配置"><a href="#5-1-配置" class="headerlink" title="5.1 配置"></a>5.1 配置</h2><h3 id="1-import"><a href="#1-import" class="headerlink" title="1 import"></a>1 import</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;import resource=&quot;导入其它配置文件&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-bean"><a href="#2-bean" class="headerlink" title="2 bean"></a>2 bean</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; name=&quot;&quot; class=&quot;&quot; scope=&quot;&quot; autowire=&quot;&quot; parent=&quot;&quot; abstract=&quot;&quot; depends-on=&quot;&quot; init-method=&quot;&quot; destroy-method=&quot;&quot;&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td>唯一标识</td>
</tr>
<tr>
<td><code>name</code></td>
<td>别名，可以有多个用逗号隔开</td>
</tr>
<tr>
<td><code>class</code></td>
<td>全限定类名</td>
</tr>
<tr>
<td><code>scope</code></td>
<td>作用域</td>
</tr>
<tr>
<td><code>autowire</code></td>
<td>自动导入</td>
</tr>
<tr>
<td><code>parent</code></td>
<td>指定当前 Bean 的配置信息继承于哪个 Bean，注意：只是配置信息的继承</td>
</tr>
<tr>
<td><code>abstract</code></td>
<td>表示当前 Bean 是抽象的，不能创建实例，用来被其它 Bean 继承</td>
</tr>
<tr>
<td><code>depends-on</code></td>
<td>表示当前 Bean 依赖于哪些 Bean，多个用逗号隔开，只是改变实例化顺序（默认按配置顺序实例化）</td>
</tr>
<tr>
<td><code>init-method</code></td>
<td>自定义初始化方法</td>
</tr>
<tr>
<td><code>destroy-method</code></td>
<td>自定义销毁方法</td>
</tr>
</tbody></table>
<h3 id="3-引入资源文件"><a href="#3-引入资源文件" class="headerlink" title="3 引入资源文件"></a>3 引入资源文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 1</span><br><span class="line">&lt;context:property-placeholder location=&quot;&quot;/&gt;</span><br><span class="line">// 2</span><br><span class="line">&lt;bean class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;location&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-2-Bean-实例化"><a href="#5-2-Bean-实例化" class="headerlink" title="5.2 Bean 实例化"></a>5.2 Bean 实例化</h2><h3 id="1-构造方法"><a href="#1-构造方法" class="headerlink" title="1 构造方法"></a>1 构造方法</h3><h4 id="1-无参构造"><a href="#1-无参构造" class="headerlink" title="1 无参构造"></a>1 无参构造</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-有参构造"><a href="#2-有参构造" class="headerlink" title="2 有参构造"></a>2 有参构造</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;</span><br><span class="line">	&lt;constructor-arg name=&quot;构造参数名&quot; value=&quot;&quot;/&gt;</span><br><span class="line">	&lt;constructor-arg index=&quot;构造参数索引，从0开始&quot; value=&quot;&quot;/&gt;</span><br><span class="line">	&lt;constructor-arg type=&quot;构造参数类型&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-静态工厂"><a href="#2-静态工厂" class="headerlink" title="2 静态工厂"></a>2 静态工厂</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot;  class=&quot;静态工厂全类名&quot;  factory-method=&quot;静态工厂中获取 bean的静态方法&quot;&gt;</span><br><span class="line">	// 方法传参</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-实例工厂"><a href="#3-实例工厂" class="headerlink" title="3 实例工厂"></a>3 实例工厂</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 必须先有工厂实例对象，通过工厂实例对象创建对象</span><br><span class="line">&lt;bean id=&quot;&quot; class=&quot;工厂全限定类名&quot;&gt;</span><br><span class="line">&lt;bean id=&quot;&quot; factory-bean=&quot;工厂beanID&quot; factory-method=&quot;工厂中获取 bean 的方法&quot;&gt;</span><br><span class="line">	// 方法传参</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-FactoryBean"><a href="#4-FactoryBean" class="headerlink" title="4 FactoryBean"></a>4 FactoryBean</h3><h4 id="1-API"><a href="#1-API" class="headerlink" title="1 API"></a>1 API</h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>T getObject()</code></td>
<td>Spring 自动调用，返回创建对象</td>
</tr>
<tr>
<td><code>Class&lt;?&gt; getObjectType()</code></td>
<td>Spring 自动调用，获取创建对象的类型</td>
</tr>
<tr>
<td><code>boolean isSingleton()</code></td>
<td>Spring 自动调用，确定是否是单例</td>
</tr>
</tbody></table>
<h4 id="2-说明"><a href="#2-说明" class="headerlink" title="2 说明"></a>2 说明</h4><ol>
<li>对于实现了 <code>FactoryBean</code> 接口的类，Spring 会把它当成一个工厂 <code>factory bean</code> </li>
<li>配置工厂 Bean 不会返回此工厂本身，而是返回其 <code>getObject()</code> 方法返回的Bean 对象</li>
</ol>
<h2 id="5-3-Bean-作用域"><a href="#5-3-Bean-作用域" class="headerlink" title="5.3 Bean 作用域"></a>5.3 Bean 作用域</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;  scope=&quot;&quot;&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><code>scope</code></th>
<th>说明</th>
<th>创建时机</th>
</tr>
</thead>
<tbody><tr>
<td><code>singleton</code>（默认）</td>
<td>并非 bean 本身是单例的，而是指 bean 在 IOC 容器中是单例的</td>
<td>IOC 容器创建时就会创建 bean</td>
</tr>
<tr>
<td><code>prototype</code></td>
<td>多例</td>
<td>每次获取时创建一个新的 bean</td>
</tr>
<tr>
<td><code>request</code></td>
<td>请求范围，仅适用于 <code>WebApplicationContext</code> 环境</td>
<td>每次 HTTP 请求共享一个bean</td>
</tr>
<tr>
<td><code>session</code></td>
<td>会话范围，仅适用于 <code>WebApplicationContext</code> 环境</td>
<td>每个 session 共享一个 bean</td>
</tr>
<tr>
<td><code>application</code></td>
<td>应用范围，仅适用于 <code>WebApplicationContext</code> 环境</td>
<td>每个 application 共享一个 bean</td>
</tr>
</tbody></table>
<h2 id="5-4-依赖注入方式"><a href="#5-4-依赖注入方式" class="headerlink" title="5.4 依赖注入方式"></a>5.4 依赖注入方式</h2><h3 id="1-手动装配"><a href="#1-手动装配" class="headerlink" title="1 手动装配"></a>1 手动装配</h3><h4 id="1-构造器注入（有参构造）"><a href="#1-构造器注入（有参构造）" class="headerlink" title="1 构造器注入（有参构造）"></a>1 构造器注入（有参构造）</h4><h4 id="2-set-注入"><a href="#2-set-注入" class="headerlink" title="2 set 注入"></a>2 set 注入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;&quot; value=&quot;基本类型&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;&quot; ref=&quot;引用类型&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-c-命名空间"><a href="#3-c-命名空间" class="headerlink" title="3 c 命名空间"></a>3 c 命名空间</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot; c:name=value c:name-ref=value&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>用 <code>c</code> 替换构造注入中的 <code>&lt;constructor-arg&gt;</code>，直接注入构造参数</li>
</ol>
<h4 id="4-P-命名空间"><a href="#4-P-命名空间" class="headerlink" title="4 P 命名空间"></a>4 P 命名空间</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot; p:name=value p:name-ref=value&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>用 <code>p</code> 替换 set 注入中的 <code>&lt;property&gt;</code> 标签，直接注入属性值</li>
<li><code>&lt;property name=&quot;key&quot; value=&quot;value&quot;/&gt;</code> → <code>p:key=&quot;value&quot;</code></li>
<li><code>&lt;property name=&quot;key&quot; ref=&quot;value&quot;&gt;</code> → <code>p:key-ref=&quot;value&quot;</code></li>
</ol>
<h4 id="5-SpEL"><a href="#5-SpEL" class="headerlink" title="5 SpEL"></a>5 SpEL</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;&quot; value=&quot;#&#123;spEL表达式&#125;&quot;&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>#{123}</code></td>
<td>数字</td>
</tr>
<tr>
<td><code>#{&#39;abc&#39;}</code></td>
<td>字符串</td>
</tr>
<tr>
<td><code>#{beanId}</code></td>
<td>bean</td>
</tr>
<tr>
<td><code>#{beanId.propName}</code></td>
<td>bean 的属性</td>
</tr>
<tr>
<td><code>#{beanId.method()}</code></td>
<td>执行 bean 的方法</td>
</tr>
<tr>
<td><code>#{xx?.method()}</code></td>
<td>如果 <code>xx</code> 不为空则调用方法，否则不调用</td>
</tr>
<tr>
<td><code>#{Type.field/method()}</code></td>
<td>静态属性/方法</td>
</tr>
</tbody></table>
<h3 id="2-自动装配-autowire"><a href="#2-自动装配-autowire" class="headerlink" title="2 自动装配 autowire"></a>2 自动装配 autowire</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; name=&quot;&quot; class=&quot;&quot; autowire=&quot;&quot;&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><code>autowire</code></th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>default/no</code></td>
<td>默认，不自动装配</td>
</tr>
<tr>
<td><code>byName</code></td>
<td>查找与 <code>set</code> 方法后边的值（第一个字母小写） 相同的 <code>beanID</code></td>
</tr>
<tr>
<td><code>byType</code></td>
<td>查找与属性类型相同的 <code>bean</code> ，如果此类型有多个会报错</td>
</tr>
<tr>
<td><code>constructor</code></td>
<td>按照构造器注入</td>
</tr>
</tbody></table>
<h2 id="5-5-依赖注入类型"><a href="#5-5-依赖注入类型" class="headerlink" title="5.5 依赖注入类型"></a>5.5 依赖注入类型</h2><h3 id="1-null"><a href="#1-null" class="headerlink" title="1 null"></a>1 null</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;property name=&quot;&quot;&gt;</span><br><span class="line">		&lt;null/&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-基本类型及其包装类，String"><a href="#2-基本类型及其包装类，String" class="headerlink" title="2 基本类型及其包装类，String"></a>2 基本类型及其包装类，String</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;property name=&quot;&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-Java-Bean"><a href="#3-Java-Bean" class="headerlink" title="3 Java Bean"></a>3 Java Bean</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 1 外部 bean</span><br><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;property name=&quot;&quot; ref=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">// 2 内部 bean</span><br><span class="line">&lt;bean&gt;</span><br><span class="line">    &lt;property name=&quot;&quot;&gt;</span><br><span class="line">        &lt;bean&gt;&lt;/bean&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-数组-集合"><a href="#4-数组-集合" class="headerlink" title="4 数组/集合"></a>4 数组/集合</h3><h4 id="1-数组"><a href="#1-数组" class="headerlink" title="1 数组"></a>1 数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">    &lt;property name=&quot;&quot;&gt;</span><br><span class="line">        &lt;array&gt;</span><br><span class="line">        	// 1 简单类型值</span><br><span class="line">            &lt;value&gt;&lt;/value&gt;</span><br><span class="line">            // 2 外部 bean</span><br><span class="line">            &lt;ref bean=&quot;&quot;/&gt;</span><br><span class="line">            // 3 内部 bean</span><br><span class="line">            &lt;bean&gt;&lt;/bean&gt;</span><br><span class="line">        &lt;/array&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-List"><a href="#2-List" class="headerlink" title="2 List"></a>2 List</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">    &lt;property name=&quot;&quot;&gt;</span><br><span class="line">        &lt;list&gt;</span><br><span class="line">            &lt;value&gt;&lt;/value&gt;</span><br><span class="line">            &lt;ref bean=&quot;&quot;/&gt;</span><br><span class="line">            &lt;bean&gt;&lt;/bean&gt;</span><br><span class="line">        &lt;/list&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-Set"><a href="#3-Set" class="headerlink" title="3 Set"></a>3 Set</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">    &lt;property name=&quot;&quot;&gt;</span><br><span class="line">        &lt;set&gt;</span><br><span class="line">            &lt;value&gt;&lt;/value&gt;</span><br><span class="line">            &lt;ref bean=&quot;&quot;/&gt;</span><br><span class="line">            &lt;bean&gt;&lt;/bean&gt;</span><br><span class="line">        &lt;/set&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4-Map"><a href="#4-Map" class="headerlink" title="4 Map"></a>4 Map</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">    &lt;property name=&quot;&quot;&gt;</span><br><span class="line">        &lt;map&gt;</span><br><span class="line">            &lt;entry key=&quot;&quot; value=&quot;&quot;/&gt;</span><br><span class="line">            &lt;entry key=&quot;&quot; value-ref=&quot;&quot;/&gt;</span><br><span class="line">            &lt;entry key=&quot;&quot;&gt;</span><br><span class="line">            	&lt;bean&gt;&lt;/bean&gt;</span><br><span class="line">            &lt;/entry&gt;</span><br><span class="line">        &lt;/map&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="5-Properties"><a href="#5-Properties" class="headerlink" title="5 Properties"></a>5 Properties</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">    &lt;property name=&quot;&quot;&gt;</span><br><span class="line">        &lt;props&gt;</span><br><span class="line">            &lt;prop key=&quot;&quot;&gt;value&lt;/prop&gt;</span><br><span class="line">        &lt;/props&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="6-util-名称空间"><a href="#6-util-名称空间" class="headerlink" title="6 util 名称空间"></a>6 <code>util</code> 名称空间</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 使用 Util 名称空间创建集合类型的 bean，方便其它人引用</span><br><span class="line">&lt;util:list id=&quot;&quot;&gt;&lt;/util:list&gt;</span><br><span class="line">&lt;util:set id=&quot;&quot;&gt;&lt;/util:set&gt;</span><br><span class="line">&lt;util:map id=&quot;&quot;&gt;&lt;/util:map&gt;</span><br><span class="line">&lt;util:properties id=&quot;&quot;&gt;&lt;/util:properties&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-6-Bean-生命周期"><a href="#5-6-Bean-生命周期" class="headerlink" title="5.6 Bean 生命周期"></a>5.6 Bean 生命周期</h2><p><img src="https://github.com/anyeansan/pics/raw/master/CS/Frame/Spring/Bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt=""></p>
<h3 id="1-BeanPostProcessor"><a href="#1-BeanPostProcessor" class="headerlink" title="1 BeanPostProcessor"></a>1 BeanPostProcessor</h3><h4 id="1-概述-2"><a href="#1-概述-2" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>后置处理器</li>
<li>spring 提供的工厂勾子，用于修改实例对象，如可以生成代理对象，是AOP 底层</li>
<li>只要实现此接口，并将实现类提供给 spring 容器，则会自动针对 spring 容器中的所有 bean，如果要针对某一个目标类，可以利用方法中的 <code>beanName</code> （即 BeanID）参数</li>
</ol>
<h4 id="2-API-1"><a href="#2-API-1" class="headerlink" title="2 API"></a>2 API</h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Object postProcessBeforeInitialization(Object bean, String beanName)</code></td>
<td>初始化方法前执行</td>
</tr>
<tr>
<td><code>Object postProcessAfterInitialization(Object bean, String beanName)</code></td>
<td>初始化方法后执行</td>
</tr>
</tbody></table>
<h4 id="3-类创建流程"><a href="#3-类创建流程" class="headerlink" title="3 类创建流程"></a>3 类创建流程</h4><ol>
<li>一般过程</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A a=new A()</span><br><span class="line">a.init()</span><br><span class="line">a.add()</span><br><span class="line">a.destroy()</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>现有一类 B 实现了 BeanPostProcessor 接口</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A a=new A()</span><br><span class="line">// 在后处理 Bean 方法前后都可以返回代理对象</span><br><span class="line">a/aProxy=B.postProcessBeforeInitialization(a)</span><br><span class="line">a.init()</span><br><span class="line">a/aproxy=B.postProcessAfterInitialization(a)</span><br><span class="line">a.add()</span><br><span class="line">a.destroy()</span><br></pre></td></tr></table></figure>

<h1 id="六-注解配置"><a href="#六-注解配置" class="headerlink" title="六 注解配置"></a>六 注解配置</h1><h2 id="6-1-配置"><a href="#6-1-配置" class="headerlink" title="6.1 配置"></a>6.1 配置</h2><h3 id="1-开启注解"><a href="#1-开启注解" class="headerlink" title="1 开启注解"></a>1 开启注解</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:annotation-config/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-注解扫描"><a href="#2-注解扫描" class="headerlink" title="2 注解扫描"></a>2 注解扫描</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:component-scan base-package=&quot;&quot; use-default-filters=&quot;&quot;&gt;</span><br><span class="line">    &lt;context:include-filter type=&quot;&quot; expression=&quot;&quot;/&gt;</span><br><span class="line">    &lt;context:exclude-filter type=&quot;&quot; expression=&quot;&quot;/&gt;</span><br><span class="line">&lt;/context:component-scan&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>配置了注解扫描则会开启注解，即不需要再配置 <code>&lt;context:annotation-config/&gt;</code> </li>
<li><code>use-default-filters</code><ol>
<li><code>true</code>，默认，表示使用 <code>exclude</code>，排除某些类</li>
<li><code>false</code>，表示使用 <code>include</code>，仅扫描某些类</li>
</ol>
</li>
<li><code>type</code><ol>
<li><code>annotation</code>，则 <code>expression</code> 为注解全限定类名</li>
<li><code>assignable</code>，则 <code>expression</code> 为 bean 全限定类名</li>
</ol>
</li>
</ol>
<h2 id="6-2-Bean-实例化"><a href="#6-2-Bean-实例化" class="headerlink" title="6.2 Bean 实例化"></a>6.2 Bean 实例化</h2><h3 id="1-分类"><a href="#1-分类" class="headerlink" title="1 分类"></a>1 分类</h3><table>
<thead>
<tr>
<th>注解</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Component</code></td>
<td>用在任意层，不指定 <code>beanID</code> 则默认为类名首字母小写</td>
</tr>
<tr>
<td><code>@Controller</code></td>
<td>用在 WEB 层，不指定 <code>beanID</code> 则默认为类名首字母小写</td>
</tr>
<tr>
<td><code>@Service</code></td>
<td>用在 Service 层，不指定 <code>beanID</code> 则默认为类名首字母小写</td>
</tr>
<tr>
<td><code>@Repository</code></td>
<td>用在 DAO 层，不指定 <code>beanID</code> 则默认为类名首字母小写</td>
</tr>
</tbody></table>
<h3 id="2-实例化注解属性"><a href="#2-实例化注解属性" class="headerlink" title="2 实例化注解属性"></a>2 实例化注解属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>指定 <code>beanID</code></td>
</tr>
</tbody></table>
<h2 id="6-3-Bean-作用域-Scope"><a href="#6-3-Bean-作用域-Scope" class="headerlink" title="6.3 Bean 作用域 @Scope"></a>6.3 Bean 作用域 <code>@Scope</code></h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String scopeName() default &quot;&quot;</code></td>
<td>作用域名，<code>singleton prototype ...</code></td>
</tr>
<tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>同 <code>scopeName()</code></td>
</tr>
</tbody></table>
<h2 id="6-4-依赖注入"><a href="#6-4-依赖注入" class="headerlink" title="6.4 依赖注入"></a>6.4 依赖注入</h2><h3 id="1-value"><a href="#1-value" class="headerlink" title="1 @value"></a>1 <code>@value</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value()</code></td>
<td>注入基本数据类型和 String，值可以使用 <code>${spEL}</code> 表达式</td>
</tr>
</tbody></table>
<h3 id="2-Autowired"><a href="#2-Autowired" class="headerlink" title="2 @Autowired"></a>2 <code>@Autowired</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>boolean required() default true</code></td>
<td><code>true</code> 表示此属性必须注入值，<code>false</code> 表示若没有注入则为 <code>null</code></td>
</tr>
</tbody></table>
<ol>
<li>可用在 <code>构造 属性 方法 形参</code> 上，如果定义在方法上，则此方法会在 Bean 创建时自动运行，且为每个形参自动注入</li>
<li>首先按照 <code>byType</code> 注入，如果有多个相同类型则再按照 <code>byName</code> 注入</li>
</ol>
<h3 id="3-Qualifier"><a href="#3-Qualifier" class="headerlink" title="3 @Qualifier"></a>3 <code>@Qualifier</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>值为 <code>beanID</code></td>
</tr>
</tbody></table>
<ol>
<li>作用在属性上<ol>
<li>不能单独使用，要配合 <code>@autowire</code></li>
<li>按照类型注入且指定 <code>beanID</code></li>
</ol>
</li>
<li>作用在 <code>set</code> 方法上<ol>
<li>可单独使用</li>
<li>按照 <code>beanID</code> 注入</li>
</ol>
</li>
</ol>
<h3 id="4-Resource"><a href="#4-Resource" class="headerlink" title="4 @Resource"></a>4 <code>@Resource</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String name() default &quot;&quot;</code></td>
<td><code>beanID</code></td>
</tr>
<tr>
<td><code>Class&lt;?&gt; type default Object.class</code></td>
<td><code>bean</code> 的类型</td>
</tr>
</tbody></table>
<ol>
<li>JDK 中的注解</li>
<li>指定 <code>name</code> 和 <code>type</code><ul>
<li>则 Spring 查找指定 <code>beanID</code> 且为指定类型的 bean</li>
</ul>
</li>
<li>指定 <code>name</code><ul>
<li>则 Spring 查找指定 <code>beanID</code> 的 bean</li>
</ul>
</li>
<li>指定 <code>type</code><ul>
<li>则 Spring 查找指定类型的 bean</li>
</ul>
</li>
<li>都不指定<ul>
<li>则首先按照 <code>byName</code> 注入，若找不到则按照 <code>byType</code> 注入</li>
</ul>
</li>
</ol>
<h2 id="6-5-生命周期"><a href="#6-5-生命周期" class="headerlink" title="6.5 生命周期"></a>6.5 生命周期</h2><table>
<thead>
<tr>
<th>注解</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>@PostConstruct</code></td>
<td>初始化</td>
</tr>
<tr>
<td><code>@PreDestroy</code></td>
<td>销毁</td>
</tr>
</tbody></table>
<ul>
<li>这两个注解包括 <code>@Resource</code> 都是 JDK 中的注解，在 JDK11 之后移除了，想要使用需要 <code>javax.annotation-api</code> </li>
</ul>
<h2 id="6-6-其它注解"><a href="#6-6-其它注解" class="headerlink" title="6.6 其它注解"></a>6.6 其它注解</h2><h3 id="1-Configuration"><a href="#1-Configuration" class="headerlink" title="1 @Configuration"></a>1 <code>@Configuration</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>指定配置类的字节码</td>
</tr>
</tbody></table>
<ol>
<li>定义配置类，用于代替 XML 配置文件</li>
<li>相当于 <code>&lt;beans&gt;</code> 标签</li>
<li>创建容器要使用 <code>ApplicationContext</code> 的注解实现类<code>AnnotationApplicationContext</code></li>
</ol>
<h3 id="2-Bean"><a href="#2-Bean" class="headerlink" title="2 @Bean"></a>2 <code>@Bean</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String[] name() default {}</code></td>
<td>为当前方法创建的 bean 指定 <code>beanID</code>，默认 <code>beanID</code> 为方法名</td>
</tr>
<tr>
<td><code>String[] value() default {}</code></td>
<td>等价于 <code>name()</code></td>
</tr>
</tbody></table>
<ol>
<li><code>@Configuration + @Bean</code></li>
<li><code>@Bean</code> 定义在方法上，相当于 <code>&lt;bean&gt;</code> 标签，将当前方法的返回值作为 Bean 存入 Spring 容器  </li>
</ol>
<h3 id="3-ComponentScan"><a href="#3-ComponentScan" class="headerlink" title="3 @ComponentScan"></a>3 <code>@ComponentScan</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String[] basePackages() default {}</code></td>
<td>指定要扫描的包</td>
</tr>
<tr>
<td><code>String[] value() default {}</code></td>
<td>等价于 <code>basePackages()</code></td>
</tr>
</tbody></table>
<h3 id="4-PropertySource"><a href="#4-PropertySource" class="headerlink" title="4 @PropertySource"></a>4 <code>@PropertySource</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String[] value()</code></td>
<td>指定 <code>.properties</code> 文件路径</td>
</tr>
</tbody></table>
<h3 id="5-Import"><a href="#5-Import" class="headerlink" title="5 @Import"></a>5 <code>@Import</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Class&lt;?&gt;[] value()</code></td>
<td>指定其他配置类的字节码</td>
</tr>
</tbody></table>
<h1 id="七-AOP"><a href="#七-AOP" class="headerlink" title="七 AOP"></a>七 AOP</h1><h2 id="7-1-概述"><a href="#7-1-概述" class="headerlink" title="7.1 概述"></a>7.1 概述</h2><ol>
<li><code>Aspect Oriented Programming</code> 面向切面编程</li>
<li>运行期间，将某段代码动态的切入到指定方法的指定位置</li>
<li>AOP 采取横向抽取机制，取代了传统纵向继承体系重复性代码，将核心业务与外围业务（如日志记录、权限校验、异常处理、事务控制…）分离，提高模块化，降低耦合度</li>
</ol>
<h2 id="7-2-AOP-术语"><a href="#7-2-AOP-术语" class="headerlink" title="7.2 AOP 术语"></a>7.2 AOP 术语</h2><table>
<thead>
<tr>
<th>术语</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>横切关注点</td>
<td>从每个方法中抽取出来的同一类非核心业务</td>
</tr>
<tr>
<td><code>Target</code></td>
<td>目标类，需要被代理的类</td>
</tr>
<tr>
<td><code>Joinpoint</code></td>
<td>连接点，目标类中能够被增强的方法</td>
</tr>
<tr>
<td><code>PointCut</code></td>
<td>切入点，已经被增强的连接点</td>
</tr>
<tr>
<td><code>Advice</code></td>
<td>通知，即增强的代码，一个方法</td>
</tr>
<tr>
<td><code>Aspect</code></td>
<td>切面，<code>通知+切入点</code> ，一个类</td>
</tr>
<tr>
<td><code>Weaving</code></td>
<td>织入，把切面应用到目标对象并创建新的代理对象的过程</td>
</tr>
<tr>
<td><code>proxy</code></td>
<td>代理对象</td>
</tr>
</tbody></table>
<h2 id="7-3-AspectJ-amp-Spring-AOP"><a href="#7-3-AspectJ-amp-Spring-AOP" class="headerlink" title="7.3 AspectJ &amp; Spring-AOP"></a>7.3 AspectJ &amp; Spring-AOP</h2><h3 id="1-概述-3"><a href="#1-概述-3" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>AOP 是一种思想，AOP 的底层是动态代理</li>
<li>AspectJ 和 Spring-AOP 是 AOP 的实现框架</li>
<li>Spring-AOP 借用了 AspectJ的配置语法</li>
<li>AspectJ 是静态织入：<ul>
<li>在编译期使用 Aspect J的 acj 编译器(类似javac)把aspect 类编译成 class 字节码后，在 java 目标类编译时织入</li>
</ul>
</li>
<li>Spring-AOP 是动态织入：<ul>
<li>在运行时动态将要增强的代码织入到目标类中</li>
</ul>
</li>
</ol>
<h3 id="2-包"><a href="#2-包" class="headerlink" title="2 包"></a>2 包</h3><ol>
<li><code>spring-aop.jar</code><ul>
<li>aop 实现，依赖于 aop 联盟包 <code>aopalliance.jar</code>（已经集成）</li>
</ul>
</li>
<li><code>spring-aspects.jar</code><ul>
<li>集成 AspectJ，依赖于 aspect 规范包 <code>aspectjweaver.jar</code></li>
</ul>
</li>
</ol>
<h3 id="3-通知-Advice"><a href="#3-通知-Advice" class="headerlink" title="3 通知 Advice"></a>3 通知 Advice</h3><h4 id="1-概述-4"><a href="#1-概述-4" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>AOP 联盟的通知类型  <code>org.aopalliance.aop.Advice</code><ol>
<li>不同的接口代表不同的通知类型</li>
<li>自定义通知实现指定接口即代表此类通知</li>
</ol>
</li>
<li>AspectJ 的通知类型<ol>
<li>每种通知类型有特定的方法格式</li>
<li>自定义通知首先定义指定格式的方法，然后配置为指定类型的通知</li>
</ol>
</li>
</ol>
<h4 id="2-AOP-联盟通知类型"><a href="#2-AOP-联盟通知类型" class="headerlink" title="2 AOP 联盟通知类型"></a>2 AOP 联盟通知类型</h4><table>
<thead>
<tr>
<th>类型</th>
<th>接口</th>
</tr>
</thead>
<tbody><tr>
<td>前置通知</td>
<td><code>org.springframework.aop.MethodBeforeAdvice</code></td>
</tr>
<tr>
<td>后置通知</td>
<td><code>org.springframework.aop.AfterReturningAdvice</code></td>
</tr>
<tr>
<td>环绕通知</td>
<td><code>org.aopalliance.intercept.MethodInterceptor</code></td>
</tr>
<tr>
<td>异常通知</td>
<td><code>org.springframework.aop.ThrowsAdvice</code></td>
</tr>
<tr>
<td>引介通知</td>
<td><code>org.springframework.aop.IntroductionInterceptor</code></td>
</tr>
</tbody></table>
<h5 id="1-环绕通知"><a href="#1-环绕通知" class="headerlink" title="1 环绕通知"></a>1 环绕通知</h5><ul>
<li>因为环绕通知是在目标方法前后执行，而系统无法判断哪些代码在前哪些在后，所以需要在环绕通知中手动执行目标方法，用以区分前后</li>
</ul>
<h5 id="2-执行顺序"><a href="#2-执行顺序" class="headerlink" title="2 执行顺序"></a>2 执行顺序</h5><ol>
<li>前置通知</li>
<li>环绕通知（前）</li>
<li>目标方法</li>
<li>环绕通知（后）</li>
<li>后置通知</li>
</ol>
<h4 id="3-AspectJ-通知类型"><a href="#3-AspectJ-通知类型" class="headerlink" title="3 AspectJ 通知类型"></a>3 AspectJ 通知类型</h4><table>
<thead>
<tr>
<th>类型</th>
<th>方法格式</th>
</tr>
</thead>
<tbody><tr>
<td>前置通知 <code>before</code></td>
<td><code>方法名([JoinPoint jp])</code></td>
</tr>
<tr>
<td>后置通知 <code>afterReturning</code></td>
<td><code>方法名([JoinPoint jp], [Object obj])</code>，obj：目标方法返回值</td>
</tr>
<tr>
<td>环绕通知 <code>round</code></td>
<td><code>方法名(ProceedingJoinPoint pjp)</code></td>
</tr>
<tr>
<td>异常通知 <code>afterThrowing</code></td>
<td><code>方法名([JoinPoint jp], [Throwable e])</code></td>
</tr>
<tr>
<td>最终通知 <code>after</code></td>
<td><code>方法名([JoinPoint jp])</code></td>
</tr>
</tbody></table>
<h5 id="1-org-aspectj-lang-JoinPoint"><a href="#1-org-aspectj-lang-JoinPoint" class="headerlink" title="1 org.aspectj.lang.JoinPoint"></a>1 <code>org.aspectj.lang.JoinPoint</code></h5><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Signature getSignature()</code></td>
<td>获取封装了署名信息的对象，该对象可以获取到目标方法名，所属类的 Class 等信息</td>
</tr>
<tr>
<td><code>Object getTarget()</code></td>
<td>获取目标对象</td>
</tr>
<tr>
<td><code>Ojbect getThis()</code></td>
<td>获取代理对象</td>
</tr>
<tr>
<td><code>Object[] getArgs()</code></td>
<td>获取目标方法的形参</td>
</tr>
</tbody></table>
<h5 id="2-org-aspectj-lang-ProceedingJoinPoint-extends-JoinPoint"><a href="#2-org-aspectj-lang-ProceedingJoinPoint-extends-JoinPoint" class="headerlink" title="2 org.aspectj.lang.ProceedingJoinPoint extends JoinPoint"></a>2 <code>org.aspectj.lang.ProceedingJoinPoint extends JoinPoint</code></h5><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Object proceed()</code></td>
<td>执行目标方法</td>
</tr>
<tr>
<td><code>Object proceed(Object[] args)</code></td>
<td>使用新的参数执行目标方法</td>
</tr>
</tbody></table>
<h3 id="4-AspectJ-切入点表达式"><a href="#4-AspectJ-切入点表达式" class="headerlink" title="4 AspectJ 切入点表达式"></a>4 AspectJ 切入点表达式</h3><table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>execution(修饰符 返回值 包.类.方法(参数)throws 异常)</code></td>
<td>匹配符合的方法</td>
</tr>
<tr>
<td><code>within(包)</code></td>
<td>匹配包或子包中的方法</td>
</tr>
<tr>
<td><code>this(接口全限定名)</code></td>
<td>匹配实现接口的代理对象中的方法</td>
</tr>
<tr>
<td><code>target(接口全限定名)</code></td>
<td>匹配实现接口的目标对象中的方法</td>
</tr>
<tr>
<td><code>args(参数)</code></td>
<td>匹配符合参数格式的方法</td>
</tr>
<tr>
<td><code>bean(&quot;beanId&quot;)</code></td>
<td>匹配指定 bean 中的所有方法</td>
</tr>
</tbody></table>
<h5 id="execution"><a href="#execution" class="headerlink" title="execution"></a><code>execution</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(修饰符 返回值 包.类.方法(参数)throws 异常)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>修饰符</td>
<td>一般省略</td>
<td><code>*</code>：任意<br><code>public</code>：公有</td>
</tr>
<tr>
<td>返回值</td>
<td>不可省略</td>
<td><code>*</code>：任意<br/><code>void String ...</code></td>
</tr>
<tr>
<td>包</td>
<td>不可省略</td>
<td><code>*</code>：任意<br/><code>..</code>：当前包及其子包</td>
</tr>
<tr>
<td>类</td>
<td>不可省略</td>
<td><code>*</code>：任意<br/><code>XXX *XXX XXX*</code></td>
</tr>
<tr>
<td>方法</td>
<td>不可省略</td>
<td><code>*</code>：任意<br/><code>XXX *XXX XXX*</code></td>
</tr>
<tr>
<td>参数</td>
<td>不可省略</td>
<td><code>..</code>：任意类型参数，有无参数皆可<br><code>*</code>：任意类型参数，且必须有参数<br/><code>int</code>：基本类型直接写名称<br><code>java.lang.String</code>：引用类型写全限定名</td>
</tr>
<tr>
<td>异常</td>
<td>一般省略</td>
<td></td>
</tr>
</tbody></table>
<h2 id="7-4-AOP-实现"><a href="#7-4-AOP-实现" class="headerlink" title="7.4 AOP 实现"></a>7.4 AOP 实现</h2><h3 id="1-代理模式"><a href="#1-代理模式" class="headerlink" title="1 代理模式"></a>1 代理模式</h3><ol>
<li>静态代理</li>
<li>动态代理</li>
</ol>
<h3 id="2-Spring-AOP"><a href="#2-Spring-AOP" class="headerlink" title="2 Spring-AOP"></a>2 Spring-AOP</h3><h4 id="1-编程式-ProxyFactory"><a href="#1-编程式-ProxyFactory" class="headerlink" title="1 编程式 ProxyFactory"></a>1 编程式 <code>ProxyFactory</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ProxyFactory factory = new ProxyFactory();</span><br><span class="line">factory.setTarget();</span><br><span class="line">factory.setInterfaces();</span><br><span class="line">factory.addAdvice();</span><br><span class="line">factory.getProxy();</span><br></pre></td></tr></table></figure>

<h4 id="2-配置式-ProxyFactoryBean"><a href="#2-配置式-ProxyFactoryBean" class="headerlink" title="2 配置式 ProxyFactoryBean"></a>2 配置式 <code>ProxyFactoryBean</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;interfaces&quot; value=&quot;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;target&quot; ref=&quot;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;interceptorNames&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-Spring-AOP-AspectJ"><a href="#3-Spring-AOP-AspectJ" class="headerlink" title="3 Spring-AOP + AspectJ"></a>3 Spring-AOP + AspectJ</h3><h4 id="1-AOP-联盟的通知类型"><a href="#1-AOP-联盟的通知类型" class="headerlink" title="1 AOP 联盟的通知类型"></a>1 AOP 联盟的通知类型</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;aop:config proxy-target-class=&quot;&quot;&gt;</span><br><span class="line">	// 配置切入点，可以被此 AOP 配置下的所有配置引用</span><br><span class="line">	&lt;aop:pointcut id=&quot;&quot; expression=&quot;&quot;/&gt;</span><br><span class="line">	// 特殊的切面，只有一个通知 和 一个切入点</span><br><span class="line">	&lt;aop:advisor advice-ref=&quot;&quot; pointcut-ref=&quot;&quot; order=&quot;切面优先级&quot;/&gt;</span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>proxy-target-class</code><ul>
<li><code>false</code>：默认，使用 JDK 代理</li>
<li><code>true</code>：使用 cglib 代理</li>
</ul>
</li>
</ul>
<h4 id="2-AspectJ-的通知类型"><a href="#2-AspectJ-的通知类型" class="headerlink" title="2 AspectJ 的通知类型"></a>2 AspectJ 的通知类型</h4><h5 id="1-XML-配置"><a href="#1-XML-配置" class="headerlink" title="1 XML 配置"></a>1 XML 配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;aop:config proxy-target-class=&quot;&quot;&gt;</span><br><span class="line">    &lt;aop:aspect ref=&quot;引入通知&quot; order=&quot;切面优先级&quot;&gt;</span><br><span class="line">    	// 配置切入点，只能被当前 aspect 引用</span><br><span class="line">        &lt;aop:pointcut id=&quot;&quot; expression=&quot;&quot;/&gt;</span><br><span class="line">        &lt;aop:before method=&quot;&quot; pointcut-ref=&quot;&quot;/&gt;</span><br><span class="line">        &lt;aop:after-returning method=&quot;&quot; pointcut-ref=&quot;&quot; returning=&quot;&quot;/&gt;</span><br><span class="line">        &lt;aop:around method=&quot;&quot; pointcut-ref=&quot;&quot;/&gt;</span><br><span class="line">        &lt;aop:after method=&quot;&quot; pointcut-ref=&quot;&quot;/&gt;</span><br><span class="line">        &lt;aop:after-throwing method=&quot;&quot; pointcut-ref=&quot;&quot; throwing=&quot;&quot;/&gt;</span><br><span class="line">    &lt;/aop:aspect&gt;</span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-注解"><a href="#2-注解" class="headerlink" title="2 注解"></a>2 注解</h5><h6 id="1-开启-AOP-注解"><a href="#1-开启-AOP-注解" class="headerlink" title="1 开启 AOP 注解"></a>1 开启 AOP 注解</h6><ol>
<li><p>xml 配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;aop:aspectj-autoproxy proxy-target-class=&quot;默认false&quot;/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注解</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 作用在配置类上（带有 @Configuraction 的类）</span><br><span class="line">@EnableAspectJAutoProxy</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h6 id="2-通知类上"><a href="#2-通知类上" class="headerlink" title="2 通知类上"></a>2 通知类上</h6><table>
<thead>
<tr>
<th>注解</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Aspect</code></td>
<td>声明切面，等价于 <code>&lt;aop:aspect&gt;</code></td>
</tr>
<tr>
<td><code>@Order</code></td>
<td>切面的优先级</td>
</tr>
</tbody></table>
<h6 id="3-通知方法上"><a href="#3-通知方法上" class="headerlink" title="3 通知方法上"></a>3 通知方法上</h6><table>
<thead>
<tr>
<th>注解</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>@PointCut</code></td>
<td><code>execution()</code>：声明切入点，ID 为方法名<br><code>方法名()</code>：引入切入点</td>
</tr>
<tr>
<td><code>@Before</code></td>
<td>前置通知</td>
</tr>
<tr>
<td><code>@AfterReturning</code></td>
<td>后置通知</td>
</tr>
<tr>
<td><code>@Around</code></td>
<td>环绕通知</td>
</tr>
<tr>
<td><code>@After</code></td>
<td>最终通知</td>
</tr>
<tr>
<td><code>@AfterThrowing</code></td>
<td>异常通知</td>
</tr>
</tbody></table>
<h1 id="八-JdbcTemplate"><a href="#八-JdbcTemplate" class="headerlink" title="八 JdbcTemplate"></a>八 JdbcTemplate</h1><h2 id="8-1-概述"><a href="#8-1-概述" class="headerlink" title="8.1 概述"></a>8.1 概述</h2><ol>
<li>Spring 提供用于操作JDBC工具类，类似：DBUtils</li>
<li>依赖 <code>DataSource</code> （数据源）</li>
</ol>
<h2 id="8-2-API"><a href="#8-2-API" class="headerlink" title="8.2 API"></a>8.2 API</h2><h3 id="1-构造"><a href="#1-构造" class="headerlink" title="1 构造"></a>1 构造</h3><ol>
<li><code>JdbcTemplate()</code></li>
<li><code>JdbcTemplate(DataSource dataSource)</code></li>
<li><code>JdbcTemplate(DataSource dataSource, boolean lazyInit)</code></li>
</ol>
<h3 id="2-增删改"><a href="#2-增删改" class="headerlink" title="2 增删改"></a>2 增删改</h3><ol>
<li><code>int update(String sql, Object... args)</code></li>
<li><code>int batchUpdate(String sql, List&lt;Object[]&gt; batchArgs)</code></li>
</ol>
<h3 id="3-查"><a href="#3-查" class="headerlink" title="3 查"></a>3 查</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>List&lt;T&gt; query(String sql, RowMapper&lt;T&gt; rowMapper, Object... args)</code></td>
<td>将查询结果封装为对象并存储到 List 集合中</td>
</tr>
<tr>
<td><code>T queryForObject(String sql, Class&lt;T&gt; requiredType, Object... args)</code></td>
<td>查询单个值</td>
</tr>
<tr>
<td><code>T queryForObject(String sql, RowMapper&lt;T&gt; rowMapper, Object... args)</code></td>
<td>查询单行数据，返回一个对象</td>
</tr>
<tr>
<td><code>Map&lt;String, Object&gt; queryForMap(String sql, Object... args)</code></td>
<td>查询的结果集封装为 map 集合，此方法查询结果集长度只能是 1</td>
</tr>
<tr>
<td><code>List&lt;Map&lt;String, Object&gt;&gt; queryForList(String sql, Object... args)</code></td>
<td>将每一条记录封装为 map 集合，然后将 map 集合存到到 list 集合中</td>
</tr>
</tbody></table>
<h3 id="4-RowMapper"><a href="#4-RowMapper" class="headerlink" title="4 RowMapper"></a>4 RowMapper</h3><h4 id="1-概述-5"><a href="#1-概述-5" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>类似于 DBUtils 的 <code>ResultSetHandler</code></li>
<li>可以自己实现，也可使用 spring 提供的</li>
</ol>
<h4 id="2-方法"><a href="#2-方法" class="headerlink" title="2 方法"></a>2 方法</h4><ul>
<li><code>T mapRow(ResultSet rs, int rowNum)</code></li>
</ul>
<h4 id="3-Srpng-的实现"><a href="#3-Srpng-的实现" class="headerlink" title="3 Srpng 的实现"></a>3 Srpng 的实现</h4><table>
<thead>
<tr>
<th>实现</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>BeanPropertyRowMapper</code></td>
<td>将结果集封装为对象</td>
</tr>
</tbody></table>
<h2 id="8-3-使用"><a href="#8-3-使用" class="headerlink" title="8.3 使用"></a>8.3 使用</h2><h3 id="1-手动方式"><a href="#1-手动方式" class="headerlink" title="1 手动方式"></a>1 手动方式</h3><ol>
<li>创建数据源</li>
<li>创建 <code>JdbcTemplate</code>，并设置数据源（构造或者 <code>set</code> 方法）</li>
<li>使用 <code>JdbcTemplate</code> 操作 </li>
</ol>
<h3 id="2-Spring-IOC-之-JdbcTemplate"><a href="#2-Spring-IOC-之-JdbcTemplate" class="headerlink" title="2 Spring IOC 之 JdbcTemplate"></a>2 Spring IOC 之 JdbcTemplate</h3><ol>
<li>配置数据源 Bean</li>
<li>配置 <code>JdbcTemplate</code> Bean ，并注入数据源</li>
<li>将 <code>JdbcTemplate</code> 注入到 DAO 中进行操作</li>
</ol>
<h3 id="3-Spring-IOC-之-JdbcDaoSupport"><a href="#3-Spring-IOC-之-JdbcDaoSupport" class="headerlink" title="3 Spring IOC 之 JdbcDaoSupport"></a>3 Spring IOC 之 JdbcDaoSupport</h3><h4 id="1-API-1"><a href="#1-API-1" class="headerlink" title="1 API"></a>1 API</h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>private JdbcTemplate jdbcTemplate</code></td>
<td>内部有一个 <code>JdbcTemplate</code> 属性</td>
</tr>
<tr>
<td><code>void setDataSource(DataSource dataSource)</code></td>
<td>如果内部 <code>JdbcTemplate</code> 为空或非此数据源创建的，则使用此数据源创建一个新的 <code>JdbcTemplate</code></td>
</tr>
<tr>
<td><code>JdbcTemplate createJdbcTemplate(DataSource dataSource)</code></td>
<td>使用数据源创建一个新的 <code>JdbcTemplate</code></td>
</tr>
<tr>
<td><code>DataSource getDataSource()</code></td>
<td>获取 <code>JdbcTemplate</code> 的数据源</td>
</tr>
<tr>
<td><code>void setJdbcTemplate(JdbcTemplate jdbcTemplate)</code></td>
<td>设置 <code>JdbcTemplate</code></td>
</tr>
<tr>
<td><code>JdbcTemplate getJdbcTemplate()</code></td>
<td>获取 <code>JdbcTemplate</code></td>
</tr>
</tbody></table>
<h4 id="2-使用"><a href="#2-使用" class="headerlink" title="2 使用"></a>2 使用</h4><ol>
<li><code>JdbcDaoSupport</code> 中只需注入数据源，会自动根据数据源创建 <code>JdbcTemplate</code></li>
<li>DAO 继承  <code>JdbcDaoSupport</code></li>
<li>配置数据源 Bean</li>
<li>将数据源注入到 DAO 中，在 DAO 中获取 <code>JdbcTemplate</code> 进行操作</li>
</ol>
<h1 id="九-事务管理"><a href="#九-事务管理" class="headerlink" title="九 事务管理"></a>九 事务管理</h1><h2 id="9-1-结构"><a href="#9-1-结构" class="headerlink" title="9.1 结构"></a>9.1 结构</h2><p><img src="https://github.com/anyeansan/pics/raw/master/CS/Frame/Spring/%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E7%BB%93%E6%9E%84.png" alt=""></p>
<h3 id="1-PlatformTransactionManager"><a href="#1-PlatformTransactionManager" class="headerlink" title="1 PlatformTransactionManager"></a>1 PlatformTransactionManager</h3><h4 id="1-概述-6"><a href="#1-概述-6" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>平台事务管理器在  <code>spring-tx.jar</code> 中</li>
<li>因为不同平台，操作事务的代码各不相同，spring 提供了此接口</li>
<li>spring 要管理事务，必须使用事务管理器</li>
</ol>
<h4 id="2-API-2"><a href="#2-API-2" class="headerlink" title="2 API"></a>2 API</h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>TransactionStatus getTransaction(TransactionDefinition definition)</code></td>
<td>获取事务状态 <code>TransactionStatus</code></td>
</tr>
<tr>
<td><code>void commit(TransactionStatus status)</code></td>
<td>根据状态提交</td>
</tr>
<tr>
<td><code>void rollback(TransactionStatus status)</code></td>
<td>根据状态回滚</td>
</tr>
</tbody></table>
<h4 id="3-实现"><a href="#3-实现" class="headerlink" title="3 实现"></a>3 实现</h4><table>
<thead>
<tr>
<th>实现</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>DataSourceTransactionManager</code></td>
<td>jdbc 事务管理器，采用 <code>JdbcTemplate</code>，在 <code>spring-jdbc.jar</code> 中</td>
</tr>
<tr>
<td><code>HibernateTransactionManager</code></td>
<td>Hibernate 事务管理器，在 <code>spring-orm.jar</code> 中</td>
</tr>
</tbody></table>
<h3 id="2-TransactionDefinition"><a href="#2-TransactionDefinition" class="headerlink" title="2 TransactionDefinition"></a>2 TransactionDefinition</h3><h4 id="1-概述-7"><a href="#1-概述-7" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>事务详情（或叫事务定义、事务属性），如隔离级别，传播行为，是否只读，超时时间…</li>
<li>进行事务配置时，必须配置事务详情，Spring 将配置封装到此对象实例</li>
</ol>
<h4 id="2-API-3"><a href="#2-API-3" class="headerlink" title="2 API"></a>2 API</h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>int getIsolationLevel()</code></td>
<td>获取隔离级别</td>
</tr>
<tr>
<td><code>int getPropagationBehavior()</code></td>
<td>获取传播行为</td>
</tr>
<tr>
<td><code>String getName()</code></td>
<td>获取事务名称</td>
</tr>
<tr>
<td><code>boolean isReadOnly()</code></td>
<td>事务是否只读，默认 false</td>
</tr>
<tr>
<td><code>int getTimeout()</code></td>
<td>获取超时时间</td>
</tr>
</tbody></table>
<h4 id="3-传播行为"><a href="#3-传播行为" class="headerlink" title="3 传播行为"></a>3 传播行为</h4><h5 id="1-概述-8"><a href="#1-概述-8" class="headerlink" title="1 概述"></a>1 概述</h5><ol>
<li>如果有多个事务嵌套运行，子事务是否与大事务共用一个事务</li>
<li>一个方法运行在了一个开启了事务的方法中时，当前方法是使用原来的事务还是开启一个新的事务</li>
</ol>
<h5 id="2-分类"><a href="#2-分类" class="headerlink" title="2 分类"></a>2 分类</h5><table>
<thead>
<tr>
<th>名称</th>
<th>int 值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>PROPAGATION_REQUIRED</code></strong>（默认）</td>
<td><code>0</code></td>
<td>如果调用者 A 有事务，则被调用者 B 使用该事务，反之 B 创建一个新事务</td>
</tr>
<tr>
<td><code>PROPAGATION_SUPPORTS</code></td>
<td><code>1</code></td>
<td>如果 A 有事务，则 B 使用此事务，反之 B 不使用事务</td>
</tr>
<tr>
<td><code>PROPAGATION_MANDATORY</code></td>
<td><code>2</code></td>
<td>如果 A 有事务，则 B 使用此事务，反之 B 抛异常</td>
</tr>
<tr>
<td><strong><code>PROPAGATION_REQUIRES_NEW</code></strong></td>
<td><code>3</code></td>
<td>无论 A 是否有事务，B 都创建一个新事务</td>
</tr>
<tr>
<td><code>PROPAGATION_NOT_SUPPORTED</code></td>
<td><code>4</code></td>
<td>无论 A 是否有事务，B 都不使用事务</td>
</tr>
<tr>
<td><code>PROPAGATION_NEVER</code></td>
<td><code>5</code></td>
<td>如果 A 有事务，则 B 抛异常，反之 B 不使用事务</td>
</tr>
<tr>
<td><strong><code>PROPAGATION_NESTED</code></strong></td>
<td><code>6</code></td>
<td>A 和 B 底层采用保存点机制，形成嵌套事务</td>
</tr>
</tbody></table>
<h4 id="4-隔离级别"><a href="#4-隔离级别" class="headerlink" title="4 隔离级别"></a>4 隔离级别</h4><table>
<thead>
<tr>
<th>名称</th>
<th>int 值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>ISOLATION_DEFAULT</code>（默认）</td>
<td><code>-1</code></td>
<td>使用数据库的默认隔离级别</td>
</tr>
<tr>
<td><code>ISOLATION_READ_UNCOMMITTED</code></td>
<td><code>1</code></td>
<td>读未提交</td>
</tr>
<tr>
<td><code>ISOLATION_READ_COMMITTED</code></td>
<td><code>2</code></td>
<td>读已提交</td>
</tr>
<tr>
<td><code>ISOLATION_REPEATABLE_READ</code></td>
<td><code>4</code></td>
<td>可重复度</td>
</tr>
<tr>
<td><code>ISOLATION_SERIALIZABLE</code></td>
<td><code>8</code></td>
<td>串行化</td>
</tr>
</tbody></table>
<h3 id="3-TransactionStatus"><a href="#3-TransactionStatus" class="headerlink" title="3 TransactionStatus"></a>3 TransactionStatus</h3><h4 id="1-概述-9"><a href="#1-概述-9" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>事务状态</li>
<li>spring 用于记录当前事务运行状态，如是否有保存点，是否完成…</li>
</ol>
<h4 id="2-API-4"><a href="#2-API-4" class="headerlink" title="2 API"></a>2 API</h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>boolean isNewTransaction()</code></td>
<td>是否是新事务</td>
</tr>
<tr>
<td><code>boolean hasSavepoint()</code></td>
<td>事务是否有保存点</td>
</tr>
<tr>
<td><code>void setRollbackOnly()</code></td>
<td>设置事务 <code>rollback-only</code></td>
</tr>
<tr>
<td><code>boolean isRollbackOnly()</code></td>
<td>事务是否设置了 <code>rollback-only</code></td>
</tr>
<tr>
<td><code>boolean isCompleted()</code></td>
<td>事务是否完成</td>
</tr>
<tr>
<td><code>void flush()</code></td>
<td>刷新事务</td>
</tr>
</tbody></table>
<h2 id="9-2-事务管理"><a href="#9-2-事务管理" class="headerlink" title="9.2 事务管理"></a>9.2 事务管理</h2><h3 id="1-概述-10"><a href="#1-概述-10" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>Spring 使用 <code>TransactionTemplate</code> 模板管理事务</li>
<li>模板需要注入事务管理器，事务管理器需要事务，事务从连接 <code>Connection</code> 中获取，而无论直接创建连接还是从连接池中获取连接都需要数据源</li>
<li>先给事务管理器注入数据源，之后再将事务管理器注入到模板中</li>
</ol>
<h3 id="2-管理事务方式"><a href="#2-管理事务方式" class="headerlink" title="2 管理事务方式"></a>2 管理事务方式</h3><h4 id="1-手动管理事务（了解）"><a href="#1-手动管理事务（了解）" class="headerlink" title="1 手动管理事务（了解）"></a>1 手动管理事务（了解）</h4><ol>
<li>配置 <code>TransactionTemplate</code> ，并注入 Service 中</li>
<li>在 Service 中使用事务模板操作 <code>transactionTemplate.execute();</code></li>
</ol>
<h4 id="2-TransactionProxyFactoryBean（半自动管理事务）"><a href="#2-TransactionProxyFactoryBean（半自动管理事务）" class="headerlink" title="2 TransactionProxyFactoryBean（半自动管理事务）"></a>2 TransactionProxyFactoryBean（半自动管理事务）</h4><h5 id="1-概述-11"><a href="#1-概述-11" class="headerlink" title="1 概述"></a>1 概述</h5><ol>
<li>spring 提供的管理事务的 <code>FactoryBean</code></li>
<li>使用此 <code>FactoryBean</code> 生成代理，为代理对象注入事务管理器及事务详情</li>
<li>使用代理对象执行业务方法</li>
</ol>
<h5 id="2-配置"><a href="#2-配置" class="headerlink" title="2 配置"></a>2 配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;代理对象ID&quot; class=&quot;org.springframework.transaction.interceptor.TransactionProxyFactoryBean&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;proxyInterfaces&quot; value=&quot;目标接口&quot;/&gt;</span><br><span class="line">	&lt;property name=&quot;target&quot; ref=&quot;目标对象&quot;/&gt;</span><br><span class="line">	&lt;property name=&quot;transactionManager&quot; ref=&quot;事务管理器&quot;/&gt;</span><br><span class="line">	// 事务详情</span><br><span class="line">	&lt;property name=&quot;transactionAttributes&quot;&gt;</span><br><span class="line">		&lt;props&gt;</span><br><span class="line">			&lt;prop key=&quot;方法名&quot;&gt;格式：PROPAGATION,ISOLATION,readOnly,-Exception,+Exception&lt;/prop&gt;</span><br><span class="line">		&lt;/props&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-AOP-（自动管理事务）"><a href="#3-AOP-（自动管理事务）" class="headerlink" title="3 AOP （自动管理事务）"></a>3 <code>AOP</code> （自动管理事务）</h4><h5 id="1-XML"><a href="#1-XML" class="headerlink" title="1 XML"></a>1 XML</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--1 配置事务管理器--&gt;</span><br><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;dataSource&quot; ref=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;!--2 配置事务详情--&gt;</span><br><span class="line">&lt;tx:advice id=&quot;&quot; transaction-manager=&quot;&quot;&gt;</span><br><span class="line">    &lt;tx:attributes&gt;</span><br><span class="line">        &lt;tx:method name=&quot;&quot; propagation=&quot;&quot; isolation=&quot;&quot; readOnly=&quot;&quot;/&gt;</span><br><span class="line">    &lt;/tx:attributes&gt;</span><br><span class="line">&lt;/tx:advice&gt;</span><br><span class="line">&lt;!--3 AOP 配置--&gt;</span><br><span class="line">&lt;aop:config&gt;</span><br><span class="line">    &lt;aop:pointcut id=&quot;&quot; expression=&quot;&quot;/&gt;</span><br><span class="line">    &lt;aop:advisor advice-ref=&quot;&quot; pointcut-ref=&quot;&quot;/&gt;</span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-注解-1"><a href="#2-注解-1" class="headerlink" title="2 注解"></a>2 注解</h5><h6 id="1-配置"><a href="#1-配置" class="headerlink" title="1 配置"></a>1 配置</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--1 配置事务管理器 --&gt;</span><br><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;dataSource&quot; ref=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;!--2 开启事务注解--&gt;</span><br><span class="line">&lt;tx:annotation-driven transaction-manager=&quot;&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h6 id="2-Transactional"><a href="#2-Transactional" class="headerlink" title="2 @Transactional"></a>2 <code>@Transactional</code></h6><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String transactionManager() default &quot;&quot;</code></td>
<td>事务管理器</td>
</tr>
<tr>
<td><code>String value() default &quot;&quot;</code></td>
<td>同 <code>transactionManager()</code></td>
</tr>
<tr>
<td><code>Propagation propagation() default Propagation.REQUIRED</code></td>
<td>事务传播行为</td>
</tr>
<tr>
<td><code>Isolation isolation() default Isolation.DEFAULT</code></td>
<td>事务隔离级别</td>
</tr>
<tr>
<td><code>boolean readOnly() default false</code></td>
<td>事务是否只读</td>
</tr>
<tr>
<td><code>int timeout() default TransactionDefinition.TIMEOUT_DEFAULT</code></td>
<td>事务超时时间，超过事务自动终止并回滚</td>
</tr>
<tr>
<td><code>rollbackFor/rollbackForClassName</code></td>
<td>遇到指定类型的异常回滚，Spring 默认运行时异常回滚，编译时异常不会滚</td>
</tr>
<tr>
<td><code>noRollbackFor/noRollbackForClassName</code></td>
<td>遇到指定类型的异常不回滚</td>
</tr>
</tbody></table>
<ol>
<li>作用在类上：所有方法都开启事务</li>
<li>作用在方法上：当前方法开启事务</li>
</ol>
<h2 id="10-1-Spring-Junit"><a href="#10-1-Spring-Junit" class="headerlink" title="10.1 Spring + Junit"></a>10.1 Spring + Junit</h2><h3 id="1-包"><a href="#1-包" class="headerlink" title="1 包"></a>1 包</h3><ol>
<li>Junit 的包</li>
<li>Spring 的包<ol>
<li><code>spring-core</code></li>
<li><code>spring-beans</code></li>
<li><code>spring-context</code></li>
<li><code>spring-expression</code></li>
<li><code>spring-jcl</code></li>
<li><code>spring-test</code></li>
</ol>
</li>
</ol>
<h3 id="2-使用-1"><a href="#2-使用-1" class="headerlink" title="2 使用"></a>2 使用</h3><h4 id="1-RunWith"><a href="#1-RunWith" class="headerlink" title="1 @RunWith"></a>1 <code>@RunWith</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJunit4ClassRunner.class)</span><br></pre></td></tr></table></figure>

<ol>
<li>Junit 的注解，作用在类上</li>
<li>替换原有运行器</li>
</ol>
<h4 id="2-ContextConfiguration"><a href="#2-ContextConfiguration" class="headerlink" title="2 @ContextConfiguration"></a>2 <code>@ContextConfiguration</code></h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>String[] locations() default {}</code></td>
<td>指定 spring 配置文件的位置</td>
</tr>
<tr>
<td><code>String[] value() default {}</code></td>
<td>同 <code>locations()</code></td>
</tr>
<tr>
<td><code>Class&lt;?&gt;[] classes() default {}</code></td>
<td>指定注解配置类</td>
</tr>
</tbody></table>
<h4 id="3-通过-Autowired-注入即可"><a href="#3-通过-Autowired-注入即可" class="headerlink" title="3 通过 @Autowired 注入即可"></a>3 通过 <code>@Autowired</code> 注入即可</h4><h2 id="10-2-Spring-Web"><a href="#10-2-Spring-Web" class="headerlink" title="10.2 Spring + Web"></a>10.2 Spring + Web</h2><h3 id="1-概述-12"><a href="#1-概述-12" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>普通 Java 项目：需要手动读取 Spring 配置，创建 Spring 容器</li>
<li>Web 项目：服务器启动就创建 Spring 容器</li>
<li>Web 技术中启动服务器救加载配置文件的方式<ol>
<li><code>Servlet</code></li>
<li><code>Filter</code></li>
<li><code>Listener</code></li>
</ol>
</li>
</ol>
<h3 id="2-Web-技术：服务器启动就加载配置文件"><a href="#2-Web-技术：服务器启动就加载配置文件" class="headerlink" title="2 Web 技术：服务器启动就加载配置文件"></a>2 Web 技术：服务器启动就加载配置文件</h3><h4 id="1-Servlet"><a href="#1-Servlet" class="headerlink" title="1 Servlet"></a>1 <code>Servlet</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">init(ServletConfig config)</span><br><span class="line">// 配置一启动就初始化 Servlet</span><br><span class="line">&lt;Servlet&gt;</span><br><span class="line">	&lt;load-on-startup&gt;</span><br><span class="line">&lt;/Servlet&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-Filter"><a href="#2-Filter" class="headerlink" title="2 Filter"></a>2 <code>Filter</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">init(FilterConfig config)</span><br><span class="line">// 注册过滤器自动调用初始化</span><br><span class="line">&lt;Filter&gt;&lt;/Filter&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-Listener"><a href="#3-Listener" class="headerlink" title="3 Listener"></a>3 <code>Listener</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注册监听器 ServletContextListener</span><br></pre></td></tr></table></figure>

<h3 id="3-Spring-Web"><a href="#3-Spring-Web" class="headerlink" title="3 Spring + Web"></a>3 Spring + Web</h3><h4 id="1-概述-13"><a href="#1-概述-13" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li><code>WebApplicationContext</code>：Spring Web 容器</li>
<li>Spring 初始化  <code>WebApplicationContext</code> ：<ol>
<li><code>ContextLoaderServlet</code></li>
<li><code>ContextLoaderListener</code></li>
</ol>
</li>
</ol>
<h4 id="2-web-xml-配置-Spring-监听器"><a href="#2-web-xml-配置-Spring-监听器" class="headerlink" title="2 web.xml 配置 Spring 监听器"></a>2 <code>web.xml</code> 配置 Spring 监听器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;listener&gt;</span><br><span class="line">    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br><span class="line">&lt;/listener&gt;</span><br><span class="line">&lt;context-param&gt;</span><br><span class="line">	&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">	&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;</span><br><span class="line">&lt;/context-param&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>此监听器默认加载的是 <code>WEB-INF/applicationContext.xml</code></li>
<li>而配置文件通常是 <code>WEB-INF/classes/applicationContext.cml</code></li>
</ol>
<h3 id="4-手动获取-Spring-容器"><a href="#4-手动获取-Spring-容器" class="headerlink" title="4 手动获取 Spring 容器"></a>4 手动获取 Spring 容器</h3><ol>
<li><p>一个应用中只有一个 Spring 容器，存放在 <code>ServletContext</code> 域中，key 为 <code>WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE</code></p>
</li>
<li><p>从域中手动获取</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.getServletContext().getAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE)</span><br></pre></td></tr></table></figure>
</li>
<li><p>工具类 <code>WebApplicationContextUtils</code>，封装了手动获取</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WebApplicationContextUtils.getWebApplicationContext(this.getServletContext())</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>ContextLoader</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ContextLoader.getCurrentWebApplicationContext()</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/11/08/%E6%A1%86%E6%9E%B6/MyBatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/11/08/%E6%A1%86%E6%9E%B6/MyBatis/" class="post-title-link" itemprop="url">MyBatis</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-11-08 20:56:14 / 修改时间：20:57:06" itemprop="dateCreated datePublished" datetime="2020-11-08T20:56:14+08:00">2020-11-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/" itemprop="url" rel="index">
                    <span itemprop="name">CS</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/CS/Frame/" itemprop="url" rel="index">
                    <span itemprop="name">Frame</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li>MyBatis 是一个持久层框架，是一个不完全的 orm 框架</li>
<li>MyBatis 让程序员只关注 SQL 本身，而不需要去关注 其它 JDBC 代码以及设置参数和获取结果集的工作</li>
<li>MyBatis 支持自定义 SQL、存储过程以及高级映射</li>
<li>JDBC 的问题<ol>
<li>在创建连接时，存在硬编码，解决：配置文件（全局配置文件）</li>
<li>在执行 <code>statement</code> 时存在硬编码，解决：配置文件（映射文件）</li>
<li>频繁开关数据库连接，解决：数据库连接池（全局配置文件）</li>
</ol>
</li>
</ol>
<h1 id="二-API"><a href="#二-API" class="headerlink" title="二 API"></a>二 API</h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><table>
<thead>
<tr>
<th>类/接口</th>
<th>说明</th>
<th>推荐作用域</th>
</tr>
</thead>
<tbody><tr>
<td><code>SqlSessionFactoryBuilder</code></td>
<td>用于创建 <code>SqlSessionFactory</code></td>
<td>方法作用域</td>
</tr>
<tr>
<td><code>SqlSessionFactory</code></td>
<td>一个应用只存在一个，单例</td>
<td>应用作用域</td>
</tr>
<tr>
<td><code>SqlSession</code></td>
<td>每个线程都应该有它自己的 SqlSession 实例，提供了在数据库执行 SQL 命令所需的所有方法</td>
<td>请求作用域</td>
</tr>
<tr>
<td>映射器实例 <code>XxxMapper</code></td>
<td>绑定映射语句的接口，从 <code>SqlSession</code> 中获取</td>
<td>方法作用域</td>
</tr>
</tbody></table>
<h2 id="2-2-SqlSessionFactoryBuilder"><a href="#2-2-SqlSessionFactoryBuilder" class="headerlink" title="2.2 SqlSessionFactoryBuilder"></a>2.2 <code>SqlSessionFactoryBuilder</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SqlSessionFactory build(InputStream inputStream)</span><br><span class="line">SqlSessionFactory build(InputStream inputStream, String environment)</span><br><span class="line">SqlSessionFactory build(InputStream inputStream, Properties properties)</span><br><span class="line">SqlSessionFactory build(InputStream inputStream, String env, Properties props)</span><br><span class="line">SqlSessionFactory build(Configuration config)</span><br></pre></td></tr></table></figure>

<h2 id="2-3-SqlSessionFactory"><a href="#2-3-SqlSessionFactory" class="headerlink" title="2.3 SqlSessionFactory"></a>2.3 <code>SqlSessionFactory</code></h2><ol>
<li><code>SqlSession openSession()</code><ol>
<li>事务作用域将会开启（也就是不自动提交）</li>
<li>由当前环境配置的 <code>DataSource</code> 实例中获取 <code>Connection</code> 对象</li>
<li>事务隔离级别将会使用驱动或数据源的默认设置</li>
<li>预处理语句不会被复用，也不会批量处理更新</li>
</ol>
</li>
<li><code>SqlSession openSession(boolean autoCommit)</code><ul>
<li><code>true</code> ：开启自动提交</li>
</ul>
</li>
<li><code>SqlSession openSession(Connection connection)</code><ul>
<li>使用指定的 <code>Connection</code> 实例</li>
</ul>
</li>
</ol>
<h2 id="2-4-SqlSession"><a href="#2-4-SqlSession" class="headerlink" title="2.4 SqlSession"></a>2.4 <code>SqlSession</code></h2><h3 id="1-增删改查"><a href="#1-增删改查" class="headerlink" title="1 增删改查"></a>1 增删改查</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>int insert(String statement, Object parameter)</code></td>
<td>增，<code>statement</code>：为 <code>namespace.id</code></td>
</tr>
<tr>
<td><code>int delete(String statement, Object parameter)</code></td>
<td>删</td>
</tr>
<tr>
<td><code>int update(String statement, Object parameter)</code></td>
<td>改</td>
</tr>
<tr>
<td><code>T selectOne(String statement, Object parameter)</code></td>
<td>返回一个对象或 <code>null</code></td>
</tr>
<tr>
<td><code>List&lt;E&gt; selectList(String statement, Object parameter)</code></td>
<td>返回 n 个对象的 List 集合</td>
</tr>
<tr>
<td><code>Map&lt;K, V&gt; selectMap(String statement, Object parameter, String mapKey)</code></td>
<td>对象某个属性作为 key，对象作为 value</td>
</tr>
</tbody></table>
<h3 id="2-其它"><a href="#2-其它" class="headerlink" title="2 其它"></a>2 其它</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>T getMapper(Class&lt;T&gt; type)</code></td>
<td>获取映射器 Mapper</td>
</tr>
<tr>
<td><code>Connection getConnection()</code></td>
<td>获取连接</td>
</tr>
<tr>
<td><code>void commit()</code></td>
<td>提交</td>
</tr>
<tr>
<td><code>void rollback()</code></td>
<td>回滚</td>
</tr>
<tr>
<td><code>void close()</code></td>
<td>关闭</td>
</tr>
</tbody></table>
<h3 id="3-关闭模板"><a href="#3-关闭模板" class="headerlink" title="3 关闭模板"></a>3 关闭模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">try (SqlSession session = sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  // 你的应用逻辑代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-Mybatis-应用方式"><a href="#4-Mybatis-应用方式" class="headerlink" title="4 Mybatis 应用方式"></a>4 Mybatis 应用方式</h3><h4 id="1-直接使用-SqlSession-的-API"><a href="#1-直接使用-SqlSession-的-API" class="headerlink" title="1  直接使用 SqlSession 的 API"></a>1  直接使用 <code>SqlSession</code> 的 API</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">try (SqlSession session = sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  Blog blog = (Blog) session.selectOne(&quot;org.mybatis.example.BlogMapper.selectBlog&quot;, 101);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-使用-Mapper-接口"><a href="#2-使用-Mapper-接口" class="headerlink" title="2 使用 Mapper 接口"></a>2 使用 Mapper 接口</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">try (SqlSession session = sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  BlogMapper mapper = session.getMapper(BlogMapper.class);</span><br><span class="line">  Blog blog = mapper.selectBlog(101);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="三-Mapper-接口规范"><a href="#三-Mapper-接口规范" class="headerlink" title="三 Mapper 接口规范"></a>三 Mapper 接口规范</h1><ol>
<li>Mapper 接口的全限定名要和 Mapper 映射文件的 <code>namespace</code> 值一致</li>
<li>Mapper 接口的方法名要和 Mapper 映射文件的 <code>statement</code> 的 <code>id</code> 一致</li>
<li>Mapper 接口的方法参数类型要和 Mapper 映射文件的 <code>statement</code> 的 <code>parameterType</code> 一致，且它的参数是一个</li>
<li>Mapper 接口的方法返回值类型要和 Mapper 映射文件的 <code>statement</code> 的 <code>resultType</code> 一致</li>
</ol>
<h1 id="四-全局配置文件"><a href="#四-全局配置文件" class="headerlink" title="四 全局配置文件"></a>四 全局配置文件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">	* properties （属性）</span><br><span class="line">	* settings （设置）</span><br><span class="line">	* typeAliases （类型别名）</span><br><span class="line">	* typeHandlers （类型处理器）</span><br><span class="line">	* objectFactory （对象工厂）</span><br><span class="line">	* plugins （插件）</span><br><span class="line">	* environments （环境）</span><br><span class="line">		* environment （环境变量）</span><br><span class="line">		* transactionManager （事务管理器）</span><br><span class="line">		* dataSource （数据源）</span><br><span class="line">	* databaseIdProvider （数据库厂商标识）</span><br><span class="line">	* mappers （映射器）</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-1-properties"><a href="#4-1-properties" class="headerlink" title="4.1 properties"></a>4.1 properties</h2><h3 id="1-引入外部资源文件"><a href="#1-引入外部资源文件" class="headerlink" title="1 引入外部资源文件"></a>1 引入外部资源文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;properties resource=&quot;类路径资源文件&quot; url=&quot;网络或磁盘资源文件&quot;&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-在配置文件内部定义属性"><a href="#2-在配置文件内部定义属性" class="headerlink" title="2 在配置文件内部定义属性"></a>2 在配置文件内部定义属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;properties&gt;</span><br><span class="line">  &lt;property name=&quot;username&quot; value=&quot;dev_user&quot;/&gt;</span><br><span class="line">  &lt;property name=&quot;password&quot; value=&quot;F2Fa3!33TYyg&quot;/&gt;</span><br><span class="line">&lt;/properties&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-动态配置属性"><a href="#3-动态配置属性" class="headerlink" title="3 动态配置属性"></a>3 动态配置属性</h3><h4 id="1-方式"><a href="#1-方式" class="headerlink" title="1 方式"></a>1 方式</h4><ol>
<li>内部定义属性</li>
<li>外部资源文件中定义属性</li>
<li><code>SqlSessionFactoryBuilder</code> 构造 <code>SqlSessionFactory</code> 时 <code>build()</code> 方法中传递属性</li>
</ol>
<h4 id="2-说明"><a href="#2-说明" class="headerlink" title="2 说明"></a>2 说明</h4><ol>
<li>动态属性可以在配置文件中使用 <code>${属性名}</code></li>
<li>优先级：后加载覆盖前边的，所以 <code>3 &gt; 2 &gt; 1</code></li>
</ol>
<h2 id="4-2-settings"><a href="#4-2-settings" class="headerlink" title="4.2 settings"></a>4.2 settings</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;settings&gt;</span><br><span class="line">	&lt;setting name=&quot;&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/settings&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>cacheEnabled</code></td>
<td>是否开启缓存，默认 <code>true</code></td>
</tr>
<tr>
<td><code>lazyLoadingEnabled</code></td>
<td>是否开启懒加载，默认 <code>false</code></td>
</tr>
<tr>
<td><code>aggressiveLazyLoading</code></td>
<td><code>true</code>：任一方法的调用都会加载该对象的所有延迟加载属性，默认 <code>false</code>：按需加载延迟属性</td>
</tr>
<tr>
<td><code>autoMappingBehavior</code></td>
<td>自动映射，默认 <code>partial</code>：只会自动映射没有定义嵌套结果映射的字段</td>
</tr>
<tr>
<td><code>mapUnderscoreToCamelCase</code></td>
<td>是否开启驼峰命名自动映射，即属性 <code>userName</code> 对应列 <code>USER_NAME</code>，默认 <code>false</code></td>
</tr>
<tr>
<td><code>logImpl</code></td>
<td>指定 MyBatis 所用日志的具体实现，未指定时将自动查找</td>
</tr>
</tbody></table>
<h2 id="4-3-typeAliases"><a href="#4-3-typeAliases" class="headerlink" title="4.3 typeAliases"></a>4.3 typeAliases</h2><h3 id="1-单个定义"><a href="#1-单个定义" class="headerlink" title="1 单个定义"></a>1 单个定义</h3><h4 id="1-XML"><a href="#1-XML" class="headerlink" title="1 XML"></a>1 XML</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;typeAliases&gt;</span><br><span class="line">	&lt;typeAlias alias=&quot;Author&quot; type=&quot;domain.blog.Author&quot;/&gt;</span><br><span class="line">	&lt;typeAlias alias=&quot;Blog&quot; type=&quot;domain.blog.Blog&quot;/&gt;</span><br><span class="line">&lt;/typeAliases&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-注解"><a href="#2-注解" class="headerlink" title="2 注解"></a>2 注解</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Alias(&quot;别名&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="2-批量定义"><a href="#2-批量定义" class="headerlink" title="2 批量定义"></a>2 批量定义</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;typeAliases&gt;</span><br><span class="line">	&lt;package name=&quot;domain.blog&quot;/&gt;</span><br><span class="line">&lt;/typeAliases&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>为包及其子包下的类配置别名</li>
<li>默认别名为首字母小写的非限定类名</li>
</ol>
<h3 id="3-内置别名"><a href="#3-内置别名" class="headerlink" title="3 内置别名"></a>3 内置别名</h3><table>
<thead>
<tr>
<th>类型</th>
<th>别名</th>
</tr>
</thead>
<tbody><tr>
<td>基本类型</td>
<td><code>_基本类型</code>，如 <code>int</code>：<code>_int</code></td>
</tr>
<tr>
<td>基本类型包装类</td>
<td>对应基本类型，如 <code>Integer</code>：<code>int</code></td>
</tr>
<tr>
<td>引用类型</td>
<td>对应类型首字母小写，如 <code>string list map...</code></td>
</tr>
</tbody></table>
<h2 id="4-4-plugins"><a href="#4-4-plugins" class="headerlink" title="4.4 plugins"></a>4.4 plugins</h2><ol>
<li><code>mybatis-pluse</code></li>
<li><code>mybatis-generator-core</code></li>
<li>…</li>
</ol>
<h2 id="4-5-environments"><a href="#4-5-environments" class="headerlink" title="4.5 environments"></a>4.5 environments</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">	&lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">		&lt;transactionManager type=&quot;JDBC&quot;&gt;</span><br><span class="line">			&lt;property name=&quot;...&quot; value=&quot;...&quot;/&gt;</span><br><span class="line">		&lt;/transactionManager&gt;</span><br><span class="line">		&lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">			&lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt;</span><br><span class="line">			&lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt;</span><br><span class="line">			&lt;property name=&quot;username&quot; value=&quot;$&#123;username&#125;&quot;/&gt;</span><br><span class="line">			&lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt;</span><br><span class="line">		&lt;/dataSource&gt;</span><br><span class="line">	&lt;/environment&gt;</span><br><span class="line">&lt;/environments&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-environments"><a href="#1-environments" class="headerlink" title="1 environments"></a>1 environments</h3><ol>
<li>可以配置多个环境，但 <strong>每个 SqlSessionFactory 实例只能选择一种环境</strong>，即 <strong>每个数据库对应一个 SqlSessionFactory 实例</strong></li>
<li><code>default</code><ul>
<li>通过 <code>&lt;enviroment&gt;</code> 的 <code>id</code> 指定使用哪个环境</li>
</ul>
</li>
</ol>
<h3 id="2-transactionManager"><a href="#2-transactionManager" class="headerlink" title="2 transactionManager"></a>2 transactionManager</h3><ol>
<li>事务管理器，<code>type</code> 有两种类型<ol>
<li><code>JDBC</code></li>
<li><code>MANAGED</code></li>
</ol>
</li>
<li><code>Spring + MyBatis</code> 没有必要配置事务管理器，因为 Spring 模块会使用自带的管理器来覆盖前面的配置</li>
</ol>
<h3 id="3-dataSource"><a href="#3-dataSource" class="headerlink" title="3 dataSource"></a>3 dataSource</h3><ol>
<li>数据源，<code>type</code> 有三种类型<ol>
<li><code>UNPOOLED</code><ul>
<li><code>UnpooledDataSourceFactory</code></li>
<li>采用传统的获取连接的方式，虽然也实现了 <code>javax.sql.DataSource</code> 接口，但并没有使用池的思想</li>
</ul>
</li>
<li><code>POOLED</code><ul>
<li><code>PooledDataSourceFactory</code></li>
<li>采用传统的 <code>javax.sql.DataSource</code> 规范中的连接池，mybatis 中有规范的实现</li>
</ul>
</li>
<li><code>JNDI</code><ul>
<li><code>PooledDataSourceFactory</code></li>
<li>采用服务器提供的JNDI技术实现，来获取 <code>DataSource</code> ，不同的服务器所能拿到的 <code>DataSource</code> 是不同的</li>
</ul>
</li>
</ol>
</li>
<li>数据源交给 Spring 配置</li>
</ol>
<h2 id="4-6-databaseIdProvider"><a href="#4-6-databaseIdProvider" class="headerlink" title="4.6 databaseIdProvider"></a>4.6 databaseIdProvider</h2><h3 id="1-配置"><a href="#1-配置" class="headerlink" title="1 配置"></a>1 配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;databaseIdProvider type=&quot;DB_VENDOR&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;MySQL&quot; value=&quot;别名&quot;/&gt;</span><br><span class="line">	&lt;property name=&quot;Oracle&quot; value=&quot;别名&quot;/&gt;</span><br><span class="line">&lt;/databaseIdProvider&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-作用"><a href="#2-作用" class="headerlink" title="2 作用"></a>2 作用</h3><ol>
<li>获取数据库厂商标识（驱动 <code>getDatabaseProductName()</code>），mybatis 就能根据数据库厂商标识执行不同 sql</li>
<li>在映射配置文件中的增删改查配置 <code>databaseId</code>：数据库标识别名，表示该 crud 操作是针对哪个数据库的</li>
</ol>
<h2 id="4-7-mappers"><a href="#4-7-mappers" class="headerlink" title="4.7 mappers"></a>4.7 mappers</h2><h3 id="1-作用"><a href="#1-作用" class="headerlink" title="1 作用"></a>1 作用</h3><ul>
<li>注册映射器，即告诉 MyBatis 到哪里去找映射文件</li>
</ul>
<h3 id="2-方式"><a href="#2-方式" class="headerlink" title="2 方式"></a>2 方式</h3><h4 id="1-使用相对于类路径的资源引用"><a href="#1-使用相对于类路径的资源引用" class="headerlink" title="1 使用相对于类路径的资源引用"></a>1 使用相对于类路径的资源引用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">	&lt;mapper resource=&quot;org/mybatis/builder/AuthorMapper.xml&quot;/&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-使用完全限定资源定位符（磁盘或网络-URL）"><a href="#2-使用完全限定资源定位符（磁盘或网络-URL）" class="headerlink" title="2 使用完全限定资源定位符（磁盘或网络 URL）"></a>2 使用完全限定资源定位符（磁盘或网络 URL）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">	&lt;mapper url=&quot;file:///&quot;/&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-使用映射器接口的全限定名"><a href="#3-使用映射器接口的全限定名" class="headerlink" title="3 使用映射器接口的全限定名"></a>3 使用映射器接口的全限定名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">	&lt;mapper class=&quot;org.mybatis.builder.AuthorMapper&quot;/&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>要求 Mapper 接口和 Mapper 映射文件名称相同且在同一个目录下</li>
</ul>
<h4 id="4-包名"><a href="#4-包名" class="headerlink" title="4 包名"></a>4 包名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">	&lt;package name=&quot;org.mybatis.builder&quot;/&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>将包内的映射器接口实现全部注册为映射器</li>
<li>要求 Mapper 接口和 Mapper 映射文件名称相同且在同一个目录下</li>
</ol>
<h1 id="五-映射配置文件"><a href="#五-映射配置文件" class="headerlink" title="五 映射配置文件"></a>五 映射配置文件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=&quot;Mapper接口全限定名&quot;&gt;</span><br><span class="line">	* cache – 该命名空间的缓存配置</span><br><span class="line">	* cache-ref – 引用其它命名空间的缓存配置</span><br><span class="line">	* resultMap – 描述如何从数据库结果集中加载对象</span><br><span class="line">	* sql – 可被其它语句引用的可重用语句块</span><br><span class="line">	* insert – 映射插入语句</span><br><span class="line">	* update – 映射更新语句</span><br><span class="line">	* delete – 映射删除语句</span><br><span class="line">	* select – 映射查询语句</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-1-select"><a href="#5-1-select" class="headerlink" title="5.1 select"></a>5.1 select</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;&quot; parameterType=&quot;&quot; resultType=&quot;&quot; resultMap=&quot;&quot;&gt;</span><br><span class="line">  SELECT * FROM PERSON WHERE ID = #&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td>在命名空间中唯一的标识符，可以被用来引用这条语句</td>
</tr>
<tr>
<td><code>parameterType</code></td>
<td>参数的类全限定名或别名</td>
</tr>
<tr>
<td><code>resultType</code></td>
<td>返回结果的类全限定名或别名，如果返回集合，应设置为集合包含的类型</td>
</tr>
<tr>
<td><code>resultMap</code></td>
<td>对外部 <code>resultMap</code> 的命名引用，<code>resultType</code> 和 <code>resultMap</code> 只能选其一</td>
</tr>
<tr>
<td><code>useCache</code></td>
<td><code>true</code>：本条语句的结果会被二级缓存缓存起来，默认 ：对 select 元素为 <code>true</code></td>
</tr>
<tr>
<td><code>flushCache</code></td>
<td><code>true</code>：只要语句被调用，都会导致本地缓存和二级缓存被清空，默认 <code>false</code></td>
</tr>
</tbody></table>
<h2 id="5-2-insert-update-delete"><a href="#5-2-insert-update-delete" class="headerlink" title="5.2 insert update delete"></a>5.2 insert update delete</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td>在命名空间中唯一的标识符，可以被用来引用这条语句</td>
</tr>
<tr>
<td><code>parameterType</code></td>
<td>参数的类全限定名或别名</td>
</tr>
<tr>
<td><code>useGeneratedKeys</code></td>
<td>（仅适用于 insert 和 update）MyBatis 使用 JDBC 的 <code>getGeneratedKeys()</code> 方法来取出由数据库内部生成的主键，默认 <code>false</code></td>
</tr>
<tr>
<td><code>keyProperty</code></td>
<td>（仅适用于 insert 和 update）指定用对象的哪个属性保存主键，Mybatis 使用 <code>getGeneratedKeys()</code> 的返回值或 <code>insert</code> 语句的 <code>selectKey</code> 子元素设置它的值</td>
</tr>
<tr>
<td><code>flushCache</code></td>
<td><code>true</code>：只要语句被调用，都会导致本地缓存和二级缓存被清空，默认 <code>true</code></td>
</tr>
</tbody></table>
<h3 id="1-selectKey"><a href="#1-selectKey" class="headerlink" title="1 selectKey"></a>1 selectKey</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;insert id=&quot;&quot; parameterType=&quot;&quot;&gt;</span><br><span class="line">	&lt;selectKey keyProperty=&quot;&quot; resultType=&quot;&quot; order=&quot;AFTER&quot;&gt;</span><br><span class="line">	&lt;/selectKey&gt;</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>keyProperty</code></td>
<td><code>selectKey</code> 语句结果应该被设置到的目标属性</td>
</tr>
<tr>
<td><code>keyColumn</code></td>
<td>返回结果集中生成列属性的列名</td>
</tr>
<tr>
<td><code>resultType</code></td>
<td>结果的类型</td>
</tr>
<tr>
<td><code>order</code></td>
<td><code>BEFORE</code>：先生成主键，设置 <code>keyProperty</code>，再执行插入语句<br/><code>AFTER</code>：先执行插入语句，然后是 <code>selectKey</code> 中的语句</td>
</tr>
</tbody></table>
<h3 id="2-insert-update-获取主键"><a href="#2-insert-update-获取主键" class="headerlink" title="2 insert update 获取主键"></a>2 <code>insert update</code> 获取主键</h3><h4 id="1-支持自动生成主键（Mysql-Sql-Server）"><a href="#1-支持自动生成主键（Mysql-Sql-Server）" class="headerlink" title="1 支持自动生成主键（Mysql, Sql Server）"></a>1 支持自动生成主键（Mysql, Sql Server）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 1 将生成的主键赋值给 keyProperty 指定的属性</span><br><span class="line">&lt;insert id=&quot;&quot; parameterType=&quot;&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;&quot;&gt;</span><br><span class="line">&lt;/insert&gt;</span><br><span class="line">// 2</span><br><span class="line">&lt;insert id=&quot;&quot; parameterType=&quot;&quot;&gt;</span><br><span class="line">	&lt;selectKey keyProperty=&quot;&quot; resultType=&quot;&quot; order=&quot;AFTER&quot;&gt;</span><br><span class="line">		SELECT LAST_INSERT_ID() </span><br><span class="line">	&lt;/selectKey&gt;</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-不支持自动生成主键（oracle）"><a href="#2-不支持自动生成主键（oracle）" class="headerlink" title="2 不支持自动生成主键（oracle）"></a>2 不支持自动生成主键（oracle）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;insert id=&quot;&quot; parameterType=&quot;&quot;&gt;</span><br><span class="line">	&lt;selectKey keyProperty=&quot;&quot; resultType=&quot;&quot; order=&quot;before&quot;&gt;</span><br><span class="line">	&lt;/selectKey&gt;</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-3-sql"><a href="#5-3-sql" class="headerlink" title="5.3 sql"></a>5.3 sql</h2><h3 id="1-作用-1"><a href="#1-作用-1" class="headerlink" title="1 作用"></a>1 作用</h3><ol>
<li>用来定义可重用的 SQL 代码片段，以便在其它语句中使用</li>
<li>定义时可以确定参数，引用时插入值</li>
</ol>
<h3 id="2-定义"><a href="#2-定义" class="headerlink" title="2 定义"></a>2 定义</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;sql id=&quot;&quot;&gt;</span><br><span class="line">	$&#123;alias&#125;.id,$&#123;alias&#125;.username</span><br><span class="line">&lt;/sql&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-引用"><a href="#3-引用" class="headerlink" title="3 引用"></a>3 引用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;include refid=&quot;&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;alias&quot; value=&quot;t1&quot;/&gt;</span><br><span class="line">&lt;/include&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-4-动态-SQL"><a href="#5-4-动态-SQL" class="headerlink" title="5.4 动态 SQL"></a>5.4 动态 SQL</h2><h3 id="1-if"><a href="#1-if" class="headerlink" title="1 if"></a>1 if</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;findActiveBlogLike&quot; resultType=&quot;Blog&quot;&gt;</span><br><span class="line">	SELECT * FROM BLOG </span><br><span class="line">	WHERE </span><br><span class="line">	&lt;if test=&quot;state != null&quot;&gt;</span><br><span class="line">		state = #&#123;state&#125;</span><br><span class="line">	&lt;/if&gt; </span><br><span class="line">	&lt;if test=&quot;title != null&quot;&gt;</span><br><span class="line">		AND title like #&#123;title&#125;</span><br><span class="line">	&lt;/if&gt;</span><br><span class="line">	&lt;if test=&quot;author != null and author.name != null&quot;&gt;</span><br><span class="line">		AND author_name like #&#123;author.name&#125;</span><br><span class="line">	&lt;/if&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-where"><a href="#2-where" class="headerlink" title="2 where"></a>2 where</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;findActiveBlogLike&quot;</span><br><span class="line">     resultType=&quot;Blog&quot;&gt;</span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;if test=&quot;state != null&quot;&gt;</span><br><span class="line">         state = #&#123;state&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;title != null&quot;&gt;</span><br><span class="line">        AND title like #&#123;title&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;author != null and author.name != null&quot;&gt;</span><br><span class="line">        AND author_name like #&#123;author.name&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>if 标签的问题：<ol>
<li>如果条件全都匹配不上，则最终语句 <code>SELECT * FROM BLOG WHERE</code></li>
<li>如果仅第二个匹配上，则最终语句 <code>SELECT * FROM BLOG WHERE AND title like ‘someTitle’</code></li>
</ol>
</li>
</ul>
<h3 id="3-trim"><a href="#3-trim" class="headerlink" title="3 trim"></a>3 trim</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;trim prefix=&quot;where&quot; prefixOverrides=&quot;&quot; suffix=&quot;&quot; suffixOverrides=&quot;and | or&quot;&gt;</span><br><span class="line">&lt;trim prefix=&quot;SET&quot; suffixOverrides=&quot;,&quot;&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/trim&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>prefix</code></td>
<td>添加一个前缀</td>
</tr>
<tr>
<td><code>prefixOverrides</code></td>
<td>去掉一个前缀</td>
</tr>
<tr>
<td><code>suffix</code></td>
<td>添加一个后缀</td>
</tr>
<tr>
<td><code>suffixOverrides</code></td>
<td>去掉一个后缀</td>
</tr>
</tbody></table>
<ul>
<li><code>trim</code> ：可以实现 <code>where</code> 和 <code>set</code> 的功能</li>
</ul>
<h3 id="4-set"><a href="#4-set" class="headerlink" title="4 set"></a>4 set</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id=&quot;updateAuthorIfNecessary&quot;&gt;</span><br><span class="line">  update Author</span><br><span class="line">    &lt;set&gt;</span><br><span class="line">      &lt;if test=&quot;username != null&quot;&gt;username=#&#123;username&#125;,&lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;password != null&quot;&gt;password=#&#123;password&#125;,&lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;email != null&quot;&gt;email=#&#123;email&#125;,&lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;bio != null&quot;&gt;bio=#&#123;bio&#125;&lt;/if&gt;</span><br><span class="line">    &lt;/set&gt;</span><br><span class="line">  where id=#&#123;id&#125;</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>set</code> 会动态地在行首插入 SET 关键字，并会删掉额外的逗号</li>
</ul>
<h3 id="5-choose（when-otherwise）"><a href="#5-choose（when-otherwise）" class="headerlink" title="5 choose（when/otherwise）"></a>5 choose（when/otherwise）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;findActiveBlogLike&quot;</span><br><span class="line">     resultType=&quot;Blog&quot;&gt;</span><br><span class="line">  SELECT * FROM BLOG WHERE state = ‘ACTIVE’</span><br><span class="line">  &lt;choose&gt;</span><br><span class="line">    &lt;when test=&quot;title != null&quot;&gt;</span><br><span class="line">      AND title like #&#123;title&#125;</span><br><span class="line">    &lt;/when&gt;</span><br><span class="line">    &lt;when test=&quot;author != null and author.name != null&quot;&gt;</span><br><span class="line">      AND author_name like #&#123;author.name&#125;</span><br><span class="line">    &lt;/when&gt;</span><br><span class="line">    &lt;otherwise&gt;</span><br><span class="line">      AND featured = 1</span><br><span class="line">    &lt;/otherwise&gt;</span><br><span class="line">  &lt;/choose&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-foreach"><a href="#6-foreach" class="headerlink" title="6 foreach"></a>6 foreach</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;selectPostIn&quot; resultType=&quot;domain.blog.Post&quot;&gt;</span><br><span class="line">  SELECT *</span><br><span class="line">  FROM POST P</span><br><span class="line">  WHERE ID in</span><br><span class="line">  &lt;foreach item=&quot;item&quot; index=&quot;index&quot; collection=&quot;list&quot;</span><br><span class="line">      open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">        #&#123;item&#125;</span><br><span class="line">  &lt;/foreach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>collection</code></td>
<td>对象：属性名，数组：<code>array</code>，集合：<code>collection/list</code></td>
</tr>
<tr>
<td><code>item</code></td>
<td>遍历变量名</td>
</tr>
<tr>
<td><code>index</code></td>
<td>元素索引或键</td>
</tr>
<tr>
<td><code>open</code></td>
<td>遍历开始时拼接的字符串</td>
</tr>
<tr>
<td><code>close</code></td>
<td>遍历结束时拼接的字符串</td>
</tr>
<tr>
<td><code>separator</code></td>
<td>拼接的连接符</td>
</tr>
</tbody></table>
<h2 id="5-5-输入映射（参数）"><a href="#5-5-输入映射（参数）" class="headerlink" title="5.5 输入映射（参数）"></a>5.5 输入映射（参数）</h2><h3 id="1-参数获取方式"><a href="#1-参数获取方式" class="headerlink" title="1 参数获取方式"></a>1 参数获取方式</h3><table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
<th>使用场景</th>
<th>基本类型（包装类）和 String</th>
</tr>
</thead>
<tbody><tr>
<td><code>#{}</code></td>
<td>表示一个占位符，<code>PreparedStatement</code>：预编译</td>
<td>能用就用</td>
<td><code>#{任意名称}</code></td>
</tr>
<tr>
<td><code>${}</code></td>
<td>表示 SQL 连接，<code>Statement</code>：将接收到参数的内容直接拼接到 sql 语句上，存在 sql 注入</td>
<td>原生 JDBC 不支持占位符的地方</td>
<td><code>${value}</code> 或 <code>${_参数名}</code></td>
</tr>
</tbody></table>
<h4 id=""><a href="#" class="headerlink" title="#{}"></a><code>#{}</code></h4><ol start="3">
<li><p>扩展：规定参数的一些规则</p>
<ul>
<li><code>javaType，jdbcType，mode(存储过程)，numericScale</code></li>
<li><code>resultMap，typeHandler，jdbcTypeName...</code></li>
</ul>
</li>
<li><p><code>jdbcType</code></p>
<ol>
<li><p>当数据为 <code>null</code> 时，Mybatis 默认映射的是原生 jdbc 的 <code>OTHER</code> 类型</p>
</li>
<li><p>有些数据库（如Oracle）可能不识别 Mybatis 对 <code>null</code> 的默认处理，错误信息：<code>JdbcType OTHER: 无效的类型</code></p>
</li>
<li><p>解决</p>
<ol>
<li>取值时可以指定 jdbcType：<code>#{xxx, jdbcType=NULL}</code></li>
<li>在全局配置中的<code>setting</code>的<code>jdbcTypeForNull</code>设置为<code>NULL</code></li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="2-参数传递"><a href="#2-参数传递" class="headerlink" title="2 参数传递"></a>2 参数传递</h3><h4 id="1-单个参数"><a href="#1-单个参数" class="headerlink" title="1 单个参数"></a>1 单个参数</h4><h5 id="1"><a href="#1" class="headerlink" title="1"></a>1</h5><table>
<thead>
<tr>
<th>类型</th>
<th>获取</th>
</tr>
</thead>
<tbody><tr>
<td><code>基本类型，基本类型包装类，String</code></td>
<td><code>#{任意名}</code></td>
</tr>
<tr>
<td><code>JavaBean</code></td>
<td><code>#{JavaBean.属性名}</code></td>
</tr>
<tr>
<td><code>Map</code></td>
<td><code>#{key}</code></td>
</tr>
</tbody></table>
<h5 id="2-Collection-Array"><a href="#2-Collection-Array" class="headerlink" title="2 Collection / Array"></a>2 Collection / Array</h5><ol>
<li>Mybatis 对 <code>Collection List Array</code> 类型的参数做了特殊处理，封装到了 Map 中，不用配置 <code>parameterType</code>，使用 <code>&lt;foreach&gt;</code> 标签获取</li>
<li>Key<ol>
<li><code>Collection（List/Set）</code>：<code>collection</code></li>
<li><code>List</code>：<code>list</code></li>
<li><code>Array</code>：<code>array</code></li>
</ol>
</li>
</ol>
<h4 id="2-多个参数"><a href="#2-多个参数" class="headerlink" title="2 多个参数"></a>2 多个参数</h4><table>
<thead>
<tr>
<th>方式</th>
<th>key</th>
</tr>
</thead>
<tbody><tr>
<td><code>默认</code></td>
<td>1 <code>0,1...n</code><br>2 <code>param1,param2...paramn</code></td>
</tr>
<tr>
<td><code>@param</code></td>
<td>1 <code>自定义</code><br/>2 <code>param1,param2...paramn</code></td>
</tr>
</tbody></table>
<ol>
<li><p>Mybatis 将多个参数封装到了 Map 中，获取： <code>#{key}</code></p>
</li>
<li><p><code>@param</code> ：使用此注解在 Mapper 接口方法的形参上自定义 <code>key</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insertUser(@param(&quot;id&quot;)int id, @param(&quot;name&quot;)String name)&#123;&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="5-6-输出映射（结果）"><a href="#5-6-输出映射（结果）" class="headerlink" title="5.6 输出映射（结果）"></a>5.6 输出映射（结果）</h2><h3 id="1-resultType"><a href="#1-resultType" class="headerlink" title="1 resultType"></a>1 resultType</h3><h4 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li><code>resultType</code> 结果映射时查询出的列名与映射属性名一致，才能赋值成功</li>
<li>如果查询的列有别名，则按照别名匹配</li>
</ol>
<h4 id="2"><a href="#2" class="headerlink" title="2"></a>2</h4><table>
<thead>
<tr>
<th>类型</th>
<th><code>resultType</code> 值</th>
</tr>
</thead>
<tbody><tr>
<td>基本类型</td>
<td>对应基本类型</td>
</tr>
<tr>
<td><code>JavaBean</code></td>
<td>对应 <code>JavaBean</code> 类型</td>
</tr>
<tr>
<td><code>Collection, Array</code></td>
<td>集合或数组中的元素类型</td>
</tr>
</tbody></table>
<h4 id="3-Map"><a href="#3-Map" class="headerlink" title="3 Map"></a>3 Map</h4><h5 id="1-单行结果映射"><a href="#1-单行结果映射" class="headerlink" title="1 单行结果映射"></a>1 单行结果映射</h5><ol>
<li><code>resultType</code>：<code>map/java.util.Map</code></li>
<li><code>Map&lt;String, Object&gt;</code><ol>
<li>key：列名</li>
<li>value：列值</li>
</ol>
</li>
</ol>
<h5 id="2-多行结果映射"><a href="#2-多行结果映射" class="headerlink" title="2 多行结果映射"></a>2 多行结果映射</h5><ol>
<li><code>resultType</code>：Map 中 <code>value</code> 的类型</li>
<li><code>Map&lt;自定义, Object&gt;</code><ol>
<li>key：<code>@MapKey</code> 在方法上定义哪个属性作为 key</li>
<li>value：一行数据封装的对象</li>
</ol>
</li>
</ol>
<h3 id="2-resultMap"><a href="#2-resultMap" class="headerlink" title="2 resultMap"></a>2 resultMap</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;&quot; type=&quot;结果集封装的类型&quot;&gt;</span><br><span class="line">	&lt;id property=&quot;javabean中的属性名&quot; column=&quot;结果集的列名&quot; /&gt;</span><br><span class="line">	&lt;result property=&quot;&quot; column=&quot;&quot;/&gt;</span><br><span class="line">	&lt;association&gt;</span><br><span class="line">	&lt;collection&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>子标签</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;id&gt;</code></td>
<td>完成主键列的映射</td>
</tr>
<tr>
<td><code>&lt;result&gt;</code></td>
<td>1 完成普通列的映射<br/>2 通过对象导航图也能完成高级映射</td>
</tr>
<tr>
<td><code>&lt;association&gt;</code></td>
<td>完成 <code>多对一（一对一）</code>的映射</td>
</tr>
<tr>
<td><code>&lt;collection&gt;</code></td>
<td>完成 <code>一对多（多对多）</code>的映射</td>
</tr>
</tbody></table>
<h4 id="1-lt-association-gt"><a href="#1-lt-association-gt" class="headerlink" title="1 &lt;association&gt;"></a>1 <code>&lt;association&gt;</code></h4><h5 id="1-直接查询"><a href="#1-直接查询" class="headerlink" title="1 直接查询"></a>1 直接查询</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;association property=&quot;&quot; javaType=&quot;&quot; fetchType=&quot;&quot;&gt;</span><br><span class="line">	&lt;!-- id标签：建议在关联查询时必须写上，不写不会报错，但是会影响性能 --&gt;</span><br><span class="line">	&lt;id column=&quot;&quot; property=&quot;&quot; /&gt;</span><br><span class="line">	&lt;result column=&quot;&quot; property=&quot;&quot; /&gt;</span><br><span class="line">&lt;/association&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>fetchType</code>：<ol>
<li>值<ul>
<li><code>lazy</code>：本次查询使用懒加载</li>
<li><code>eager</code>：本次查询不使用懒加载</li>
</ul>
</li>
<li>设置此属性则忽略全局配置 <code>lazyLoadingEnabled</code></li>
</ol>
</li>
</ul>
<h5 id="2-分步查询"><a href="#2-分步查询" class="headerlink" title="2 分步查询"></a>2 分步查询</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;association property=&quot;关联属性&quot; column=&quot;关联属性中的关联列&quot; select=&quot;引入一个&lt;select&gt;&quot;&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li><code>column</code> 作为分步查询 <code>select</code> 的参数，是本次查询查出的值</li>
<li><code>select</code> 的结果会赋值给 <code>property</code></li>
<li>我发现直接查询，即使字段可以自动映射也必须配置，分步查询能自动映射则不用配置</li>
<li>为何用分步查询？<ol>
<li>通常每个实体都有对应的 CURD，所以既然有了就拿来用</li>
<li>懒加载</li>
</ol>
</li>
</ol>
<h4 id="4-lt-collection-gt"><a href="#4-lt-collection-gt" class="headerlink" title="4 &lt;collection&gt;"></a>4 <code>&lt;collection&gt;</code></h4><h5 id="1-直接查询-1"><a href="#1-直接查询-1" class="headerlink" title="1 直接查询"></a>1 直接查询</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;collection property=&quot;&quot; ofType=&quot;属性中封装的类型（集合泛型）&quot;&gt;</span><br><span class="line">	&lt;id column=&quot;&quot; property=&quot;&quot; /&gt;</span><br><span class="line">	&lt;result column=&quot;&quot; property=&quot;&quot; /&gt;</span><br><span class="line">&lt;/collection&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-分步查询-1"><a href="#2-分步查询-1" class="headerlink" title="2 分步查询"></a>2 分步查询</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;collection property=&quot;关联属性&quot; column=&quot;关联属性中的关联列&quot; select=&quot;&quot;&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-7-模糊查询"><a href="#5-7-模糊查询" class="headerlink" title="5.7 模糊查询"></a>5.7 模糊查询</h2><h3 id="1-传参时手动拼接"><a href="#1-传参时手动拼接" class="headerlink" title="1 传参时手动拼接"></a>1 传参时手动拼接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mapper.getUser(&quot;%安%&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="2-映射配置文件中配置"><a href="#2-映射配置文件中配置" class="headerlink" title="2 映射配置文件中配置"></a>2 映射配置文件中配置</h3><h4 id="1-不推荐，存在-sql-注入"><a href="#1-不推荐，存在-sql-注入" class="headerlink" title="1 不推荐，存在 sql 注入"></a>1 不推荐，存在 sql 注入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">like &apos;%#&#123;name&#125;%&apos; // 错误，#&#123;&#125; 在字符串中不能识别</span><br><span class="line">like &apos;%&apos;#&#123;name&#125;&apos;%&apos;</span><br><span class="line">like &apos;%$&#123;name&#125;%&apos;</span><br></pre></td></tr></table></figure>

<h4 id="2-推荐"><a href="#2-推荐" class="headerlink" title="2 推荐"></a>2 推荐</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">like concat(&apos;%&apos;, #&#123;name&#125;, &apos;%&apos;)</span><br><span class="line">like concat(&apos;%&apos;, &apos;$&#123;name&#125;&apos;, &apos;%&apos;)</span><br></pre></td></tr></table></figure>

<h1 id="六-注解"><a href="#六-注解" class="headerlink" title="六 注解"></a>六 注解</h1><table>
<thead>
<tr>
<th>注解</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Param</code></td>
<td>用在 Mapper 接口方法的参数上，自定义参数名</td>
</tr>
<tr>
<td><code>@Insert</code></td>
<td>用在 Mapper 接口方法上，等价于 <code>&lt;insert&gt;</code></td>
</tr>
<tr>
<td><code>@Update</code></td>
<td>用在 Mapper 接口方法上，等价于 <code>&lt;update&gt;</code></td>
</tr>
<tr>
<td><code>@Delete</code></td>
<td>用在 Mapper 接口方法上，等价于 <code>&lt;delete&gt;</code></td>
</tr>
<tr>
<td><code>@Select</code></td>
<td>用在 Mapper 接口方法上，等价于 <code>&lt;select&gt;</code></td>
</tr>
<tr>
<td><code>@ResultMap</code></td>
<td>引用 XML 中定义的 <code>&lt;resultMap&gt;</code></td>
</tr>
</tbody></table>
<h1 id="七-日志"><a href="#七-日志" class="headerlink" title="七 日志"></a>七 日志</h1><h2 id="7-1-配置日志（全局配置中）"><a href="#7-1-配置日志（全局配置中）" class="headerlink" title="7.1 配置日志（全局配置中）"></a>7.1 配置日志（全局配置中）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;settings&gt;</span><br><span class="line">  &lt;setting name=&quot;logImpl&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/settings&gt;</span><br></pre></td></tr></table></figure>

<h2 id="7-2-值"><a href="#7-2-值" class="headerlink" title="7.2 值"></a>7.2 值</h2><ol>
<li><code>STDOUT_LOGGING</code>：标准日志，配置即可使用</li>
<li><code>SLF4J</code></li>
<li><code>LOG4J, LOG4J2</code></li>
<li><code>JDK_LOGGING</code></li>
<li><code>COMMONS_LOGGING</code></li>
<li><code>NO_LOGGING</code></li>
</ol>
<h1 id="八-分页"><a href="#八-分页" class="headerlink" title="八 分页"></a>八 分页</h1><h2 id="8-1-SQL-语句-limit-实现"><a href="#8-1-SQL-语句-limit-实现" class="headerlink" title="8.1 SQL 语句 limit 实现"></a>8.1 SQL 语句 limit 实现</h2><ol>
<li>物理分页：直接从数据库中获取所需数据</li>
<li>物理分页每次都要访问数据库</li>
<li>物理分页每次获取的数据都是最新的</li>
<li>物理分页占用内存小</li>
</ol>
<h2 id="8-2-RowBounds"><a href="#8-2-RowBounds" class="headerlink" title="8.2 RowBounds"></a>8.2 RowBounds</h2><table>
<thead>
<tr>
<th>构造</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>RowBounds()</code></td>
<td>默认 <code>offset=0</code>，<code>limit=Integer.MAX_VALUE</code></td>
</tr>
<tr>
<td><code>RowBounds(int offset, int limit)</code></td>
<td><code>offset</code>：起始行，<code>limit</code>：获取行数</td>
</tr>
</tbody></table>
<ol>
<li>逻辑分页：从数据库中拿出所有符合要求的数据，然后再从这些数据中获取所需的分页数据</li>
<li>逻辑分页只需访问一次数据库</li>
<li>逻辑分页的数据有可能滞后</li>
<li>逻辑分页占用内存多</li>
</ol>
<h2 id="8-3-分页插件"><a href="#8-3-分页插件" class="headerlink" title="8.3 分页插件"></a>8.3 分页插件</h2><h1 id="九-缓存"><a href="#九-缓存" class="headerlink" title="九 缓存"></a>九 缓存</h1><h2 id="9-1-概述"><a href="#9-1-概述" class="headerlink" title="9.1 概述"></a>9.1 概述</h2><ol>
<li>缓存即存于内存中的临时数据，为了减少和数据库的交互次数，提高效率</li>
<li>适合缓存的数据<ul>
<li>经常使用且不经常改变的</li>
<li>数据正确与否对最终结果影响不大的</li>
</ul>
</li>
<li>Mybatis 使用到了两种缓存<ol>
<li>本地缓存（local cache），或者叫一级缓存</li>
<li>二级缓存（second level cache）</li>
</ol>
</li>
</ol>
<h2 id="9-2-本地缓存"><a href="#9-2-本地缓存" class="headerlink" title="9.2 本地缓存"></a>9.2 本地缓存</h2><h3 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>本地缓存指定是 <code>SqlSession</code> 对象的缓存，是一个 Map 结构</li>
<li>每当一个新的 <code>SqlSession</code> 创建，MyBatis 就会创建一个与之相关联的本地缓存</li>
<li>任何查询结果都会被保存在本地缓存中<ol>
<li><code>key</code>：由 <code>sql语句、条件、statement</code> 等信息组成一个唯一值</li>
<li><code>value</code>：查询结果</li>
</ol>
</li>
</ol>
<h3 id="2-清除缓存"><a href="#2-清除缓存" class="headerlink" title="2 清除缓存"></a>2 清除缓存</h3><ol>
<li>增删改：<code>insert update delete</code></li>
<li>事务提交或回滚：<code>commit rollback</code></li>
<li><code>SqlSession</code> 关闭：<code>close</code></li>
<li><code>SqlSession</code>  手动清理：<code>void clearCache()</code></li>
</ol>
<h2 id="9-3-二级缓存"><a href="#9-3-二级缓存" class="headerlink" title="9.3 二级缓存"></a>9.3 二级缓存</h2><h3 id="1-概述-2"><a href="#1-概述-2" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>二级缓存指的是 <code>SqlSessionFactory</code>对象的缓存，默认关闭</li>
<li>同一个 <code>SqlSessionFactory</code> 创建的 <code>SqlSession</code> 共享缓存数据</li>
<li>二级缓存是事务性的，即每个 <code>SqlSession</code> 提交或关闭时才会将数据写入二级缓存</li>
<li>二级缓存的对象必须实现 <code>Serializable</code> 接口</li>
<li>二级缓存获取的对象可能不能，但数据一样</li>
</ol>
<h3 id="2-开启"><a href="#2-开启" class="headerlink" title="2 开启"></a>2 开启</h3><ol>
<li><p><code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</code></p>
<ul>
<li>全局配置文件，缓存总开关，默认 <code>true</code></li>
</ul>
</li>
<li><p><code>&lt;cache type=&quot;org.apache.ibatis.cache.impl.PerpetualCache&quot;/&gt;</code></p>
<ol>
<li><p>映射配置文件，二级缓存开关，</p>
</li>
<li><p><code>type</code></p>
<ol>
<li>默认 <code>PerpetualCache</code>，可省略</li>
<li>可使用自定义缓存或第三方缓存</li>
</ol>
</li>
<li><p>缓存效果</p>
<ol>
<li>映射语句文件中的所有 <code>select</code> 语句的结果将会被缓存</li>
<li>映射语句文件中的所有 <code>insert、update、delete</code> 语句会刷新缓存</li>
<li>缓存不会定时进行刷新</li>
</ol>
</li>
</ol>
</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/anyeansan.github.io/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/anyeansan.github.io/">1</a><span class="space">&hellip;</span><a class="page-number" href="/anyeansan.github.io/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/anyeansan.github.io/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/anyeansan.github.io/page/8/">8</a><a class="extend next" rel="next" href="/anyeansan.github.io/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          秘笈
        </li>
        <li class="sidebar-nav-overview">
          安₃
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="安₃"
      src="/anyeansan.github.io/images/an3.png">
  <p class="site-author-name" itemprop="name">安₃</p>
  <div class="site-description" itemprop="description">一蓑烟雨任平生</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/anyeansan.github.io/archives/">
        
          <span class="site-state-item-count">71</span>
          <span class="site-state-item-name">琅嬛福地</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/anyeansan.github.io/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">门派</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/anyeansan.github.io/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-star-half-full"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">安₃</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/anyeansan.github.io/lib/anime.min.js"></script>
  <script src="/anyeansan.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/anyeansan.github.io/lib/velocity/velocity.ui.min.js"></script>
<script src="/anyeansan.github.io/js/utils.js"></script><script src="/anyeansan.github.io/js/motion.js"></script>
<script src="/anyeansan.github.io/js/schemes/pisces.js"></script>
<script src="/anyeansan.github.io/js/next-boot.js"></script>



  




  <script src="/anyeansan.github.io/js/local-search.js"></script>













  

  

</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/anyeansan.github.io/images/an-apple-180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/anyeansan.github.io/images/an-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/anyeansan.github.io/images/an-16.png">
  <link rel="mask-icon" href="/anyeansan.github.io/images/an.svg" color="#222">
  <link rel="alternate" href="/anyeansan.github.io/atom.xml" title="安₃" type="application/atom+xml">

<link rel="stylesheet" href="/anyeansan.github.io/css/main.css">


<link rel="stylesheet" href="/anyeansan.github.io/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/anyeansan.github.io/',
    scheme: 'Gemini',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"hide","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="一蓑烟雨任平生">
<meta property="og:type" content="website">
<meta property="og:title" content="安₃">
<meta property="og:url" content="https:&#x2F;&#x2F;anyeansan.github.io&#x2F;page&#x2F;5&#x2F;">
<meta property="og:site_name" content="安₃">
<meta property="og:description" content="一蓑烟雨任平生">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://anyeansan.github.io/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>安₃</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/anyeansan.github.io/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">安₃</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">我未成名君未嫁 可能俱是不如人</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/anyeansan.github.io/" rel="section"><i class="fa fa-fw fa-home"></i>安府</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/anyeansan.github.io/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>书斋</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/anyeansan.github.io/categories/" rel="section"><i class="fa fa-fw fa-th"></i>门派</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/anyeansan" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/HTML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/HTML/" class="post-title-link" itemprop="url">HTML</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 20:43:19 / 修改时间：20:43:55" itemprop="dateCreated datePublished" datetime="2020-03-30T20:43:19+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/HTML/" itemprop="url" rel="index">
                    <span itemprop="name">HTML</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><h2 id="1-1-HTML"><a href="#1-1-HTML" class="headerlink" title="1.1 HTML"></a>1.1 HTML</h2><ul>
<li><code>Hyper Text Markup Language</code></li>
<li>超文本标记语言 <ul>
<li>超文本<ul>
<li>指页面可以包含非文字内容。</li>
</ul>
</li>
<li>标记<ul>
<li>使用标签将需要的内容包括起来</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-2-XHTML"><a href="#1-2-XHTML" class="headerlink" title="1.2 XHTML"></a>1.2 XHTML</h2><ul>
<li><code>Extensible Hyper Text Markup Language</code></li>
<li>可扩展的超文本标记语言<ul>
<li>可以理解为升级版HTML</li>
</ul>
</li>
</ul>
<h1 id="二-实体"><a href="#二-实体" class="headerlink" title="二 实体"></a>二 实体</h1><p>字符|描述|实体代码|实体编号<br>—|—<br>&nbsp;|空格|<code>&amp;nbsp;</code>|<code>&amp;#160;</code></p>
<blockquote>
<p>| 大于号|<code>&amp;gt;</code>|<code>&amp;#62;</code><br>&lt;|小于号|<code>&amp;lt;</code>|<code>&amp;#60;</code><br>&amp;|与|<code>&amp;amp;</code>|<code>&amp;#38;</code><br>“|双引号|<code>&amp;quot;</code>|<code>&amp;#34;</code><br>‘|单引号|&nbsp;|<code>&amp;#39;</code><br>&#96;|反引号|&nbsp;|<code>&amp;#96;</code><br>&#124;|竖线|&nbsp;|<code>&amp;#124</code><br>©|版权|<code>&amp;copy;</code>|<code>&amp;#169;</code><br>®|注册|<code>&amp;reg;</code>|<code>&amp;#174;</code><br>™|商标|<code>&amp;trade;</code>|<code>&amp;#8482;</code></p>
</blockquote>
<h2 id="前端字符表示方式"><a href="#前端字符表示方式" class="headerlink" title="前端字符表示方式"></a>前端字符表示方式</h2><ol>
<li>HTML中字符输出使用&amp;#x配上charCode值；</li>
<li>在JavaScript文件中为防止乱码转义，则是\u配上charCode值；</li>
<li>而在CSS文件中，如CSS伪元素的content属性，直接使用\配上charCode值。</li>
<li>unicode-range是U+配上charCode值。</li>
</ol>
<h1 id="三-标签"><a href="#三-标签" class="headerlink" title="三 标签"></a>三 标签</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;meta name=&quot;&quot; content=&quot;&quot;&gt;</span><br><span class="line">	&lt;meta http-equiv=&quot;&quot; content=&quot;&quot;&gt;</span><br><span class="line">	&lt;base href=&quot;&quot; target=&quot;&quot;&gt;</span><br><span class="line">	&lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">	&lt;link&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;header&gt;</span><br><span class="line">	&lt;/header&gt;</span><br><span class="line">	&lt;main&gt;</span><br><span class="line">		&lt;article&gt;</span><br><span class="line">			&lt;section&gt;&lt;/section&gt;</span><br><span class="line">			&lt;section&gt;&lt;/section&gt;</span><br><span class="line">			&lt;aside&gt;&lt;/aside&gt;</span><br><span class="line">		&lt;/article&gt;</span><br><span class="line">	&lt;/main&gt;</span><br><span class="line">	&lt;footer&gt;</span><br><span class="line">	&lt;/footer&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-1-文档声明"><a href="#3-1-文档声明" class="headerlink" title="3.1 文档声明"></a>3.1 文档声明</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-根元素"><a href="#3-2-根元素" class="headerlink" title="3.2 根元素"></a>3.2 根元素</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;html lang=&quot;&quot;&gt;</span><br></pre></td></tr></table></figure>

<h3 id="lang-属性"><a href="#lang-属性" class="headerlink" title="lang 属性"></a>lang 属性</h3><ol>
<li>作用<ol>
<li>搜索引擎无法判断页面中的内容是什么语言，需要我们告诉它</li>
<li>浏览器会将读取到的页面语言和本地语言进行比较判断，如果一致，不做处理，否则提示是否需要翻译（如果有此功能）</li>
<li>有时候明明页面是中文由于设置的 <code>lang=&quot;en&quot;</code>，还会提示是否翻译，就是此原因</li>
</ol>
</li>
<li>值<ul>
<li>英文<ul>
<li><code>en</code></li>
</ul>
</li>
<li>中文<ul>
<li><code>zh-CN</code> 用的最多其实已过时</li>
<li><code>zh-Hans</code> 简体中文</li>
<li><code>zh-cmn-Hans</code> 以简体中文书写的普通话用词</li>
<li><code>zh-yue-Hans</code> 以简体中文书写的粤语用词</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="3-3-文档元数据（Metadata）"><a href="#3-3-文档元数据（Metadata）" class="headerlink" title="3.3 文档元数据（Metadata）"></a>3.3 文档元数据（Metadata）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 文档元数据定义在 head 标签中</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;meta name=&quot;&quot; content=&quot;&quot;&gt;</span><br><span class="line">	&lt;meta http-equiv=&quot;&quot; content=&quot;&quot;&gt;</span><br><span class="line">	# 定义此文档中所有相对URL的根URL</span><br><span class="line">	&lt;base href=&quot;&quot; target=&quot;&quot;&gt;</span><br><span class="line">	&lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">	&lt;link&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-4-文档结构"><a href="#3-4-文档结构" class="headerlink" title="3.4 文档结构"></a>3.4 文档结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;header&gt;</span><br><span class="line">	&lt;/header&gt;</span><br><span class="line">	&lt;main&gt;</span><br><span class="line">		&lt;article&gt;</span><br><span class="line">			&lt;section&gt;&lt;/section&gt;</span><br><span class="line">			&lt;section&gt;&lt;/section&gt;</span><br><span class="line">			&lt;aside&gt;&lt;/aside&gt;</span><br><span class="line">		&lt;/article&gt;</span><br><span class="line">	&lt;/main&gt;</span><br><span class="line">	&lt;footer&gt;</span><br><span class="line">	&lt;/footer&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>标签</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;header&gt;</code></td>
<td>文档页眉，用于展示介绍性内容，通常包含一组介绍性的或是辅助导航的实用元素，如标题 Logo、搜索框、作者名称，等等</td>
</tr>
<tr>
<td><code>&lt;footer&gt;</code></td>
<td>文档页脚，通常包含该章节作者、版权数据或者与文档相关的链接等信息</td>
</tr>
<tr>
<td><code>&lt;main&gt;</code></td>
<td>文档主体</td>
</tr>
<tr>
<td><code>&lt;nav&gt;</code></td>
<td>导航链接，如菜单，目录和索引…</td>
</tr>
<tr>
<td><code>&lt;artical&gt;</code></td>
<td>定义独立的自包含内容区域</td>
</tr>
<tr>
<td><code>&lt;section&gt;</code></td>
<td>定义一个区块，一般是一组相似内容的排列组合</td>
</tr>
<tr>
<td><code>&lt;aside&gt;</code></td>
<td>附加区域，用于设置与主要区域无关的内容，比如侧面栏的广告等</td>
</tr>
</tbody></table>
<h3 id="lt-body-gt"><a href="#lt-body-gt" class="headerlink" title="&lt;body&gt;"></a><code>&lt;body&gt;</code></h3><ol>
<li><code>&lt;body&gt;</code> 默认并不是全屏的</li>
<li><code>&lt;body&gt;</code> 是块元素所以默认宽度为100%，高度0</li>
<li><code>&lt;body&gt;</code> 设置背景色时，会发现覆盖全屏，其实是因为当html不设置背景时，body的背景将作为整个浏览器的背景色</li>
</ol>
<h2 id="3-5-文本相关"><a href="#3-5-文本相关" class="headerlink" title="3.5 文本相关"></a>3.5 文本相关</h2><table>
<thead>
<tr>
<th>标签</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;br&gt;</code></td>
<td>换行</td>
</tr>
<tr>
<td><code>&lt;hr&gt;</code></td>
<td>横线</td>
</tr>
<tr>
<td><code>&lt;h1&gt;~&lt;h6&gt;</code></td>
<td>标题标签</td>
</tr>
<tr>
<td><code>&lt;div&gt;</code></td>
<td>块标签</td>
</tr>
<tr>
<td><code>&lt;span&gt;</code></td>
<td>行内标签</td>
</tr>
<tr>
<td><code>&lt;p&gt;</code></td>
<td>段落标签</td>
</tr>
<tr>
<td><code>&lt;pre&gt;</code></td>
<td>原样显示文本内容包括空白、换行等</td>
</tr>
<tr>
<td><code>&lt;em&gt;</code></td>
<td>着重元素，显示为斜体</td>
</tr>
<tr>
<td><code>&lt;i&gt;</code></td>
<td>斜体，因某些原因需要区分普通文本的一系列文本，如技术术语、外文短语或是小说中人物的思想活动</td>
</tr>
<tr>
<td><code>&lt;strong&gt;</code></td>
<td>强调</td>
</tr>
<tr>
<td><code>&lt;mark&gt;</code></td>
<td>突出显示，类似生活中使用的马克笔</td>
</tr>
<tr>
<td><code>&lt;del&gt;</code></td>
<td>表示删除的内容，通常与<code>&lt;ins&gt;</code> 配合表示更新与修正</td>
</tr>
<tr>
<td><code>&lt;ins&gt;</code></td>
<td>表示文档中添加的内容</td>
</tr>
<tr>
<td><code>&lt;abbr&gt;</code></td>
<td>缩写</td>
</tr>
<tr>
<td><code>&lt;sub&gt;</code></td>
<td>下标</td>
</tr>
<tr>
<td><code>&lt;sup&gt;</code></td>
<td>上标</td>
</tr>
<tr>
<td><code>&lt;cite&gt;</code></td>
<td>通常表示它所包含的文本对某个参考文献的引用，或文章作者的名字，来源</td>
</tr>
<tr>
<td><code>&lt;blockquote&gt;</code></td>
<td>用来定义摘自另一个源的块引用</td>
</tr>
<tr>
<td><code>&lt;q&gt;</code></td>
<td>用于表示行内引用文本</td>
</tr>
<tr>
<td><code>&lt;address&gt;</code></td>
<td>设置联系地址等信息，通常放在 <code>&lt;footer&gt;</code> 中</td>
</tr>
<tr>
<td><code>&lt;progress&gt;</code></td>
<td>进度条</td>
</tr>
</tbody></table>
<h2 id="3-6-图片-amp-链接"><a href="#3-6-图片-amp-链接" class="headerlink" title="3.6 图片 &amp; 链接"></a>3.6 图片 &amp; 链接</h2><h3 id="1-lt-img-gt"><a href="#1-lt-img-gt" class="headerlink" title="1 &lt;img&gt;"></a>1 <code>&lt;img&gt;</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;图片地址&quot; alt=&quot;图片无法正常显示时的文字&quot; &gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-lt-a-gt"><a href="#2-lt-a-gt" class="headerlink" title="2  &lt;a&gt;"></a>2  <code>&lt;a&gt;</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;支持协议的URL或锚点&quot; target=&quot;&quot; title=&quot;链接提示文本&quot;&gt; 链接显示文本 &lt;/a&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>target</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>_selt</code></td>
<td>默认，当前页面打开</td>
</tr>
<tr>
<td><code>_blank</code></td>
<td>新页面打开</td>
</tr>
<tr>
<td><code>_parent</code></td>
<td>父级页面打开</td>
</tr>
<tr>
<td><code>_top</code></td>
<td>祖先页面打开</td>
</tr>
</tbody></table>
<h2 id="3-7-列表"><a href="#3-7-列表" class="headerlink" title="3.7 列表"></a>3.7 列表</h2><h3 id="1-lt-ul-gt"><a href="#1-lt-ul-gt" class="headerlink" title="1 &lt;ul&gt;"></a>1 <code>&lt;ul&gt;</code></h3><ul>
<li><code>unorder list</code>：无序列表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">	&lt;li&gt;&lt;/li&gt;</span><br><span class="line">	&lt;li&gt;&lt;/li&gt;</span><br><span class="line">	...</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-lt-ol-gt"><a href="#2-lt-ol-gt" class="headerlink" title="2 &lt;ol&gt;"></a>2 <code>&lt;ol&gt;</code></h3><ul>
<li><code>order list</code>：有序列表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ol&gt;</span><br><span class="line">	&lt;li type=&quot;1、A、a、I、i&quot; start=&quot;首项从第几个开始&quot;&gt;&lt;/li&gt;</span><br><span class="line">	&lt;li&gt;&lt;/li&gt;</span><br><span class="line">	...</span><br><span class="line">&lt;/ol&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="3-lt-dl-gt"><a href="#3-lt-dl-gt" class="headerlink" title="3 &lt;dl&gt;"></a>3 <code>&lt;dl&gt;</code></h3><ul>
<li><code>definition list</code>：定义列表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dl&gt;</span><br><span class="line">	&lt;dt&gt;孙悟空&lt;/dt&gt;</span><br><span class="line">	&lt;dd&gt;美猴王&lt;/dd&gt;</span><br><span class="line">	&lt;dd&gt;齐天大圣&lt;/dd&gt;</span><br><span class="line">	&lt;dd&gt;斗战胜佛&lt;/dd&gt;</span><br><span class="line">&lt;/dl&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="3-8-表格标签"><a href="#3-8-表格标签" class="headerlink" title="3.8 表格标签"></a>3.8 表格标签</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;table&gt;</span><br><span class="line">	&lt;colgroup&gt;</span><br><span class="line">		&lt;col width=&quot;控制第1列宽度&quot;&gt;</span><br><span class="line">		&lt;col width=&quot;控制第2列宽度&quot;&gt;</span><br><span class="line">		&lt;col width=&quot;控制第3列宽度&quot;&gt;</span><br><span class="line">	&lt;colgroup&gt;</span><br><span class="line">	&lt;caption&gt;表格标题&lt;/caption&gt;</span><br><span class="line">	&lt;thead&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;th&gt;行列标题，内容默认居中，加粗&lt;/th&gt;</span><br><span class="line">		&lt;/tr&gt;	</span><br><span class="line">	&lt;/thead&gt;</span><br><span class="line">	&lt;tbody&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;td colspan=&quot;列合并&quot; rowspan=&quot;行合并&quot;&gt;&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">	&lt;/tbody&gt;</span><br><span class="line">	&lt;tfoot&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;td&gt;&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">	&lt;/tfoot&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li>使用<code>&lt;thead&gt;&lt;tbody&gt;&lt;tfoot&gt;</code>的好处是规定位置，即使代码的顺序是乱的，显示也是正确的。</li>
<li><code>&lt;thead&gt;&lt;tfoot&gt;</code>可以没有，<code>&lt;tbody&gt;</code>不写也存在，且可以有多个</li>
</ol>
<h2 id="3-9-表单"><a href="#3-9-表单" class="headerlink" title="3.9 表单"></a>3.9 表单</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;&quot; method=&quot;&quot;&gt;</span><br><span class="line">	&lt;input type=&quot;&quot; name=&quot;提交key&quot; value=&quot;&quot;&gt;</span><br><span class="line">	&lt;select name=&quot;提交key&quot;&gt;</span><br><span class="line">		&lt;option value=&quot;提交值&quot; selected=&quot;&quot;&gt;页面显示值&lt;/option&gt;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">	&lt;textarea name=&quot;提交key&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">	&lt;button&gt;&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>form</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;label&gt;</code></td>
<td>用于描述表单元素</td>
</tr>
<tr>
<td><code>&lt;button&gt;</code></td>
<td>按钮</td>
</tr>
<tr>
<td><code>&lt;input&gt;</code></td>
<td>表单交互式元素</td>
</tr>
<tr>
<td><code>&lt;select&gt;</code></td>
<td>选项菜单</td>
</tr>
<tr>
<td><code>&lt;textarea&gt;</code></td>
<td>文本域</td>
</tr>
<tr>
<td><code>&lt;datalist&gt;</code></td>
<td>为表单输入框准备一些选项列表</td>
</tr>
</tbody></table>
<h3 id="1-lt-label-gt"><a href="#1-lt-label-gt" class="headerlink" title="1 &lt;label&gt;"></a>1 <code>&lt;label&gt;</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 1 id</span><br><span class="line">&lt;label for=&quot;表单元素的id&quot;&gt;</span><br><span class="line">&lt;input id=&quot;&quot;&gt;</span><br><span class="line">// 2 直接包裹表单元素</span><br><span class="line">&lt;label&gt;&lt;input&gt;&lt;/label&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-lt-input-gt"><a href="#2-lt-input-gt" class="headerlink" title="2 &lt;input&gt;"></a>2 <code>&lt;input&gt;</code></h3><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>表单类型，默认为 <code>text</code></td>
</tr>
<tr>
<td>name</td>
<td>后台接收字段名</td>
</tr>
<tr>
<td>value</td>
<td>默认值</td>
</tr>
<tr>
<td>required</td>
<td>必须输入</td>
</tr>
<tr>
<td>placeholder</td>
<td>提示文本内容，得到焦点不会消失，一输入值就消失</td>
</tr>
<tr>
<td>maxlength</td>
<td>允许最大输入字符数</td>
</tr>
<tr>
<td>disabled</td>
<td>禁止使用，不可以提交到后台</td>
</tr>
<tr>
<td>readonly</td>
<td>只读，可提交到后台</td>
</tr>
<tr>
<td>autocomplete</td>
<td><code>autocomplete=&quot;on&quot;</code>，代表如果<code>&lt;input&gt;</code>元素的 type 允许，则会具有自动填充的功能</td>
</tr>
</tbody></table>
<h4 id="1-type"><a href="#1-type" class="headerlink" title="1 type"></a>1 type</h4><table>
<thead>
<tr>
<th>type</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>text</code></td>
<td>默认，文本框</td>
</tr>
<tr>
<td><code>password</code></td>
<td>密码框</td>
</tr>
<tr>
<td><code>radio</code></td>
<td>单选框，<code>name</code> 相同的是一个组，<code>value</code> 为提交值，<code>checked</code> 默认选中</td>
</tr>
<tr>
<td><code>checkbox</code></td>
<td>复选框，<code>name</code> 相同的是一个组，<code>value</code> 为提交值，<code>checked</code> 默认选中</td>
</tr>
<tr>
<td><code>file</code></td>
<td>上传文件，<code>multiple=&quot;multiple&quot;</code> 支持多选</td>
</tr>
<tr>
<td><code>button</code></td>
<td>按钮</td>
</tr>
<tr>
<td><code>image</code></td>
<td>图片提交按钮</td>
</tr>
<tr>
<td><code>hidden</code></td>
<td>隐藏域</td>
</tr>
<tr>
<td><code>submit</code></td>
<td>提交按钮，不指定服务端会提交到当前页面</td>
</tr>
<tr>
<td><code>reset</code></td>
<td>复位按钮</td>
</tr>
<tr>
<td><code>email</code></td>
<td>邮件框</td>
</tr>
<tr>
<td><code>search</code></td>
<td>搜索框</td>
</tr>
<tr>
<td><code>datetime-local</code></td>
<td>日期</td>
</tr>
</tbody></table>
<h4 id="2-表单提交方式"><a href="#2-表单提交方式" class="headerlink" title="2 表单提交方式"></a>2 表单提交方式</h4><ol>
<li><code>&lt;input type=&quot;submit&quot; name=&quot;&quot; value=&quot;点我提交&quot;&gt;</code><ul>
<li>如果设置了name，按钮数据也会提交到后台，如果有多个表单项可以判断是哪个表单提交的。</li>
</ul>
</li>
<li><code>&lt;button type=&quot;submit&quot;&gt;点我提交&lt;/button&gt;</code><ul>
<li>html5 推荐使用<code>&lt;button&gt;</code> 而不是表单的 <code>&lt;input type=button&gt;</code></li>
</ul>
</li>
<li><code>&lt;input type=&quot;image&quot;&gt;</code><ul>
<li>图片也能提交</li>
</ul>
</li>
</ol>
<h3 id="3-lt-select-gt"><a href="#3-lt-select-gt" class="headerlink" title="3 &lt;select&gt;"></a>3 <code>&lt;select&gt;</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;select name=&quot;&quot; multiple&gt;</span><br><span class="line">	&lt;option value=&quot;提交值&quot;&gt;显示值&lt;/option&gt;</span><br><span class="line">	&lt;optgroup label=&quot;体育&quot;&gt;</span><br><span class="line">		&lt;option value=&quot;lanqiu&quot;&gt;篮球&lt;/option&gt;</span><br><span class="line">		&lt;option value=&quot;zuqiu&quot;&gt;足球&lt;/option&gt;</span><br><span class="line">		&lt;option value=&quot;wangqiu&quot; selected&gt;网球&lt;/option&gt;</span><br><span class="line">	&lt;/optgroup&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>提交字段</td>
</tr>
<tr>
<td>multiple</td>
<td>支持多选. select默认是单选</td>
</tr>
<tr>
<td>disabled</td>
<td>禁止使用，不可以提交到后台</td>
</tr>
<tr>
<td>required</td>
<td>select的值不能为空</td>
</tr>
</tbody></table>
<h4 id="1-lt-optfroup-gt"><a href="#1-lt-optfroup-gt" class="headerlink" title="1 &lt;optfroup&gt;"></a>1 <code>&lt;optfroup&gt;</code></h4><ul>
<li>选项组，其实只是将一些option分了一下组，与直接写option没区别</li>
</ul>
<h4 id="2-相关操作"><a href="#2-相关操作" class="headerlink" title="2 相关操作"></a>2 相关操作</h4><ul>
<li><code>options</code><ul>
<li>option集合</li>
</ul>
</li>
<li><code>selectedIndex</code><ul>
<li>选中的option的索引</li>
</ul>
</li>
<li>获取选中的option<ul>
<li><code>var optionElement=selectElement[selectElement.selectedIndex]</code></li>
<li><code>var optionElement=selectElement.options[selectedIndex]</code></li>
</ul>
</li>
<li>获取option中的值<ul>
<li><code>var value=optionElement.value</code></li>
<li><code>var value=optionElement.innerHTML</code></li>
</ul>
</li>
<li>清空select中的option<ul>
<li><code>selectElement.options.length=0</code></li>
</ul>
</li>
</ul>
<h3 id="4-lt-button-gt"><a href="#4-lt-button-gt" class="headerlink" title="4 &lt;button&gt;"></a>4 <code>&lt;button&gt;</code></h3><ul>
<li><code>type</code><ul>
<li><code>submit</code><ul>
<li>默认</li>
</ul>
</li>
<li><code>reset</code><ul>
<li>重置所有组件为初始值</li>
</ul>
</li>
<li><code>button</code><ul>
<li>此按钮没有默认行为</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-lt-datalist-gt"><a href="#5-lt-datalist-gt" class="headerlink" title="5 &lt;datalist&gt;"></a>5 <code>&lt;datalist&gt;</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; list=&quot;自定义名&quot;&gt;</span><br><span class="line">&lt;datalist id=&quot;输入框list名&quot;&gt;</span><br><span class="line">	&lt;option value=&quot;&quot;&gt;&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;&quot;&gt;&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;&quot;&gt;&lt;/option&gt;</span><br><span class="line">&lt;/datalist&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-10-音-视频"><a href="#3-10-音-视频" class="headerlink" title="3.10 音/视频"></a>3.10 音/视频</h2><h3 id="1-lt-audio-gt"><a href="#1-lt-audio-gt" class="headerlink" title="1 &lt;audio&gt;"></a>1 <code>&lt;audio&gt;</code></h3><ul>
<li><code>&lt;audio src=&quot;&quot; controls muted preload&gt;</code></li>
</ul>
<h3 id="2-lt-video-gt"><a href="#2-lt-video-gt" class="headerlink" title="2 &lt;video&gt;"></a>2 <code>&lt;video&gt;</code></h3><ul>
<li><code>&lt;video src=&quot;&quot; controls muted autoplay poster=&quot;&quot; preload=&quot;&quot; loop&gt;</code><ul>
<li><code>controls</code><ul>
<li>视频进度条</li>
</ul>
</li>
<li><code>muted</code><ul>
<li>静音</li>
</ul>
</li>
<li><code>autoplay</code><ul>
<li>自动播放，要设置静音才有效</li>
</ul>
</li>
<li><code>poster</code><ul>
<li>视频封面图</li>
</ul>
</li>
<li><code>preload</code><ul>
<li>视频预加载方式</li>
</ul>
</li>
<li><code>loop</code><ul>
<li>循环播放</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="四-attribute-amp-property"><a href="#四-attribute-amp-property" class="headerlink" title="四 attribute &amp; property"></a>四 attribute &amp; property</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>attribute</code></td>
<td>HTML 预定义和自定义属性</td>
</tr>
<tr>
<td><code>property</code></td>
<td>DOM 属性</td>
</tr>
</tbody></table>
<h2 id="4-2-操作"><a href="#4-2-操作" class="headerlink" title="4.2 操作"></a>4.2 操作</h2><h3 id="1-property"><a href="#1-property" class="headerlink" title="1 property"></a>1 property</h3><p>操作|原生DOM|jQuery<br>-|-<br>读|<code>element.name</code>|<code>$element.prop(name)</code><br>写|<code>element.name=value</code>|<code>$element.prop(name, value)</code><br>删|<code>delete element.name</code>|<code>$element.removeProp(name)</code></p>
<h3 id="2-attribute"><a href="#2-attribute" class="headerlink" title="2 attribute"></a>2 attribute</h3><p>操作|原生DOM|jQuery<br>-|-<br>读|<code>element.getAttribute(name)</code>|<code>$element.attr(name)</code><br>写|<code>element.setAttribute(name, value)</code>|<code>$element.attr(name, value)</code><br>删|<code>element.removeAttribute(name)</code>|<code>$element.removeAttr(name)</code></p>
<h2 id="4-3-attribute-amp-property-的同步"><a href="#4-3-attribute-amp-property-的同步" class="headerlink" title="4.3 attribute &amp; property 的同步"></a>4.3 attribute &amp; property 的同步</h2><ol>
<li><strong>浏览器只认 property，用户操作的也是 property</strong></li>
<li>非布尔值属性<ul>
<li>实时同步</li>
</ul>
</li>
<li>布尔值属性<ol>
<li>property 永远都不会同步 attribute</li>
<li>attribute<ol>
<li>没有动过property<ul>
<li>attribute会同步property</li>
</ul>
</li>
<li>动过property <ul>
<li>attribute不会同步property</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="4-4-总结"><a href="#4-4-总结" class="headerlink" title="4.4 总结"></a>4.4 总结</h2><ol>
<li>优先操作 <code>DOM property</code></li>
<li>没有 <code>DOM property</code> （如自定义属性 …）时，才使用 <code>HTML attribute</code></li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/29/Linux-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/29/Linux-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/" class="post-title-link" itemprop="url">Linux 综合架构</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-29 11:04:30 / 修改时间：11:05:52" itemprop="dateCreated datePublished" datetime="2020-03-29T11:04:30+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-中小规模网站综合架构组成"><a href="#一-中小规模网站综合架构组成" class="headerlink" title="一 中小规模网站综合架构组成"></a>一 中小规模网站综合架构组成</h1><h2 id="1-1-前端"><a href="#1-1-前端" class="headerlink" title="1.1 前端"></a>1.1 前端</h2><ol>
<li>防火墙<ul>
<li>访问策略控制</li>
</ul>
</li>
<li>负载均衡服务器<ul>
<li>对访问请求进行调度处理</li>
</ul>
</li>
<li>web服务器<ul>
<li>处理用户请求</li>
</ul>
</li>
</ol>
<h2 id="1-2-后端"><a href="#1-2-后端" class="headerlink" title="1.2 后端"></a>1.2 后端</h2><ol>
<li>数据库服务器<ul>
<li>存储字符数据，如订单…</li>
</ul>
</li>
<li>存储服务器<ul>
<li>存储图片 音频 视频 附件都数据</li>
</ul>
</li>
<li>备份服务器<ul>
<li>存储网站所有服务器重要数据</li>
</ul>
</li>
<li>缓存服务器<ul>
<li>将常用数据存储到内存中，减轻服务器压力，提升用户体验</li>
</ul>
</li>
</ol>
<h2 id="1-3-扩展"><a href="#1-3-扩展" class="headerlink" title="1.3 扩展"></a>1.3 扩展</h2><ol>
<li>批量管理服务器<ul>
<li>批量管理多台服务器主机</li>
</ul>
</li>
<li>VPN服务器<ul>
<li>内部员工访问架构 <code>PPTP vpn</code></li>
</ul>
</li>
<li>审计服务器（跳板机）<ul>
<li>内部员工操作管理架构 <code>jumpserver</code></li>
</ul>
</li>
<li>监控服务器<ul>
<li>综合架构服务器的监控 <code>zabbix</code></li>
</ul>
</li>
<li>网站架构单点问题（高可用服务）<ol>
<li>负载均衡服务器 <code>keepalived</code></li>
<li>数据库 <code>mha</code></li>
<li>存储服务器 <code>分布式存储</code></li>
<li>备份服务 <code>rsync 云存储</code></li>
<li>缓存服务 <code>集群/哨兵模式</code></li>
</ol>
</li>
</ol>
<h1 id="二-备份"><a href="#二-备份" class="headerlink" title="二 备份"></a>二 备份</h1><h2 id="2-1-备份策略"><a href="#2-1-备份策略" class="headerlink" title="2.1 备份策略"></a>2.1 备份策略</h2><ol>
<li>全量备份<ul>
<li>完整备份所有数据</li>
</ul>
</li>
<li>增量备份<ul>
<li>做一次完全备份，以后每次只备份新增的数据</li>
<li>例<ul>
<li>第一天完全备份</li>
<li>第二天备份第二天新增数据</li>
<li>第三天备份第三天新增数据</li>
<li>第四天备份第四天新增数据</li>
</ul>
</li>
</ul>
</li>
<li>差异备份<ul>
<li>做一次完全备份，以后每次只备份和第一次完全备份不同的数据</li>
<li>例<ul>
<li>第一天完全备份</li>
<li>第二天备份第二天新增数据</li>
<li>第三天备份第二天和第三天新增数据（和第一次比较）</li>
<li>第四天备份第二天第三天和第四天新增数据（和第一次比较）</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="2-2-备份命令"><a href="#2-2-备份命令" class="headerlink" title="2.2 备份命令"></a>2.2 备份命令</h2><ol>
<li>本地备份<ul>
<li><code>cp</code></li>
</ul>
</li>
<li>远程备份<ul>
<li><code>scp -rp</code><ul>
<li><code>-r</code><ul>
<li>递归</li>
</ul>
</li>
<li><code>-p</code><ul>
<li>保持文件属性</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="2-3-rsync"><a href="#2-3-rsync" class="headerlink" title="2.3 rsync"></a>2.3 rsync</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>Rsync是一款开源的、快速的、多功能的、可实现全量及增量的本地或远程数据同步备份的优秀工具</li>
<li>安装 <code>rsync</code> 软件包</li>
</ol>
<h3 id="2-本地备份"><a href="#2-本地备份" class="headerlink" title="2 本地备份"></a>2 本地备份</h3><ul>
<li><code>rsync [OPTION] SRC DEST</code><ul>
<li>等价于 <code>cp</code> 命令</li>
</ul>
</li>
<li><code>rsync FILE</code><ul>
<li>等价于 <code>ls</code> 命令</li>
</ul>
</li>
</ul>
<h3 id="3-远程备份"><a href="#3-远程备份" class="headerlink" title="3 远程备份"></a>3 远程备份</h3><h4 id="1-Push"><a href="#1-Push" class="headerlink" title="1 Push"></a>1 Push</h4><ul>
<li><code>rsync [OPTION] SRC [USER@]HOST:DEST</code><ul>
<li>等价于 <code>scp</code> 命令</li>
<li><code>OPTION</code><ul>
<li><code>-a</code><ul>
<li>命令的归档参数，等价于 <code>-rtopgDl</code></li>
</ul>
</li>
<li><code>-v</code><ul>
<li>显示详细的传输信息</li>
</ul>
</li>
<li><code>-z</code><ul>
<li>传输时进行压缩以提高效率</li>
</ul>
</li>
<li><code>-r</code><ul>
<li>递归</li>
</ul>
</li>
<li><code>-t</code><ul>
<li>保持文件最后修改时间不变</li>
</ul>
</li>
<li><code>-o</code><ul>
<li>保持文件属主信息不变</li>
</ul>
</li>
<li><code>-p</code><ul>
<li>保持文件权限信息不变</li>
</ul>
</li>
<li><code>-g</code><ul>
<li>保持文件属组信息不变</li>
</ul>
</li>
<li><code>-D</code><ul>
<li>保持设备文件信息不变</li>
</ul>
</li>
<li><code>-P</code><ul>
<li>显示数据传输的进度信息</li>
</ul>
</li>
<li><code>-l</code><ul>
<li>保留软连接信息</li>
</ul>
</li>
<li><code>-L</code><ul>
<li>保留软连接指向目标文件的数据</li>
</ul>
</li>
<li><code>--exclude=PATTERN</code><ul>
<li>排除指定数据不被传输</li>
</ul>
</li>
<li><code>--exclude-from=file</code><ul>
<li>排除指定数据不被传输(批量排除)</li>
</ul>
</li>
<li><code>--bwlimit=RATE</code><ul>
<li>显示传输的速率</li>
</ul>
</li>
<li><code>--delete</code><ul>
<li>让目标和源数据保持一致，即会删除目标中源没有的数据</li>
</ul>
</li>
</ul>
</li>
<li><code>USER@</code><ul>
<li>以什么用户身份推送数据（默认以当前用户）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-Pull"><a href="#2-Pull" class="headerlink" title="2 Pull"></a>2 Pull</h4><ul>
<li><code>rsync [OPTION] [USER@]HOST:SRC [DEST]</code><ul>
<li><code>USER@</code><ul>
<li>以什么用户身份拉取数据（默认以当前用户）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-守护进程方式（一直在后台持续的运行）"><a href="#4-守护进程方式（一直在后台持续的运行）" class="headerlink" title="4 守护进程方式（一直在后台持续的运行）"></a>4 守护进程方式（一直在后台持续的运行）</h3><h4 id="1-rsync-守护进程部署流程"><a href="#1-rsync-守护进程部署流程" class="headerlink" title="1 rsync 守护进程部署流程"></a>1 rsync 守护进程部署流程</h4><ol>
<li>安装 <ul>
<li><code>rpm -qa rsync</code></li>
<li><code>yum install -y rsync</code> </li>
</ul>
</li>
<li>配置文件 <code>/etc/rsyncd.conf</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">uid = nobody # 管理备份目录的用户</span><br><span class="line">gid = nobody # 管理备份目录的用户组</span><br><span class="line">port = 873 # rsync # 备份服务的端口号</span><br><span class="line">fake super = yes # 将rsync服务虚拟用户伪装成为一个超级管理员用户</span><br><span class="line">use chroot = yes # 安全相关</span><br><span class="line">max connections = 4 # 最大链接数</span><br><span class="line">timeout = 900 # 超时时间</span><br><span class="line">pid file = /var/run/rsyncd.pid # 记录进程号的文件，服务运行时才有</span><br><span class="line">lock file = /var/run/rsync.lock # 锁文件</span><br><span class="line">log file = /var/log/rsyncd.log # rsync 服务日志文件</span><br><span class="line">ignore errors # 忽略传输过程中的简单错误</span><br><span class="line">read only =false # 备份目录可读写</span><br><span class="line">list = false # 客户端是否可以查看服务端的模块信息</span><br><span class="line">hosts allow = # 白名单</span><br><span class="line">hosts deny =  # 黑名单</span><br><span class="line">auth users =	 # 指定认证用户</span><br><span class="line">secrests file = /etc/rsync.password # 指定认证用户密码文件 `用户名称:密码信息`</span><br><span class="line">[backup] # 模块信息</span><br><span class="line">	comment = # 注释信息  </span><br><span class="line">	path =  # 指定备份目录</span><br></pre></td></tr></table></figure></li>
<li>创建rsync服务的虚拟用户</li>
<li>创建rsync服务密码认证文件（权限 600）</li>
<li>创建备份目录并修改属主属组信息</li>
<li>启动服务 <code>systemctl start rsyncd</code></li>
</ol>
<h4 id="2-客户端免密码配置"><a href="#2-客户端免密码配置" class="headerlink" title="2 客户端免密码配置"></a>2 客户端免密码配置</h4><ol>
<li>创建一个密码文件（权限 600），存储密码</li>
<li>执行命令时，在命令后添加 <code>--password-file =密码文件路径</code></li>
</ol>
<h4 id="3-Push"><a href="#3-Push" class="headerlink" title="3 Push"></a>3 Push</h4><ul>
<li><code>rsync [OPTION] SRC [USER@]HOST::DEST</code><ul>
<li><code>OPTION</code><ul>
<li>常用 <code>-avz</code></li>
</ul>
</li>
<li><code>USER@</code><ul>
<li>指定认证用户信息</li>
</ul>
</li>
<li><code>DEST</code><ul>
<li>指定备份服务器的模块</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="4-Pull"><a href="#4-Pull" class="headerlink" title="4 Pull"></a>4 Pull</h4><ul>
<li><code>rsync [OPTION] [USER@]HOST::SRC [DEST]</code></li>
</ul>
<h3 id="5-rsync-原理"><a href="#5-rsync-原理" class="headerlink" title="5 rsync 原理"></a>5 rsync 原理</h3><ol>
<li>客户端当前登录用户通过命令向服务端发送推送请求</li>
<li>服务端判断客户端命令中认证用户是否存在配置 <code>/etc/rsyncd.conf</code> 中</li>
<li>服务端判断客户端认证用户密码是否正确 <code>/etc/rsync.password</code></li>
<li>开始传输后，无论客户端发送请求的是root还是普通用户，到服务端都是通过配置的虚拟管理用户来备份。也就是说，传输的文件属主和属组在服务端会改为虚拟管理用户。<ol>
<li>假如文件在客户端属主和属组是 root，服务端虚拟管理用户是 xiaoqiang，即在传输文件时需要把文件的属主和属组改为xiaoqiang，权限不足。</li>
<li><code>fake super</code> 配置会将虚拟管理用户伪装成root</li>
</ol>
</li>
</ol>
<h1 id="三-存储"><a href="#三-存储" class="headerlink" title="三 存储"></a>三 存储</h1><h2 id="3-1-存储服务"><a href="#3-1-存储服务" class="headerlink" title="3.1 存储服务"></a>3.1 存储服务</h2><ol>
<li>FTP（File Transfer Protocol）<ul>
<li>FTP 服务器</li>
<li>FTP 客户端</li>
</ul>
</li>
<li>samba<ul>
<li>windows–linux之间数据传输，Linux部署samba</li>
</ul>
</li>
<li>NFS（Network File System）<ul>
<li>linux–linux之间数据传输</li>
</ul>
</li>
<li>门户网站-分布式存储<ul>
<li>FastDFS</li>
<li>GlusterFS</li>
</ul>
</li>
</ol>
<h2 id="3-2-NFS"><a href="#3-2-NFS" class="headerlink" title="3.2 NFS"></a>3.2 NFS</h2><h3 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>网络文件共享系统，主要功能是通过网络（一般是局域网）让不同的主机系统之间可以共享文件</li>
</ol>
<h3 id="2-RPC（Remote-Procedure-Call）"><a href="#2-RPC（Remote-Procedure-Call）" class="headerlink" title="2 RPC（Remote Procedure Call）"></a>2 RPC（Remote Procedure Call）</h3><h1 id="四-批量管理"><a href="#四-批量管理" class="headerlink" title="四 批量管理"></a>四 批量管理</h1><h2 id="4-1-ansible"><a href="#4-1-ansible" class="headerlink" title="4.1 ansible"></a>4.1 ansible</h2><h1 id="五-WEB服务"><a href="#五-WEB服务" class="headerlink" title="五 WEB服务"></a>五 WEB服务</h1>
      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/29/Linux-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/29/Linux-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" class="post-title-link" itemprop="url">Linux 定时任务</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-29 11:04:21 / 修改时间：11:06:30" itemprop="dateCreated datePublished" datetime="2020-03-29T11:04:21+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-定时任务"><a href="#一-定时任务" class="headerlink" title="一 定时任务"></a>一 定时任务</h1><h2 id="1-1-实现定时任务的软件"><a href="#1-1-实现定时任务的软件" class="headerlink" title="1.1 实现定时任务的软件"></a>1.1 实现定时任务的软件</h2><ol>
<li><code>cronie</code><ul>
<li>周期性定时任务</li>
</ul>
</li>
<li><code>atd</code><ul>
<li>定时任务只执行一次，一次性定时服务</li>
</ul>
</li>
<li><code>anacron</code><ul>
<li>非7*24小时运行的服务器，用在个人电脑上</li>
</ul>
</li>
</ol>
<h1 id="二-atd"><a href="#二-atd" class="headerlink" title="二 atd"></a>二 atd</h1><ul>
<li><code>at 时间</code><ul>
<li>创建一次性定时任务</li>
</ul>
</li>
<li><code>at -l</code><ul>
<li>查看一次性定时任务</li>
</ul>
</li>
<li><code>atrm 任务序号</code><ul>
<li>删除一次性定时任务</li>
</ul>
</li>
</ul>
<h1 id="三-crond"><a href="#三-crond" class="headerlink" title="三 crond"></a>三 crond</h1><h2 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h2><ol>
<li>Linux 系统定时任务由 crond 这个系统服务来控制，Linux 系统上原本就有非常多的计划性工作，所以 crond 服务是默认启动的</li>
<li>Linux 系统也提供了使用者控制计划任务的命令 <code>crontab</code> 命令</li>
</ol>
<h2 id="3-2-系统定时任务"><a href="#3-2-系统定时任务" class="headerlink" title="3.2 系统定时任务"></a>3.2 系统定时任务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/cron.hourly # 每小时</span><br><span class="line">/etc/cron.daily # 每天 00:00-23:59</span><br><span class="line">/etc/cron.weekly # 每周 7天</span><br><span class="line">/etc/cron.monthly # 每月</span><br></pre></td></tr></table></figure>
<ol>
<li>放在以上4个目录中的脚本会在相应周期自动执行。</li>
<li><code>/etc/crontab</code><ul>
<li>系统定时任务的配置文件</li>
<li>只有root可以编辑</li>
</ul>
</li>
</ol>
<h2 id="3-3-用户定时任务（cronie）"><a href="#3-3-用户定时任务（cronie）" class="headerlink" title="3.3 用户定时任务（cronie）"></a>3.3 用户定时任务（cronie）</h2><h3 id="1-相关文件"><a href="#1-相关文件" class="headerlink" title="1 相关文件"></a>1 相关文件</h3><ol>
<li><code>/var/spool/cron/用户名</code><ul>
<li>用户定时任务配置文件</li>
</ul>
</li>
<li><code>/var/log/cron</code><ul>
<li>用户定时任务服务运行记录文件</li>
</ul>
</li>
<li><code>/etc/cron.allow</code><ul>
<li>当系统中有此文件时，只有写入此文件的用户可以使用 <code>crontab</code> 命令，优先级高于 <code>/etc/cron.deny</code></li>
</ul>
</li>
<li><code>/etc/cron.deny</code><ul>
<li>此文件中所列用户不允许使用 <code>crontab</code> 命令</li>
</ul>
</li>
</ol>
<h3 id="2-配置-crontab"><a href="#2-配置-crontab" class="headerlink" title="2 配置 crontab"></a>2 配置 crontab</h3><ul>
<li><code>crontab [-u USER] [OPTION] [FILE]</code><ul>
<li><code>USER</code><ul>
<li>如果省略则表示针对当前用户</li>
</ul>
</li>
<li><code>OPTION</code><ul>
<li><code>-l</code><ul>
<li>查看用户定时任务列表</li>
<li>等价于 <code>cat /var/spool/cron/用户名</code></li>
</ul>
</li>
<li><code>-e</code><ul>
<li>编辑用户定时任务</li>
<li>等价于 <code>vim /var/spool/cron/用户名</code></li>
</ul>
</li>
<li><code>-r</code><ul>
<li>删除用户定时任务</li>
<li>等价于 <code>rm -f /var/spool/cron/用户名</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-定时任务语法"><a href="#3-定时任务语法" class="headerlink" title="3 定时任务语法"></a>3 定时任务语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">分 时 日 月 周 任务</span><br><span class="line">分：0-59</span><br><span class="line">时：0-23</span><br><span class="line">日：1-31</span><br><span class="line">月：1-12</span><br><span class="line">周：0-6</span><br></pre></td></tr></table></figure>
<ol>
<li><code>*</code><ul>
<li>表示每（分/时/天/月/周）</li>
</ul>
</li>
<li><code>*/N</code><ul>
<li>表示每隔 N（分/时/天/月/周）</li>
</ul>
</li>
<li><code>M/N</code><ul>
<li>表示从 M 开始每隔 N（分/时/天/月/周）</li>
</ul>
</li>
<li><code>M-N</code><ul>
<li>表示 M 到 N</li>
<li>如 <code>01-05 * * * *</code> 表示每小时的01分到05分（01 02 03 04 05）</li>
</ul>
</li>
<li><code>M,N</code><ul>
<li>表示 M 和 N</li>
<li>如 <code>01,05 * * * *</code> 表示每小时的01分和05分（01 05）</li>
</ul>
</li>
<li><code>N</code><ul>
<li>表示具体时间</li>
<li>如 <code>10 02 * * *</code> 表示每天的02时10分</li>
</ul>
</li>
</ol>
<h3 id="4-定时任务规范"><a href="#4-定时任务规范" class="headerlink" title="4 定时任务规范"></a>4 定时任务规范</h3><ol>
<li>编写定时任务要有注释说明</li>
<li>编写定时任务路径信息尽量使用绝对路径</li>
<li>编写定时任务要使用绝对路径命令<ul>
<li>定时任务识别的 PATH 信息只有<code>/usr/bin</code> 和 <code>/bin</code></li>
</ul>
</li>
<li>编写定时任务尽量不要产生屏幕信息</li>
<li>定时任务执行时如果产生标准输出/标准错误输出（即输出到屏幕的信息），会以邮件的方式通知用户<ul>
<li>问题<ul>
<li>可能会导致邮件文件过大，占用磁盘空间</li>
</ul>
</li>
<li>解决方式<ol>
<li>关闭邮件服务 <code>postfix</code>，虽然可以阻止邮件发送，但会类似其它邮箱的草稿，不断在 <code>/var/spool/postfix/maildrop/</code> 产生小文件占用磁盘空间 </li>
<li>标准输出/标准错误输出都不输出到屏幕，而是重定向到黑洞文件 <code>/dev/null</code> 中（推荐）</li>
</ol>
</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/29/Linux-%E7%BD%91%E7%BB%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/29/Linux-%E7%BD%91%E7%BB%9C/" class="post-title-link" itemprop="url">Linux 网络</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-29 11:04:13 / 修改时间：11:06:11" itemprop="dateCreated datePublished" datetime="2020-03-29T11:04:13+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-虚拟机网络连接"><a href="#一-虚拟机网络连接" class="headerlink" title="一 虚拟机网络连接"></a>一 虚拟机网络连接</h1><h2 id="1-1-Bridged（桥接模式）"><a href="#1-1-Bridged（桥接模式）" class="headerlink" title="1.1 Bridged（桥接模式）"></a>1.1 Bridged（桥接模式）</h2><ol>
<li>虚拟机相当于局域网内一台独立的主机，和宿主主机是对等的，同处于一个局域网</li>
<li>虚拟主机和宿主机网络地址是一致的</li>
<li>网卡：<code>VMnet0</code></li>
<li>优点<ul>
<li>局域网内其它物理主机可以直接和虚拟主机通信</li>
</ul>
</li>
<li>缺点<ul>
<li>占用局域网IP地址，同一个网段主机ip地址有限，可能会与其它物理主机ip冲突</li>
</ul>
</li>
</ol>
<h2 id="1-2-NAT（网络地址转换模式）"><a href="#1-2-NAT（网络地址转换模式）" class="headerlink" title="1.2 NAT（网络地址转换模式）"></a>1.2 NAT（网络地址转换模式）</h2><ol>
<li>虚拟主机 → 虚拟交换机 → 虚拟路由 → 宿主机</li>
<li>虚拟主机通过宿主机访问外网，宿主机相当于一个路由器，会将虚拟主机IP与宿主机IP做一个映射，访问外网使用的都是宿主机的IP</li>
<li><ol start="2">
<li>虚拟主机和宿主机网络地址可以不一致</li>
</ol>
</li>
<li>网卡：<code>VMnet8</code><ul>
<li>虚拟机的子网掩码、网关、DNS要与<code>Vmnet8</code>的网卡保持一致。</li>
</ul>
</li>
<li>优点<ul>
<li>虚拟主机不占用局域网IP地址</li>
</ul>
</li>
<li>缺点<ul>
<li>局域网内其它物理主机不能直接和虚拟主机通信</li>
</ul>
</li>
</ol>
<h2 id="1-3-Host-only（仅主机模式）"><a href="#1-3-Host-only（仅主机模式）" class="headerlink" title="1.3 Host-only（仅主机模式）"></a>1.3 Host-only（仅主机模式）</h2><ol>
<li>虚拟主机只能和宿主机通信，不能访问外网</li>
<li>网卡：<code>VMnet1</code></li>
</ol>
<h1 id="二-网络配置"><a href="#二-网络配置" class="headerlink" title="二 网络配置"></a>二 网络配置</h1><h2 id="2-1-图形界面"><a href="#2-1-图形界面" class="headerlink" title="2.1 图形界面"></a>2.1 图形界面</h2><ul>
<li><code>nmtui</code></li>
</ul>
<h2 id="2-2-网卡配置文件"><a href="#2-2-网卡配置文件" class="headerlink" title="2.2 网卡配置文件"></a>2.2 网卡配置文件</h2><ul>
<li><code>/etc/sysconfig/network-scripts/ifcfg-ens32</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet # 网络类型 目前基本为以太网</span><br><span class="line">BOOTPROTO=none # 网络启动协议，如何让主机获得ip</span><br><span class="line">DEFROUTE=yes # 使用默认路由</span><br><span class="line">NAME=ens33 # 第一块网卡逻辑名称</span><br><span class="line">DEVICE=ens33 # 第一块网卡设备名称（物理名称）</span><br><span class="line">ONBOOT=yes # 网卡是否激活</span><br><span class="line">IPADDR=192.168.13.24 # 静态ip </span><br><span class="line">PREFIX=24 # 子网掩码</span><br><span class="line">GATEWAY=192.168.13.2 # 网关</span><br><span class="line">DNS1=223.5.5.5 # DNS</span><br></pre></td></tr></table></figure>
<ul>
<li><code>BOOTPROTO</code><ul>
<li><code>dhcp</code><ul>
<li>动态获取ip</li>
</ul>
</li>
<li><code>none</code>, <code>static</code><ul>
<li>静态ip（手动配置）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-3-其它配置文件"><a href="#2-3-其它配置文件" class="headerlink" title="2.3 其它配置文件"></a>2.3 其它配置文件</h2><ol>
<li><code>/etc/resolv.conf</code><ol>
<li>系统DNS客户端的配置文件</li>
<li>每次重启网卡此文件DNS都会更新为网卡配置文件所配置的DNS</li>
</ol>
</li>
<li><code>/etc/hosts</code><ol>
<li>系统本地的DNS解析文件</li>
<li>可以手动设置域名和IP绑定信息</li>
<li>首先使用本地设置的域名对应的ip，若没有设置，才使用所配置的DNS来解析域名</li>
</ol>
</li>
<li><code>/etc/hostname</code><ul>
<li>主机名配置文件</li>
</ul>
</li>
</ol>
<h1 id="三-系统路由设置"><a href="#三-系统路由设置" class="headerlink" title="三 系统路由设置"></a>三 系统路由设置</h1><table>
<thead>
<tr>
<th>配置 \ 版本</th>
<th>CentOS 6 <code>net-tools</code></th>
<th>CentOS 7 <code>iproute</code></th>
</tr>
</thead>
<tbody><tr>
<td>静态默认路由</td>
<td><code>route add/del default gw 网关</code></td>
<td><code>ip route add/del default via 网关</code></td>
</tr>
<tr>
<td>静态网段路由</td>
<td><code>route add/del -net 目标网络地址 netmask 子网掩码 gw 网关</code></td>
<td><code>ip route add/del -net 目标网络地址 netmask 子网掩码 via 网关</code></td>
</tr>
<tr>
<td>静态主机路由</td>
<td><code>route add/del -host 目标主机地址 dev 网关</code></td>
<td><code>ip route add/del -host 目标主机地址 via 网关</code></td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/29/Linux-%E8%BD%AF%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/29/Linux-%E8%BD%AF%E4%BB%B6/" class="post-title-link" itemprop="url">Linux 软件</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-29 11:04:04 / 修改时间：11:06:42" itemprop="dateCreated datePublished" datetime="2020-03-29T11:04:04+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-软件包类型"><a href="#一-软件包类型" class="headerlink" title="一 软件包类型"></a>一 软件包类型</h1><p>类型|说明|安装方式<br>-|-<br><code>源码包</code>|源代码二进制包|编译安装<br><code>rpm包</code>|已编译过的二进制包|rpm 安装 / yum 安装</p>
<ol>
<li>rpm 安装<ol>
<li>安装时使用默认位置（大多数）</li>
<li>rpm包之间存在依赖性<ol>
<li>树形依赖</li>
<li>环形依赖</li>
<li>模块依赖<ul>
<li><code>.so</code></li>
<li><code>www.rpmfind.net</code> 模块依赖查询</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
<li>yum 安装<ul>
<li>自动解决rpm的依赖性</li>
</ul>
</li>
</ol>
<h1 id="二-源码包安装"><a href="#二-源码包安装" class="headerlink" title="二 源码包安装"></a>二 源码包安装</h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><ol>
<li>可以自定义功能，安装时可以自定义路径</li>
<li>安装配置复杂，耗时</li>
<li>卸载方便（直接删除安装目录）</li>
</ol>
<h2 id="2-2-编译安装过程"><a href="#2-2-编译安装过程" class="headerlink" title="2.2 编译安装过程"></a>2.2 编译安装过程</h2><h3 id="1-编译器（没有则安装）"><a href="#1-编译器（没有则安装）" class="headerlink" title="1 编译器（没有则安装）"></a>1 编译器（没有则安装）</h3><ol>
<li><code>gcc</code><ul>
<li><code>yum -y install gcc gcc-c++ make zlib-devel pcre pcre-devel openssl-devel</code><ul>
<li><code>zlib</code>：压缩库</li>
<li><code>pcre</code>：支持正则表达式，地址重写rewrite</li>
<li><code>openssl</code>：提供https支持</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="2-下载源码包，解压并进入解压后目录"><a href="#2-下载源码包，解压并进入解压后目录" class="headerlink" title="2 下载源码包，解压并进入解压后目录"></a>2 下载源码包，解压并进入解压后目录</h3><h3 id="3-软件配置和检查，生成-Makefile-文件"><a href="#3-软件配置和检查，生成-Makefile-文件" class="headerlink" title="3 软件配置和检查，生成 Makefile 文件"></a>3 软件配置和检查，生成 Makefile 文件</h3><ul>
<li><code>./configure</code><ol>
<li>定义需要的功能选项</li>
<li>检测系统环境是否符合安装要求</li>
<li>把定义好的功能选项和检测环境信息都写入<code>Makefile</code>文件，用于后续的编译</li>
<li>常见参数<ul>
<li><code>--prefix=PATH</code><ul>
<li>指定安装路径</li>
</ul>
</li>
<li><code>--enable-ssl --disable-filter</code><ul>
<li>启用禁用某项功能</li>
</ul>
</li>
<li><code>--with-...</code><ul>
<li>支持模块功能</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="4-按照-Makefile-文件编译"><a href="#4-按照-Makefile-文件编译" class="headerlink" title="4 按照 Makefile 文件编译"></a>4 按照 Makefile 文件编译</h3><ul>
<li><code>make</code><ul>
<li>编译</li>
</ul>
</li>
<li><code>make -j 4</code><ul>
<li>指定4核心CPU编译，提升速度</li>
</ul>
</li>
<li><code>make clean</code><ul>
<li>清除make产生的文件</li>
<li>安装步骤之前，不会向安装位置写入任何文件，所以如果安装前有错误，执行<code>make clean</code>即可</li>
</ul>
</li>
</ul>
<h3 id="5-按照-Makefile-定义的文件路径安装"><a href="#5-按照-Makefile-定义的文件路径安装" class="headerlink" title="5 按照 Makefile 定义的文件路径安装"></a>5 按照 Makefile 定义的文件路径安装</h3><ul>
<li><code>make install</code></li>
</ul>
<h1 id="三-RPM（redhat-package-manager）"><a href="#三-RPM（redhat-package-manager）" class="headerlink" title="三  RPM（redhat package manager）"></a>三  RPM（redhat package manager）</h1><h2 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h2><ol>
<li>红帽软件包管理器</li>
<li>rpm通过将安装规则和源代码打包到一起，来降低软件的安装难度</li>
</ol>
<h2 id="3-2-rpm-操作"><a href="#3-2-rpm-操作" class="headerlink" title="3.2 rpm 操作"></a>3.2 rpm 操作</h2><h3 id="1-查询"><a href="#1-查询" class="headerlink" title="1 查询"></a>1 查询</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>rpm -qa</code></td>
<td>查询所有已安装的软件包</td>
</tr>
<tr>
<td><code>rpm -q 包名</code></td>
<td>查询软件包是否安装</td>
</tr>
<tr>
<td><code>rpm -qi 包名</code></td>
<td>查询已安装软件包的详细信息</td>
</tr>
<tr>
<td><code>rpm -qip 全包名</code></td>
<td>查询未安装软件包的详细信息</td>
</tr>
<tr>
<td><code>rpm -ql 包名</code></td>
<td>查询已安装软件包中的文件列表</td>
</tr>
<tr>
<td><code>rpm -qlp 全包名</code></td>
<td>查询未安装软件包中的文件列表</td>
</tr>
<tr>
<td><code>rpm -qf file</code></td>
<td>查询文件属于哪个安装包</td>
</tr>
<tr>
<td><code>rpm -qR 包名</code></td>
<td>查询软件包的依赖性</td>
</tr>
<tr>
<td><code>rpm -qg group</code></td>
<td>查询组中的软件包列表</td>
</tr>
</tbody></table>
<h3 id="2-安装"><a href="#2-安装" class="headerlink" title="2 安装"></a>2 安装</h3><ul>
<li><code>rpm -ivh 包全名</code><ul>
<li><code>-i</code>, <code>--install</code><ul>
<li>安装</li>
</ul>
</li>
<li><code>-v</code><ul>
<li>显示详细信息</li>
</ul>
</li>
<li><code>-h</code>, <code>--hash</code><ul>
<li>显示进度</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-更新"><a href="#3-更新" class="headerlink" title="3 更新"></a>3 更新</h3><ul>
<li><code>rpm -Uvh 包名</code><ul>
<li><code>-U, --upgrade</code><ul>
<li>更新</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-卸载"><a href="#4-卸载" class="headerlink" title="4 卸载"></a>4 卸载</h3><ul>
<li><code>rpm -e 包名</code><ul>
<li><code>-e, --erase</code>    <ul>
<li>卸载</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-校验"><a href="#5-校验" class="headerlink" title="5 校验"></a>5 校验</h3><ul>
<li><code>rpm -V 包名</code><ul>
<li><code>-V</code><ul>
<li>校验，对已经安装软件进行校验</li>
<li>检查包内容是否被修改，校验安全</li>
</ul>
</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>校验信息</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>S</code></td>
<td>文件大小是否改变</td>
</tr>
<tr>
<td><code>M</code></td>
<td>文件的类型或文件的权限（rwx）是否被改变</td>
</tr>
<tr>
<td><code>5</code></td>
<td>文件MD5校验和是否改变（可以看成文件内容是否改变）</td>
</tr>
<tr>
<td><code>D</code></td>
<td>设备中的从代码是否改变</td>
</tr>
<tr>
<td><code>L</code></td>
<td>文件路径是否改变</td>
</tr>
<tr>
<td><code>U</code></td>
<td>文件的属主是否改变</td>
</tr>
<tr>
<td><code>G</code></td>
<td>文件的属组是否改变</td>
</tr>
<tr>
<td><code>T</code></td>
<td>文件的修改时间是否改变</td>
</tr>
</tbody></table>
<h1 id="四-Yum（Yellowdog-Updater-Modified）"><a href="#四-Yum（Yellowdog-Updater-Modified）" class="headerlink" title="四 Yum（Yellowdog Updater Modified）"></a>四 Yum（Yellowdog Updater Modified）</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><ul>
<li>yum通过将大量的常用rpm软件包放在一起，解决软件包之间的依赖关系，进一步降低软件的安装难度。</li>
</ul>
<h2 id="4-2-yum源"><a href="#4-2-yum源" class="headerlink" title="4.2 yum源"></a>4.2 yum源</h2><h3 id="1-配置基本-yum-源"><a href="#1-配置基本-yum-源" class="headerlink" title="1 配置基本 yum 源"></a>1 配置基本 yum 源</h3><h4 id="1-手撕配置文件"><a href="#1-手撕配置文件" class="headerlink" title="1 手撕配置文件"></a>1 手撕配置文件</h4><ul>
<li><code>/etc/yum.repos.d/CentOS-Base.repo</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[base] # 容器名称，唯一，区分不同yum源</span><br><span class="line">name=  # 描述</span><br><span class="line">#mirrorlist= # 镜像站点，可以注释掉，和baseurl使用哪个都行</span><br><span class="line">#baseurl= # yum源服务器的地址。默认是CentOS官方的yum源服务器</span><br><span class="line">gpgcheck= #  公钥校验rpm包正确性 0不校验 1校验</span><br><span class="line">enabled= # 此yum源是否生效 0不生效 1或省略 生效</span><br><span class="line">gpgkey= # 公钥路径</span><br><span class="line">$releaseserver = `/etc/centos-release`</span><br><span class="line">$basearch = `*86_64`</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="2-从网络下载配置文件（手动下载，wget，curl-…）"><a href="#2-从网络下载配置文件（手动下载，wget，curl-…）" class="headerlink" title="2 从网络下载配置文件（手动下载，wget，curl …）"></a>2 从网络下载配置文件（手动下载，wget，curl …）</h4><ul>
<li><code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</code></li>
<li><a href="https://developer.aliyun.com/mirror/" target="_blank" rel="noopener" title="阿里云官方镜像站">Aliyun mirror</a></li>
</ul>
<h3 id="2-配置扩展-yum-源-EPEL"><a href="#2-配置扩展-yum-源-EPEL" class="headerlink" title="2 配置扩展 yum 源 EPEL"></a>2 配置扩展 yum 源 EPEL</h3><ul>
<li>EPEL（Extra Packages for Enterprise Linux）<ul>
<li>是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS等提供高质量软件包的项目。</li>
</ul>
</li>
<li><code>wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</code></li>
</ul>
<h3 id="3-配置本地-yum-源"><a href="#3-配置本地-yum-源" class="headerlink" title="3 配置本地 yum 源"></a>3 配置本地 yum 源</h3><ol>
<li>挂载光盘</li>
<li>备份默认本地 yum 源 <code>/etc/yum.repos.d/CentOS-Media.repo</code></li>
<li>配置新 <code>/etc/yum.repos.d/CentOS-Media.repo</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">[CentOS 7]</span><br><span class="line">name=CentOS-server</span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0  </span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">## 4.3 yum 操作</span><br><span class="line">### 1 软件包</span><br><span class="line">#### 1 查询</span><br><span class="line">命令|说明</span><br><span class="line">-|-</span><br><span class="line">`yum repolist`|查看可用的yum源信息</span><br><span class="line">`yum list [all]`|显示所有软件包</span><br><span class="line">`yum list available`|显示所有可安装的软件包</span><br><span class="line">`yum list installed`|显示所有已安装的软件包</span><br><span class="line">`yum list updates`|显示所有可更新的软件包</span><br><span class="line">`yum info 软件包名`|查看软件包信息</span><br><span class="line">`yum search keyword`|根据关键字搜索软件包</span><br><span class="line">`yum provides file`|查询文件的来源，属于哪个软件包</span><br><span class="line"></span><br><span class="line">#### 2 安装</span><br><span class="line">命令|说明</span><br><span class="line">-|-</span><br><span class="line">`yum install 软件包名`|安装指定软件包</span><br><span class="line"></span><br><span class="line">#### 3 更新</span><br><span class="line">命令|说明</span><br><span class="line">-|-</span><br><span class="line">`yum update`|更新所有可更新的软件包以及系统内核，保留旧包</span><br><span class="line">`yum upgrade`|更新所有可更新的软件包以及系统内核，删除旧包</span><br><span class="line">`yum update 软件包名`|更新指定软件包以及系统内核，保留旧包</span><br><span class="line">`yum upgrade 软件包名`|更新指定软件包以及系统内核，删除旧包</span><br><span class="line"></span><br><span class="line">#### 4 删除</span><br><span class="line">命令|说明</span><br><span class="line">-|-</span><br><span class="line">`yum remove 软件包名`|删除指定软件包</span><br><span class="line">`yum erase 软件包名`|删除指定软件包</span><br><span class="line"></span><br><span class="line">#### 5 缓存</span><br><span class="line">命令|说明</span><br><span class="line">-|-</span><br><span class="line">`yum makecache`|生成仓库软件索引表（类似字典索引）</span><br><span class="line">`yum clean all`|清除缓存</span><br><span class="line"></span><br><span class="line">#### 6 gpg key</span><br><span class="line">* 安装时如果 yum 源配置 `gpgkey=1` 会进行验证，缺少key会报错</span><br><span class="line">	1. 改为 `gpgkey=0`</span><br><span class="line">	2. `rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7`</span><br><span class="line">		* 执行此命令导入 gpg key</span><br><span class="line"></span><br><span class="line">### 2 软件包组（软件包操作命令加上 group 即可）</span><br><span class="line">1. `yum grouplist [all]`</span><br><span class="line">	* 显示所有软件包组</span><br><span class="line">2. `yum groupinstall 软件包组`</span><br><span class="line">3. `yum groupupdate 软件包组`</span><br><span class="line">4. `yum groupremove 软件包组`</span><br><span class="line"></span><br><span class="line"># 五 实例</span><br><span class="line">## 5.1 恶搞软件</span><br><span class="line">1. `cowsay`</span><br><span class="line">	* 动物说</span><br><span class="line">2. `sl`</span><br><span class="line">	* 火车</span><br><span class="line"></span><br><span class="line">## 5.2 JDK</span><br><span class="line">### 1 查询是否有安装</span><br><span class="line">1. `rpm -qa | grep java`</span><br><span class="line">	* 查看是否安装有jdk</span><br><span class="line">	* 如果是源码(.tar.gz)安装 查不出来</span><br><span class="line">2. `rpm -e 包名` 或 `yum remove 包名`</span><br><span class="line">	* 卸载</span><br><span class="line"></span><br><span class="line">### 2 下载</span><br><span class="line">* [JDK download](https://www.oracle.com/cn/java/technologies/javase-downloads.html &quot;JDK 官网&quot;)</span><br><span class="line">	*  下载 `.tar.gz` 压缩包（Linux Compressed Archive）</span><br><span class="line"></span><br><span class="line">### 3 安装</span><br><span class="line">1. 将 `.tar.gz` 压缩包上传至 Linux</span><br><span class="line">2. 解压到指定目录</span><br><span class="line"></span><br><span class="line">### 4 配置环境变量</span><br><span class="line">1. `/etc/profile`</span><br></pre></td></tr></table></figure>
export JAVA_HOME=解压路径<br>export PATH=$JAVA_HOME/bin:$PATH <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">2. `source /etc/profile`</span><br><span class="line">3. `java -version`</span><br><span class="line"></span><br><span class="line">## 5.3 Tomcat</span><br><span class="line">### 1 概述</span><br><span class="line">* tomcat 依赖 java 环境</span><br><span class="line"></span><br><span class="line">### 2 下载</span><br><span class="line">* [Tomcat download](https://tomcat.apache.org/ &quot;tomcat 官网&quot;)</span><br><span class="line">	* 下载 `.tar.gz`</span><br><span class="line"></span><br><span class="line">### 3 安装</span><br><span class="line">1. 将 `.tar.gz` 压缩包上传至 Linux</span><br><span class="line">2. 解压到指定目录</span><br><span class="line"></span><br><span class="line">### 4 如果未关闭防火墙，则需要开放 8080 端口</span><br></pre></td></tr></table></figure>
<h1 id="1-添加端口并设置永久生效"><a href="#1-添加端口并设置永久生效" class="headerlink" title="1 添加端口并设置永久生效"></a>1 添加端口并设置永久生效</h1>firewall-cmd –zone=public –add-port=8080/tcp –permanent<h1 id="2-重载"><a href="#2-重载" class="headerlink" title="2 重载"></a>2 重载</h1>firewall-cmd –reload<h1 id="3-查看是否开放"><a href="#3-查看是否开放" class="headerlink" title="3 查看是否开放"></a>3 查看是否开放</h1>firewall-cmd –zone=public –query-port=8080/tcp<pre><code></code></pre></li>
</ol>
<h3 id="5-启动-关闭"><a href="#5-启动-关闭" class="headerlink" title="5 启动 / 关闭"></a>5 启动 / 关闭</h3><ol>
<li><code>basedir/bin/version.sh</code><ul>
<li>查看 tomcat 版本信息</li>
</ul>
</li>
<li><code>basedir/bin/startup.sh</code><ul>
<li>启动 tomcat</li>
</ul>
</li>
<li><code>basedir/bin/shutdown.sh</code><ul>
<li>关闭 tomcat</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/29/Linux-%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/29/Linux-%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF/" class="post-title-link" itemprop="url">Linux 文件信息</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-29 11:03:58 / 修改时间：11:07:01" itemprop="dateCreated datePublished" datetime="2020-03-29T11:03:58+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-文件信息"><a href="#一-文件信息" class="headerlink" title="一 文件信息"></a>一 文件信息</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">33574978 -rw-------. 1 root root 1.5K Mar 25 15:10 anaconda-ks.cfg</span><br></pre></td></tr></table></figure>
<ol>
<li>文件属性（存储在文件的 inode 中）<ol>
<li>inode 编号</li>
<li>文件类型及权限</li>
<li>硬链接数</li>
<li>属主</li>
<li>属组</li>
<li>文件大小</li>
<li>最后修改时间 <code>mtime</code></li>
</ol>
</li>
<li>文件名（存储在父目录的 block 中）</li>
</ol>
<h1 id="二-inode-amp-block"><a href="#二-inode-amp-block" class="headerlink" title="二 inode &amp; block"></a>二 inode &amp; block</h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><ol>
<li>存储设备格式化创建文件系统后，大致分为了两部分 <code>inode</code> 和 <code>block</code></li>
<li><code>inode</code> 用来存储文件属性信息（元数据），不包括文件名</li>
<li><code>block</code> 用来存储数据，文件名存储在父目录的 <code>block</code> 中</li>
<li>一个文件要占用一个 <code>inode</code> 和至少一个 <code>block</code></li>
</ol>
<h2 id="2-2-inode"><a href="#2-2-inode" class="headerlink" title="2.2 inode"></a>2.2 inode</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li><code>inode index</code> 指向一个文件的 <code>inode</code>，是文件在文件系统中的唯一标识</li>
<li>文件名仅是为了方便人们的记忆和使用</li>
<li>修改文件会改变 <code>inode</code>，所以修改完服务器配置文件后，都需要重新加载一下配置文件</li>
</ol>
<h3 id="2-查看-inode-信息"><a href="#2-查看-inode-信息" class="headerlink" title="2 查看 inode 信息"></a>2 查看 inode 信息</h3><h4 id="1-stat-file"><a href="#1-stat-file" class="headerlink" title="1 stat file"></a>1 <code>stat file</code></h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Inode</code></td>
<td>inode 编号</td>
</tr>
<tr>
<td><code>Size</code></td>
<td>文件大小</td>
</tr>
<tr>
<td><code>Uid</code></td>
<td>文件属主</td>
</tr>
<tr>
<td><code>Gid</code></td>
<td>文件属组</td>
</tr>
<tr>
<td><code>Access</code></td>
<td>文件类型及权限</td>
</tr>
<tr>
<td><code>Links</code></td>
<td>链接数（硬链接）</td>
</tr>
<tr>
<td><code>Blocks</code></td>
<td>数据块 <code>block</code> 数量</td>
</tr>
<tr>
<td><code>IO Block</code></td>
<td>每个数据块 <code>block</code> 大小</td>
</tr>
<tr>
<td><code>Device</code></td>
<td>存储该文件的设备号码</td>
</tr>
<tr>
<td><code>Access time</code></td>
<td>atime，最后访问时间</td>
</tr>
<tr>
<td><code>Modify time</code></td>
<td>mtime，文件内容最后修改时间</td>
</tr>
<tr>
<td><code>Change time</code></td>
<td>ctime，inode 信息最后变动时间</td>
</tr>
</tbody></table>
<h4 id="2-df-i"><a href="#2-df-i" class="headerlink" title="2 df -i"></a>2 <code>df -i</code></h4><ul>
<li>查看 inode 使用情况</li>
</ul>
<h2 id="2-3-block"><a href="#2-3-block" class="headerlink" title="2.3 block"></a>2.3 block</h2><ol>
<li>文件的 <code>block</code> 存储数据，目录的 <code>block</code> 存储目录下文件的文件名和 <code>inode</code> 的对应关系</li>
<li>一个文件可能占用多个 <code>block</code>，一个 <code>block</code> 的读写就消耗一次 I/O</li>
<li>一个 <code>block</code> 只能存放一个文件，如果 <code>block</code> 没有占满，剩余空间就浪费掉了</li>
<li>一个 <code>block</code> 默认大小为 4 k，可调整<ol>
<li>如果存储文件较大，<code>block</code> 大点好，节省IO消耗</li>
<li>如果存储文件较小，<code>block</code> 小点好，提高磁盘利用率</li>
</ol>
</li>
</ol>
<h1 id="三-文件类型"><a href="#三-文件类型" class="headerlink" title="三 文件类型"></a>三 文件类型</h1><h2 id="3-1-查看文件类型"><a href="#3-1-查看文件类型" class="headerlink" title="3.1 查看文件类型"></a>3.1 查看文件类型</h2><ul>
<li><code>file [OPTION] FILE</code><ul>
<li>查看文件类型及编码</li>
<li><code>OPTION</code><ul>
<li><code>-i</code><ul>
<li>查看文件MIME类型及编码</li>
</ul>
</li>
<li><code>-L</code><ul>
<li>查看软链接文件时，查看的是软链接指向的目标文件的信息</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-2-文件类型分类"><a href="#3-2-文件类型分类" class="headerlink" title="3.2 文件类型分类"></a>3.2 文件类型分类</h2><table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>-</code></td>
<td>文件</td>
</tr>
<tr>
<td><code>d</code></td>
<td>目录</td>
</tr>
<tr>
<td><code>l</code></td>
<td>链接文件（软连接）</td>
</tr>
<tr>
<td><code>s</code></td>
<td>socket 文件（网路编程）</td>
</tr>
<tr>
<td><code>b</code></td>
<td>块设备文件，（光驱 磁盘…）如<code>/dev/sda</code></td>
</tr>
<tr>
<td><code>c</code></td>
<td>字符设备文件，如 <code>/dev/tty0</code>，<code>dev/null</code>，<code>dev/zero</code>，<code>dev/urandom</code></td>
</tr>
<tr>
<td><code>p</code></td>
<td>pipe 管道文件</td>
</tr>
</tbody></table>
<h3 id="1"><a href="#1" class="headerlink" title="1 -"></a>1 <code>-</code></h3><ol>
<li><code>ASCII text</code><ul>
<li>纯文本文件，可直接查看和编辑</li>
</ul>
</li>
<li><code>binary</code><ul>
<li>二进制文件（命令文件），不可以编辑</li>
</ul>
</li>
<li><code>data</code><ul>
<li>数据文件（压缩文件）</li>
</ul>
</li>
</ol>
<h3 id="2-c"><a href="#2-c" class="headerlink" title="2 c"></a>2 <code>c</code></h3><ol>
<li><code>/dev/null</code><ul>
<li>“空”设备（黑洞文件）</li>
<li>读<ul>
<li>什么内容也读取不到</li>
</ul>
</li>
<li>写<ul>
<li>写入的内容会永远丢失</li>
</ul>
</li>
</ul>
</li>
<li><code>/dev/zero</code><ul>
<li>“零”设备</li>
<li>读<ul>
<li>读取时提供无限的空字符（<code>NULL， ASCII NUL，0x00</code>）</li>
<li>典型用法是用它来产生一个特定大小的空白文件</li>
</ul>
</li>
<li>写<ul>
<li>写入的内容会永远丢失</li>
</ul>
</li>
</ul>
</li>
<li><code>/dev/urandom</code><ul>
<li>伪随机数生成器</li>
</ul>
</li>
</ol>
<h1 id="四-链接"><a href="#四-链接" class="headerlink" title="四 链接"></a>四 链接</h1><h2 id="4-1-硬链接（Hard-Link）"><a href="#4-1-硬链接（Hard-Link）" class="headerlink" title="4.1 硬链接（Hard Link）"></a>4.1 硬链接（Hard Link）</h2><h3 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>Linux 允许同一个 <code>inode</code> 对应多个文件名，多个文件指向同一个 <code>inode</code> 就是硬链接</li>
<li>不能对目录进行创建，只能对已存在的文件创建硬链接</li>
<li>同一个分区 <code>inode</code> 是唯一的，不能跨文件系统或者跨分区进行硬链接的创建</li>
<li>硬链接与原文件都拥有相同的 <code>inode</code> 和 <code>block</code></li>
<li>删除一个硬链接不会影响原文件，只有文件的硬链接数为 <code>0</code> ，文件才会被真正的删除</li>
<li>每个目录下包含两个隐藏项<ol>
<li><code>.</code><ul>
<li>当前目录的硬链接</li>
</ul>
</li>
<li><code>..</code><ul>
<li>父目录的硬链接</li>
</ul>
</li>
</ol>
</li>
<li>链接数<ol>
<li>文件的硬链接数 = <code>1（文件本身）+ n（硬链接数）</code></li>
<li>目录的硬链接数 = <code>1（目录本身）+ 1（.）+ n（子目录数..）</code></li>
</ol>
</li>
</ol>
<h3 id="2-创建硬链接"><a href="#2-创建硬链接" class="headerlink" title="2 创建硬链接"></a>2 创建硬链接</h3><ul>
<li><code>ln 目标文件 硬链接文件</code></li>
</ul>
<h2 id="4-2-软连接（Symbolic-Link）"><a href="#4-2-软连接（Symbolic-Link）" class="headerlink" title="4.2 软连接（Symbolic Link）"></a>4.2 软连接（Symbolic Link）</h2><h3 id="1-概述-2"><a href="#1-概述-2" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>软连接文件中存储的是另一个文件的指针，类似于快捷方式</li>
<li>软链接有自己 <code>inode</code> 和 <code>block</code></li>
<li>可对目录或文件（包括不存在的）创建软链接</li>
<li>软链接可跨文件系统和分区</li>
<li>删除原文件相关软连接会变成死链接</li>
</ol>
<h3 id="2-创建软连接"><a href="#2-创建软连接" class="headerlink" title="2 创建软连接"></a>2 创建软连接</h3><ul>
<li><code>ln -s 目标文件 软链接文件</code><ul>
<li><code>软连接文件 -&gt; 目标文件</code></li>
</ul>
</li>
</ul>
<h1 id="五-权限"><a href="#五-权限" class="headerlink" title="五 权限"></a>五 权限</h1><h2 id="5-1-基本权限"><a href="#5-1-基本权限" class="headerlink" title="5.1 基本权限"></a>5.1 基本权限</h2><h3 id="1-基本权限说明"><a href="#1-基本权限说明" class="headerlink" title="1 基本权限说明"></a>1 基本权限说明</h3><p>权限|二进制|八进制|文件|目录<br>-|-|-|-<br><code>r</code>|<code>100</code>|<code>4</code>|读取文件内容|查看目录中的内容（<code>ls</code>）<br><code>w</code>|<code>010</code>|<code>2</code>|编辑文件内容|在目录中操作（<code>touch mkdir rm cp mv</code>）<br><code>x</code>|<code>001</code>|<code>1</code>|执行文件|进入目录（<code>cd</code>）</p>
<h3 id="2-文件"><a href="#2-文件" class="headerlink" title="2 文件"></a>2 文件</h3><table>
<thead>
<tr>
<th>权限</th>
<th>属主（root）</th>
<th>属主（普通用户）</th>
<th>其它人（root）</th>
<th>其它人（普通用户）</th>
</tr>
</thead>
<tbody><tr>
<td><code>---</code></td>
<td><code>读 写</code></td>
<td><code>-</code></td>
<td><code>读 写</code></td>
<td><code>-</code></td>
</tr>
<tr>
<td><code>r--</code></td>
<td><code>读 写</code></td>
<td><code>读</code></td>
<td><code>读 写</code></td>
<td><code>读</code></td>
</tr>
<tr>
<td><code>-w-</code></td>
<td><code>读 写</code></td>
<td><code>写</code></td>
<td><code>读 写</code></td>
<td><code>写</code></td>
</tr>
<tr>
<td><code>--x</code></td>
<td><code>读 写 执行</code></td>
<td>-</td>
<td><code>读 写 执行</code></td>
<td>-</td>
</tr>
<tr>
<td><code>r-x</code></td>
<td><code>读 写 执行</code></td>
<td><code>读 执行</code></td>
<td><code>读 写 执行</code></td>
<td><code>读 执行</code></td>
</tr>
<tr>
<td>1. root 对所有文件可读写，执行需要有执行权限</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1. 读写：任意权限</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2. 执行：<code>x</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2. 普通用户读写文件需要有相应权限，执行需要有 读 + 执行权限</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1. 读：<code>r</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2. 写：<code>w</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3. 执行：<code>rx</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3. 通常文件权限需要有 <code>r</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="3-目录"><a href="#3-目录" class="headerlink" title="3 目录"></a>3 目录</h3><table>
<thead>
<tr>
<th>权限</th>
<th>属主（root）</th>
<th>属主（普通用户）</th>
<th>其它人（root）</th>
<th>其它人（普通用户）</th>
</tr>
</thead>
<tbody><tr>
<td><code>---</code></td>
<td><code>读 写 执行</code></td>
<td><code>-</code></td>
<td><code>读 写 执行</code></td>
<td><code>-</code></td>
</tr>
<tr>
<td><code>r--</code></td>
<td><code>读 写 执行</code></td>
<td><code>读（只有文件名，没有文件属性信息）</code></td>
<td><code>读 写 执行</code></td>
<td><code>读（只有文件名，没有文件属性信息）</code></td>
</tr>
<tr>
<td><code>-w-</code></td>
<td><code>读 写 执行</code></td>
<td><code>-</code></td>
<td><code>读 写 执行</code></td>
<td><code>-</code></td>
</tr>
<tr>
<td><code>--x</code></td>
<td><code>读 写 执行</code></td>
<td><code>执行</code></td>
<td><code>读 写 执行</code></td>
<td><code>执行</code></td>
</tr>
<tr>
<td><code>r-x</code></td>
<td><code>读 写 执行</code></td>
<td><code>读 执行</code></td>
<td><code>读 写 执行</code></td>
<td><code>读 执行</code></td>
</tr>
<tr>
<td><code>-wx</code></td>
<td><code>读 写 执行</code></td>
<td><code>写 执行</code></td>
<td><code>读 写 执行</code></td>
<td><code>写 执行</code></td>
</tr>
<tr>
<td>1. root 对所有目录可读、写、执行</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2. 普通用户对目录的读写需要 读写权限 + 执行权限</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1. 读：<code>rx</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2. 写：<code>rx</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3. 执行：<code>x</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3. 通常目录权限需要有 <code>x</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="4-umask-amp-默认权限"><a href="#4-umask-amp-默认权限" class="headerlink" title="4 umask &amp; 默认权限"></a>4 umask &amp; 默认权限</h3><h4 id="1-umask"><a href="#1-umask" class="headerlink" title="1 umask"></a>1 umask</h4><h5 id="1-命令"><a href="#1-命令" class="headerlink" title="1 命令"></a>1 命令</h5><ol>
<li><code>umask</code><ul>
<li>查看umask值，root 默认 <code>0022</code>，普通用户默认 <code>0002</code></li>
<li>第一位是特殊权限，后三位是基本权限 <code>rwx</code></li>
</ul>
</li>
<li><code>umask -S</code><ul>
<li>以rwx形式查看umask值</li>
</ul>
</li>
<li><code>umask 值</code><ul>
<li>临时修改umask值</li>
</ul>
</li>
</ol>
<h5 id="2-umask-和-默认权限的计算"><a href="#2-umask-和-默认权限的计算" class="headerlink" title="2 umask 和 默认权限的计算"></a>2 umask 和 默认权限的计算</h5><ol>
<li>没有umask时，文件的默认权限是 <code>0666</code>，目录的默认权限是 <code>0777</code></li>
<li>有umask时，文件和目录默认权限简单算法（不严谨）<ul>
<li><code>文件默认权限 = 666 - umask</code></li>
<li><code>目录默认权限 = 777 - umask</code></li>
</ul>
</li>
<li>有umask时，文件和目录默认权限科学算法<ol>
<li>将默认权限（目录777，文件666）和 umask 值转为 2 进制</li>
<li>对 umask 2 进制值取反</li>
<li>将默认权限和umask取反后的值进行与运算 <code>&amp;</code></li>
<li>将二进制结果转为八进制，即为默认权限</li>
</ol>
</li>
</ol>
<h4 id="2-默认权限"><a href="#2-默认权限" class="headerlink" title="2 默认权限"></a>2 默认权限</h4><ol>
<li>root<ol>
<li>文件默认权限为 644 <code>rw-r--r--</code></li>
<li>目录默认权限为 755 <code>rwxr-xr-x</code></li>
</ol>
</li>
<li>普通用户<ol>
<li>文件默认权限为 664 <code>rw-rw--r--</code></li>
<li>目录默认权限为 775 <code>rwxrwxr-x</code></li>
</ol>
</li>
</ol>
<h2 id="5-2-特殊权限"><a href="#5-2-特殊权限" class="headerlink" title="5.2 特殊权限"></a>5.2 特殊权限</h2><h3 id="1-SUID（set-uid）（4）"><a href="#1-SUID（set-uid）（4）" class="headerlink" title="1 SUID（set uid）（4）"></a>1 SUID（set uid）（4）</h3><h4 id="1-概述-3"><a href="#1-概述-3" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>SUID 权限仅对可执行二进制文件有效，目录没有意义</li>
<li>SUID 权限只有在该命令文件执行过程中有效</li>
<li>执行者必须对文件有可执行权限</li>
<li>命令文件执行时，执行者可以拥有文件属主的权限</li>
<li><strong>总结</strong>：SUID 即将文件属主的权限分配给所有可执行此文件的人</li>
</ol>
<h4 id="2-例"><a href="#2-例" class="headerlink" title="2 例"></a>2 例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---------- 1 root root	/etc/shadow</span><br><span class="line">-rwsr-xr-x. 1 root root	/usr/bin/passwd</span><br><span class="line">-rwxr-xr-x. 1 root root	 /usr/bin/cat</span><br></pre></td></tr></table></figure>
<ol>
<li>执行 <code>passwd</code> 命令修改密码其实最终要修改 <code>/etc/shadow</code>，而只有 root 可以读写 <code>/etc/shadow</code> 文件</li>
<li>普通用户执行 <code>passwd</code> 命令能成功的原因<ol>
<li>普通用户对 <code>passwd</code> 命令有执行权限</li>
<li><code>passwd</code> 命令有SUID权限，所以在执行时普通用户拥有了 <code>passwd</code> 属主 root 的权限</li>
</ol>
</li>
<li><code>cat</code> 命令没有SUID权限，所以普通用户无法通过 <code>cat</code> 查看 <code>/etc/shadow</code></li>
</ol>
<h4 id="3-添加-SUID"><a href="#3-添加-SUID" class="headerlink" title="3 添加 SUID"></a>3 添加 SUID</h4><ol>
<li><code>chmod u+s FILE</code></li>
<li><code>chmod 4xxx FILE</code> （xxx 为普通权限）</li>
</ol>
<ul>
<li>设置SUID之后，属主权限的显示<ol>
<li>属主有 <code>x</code> 权限，则 <code>x</code> → <code>s</code></li>
<li>属主无 <code>x</code> 权限，则 <code>-</code> → <code>S</code></li>
</ol>
</li>
</ul>
<h4 id="4-删除-SUID"><a href="#4-删除-SUID" class="headerlink" title="4 删除 SUID"></a>4 删除 SUID</h4><ol>
<li><code>chmod u-s FILE</code></li>
<li><code>chmod xxx FILE</code>（去掉 4 即可）</li>
</ol>
<h3 id="2-SGID（set-gid）（2）"><a href="#2-SGID（set-gid）（2）" class="headerlink" title="2 SGID（set gid）（2）"></a>2 SGID（set gid）（2）</h3><h4 id="1-概述-4"><a href="#1-概述-4" class="headerlink" title="1 概述"></a>1 概述</h4><ul>
<li>文件<ol>
<li>可执行二进制文件</li>
<li>SGID 权限只有在该命令文件执行过程中有效</li>
<li>执行者必须对文件有可执行权限</li>
<li>命令文件执行时，执行者可以拥有文件属组的权限</li>
<li><strong>总结</strong>：SGID 即将文件属组的权限分配给所有可执行此文件的人</li>
</ol>
</li>
<li>目录<ol>
<li>普通用户在此目录中的有效组会变成此目录的属组</li>
<li>在此目录中新建文件或目录的属组为该目录的属组</li>
</ol>
</li>
</ul>
<h4 id="2-例-1"><a href="#2-例-1" class="headerlink" title="2 例"></a>2 例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-rwx--s--x 1 root slocate	/usr/bin/locate</span><br><span class="line">-rw-r----- 1 root slocate	/var/lib/mlocate/mlocate.db</span><br></pre></td></tr></table></figure>
<ol>
<li>执行 <code>locate</code> 命令需要读取 <code>/var/lib/mlocate/mlocate.db</code> 文件，而普通用户是没有读取此文件的权限的</li>
<li>普通用户执行 <code>locate</code> 命令能成功的原因<ol>
<li>普通用户对 <code>locate</code> 命令有执行权限</li>
<li><code>locate</code> 命令有 SGID 权限，所以在执行时普通用户拥有了 <code>locate</code> 属组 slocate 的权限，而 slocate 对 <code>mlocate.db</code> 文件是可读的</li>
</ol>
</li>
</ol>
<h4 id="3-添加-SGID"><a href="#3-添加-SGID" class="headerlink" title="3 添加 SGID"></a>3 添加 SGID</h4><ol>
<li><code>chmod g+s FILE</code></li>
<li><code>chmod 2xxx FILE</code></li>
</ol>
<ul>
<li>设置SGID之后，属组权限的显示<ol>
<li>属组有 <code>x</code> 权限，则 <code>x</code> → <code>s</code></li>
<li>属组无 <code>x</code> 权限，则 <code>-</code> → <code>S</code></li>
</ol>
</li>
</ul>
<h4 id="4-删除-SGID"><a href="#4-删除-SGID" class="headerlink" title="4 删除 SGID"></a>4 删除 SGID</h4><ol>
<li><code>chmod g-s FILE</code></li>
<li><code>chmod xxx FILE</code></li>
</ol>
<h3 id="3-SBIT（sticky-bit）（1）"><a href="#3-SBIT（sticky-bit）（1）" class="headerlink" title="3 SBIT（sticky bit）（1）"></a>3 SBIT（sticky bit）（1）</h3><h4 id="1-概述-5"><a href="#1-概述-5" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>粘滞位权限只对目录有效</li>
<li>如果一个用户对目录有 <code>wx</code> 权限，则意味着此用户可以删除目录下的所有文件（包含其它用户创建的文件）</li>
<li>若一个目录设置了 SBIT 权限，则在此目录下的文件只有 root 和 属主才可以删除或移动。</li>
</ol>
<h4 id="2-例-2"><a href="#2-例-2" class="headerlink" title="2 例"></a>2 例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drwxrwxrwt. 19 root root	/tmp</span><br></pre></td></tr></table></figure>
<ol>
<li>所有用户对 <code>/tmp</code> 目录都拥有完整权限，但普通用户却不能在 <code>/tmp</code> 下随意操作不属于自己的文件，是因为<code>/tmp</code> 设置了 SBIT 权限</li>
</ol>
<h4 id="3-添加-SBIT"><a href="#3-添加-SBIT" class="headerlink" title="3 添加 SBIT"></a>3 添加 SBIT</h4><ol>
<li><code>chmod o+t DIR</code></li>
<li><code>chmod 1xxx DIR</code></li>
</ol>
<ul>
<li>设置SBIT后，其它人权限的显示<ol>
<li>其它人有 <code>x</code> 权限，则 <code>x</code> → <code>t</code></li>
<li>其它人无 <code>x</code> 权限，则 <code>x</code> → <code>T</code></li>
</ol>
</li>
</ul>
<h4 id="4-删除-SBID"><a href="#4-删除-SBID" class="headerlink" title="4 删除 SBID"></a>4 删除 SBID</h4><ol>
<li><code>chmod o-t DIR</code></li>
<li><code>chmod xxx DIR</code></li>
</ol>
<h2 id="5-3-权限管理命令"><a href="#5-3-权限管理命令" class="headerlink" title="5.3 权限管理命令"></a>5.3 权限管理命令</h2><h3 id="1-chmod（change-file-mode-bits）"><a href="#1-chmod（change-file-mode-bits）" class="headerlink" title="1 chmod（change file mode bits）"></a>1 chmod（change file mode bits）</h3><ul>
<li><code>chmod [OPTION] mode file</code><ul>
<li>修改文件权限（只有 root 和属主能改变文件的权限）</li>
<li><code>OPTION</code><ul>
<li><code>-R</code><ul>
<li>递归设置</li>
</ul>
</li>
</ul>
</li>
<li><code>mode</code><ol>
<li><code>{ugoa} {+-=} {rwx}</code><ul>
<li><code>u=属主 g=属组 o=其它人 a=ugo</code></li>
</ul>
</li>
<li>八进制数字组合<ul>
<li>如 <code>755 ,644 ...</code></li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="2-chown（change-file-owner-and-group）"><a href="#2-chown（change-file-owner-and-group）" class="headerlink" title="2 chown（change file owner and group）"></a>2 chown（change file owner and group）</h3><ul>
<li><code>chown [option] [OWNER][:[GROUP]] file</code><ul>
<li>修改文件的属主和属组<ol>
<li>只有 root 可以修改文件的属主</li>
<li>属主（非root）只能修改文件的属组，且修改后的属组必须还是属主所在组</li>
</ol>
</li>
<li><code>option</code><ul>
<li><code>-R</code><ul>
<li>递归修改</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-4-最大有效权限-mask"><a href="#5-4-最大有效权限-mask" class="headerlink" title="5.4 最大有效权限 mask"></a>5.4 最大有效权限 mask</h2><ol>
<li>mask 的默认权限是 <code>rwx</code>，通常不会修改</li>
<li>文件上的除了属主外的权限（属组/其它人/ACL）都需要和 mask 权限作“与”运算，才能得到真正的权限<ul>
<li>如设置的非属主权限是 <code>r-x</code>，则 <code>r-x &amp; rwx = r-x</code> </li>
</ul>
</li>
</ol>
<h2 id="5-5-ACL（Access-Control-List）"><a href="#5-5-ACL（Access-Control-List）" class="headerlink" title="5.5 ACL（Access Control List）"></a>5.5 ACL（Access Control List）</h2><h3 id="1-概述-6"><a href="#1-概述-6" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>访问控制列表</li>
<li>在普通权限中，用户对文件只有三种身份，属主、属组和其他人，但实际中只有这三个身份不太够用。</li>
<li>当用户对文件的权限与属主、属组和其它人这三种身份的权限都不相同时，就需要单独为用户分配权限，这就是 ACL 权限</li>
<li>文件权限信息最后的 <code>.</code> 就代表 ACL 权限<ul>
<li><code>.</code><ul>
<li>无 ACL 权限</li>
</ul>
</li>
<li><code>+</code><ul>
<li>有 ACL 权限</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="2-ACL-权限管理"><a href="#2-ACL-权限管理" class="headerlink" title="2 ACL 权限管理"></a>2 ACL 权限管理</h3><h4 id="1-setfacl（set-file-access-control-lists）"><a href="#1-setfacl（set-file-access-control-lists）" class="headerlink" title="1 setfacl（set file access control lists）"></a>1 setfacl（set file access control lists）</h4><ul>
<li><code>setfacl [OPTION] FILE</code><ul>
<li><code>OPTION</code><ul>
<li><code>-m, --modify</code><ul>
<li>设置 acl 权限</li>
</ul>
</li>
<li><code>-d, --default</code><ul>
<li>设置默认 acl 权限</li>
<li>只对目录生效，目录中新建立的文件都拥有此默认权限</li>
</ul>
</li>
<li><code>-k, --remove-default</code><ul>
<li>删除默认 acl 权限</li>
</ul>
</li>
<li><code>-x, --remove</code><ul>
<li>删除指定 acl 权限</li>
</ul>
</li>
<li><code>-b, --remove-all</code><ul>
<li>删除所有 acl 权限</li>
</ul>
</li>
<li><code>-R, --recursive</code><ul>
<li>递归设置 acl 权限</li>
<li>设定的 acl 权限会对目录下的所有子文件生效（新建文件不生效）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-查看-ACL-权限"><a href="#2-查看-ACL-权限" class="headerlink" title="2 查看 ACL 权限"></a>2 查看 ACL 权限</h4><ul>
<li><code>getfacl  FILE</code></li>
</ul>
<h4 id="3-增加-ACL-权限"><a href="#3-增加-ACL-权限" class="headerlink" title="3 增加 ACL 权限"></a>3 增加 ACL 权限</h4><ol>
<li><code>setfacl -m m:权限 FILE</code><ul>
<li>设置最大有效权限 mask</li>
</ul>
</li>
<li><code>setfacl -m u:用户名:权限 FILE</code><ul>
<li>为某个用户设置acl权限</li>
</ul>
</li>
<li><code>setfacl -m g:组名:权限 FILE</code><ul>
<li>为某个组设置acl权限</li>
</ul>
</li>
<li><code>setfacl -m d:u:用户名:权限 DIR</code><ul>
<li>对目录设置默认acl权限</li>
</ul>
</li>
<li><code>setfacl -m u:用户名:权限 DIR</code><ul>
<li>对目录递归设置acl权限</li>
</ul>
</li>
</ol>
<h4 id="4-删除-ACL-权限"><a href="#4-删除-ACL-权限" class="headerlink" title="4 删除 ACL 权限"></a>4 删除 ACL 权限</h4><ol>
<li><code>setfacl -x u:用户名 FILE</code><ul>
<li>删除用户的acl权限</li>
</ul>
</li>
<li><code>setfacl -x g:组名 FILE</code><ul>
<li>删除组的acl权限</li>
</ul>
</li>
<li><code>setfacl -b FILE</code><ul>
<li>删除文件所有的acl权限</li>
</ul>
</li>
<li><code>seffacl -k DIR</code><ul>
<li>删除目录默认的acl权限</li>
</ul>
</li>
</ol>
<h2 id="5-6-文件扩展属性（隐藏属性）"><a href="#5-6-文件扩展属性（隐藏属性）" class="headerlink" title="5.6 文件扩展属性（隐藏属性）"></a>5.6 文件扩展属性（隐藏属性）</h2><h3 id="1-chattr（change-file-attributes-on-a-Linux-file-system）"><a href="#1-chattr（change-file-attributes-on-a-Linux-file-system）" class="headerlink" title="1 chattr（change file attributes on a Linux file system）"></a>1 chattr（change file attributes on a Linux file system）</h3><ul>
<li><code>chattr {+-=} [属性] FILE</code><ul>
<li>修改文件或目录的隐藏属性（仅 root 可用）</li>
<li><code>+</code><ul>
<li>增加属性</li>
</ul>
</li>
<li><code>-</code><ul>
<li>删除属性</li>
</ul>
</li>
<li><code>=</code><ul>
<li>设置属性</li>
</ul>
</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>文件</th>
<th>目录</th>
</tr>
</thead>
<tbody><tr>
<td><code>i（immutable）</code></td>
<td>不允许任何修改</td>
<td>可以修改目录下文件数据，不能新建和删除文件</td>
</tr>
<tr>
<td><code>a（append only）</code></td>
<td>可以给文件添加数据，不能修改和删除数据</td>
<td>可以修改目录下文件数据以及新建文件，不能删除文件</td>
</tr>
</tbody></table>
<h3 id="2-lsattr（list-file-attributes-on-a-Linux-second-extended-file-system）"><a href="#2-lsattr（list-file-attributes-on-a-Linux-second-extended-file-system）" class="headerlink" title="2 lsattr（list file attributes on a Linux second extended file system）"></a>2 lsattr（list file attributes on a Linux second extended file system）</h3><ul>
<li><code>lsattr [OPTION] [FILE]</code><ul>
<li>查看文件或目录的隐藏属性</li>
<li><code>OPTION</code><ul>
<li><code>-a</code><ul>
<li>若没有指定文件，则显示所有文件和目录</li>
</ul>
</li>
<li><code>-d</code><ul>
<li>若目标是目录，仅列出目录本身隐藏属性</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/29/Linux-%E7%A3%81%E7%9B%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/29/Linux-%E7%A3%81%E7%9B%98/" class="post-title-link" itemprop="url">Linux 磁盘</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-29 11:03:51 / 修改时间：11:07:24" itemprop="dateCreated datePublished" datetime="2020-03-29T11:03:51+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-磁盘接口分类"><a href="#一-磁盘接口分类" class="headerlink" title="一 磁盘接口分类"></a>一 磁盘接口分类</h1><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
<th>使用</th>
</tr>
</thead>
<tbody><tr>
<td><code>SAS</code></td>
<td><code>Serial Attached SCSI</code></td>
<td>服务器</td>
</tr>
<tr>
<td><code>SATA</code></td>
<td><code>Serial ATA</code></td>
<td>个人电脑</td>
</tr>
<tr>
<td><code>SSD</code></td>
<td><code>Solid State Disk</code></td>
<td>服务器，个人电脑</td>
</tr>
<tr>
<td><code>SCSI</code></td>
<td><code>Small Computer System Interface</code></td>
<td><code>@declared</code></td>
</tr>
<tr>
<td><code>IDE</code></td>
<td><code>Integrated Drive Electronics</code></td>
<td><code>@declared</code></td>
</tr>
</tbody></table>
<h1 id="二-磁盘物理结构"><a href="#二-磁盘物理结构" class="headerlink" title="二 磁盘物理结构"></a>二 磁盘物理结构</h1><h2 id="2-1-外部结构"><a href="#2-1-外部结构" class="headerlink" title="2.1 外部结构"></a>2.1 外部结构</h2><ol>
<li>磁盘主轴<ul>
<li>决定磁盘转速（rpm-round per minute）</li>
</ul>
</li>
<li>磁盘盘片<ul>
<li>用于存储数据</li>
</ul>
</li>
<li>磁盘磁头（Head）<ul>
<li>用于读取数据</li>
<li>每个盘面都有一个磁头</li>
<li><code>磁头数 = 盘面数 = 盘片 * 2</code></li>
</ul>
</li>
<li>磁盘接口<ul>
<li>用于连接主板，用于连接阵列卡</li>
</ul>
</li>
</ol>
<h2 id="2-2-内部结构"><a href="#2-2-内部结构" class="headerlink" title="2.2 内部结构"></a>2.2 内部结构</h2><ol>
<li>磁道（Track）<ol>
<li>盘面中一圈圈的同心圆称为磁道</li>
<li>每个盘面都被划分为数目相等的磁道，由外向内从 <code>0</code> 开始编号</li>
</ol>
</li>
<li>柱面（Cylinder）<ol>
<li>不同盘面上编号相同的磁道形成一个圆柱就叫做柱面</li>
<li>磁头在每个盘面上的都是一起移动的，所在磁道编号都相同，所以数据的读写以及磁盘分区都是按柱面进行的</li>
<li><code>柱面数 = 任意一个盘面的磁道数</code></li>
</ol>
</li>
<li>单元块（Units）<ol>
<li>单个柱面的大小</li>
</ol>
</li>
<li>扇区（Sector）<ol>
<li>磁道被直径划分为若干个弧段，每个弧段称为一个扇区，从1开始编号</li>
<li>扇区是磁盘存储的最小单位，通常是512字节</li>
</ol>
</li>
<li>簇（Clust）/ 块（Block）<ol>
<li>操作系统读取磁盘时，一个扇区一个扇区的读，效率太低，会一次性读取多个扇区，多个扇区就叫簇（windows）/ 块（linux）</li>
<li>簇 / 块 是文件系统存储的最小单位</li>
</ol>
</li>
</ol>
<h2 id="2-3-磁盘容量"><a href="#2-3-磁盘容量" class="headerlink" title="2.3 磁盘容量"></a>2.3 磁盘容量</h2><ul>
<li><code>磁盘容量 = 磁头数(盘面数) × 每面磁道数(柱面数) × 每道扇区数 × 每扇区字节数(512byte)</code></li>
</ul>
<h1 id="三-RAID（Redundant-Array-of-Independent-Disks）"><a href="#三-RAID（Redundant-Array-of-Independent-Disks）" class="headerlink" title="三 RAID（Redundant Array of Independent Disks）"></a>三 RAID（Redundant Array of Independent Disks）</h1><h2 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h2><ol>
<li>独立冗余磁盘阵列</li>
<li>把好几块硬盘通过一定组合方式把它组合起来，成为一个新的硬盘阵列组，从而使它能够达到高性能硬盘的要求</li>
</ol>
<h2 id="3-2-作用"><a href="#3-2-作用" class="headerlink" title="3.2 作用"></a>3.2 作用</h2><ol>
<li>提高磁盘存储效率<ul>
<li>提高I/O速度，提供了数据并发性</li>
</ul>
</li>
<li>提高磁盘存储安全<ul>
<li>数据冗余（备份），数据校验</li>
</ul>
</li>
<li>提高磁盘存储容量<ul>
<li>扩充容量</li>
</ul>
</li>
</ol>
<h2 id="3-3-RAID-级别（整合方式）"><a href="#3-3-RAID-级别（整合方式）" class="headerlink" title="3.3 RAID 级别（整合方式）"></a>3.3 RAID 级别（整合方式）</h2><ol>
<li><code>raid 0</code><ol>
<li>多块盘整合在一起，全部用作存储</li>
<li>可用容量为所有盘容量之和，性能高</li>
<li>没有冗余，有一块盘坏则整个raid 0 就坏，数据会丢失</li>
</ol>
</li>
<li><code>raid 1</code><ol>
<li>两块盘整合在一起，一个盘存储，一个盘备份</li>
<li>可用容量为一个盘，性能底</li>
<li>冗余100%，一块盘坏了数据也不会丢失</li>
</ol>
</li>
<li><code>raid 5</code><ol>
<li>至少有三个盘，一次只有两块盘存储，另一个盘作奇偶校验</li>
<li>容量为两个盘的容量，性能高</li>
<li>如果只有一块盘坏了，可以根据另外两块盘推算出这块盘的数据</li>
</ol>
</li>
<li><code>raid 10</code><ol>
<li>两个盘形成一个raid 1，然后两个raid 1形成一个raid 0</li>
</ol>
</li>
</ol>
<h3 id="RAID-各级别比较"><a href="#RAID-各级别比较" class="headerlink" title="RAID 各级别比较"></a>RAID 各级别比较</h3><ol>
<li>冗余<ul>
<li><code>RAID 1 &gt; RAID 10 &gt; RAID 5 &gt; RAID 0</code></li>
</ul>
</li>
<li>性能<ul>
<li><code>RAID 0 &gt; RAID 10 &gt; RAID 5 &gt; RAID 1</code></li>
</ul>
</li>
<li>成本<ul>
<li><code>RAID 10 &gt; RAID 1 &gt; RAID 5 &gt; RAID 0</code></li>
</ul>
</li>
</ol>
<h1 id="四-LVM（Logical-Volume-Manager）"><a href="#四-LVM（Logical-Volume-Manager）" class="headerlink" title="四 LVM（Logical Volume Manager）"></a>四 LVM（Logical Volume Manager）</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><ol>
<li>逻辑卷管理器</li>
<li>实现分区的弹性扩容或缩容，逻辑卷通过命令可以从卷组中获取容量或者将容量返回给卷组</li>
</ol>
<h2 id="4-2-概念"><a href="#4-2-概念" class="headerlink" title="4.2 概念"></a>4.2 概念</h2><ol>
<li>物理卷 PV（Physical Volume）<ul>
<li>物理卷是 LVM 的基本存储逻辑块，可以是分区、磁盘或Raid</li>
<li>PE（physical extents）<ul>
<li>物理卷中可以分配的最小存储单元，PE的大小是可以指定的，默认为4MB</li>
</ul>
</li>
</ul>
</li>
<li>卷组 VG（Volume Group）<ul>
<li>一个卷组由一个或多个物理卷组成</li>
</ul>
</li>
<li>逻辑卷 LV（Logical Volume）<ul>
<li>逻辑卷建立在卷组之上，逻辑卷上可以建立文件系统，类似与其它硬盘的分区概念</li>
<li>LE（logical extent）<ul>
<li>逻辑卷中可以分配的最小存储单元，在同一个卷组中，LE的大小和PE是相同的，并且一一对应</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="五-磁盘分区"><a href="#五-磁盘分区" class="headerlink" title="五 磁盘分区"></a>五 磁盘分区</h1><h2 id="5-1-系统启动引导记录"><a href="#5-1-系统启动引导记录" class="headerlink" title="5.1 系统启动引导记录"></a>5.1 系统启动引导记录</h2><h3 id="1-MBR（Master-Boot-Record）"><a href="#1-MBR（Master-Boot-Record）" class="headerlink" title="1 MBR（Master Boot Record）"></a>1 MBR（Master Boot Record）</h3><ol>
<li>用于引导磁盘空间小于2T</li>
<li>磁盘的 0 磁头、0 磁道、1 扇区 （512 bytes）<ol>
<li>主引导程序（BootLoader）（446 bytes）</li>
<li>磁盘分区表DPT（Disk Partition table）（64 bytes）<ul>
<li>1 个分区占16 bytes，所以最多有 4 个分区</li>
</ul>
</li>
<li>分区有效(结束)标志（magic number）（2 bytes <code>55AA</code>）</li>
</ol>
</li>
</ol>
<h3 id="2-GPT"><a href="#2-GPT" class="headerlink" title="2 GPT"></a>2 GPT</h3><ul>
<li>用于引导磁盘空间大于2T</li>
</ul>
<h2 id="5-2-分区概述"><a href="#5-2-分区概述" class="headerlink" title="5.2 分区概述"></a>5.2 分区概述</h2><h3 id="1-Linux-磁盘和分区的命名规则"><a href="#1-Linux-磁盘和分区的命名规则" class="headerlink" title="1 Linux 磁盘和分区的命名规则"></a>1 Linux 磁盘和分区的命名规则</h3><table>
<thead>
<tr>
<th>磁盘种类</th>
<th>磁盘命名</th>
<th>分区命名</th>
</tr>
</thead>
<tbody><tr>
<td><code>SAS SATA SCSI</code></td>
<td>第一块：<code>sda</code><br>第二块：<code>sdb</code><br>…</td>
<td><code>sda1 sda2 ...</code><br><code>sdb1 sdb2 ...</code></td>
</tr>
<tr>
<td><code>IDE</code></td>
<td>第一块：<code>hda</code><br>第二块：<code>hdb</code><br>…</td>
<td><code>hda1 hda2 ...</code><br><code>hdb1 hdb2 ...</code></td>
</tr>
</tbody></table>
<h3 id="2-分区说明"><a href="#2-分区说明" class="headerlink" title="2 分区说明"></a>2 分区说明</h3><table>
<thead>
<tr>
<th>分区</th>
<th>编号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>主分区（Primary）</code></td>
<td><code>1 ~ 4</code></td>
<td>至少有 1 个，至多有 4 个</td>
</tr>
<tr>
<td><code>扩展分区（Extend）</code></td>
<td><code>1 ~ 4</code></td>
<td>至多有 1 个</td>
</tr>
<tr>
<td><code>逻辑分区（Logical）</code></td>
<td><code>5+</code></td>
<td>由扩展分区划分成一个个逻辑分区</td>
</tr>
<tr>
<td>1. 真正存放数据的是主分区和逻辑分区，大量数据都放在逻辑分区中</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2. 扩展分区可以理解为一个概念，用来划分逻辑分区用的，可以使用 <code>1 ~ 4</code> 任意一个编号</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="3-分区方式"><a href="#3-分区方式" class="headerlink" title="3 分区方式"></a>3 分区方式</h3><ol>
<li><code>1~4 个 主分区</code><ul>
<li>磁盘：<code>sda</code></li>
<li>主分区：<code>sda1 sda2 sda3 sda4</code>（数量任意）</li>
</ul>
</li>
<li><code>1~3 个 主分区 + 1 个扩展分区（分成 n 个逻辑分区）</code><ul>
<li>磁盘：<code>sda</code></li>
<li>主分区：<code>sda1 sda2 sda3</code>（数量任意）</li>
<li>扩展分区：<code>sda4</code>（编号 1 ~ 4 任意，不与主分区重复即可）</li>
<li>逻辑分区：<code>sda5 sda6 ...</code></li>
</ul>
</li>
</ol>
<h3 id="4-分区方案"><a href="#4-分区方案" class="headerlink" title="4 分区方案"></a>4 分区方案</h3><h4 id="1-普通分区方式"><a href="#1-普通分区方式" class="headerlink" title="1 普通分区方式"></a>1 普通分区方式</h4><ul>
<li><code>/boot</code><ul>
<li>引导分区，256Mb</li>
</ul>
</li>
<li><code>swap</code><ul>
<li>交换分区，把内存中暂时不用的数据临时存放到硬盘中，以腾出物理内存空间供给更活跃的程序服务来使用，目的是为了解决真实物理内存不足 </li>
<li>内存 &gt; 8G，swap = 8G，内存 &lt; 8G，swap = 内存 * 1.5</li>
</ul>
</li>
<li><code>/</code><ul>
<li>根分区，剩余大小</li>
</ul>
</li>
</ul>
<h4 id="2-存储服务器分区方式"><a href="#2-存储服务器分区方式" class="headerlink" title="2 存储服务器分区方式"></a>2 存储服务器分区方式</h4><ul>
<li><code>/boot</code></li>
<li><code>swap</code></li>
<li><code>/</code><ul>
<li>20G~200G</li>
</ul>
</li>
<li><code>/data</code><ul>
<li>剩余大小，<code>data</code> 名称可自定义</li>
</ul>
</li>
</ul>
<h4 id="3-灵活分区方式"><a href="#3-灵活分区方式" class="headerlink" title="3 灵活分区方式"></a>3 灵活分区方式</h4><ul>
<li><code>/boot</code></li>
<li><code>swap</code></li>
<li><code>/</code><ul>
<li>20G~200G</li>
<li>剩余保留，以后哪个部门使用，就分出相应的分区。</li>
</ul>
</li>
</ul>
<h2 id="5-3-分区操作"><a href="#5-3-分区操作" class="headerlink" title="5.3 分区操作"></a>5.3 分区操作</h2><h3 id="1-fdisk（manipulate-disk-partition-table）"><a href="#1-fdisk（manipulate-disk-partition-table）" class="headerlink" title="1 fdisk（manipulate disk partition table）"></a>1 fdisk（manipulate disk partition table）</h3><ol>
<li><code>fdisk -l [device]</code><ul>
<li>查看磁盘及其分区表信息</li>
</ul>
</li>
<li><code>fdisk device</code><ul>
<li>分区（交互式操作），有默认值时直接回车代表使用默认值</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>交互命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>n</code></td>
<td>创建分区</td>
</tr>
<tr>
<td><code>d</code></td>
<td>删除分区</td>
</tr>
<tr>
<td><code>p</code></td>
<td>显示分区表</td>
</tr>
<tr>
<td><code>q</code></td>
<td>不保存退出</td>
</tr>
<tr>
<td><code>w</code></td>
<td>将分区信息写入分区表，即保存退出</td>
</tr>
<tr>
<td><code>l</code></td>
<td>显示分区类型与分区类型id对照表，如 <code>83:linux，8e:linux LVM</code></td>
</tr>
<tr>
<td><code>t</code></td>
<td>改变分区类型</td>
</tr>
<tr>
<td><code>u</code></td>
<td>改变分区的方式（是否按照扇区进行划分）</td>
</tr>
<tr>
<td><code>g</code></td>
<td>创建一个新的空的 GPT 分区表</td>
</tr>
</tbody></table>
<h3 id="2-parted"><a href="#2-parted" class="headerlink" title="2 parted"></a>2 parted</h3><ul>
<li><code>parted device</code><ul>
<li>用来划分容量大于2T的磁盘（交互式操作）</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>交互命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>mklabel</code></td>
<td>创建一个分区表（默认为MBR）</td>
</tr>
<tr>
<td><code>mklabel gpt</code></td>
<td>修改分区表为GPT</td>
</tr>
<tr>
<td><code>print</code></td>
<td>显示分区表</td>
</tr>
<tr>
<td><code>mkpart PART-TYPE [FS-TYPE] START END</code></td>
<td>创建分区（立即生效）</td>
</tr>
<tr>
<td><code>rm NUMBER</code></td>
<td>根据编号删除分区</td>
</tr>
<tr>
<td><code>quit</code></td>
<td>退出</td>
</tr>
</tbody></table>
<h3 id="3-partprobe"><a href="#3-partprobe" class="headerlink" title="3 partprobe"></a>3 partprobe</h3><ul>
<li><code>partprobe [device]</code><ul>
<li>重新读取分区表信息</li>
<li>分区完成之后，要执行此命令让系统识别分区文件</li>
</ul>
</li>
</ul>
<h1 id="六-格式化"><a href="#六-格式化" class="headerlink" title="六 格式化"></a>六 格式化</h1><h2 id="6-1-概述"><a href="#6-1-概述" class="headerlink" title="6.1 概述"></a>6.1 概述</h2><ol>
<li>格式化用来创建文件系统</li>
<li>文件系统<ol>
<li><code>xfs</code><ul>
<li>CentOS 7</li>
</ul>
</li>
<li><code>ext3/4</code><ul>
<li>CentOS 6</li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 id="6-2-格式化操作"><a href="#6-2-格式化操作" class="headerlink" title="6.2 格式化操作"></a>6.2 格式化操作</h2><h3 id="mkfs（make-file-system）"><a href="#mkfs（make-file-system）" class="headerlink" title="mkfs（make file system）"></a>mkfs（make file system）</h3><ol>
<li><code>mkfs -t type device</code><ul>
<li><code>type</code><ul>
<li>文件系统类型，如 <code>xfs ext4 ...</code></li>
</ul>
</li>
</ul>
</li>
<li><code>mkfs.type device</code></li>
</ol>
<h1 id="七-挂载"><a href="#七-挂载" class="headerlink" title="七 挂载"></a>七 挂载</h1><h2 id="7-1-概述"><a href="#7-1-概述" class="headerlink" title="7.1 概述"></a>7.1 概述</h2><ol>
<li>Linux中的存储设备（磁盘、光盘…）是不能直接访问的，需要将一个目录与一个存储设备相关联，通过关联目录访问存储设备中的数据。<ol>
<li>将目录与存储设备关联的动作叫做 <strong>挂载</strong></li>
<li>与存储设备关联的目录叫做 <strong>挂载点</strong>。</li>
</ol>
</li>
<li>装完Linux系统后，能直接访问磁盘，是因为系统根据我们对磁盘的分区信息及顺序与指定目录进行了挂载，如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">分区		 挂载点</span><br><span class="line">/dev/sda1	/boot</span><br><span class="line">/dev/sda2	swap</span><br><span class="line">/dev/sda3	/</span><br></pre></td></tr></table></figure></li>
<li>磁盘的使用<ul>
<li>分区（可选）→  格式化 → 挂载</li>
</ul>
</li>
</ol>
<h2 id="7-2-挂载操作"><a href="#7-2-挂载操作" class="headerlink" title="7.2 挂载操作"></a>7.2 挂载操作</h2><h3 id="1-查"><a href="#1-查" class="headerlink" title="1 查"></a>1 查</h3><ul>
<li><code>mount [-l]</code><ul>
<li>显示系统中已经挂载的设备，</li>
<li><code>-l</code><ul>
<li>会显示卷标名称</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-挂载"><a href="#2-挂载" class="headerlink" title="2 挂载"></a>2 挂载</h3><ul>
<li><code>mount [-t 文件系统] [-L 卷标名] [-o 挂载参数] 设备文件名 挂载点</code><ul>
<li>临时挂载设备，重启失效</li>
</ul>
</li>
</ul>
<h3 id="3-卸载挂载"><a href="#3-卸载挂载" class="headerlink" title="3 卸载挂载"></a>3 卸载挂载</h3><ul>
<li><code>umount 挂载点|设备文件</code></li>
</ul>
<h3 id="4-开机自动挂载"><a href="#4-开机自动挂载" class="headerlink" title="4 开机自动挂载"></a>4 开机自动挂载</h3><h4 id="1-使用开机自启动配置文件"><a href="#1-使用开机自启动配置文件" class="headerlink" title="1 使用开机自启动配置文件"></a>1 使用开机自启动配置文件</h4><ul>
<li><code>/etc/rc.local -&gt; /etc/rc.d/rc.local</code><ul>
<li>在此系统开机自启动配置文件，配置挂载命令，即可实现开机自动挂载</li>
<li>注意要给 <code>/etc/rc.d/rc.local</code> 赋予执行权限</li>
</ul>
</li>
</ul>
<h4 id="2-使用挂载配置文件"><a href="#2-使用挂载配置文件" class="headerlink" title="2 使用挂载配置文件"></a>2 使用挂载配置文件</h4><ul>
<li><code>/etc/fstab</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UUID=13ba788b-e881-484b-865f-2adc27ded83c    /        xfs     defaults    0    0</span><br><span class="line">UUID=a347b25e-b9a2-4dee-bd26-7d4214c4959b    /boot    xfs     defaults    0    0</span><br><span class="line">UUID=fbb8a2df-84b3-441f-a511-0760f45c9584    swap     swap    defaults    0    0</span><br><span class="line">设备/设备UUID 挂载点 文件系统类型 挂载参数 是否备份 是否自检</span><br></pre></td></tr></table></figure></li>
</ul>
<ol>
<li><code>blkid</code><ul>
<li>查看设备的名称、文件系统类型、UUID、LABEL等信息</li>
</ul>
</li>
<li><code>mount -a</code><ul>
<li>检查 <code>/etc/fstab</code> 文件中挂载的设备文件有无疏漏，若有，则进行挂载</li>
</ul>
</li>
</ol>
<h3 id="5-不同设备的挂载"><a href="#5-不同设备的挂载" class="headerlink" title="5 不同设备的挂载"></a>5 不同设备的挂载</h3><ol>
<li>挂载硬盘分区<ul>
<li><code>mount [-t xfs] /dev/分区名 挂载点</code></li>
</ul>
</li>
<li>挂载U盘<ul>
<li><code>mount [-t vfat] /dev/设备号 挂载点</code><ul>
<li>U盘和硬盘一样，设备号不固定，先使用 <code>fdisk -l</code> 查询设备号</li>
</ul>
</li>
</ul>
</li>
<li>挂载光盘<ul>
<li><code>mount [-t iso9660] {/dev/sr0 | /dev/cdrom} 挂载点</code><ul>
<li><code>/dev/cdrom</code> 是 <code>/dev/sr0</code> 的软连接</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="八-问题"><a href="#八-问题" class="headerlink" title="八 问题"></a>八 问题</h1><h2 id="8-1-磁盘空间不足（no-space-left-on-device）"><a href="#8-1-磁盘空间不足（no-space-left-on-device）" class="headerlink" title="8.1 磁盘空间不足（no space left on device）"></a>8.1 磁盘空间不足（no space left on device）</h2><ol>
<li>block 存储空间不足<ul>
<li>原因：存储数据过多</li>
<li>解决：删除没用数据</li>
</ul>
</li>
<li>inode 数量不足<ul>
<li>原因：大量小文件占用 inode</li>
<li>解决：删除大量的没用小文件</li>
</ul>
</li>
</ol>
<h2 id="8-2-调整-swap-分区大小"><a href="#8-2-调整-swap-分区大小" class="headerlink" title="8.2 调整 swap 分区大小"></a>8.2 调整 swap 分区大小</h2><ol>
<li>从磁盘分出一部分空间（创建一个空文件 <code>FILE</code>）<ul>
<li><code>dd if=/etc/zero of=DIR bs= count=</code></li>
</ul>
</li>
<li><code>mkswap FILE</code><ul>
<li>把文件作为 swap 空间使用</li>
</ul>
</li>
<li><code>swapon FILE</code><ul>
<li>激活扩展的 swap 空间</li>
</ul>
</li>
<li><code>swapoff FILE</code><ul>
<li>取消扩展的 swap 空间</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/29/Linux-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/29/Linux-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/" class="post-title-link" itemprop="url">Linux 用户管理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-29 11:03:41 / 修改时间：11:07:55" itemprop="dateCreated datePublished" datetime="2020-03-29T11:03:41+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-用户分类"><a href="#一-用户分类" class="headerlink" title="一 用户分类"></a>一 用户分类</h1><p>UID|用户|说明|例<br>-|-<br><code>0</code>|超级管理员|<code>root</code> 不一定是超级管理员，<code>uid=0</code> 的一定是超级管理员|<code>root</code><br><code>1~999</code>|系统用户（虚拟用户）|用于维持、管理某个服务正常运行，不能登录且没有家目录，不能删除|<code>nobody</code><br><code>1000+</code>|普通用户|管理指定数据，可以管理指定进程，可以登录|<code>自定义</code></p>
<h1 id="二-配置文件"><a href="#二-配置文件" class="headerlink" title="二 配置文件"></a>二 配置文件</h1><h2 id="2-1-用户信息"><a href="#2-1-用户信息" class="headerlink" title="2.1 用户信息"></a>2.1 用户信息</h2><ul>
<li><code>/etc/passwd</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root: x: 0: 0: root: /root: /bin/bash</span><br><span class="line">1 用户名:</span><br><span class="line">2 用户密码占位符（x表示有密码）:</span><br><span class="line">3 用户Uid:</span><br><span class="line">4 用户Gid:</span><br><span class="line">5 用户描述信息:</span><br><span class="line">6 用户家目录:</span><br><span class="line">7 用户登录后使用的shell:</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="2-2-用户密码信息，仅-root-可读"><a href="#2-2-用户密码信息，仅-root-可读" class="headerlink" title="2.2 用户密码信息，仅 root 可读"></a>2.2 用户密码信息，仅 root 可读</h2><ul>
<li><code>/etc/shadow</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root: $6$SlHDoVNtoeyDU/3w$y.ap.le40W39OROwHTk2xJnjDUbIcXX9GcAOOQA3k6yteiu9Xq9XyZzB8U/GbNzFSZ3LoC4q6Pazh806WZaKL0: : 0: 99999: 7: : :</span><br><span class="line">1 用户名：</span><br><span class="line">2 密码（加密）：</span><br><span class="line">3 密码最后修改时间：表示账号在1970-01-01之后的第 n 天修改的密码</span><br><span class="line">4 密码最小修改时间间隔：表示密码修改之后隔多久可以再次修改</span><br><span class="line">5 密码有效期：表示密码修改之后有效期限，超过期限会过期，必须重新修改</span><br><span class="line">6 密码过期前警告天数：默认为7，表示密码过期前7天会发送警告信息</span><br><span class="line">7 密码过期后宽限天数：</span><br><span class="line">8 账号失效时间：表示账号在1970-01-01之后的 n 天内有效，超过则失效</span><br><span class="line">9 保留字段：</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="2-3-用户组信息"><a href="#2-3-用户组信息" class="headerlink" title="2.3 用户组信息"></a>2.3 用户组信息</h2><ul>
<li><code>/etc/group</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root: x: 0:</span><br><span class="line">1 组名：</span><br><span class="line">2 组密码占位符（x表示有密码）：</span><br><span class="line">3 组id（Gid）：</span><br><span class="line">4 组附加用户：即如果组是用户的初始组，则不显示此用户，只显示组中其它用户</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="2-4-用户组密码信息"><a href="#2-4-用户组密码信息" class="headerlink" title="2.4 用户组密码信息"></a>2.4 用户组密码信息</h2><ul>
<li><code>/etc/gshadow</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root: : :</span><br><span class="line">1 组名：</span><br><span class="line">2 组密码：空表示没有组密码，`!` 表示没有组密码也没有组管理员</span><br><span class="line">3 组管理员：</span><br><span class="line">4 组附加用户：</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="2-5-用户模板目录"><a href="#2-5-用户模板目录" class="headerlink" title="2.5 用户模板目录"></a>2.5 用户模板目录</h2><ul>
<li><code>/etc/skel/</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 添加用户时，此目录中文件会自动存入用户家目录</span><br><span class="line">.bash_logout  # 退出登录时执行</span><br><span class="line">.bash_profile</span><br><span class="line">.bashrc</span><br><span class="line">.viminfo # vim文件模板</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="2-6-用户邮件目录"><a href="#2-6-用户邮件目录" class="headerlink" title="2.6 用户邮件目录"></a>2.6 用户邮件目录</h2><ul>
<li><code>/var/spool/mail/用户名/</code></li>
</ul>
<h2 id="2-7-新建用户配置文件"><a href="#2-7-新建用户配置文件" class="headerlink" title="2.7 新建用户配置文件"></a>2.7 新建用户配置文件</h2><ol>
<li><code>/etc/default/useradd</code><ul>
<li>创建用户时的默认值</li>
</ul>
</li>
<li><code>/etc/login.defs</code><ul>
<li>用于在创建用户时，对用户的一些基本属性做默认设置，例如指定用户 UID 和 GID 的范围，用户的过期时间，密码的最大长度，等等</li>
</ul>
</li>
</ol>
<h1 id="三-用户管理"><a href="#三-用户管理" class="headerlink" title="三 用户管理"></a>三 用户管理</h1><h2 id="3-1-查"><a href="#3-1-查" class="headerlink" title="3.1 查"></a>3.1 查</h2><h3 id="1-id（print-real-and-effective-user-and-group-IDs）"><a href="#1-id（print-real-and-effective-user-and-group-IDs）" class="headerlink" title="1 id（print real and effective user and group IDs）"></a>1 id（print real and effective user and group IDs）</h3><ul>
<li><code>id [OPTION] [USER]</code><ul>
<li>显示用户 <code>uid gid gids</code>，默认为显示当前用户</li>
<li><code>OPTION</code><ul>
<li><code>-u, --user</code><ul>
<li>显示用户 uid</li>
</ul>
</li>
<li><code>-g, --group</code><ul>
<li>显示用户 gid</li>
</ul>
</li>
<li><code>-G, --groups</code><ul>
<li>显示用户所有所在组的 gid</li>
</ul>
</li>
<li><code>-n, --name</code><ul>
<li>与 <code>u g G</code> 一起使用显示名称而不是id</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-w（Show-who-is-logged-on-and-what-they-are-doing）"><a href="#2-w（Show-who-is-logged-on-and-what-they-are-doing）" class="headerlink" title="2 w（Show who is logged on and what they are doing）"></a>2 w（Show who is logged on and what they are doing）</h3><ul>
<li><code>w</code><ul>
<li>显示登录用户信息及负载信息</li>
</ul>
</li>
</ul>
<h3 id="3-who（show-who-is-logged-on）"><a href="#3-who（show-who-is-logged-on）" class="headerlink" title="3 who（show who is logged on）"></a>3 who（show who is logged on）</h3><ul>
<li><code>who</code><ul>
<li>显示登录用户信息</li>
</ul>
</li>
</ul>
<h3 id="4-whoami"><a href="#4-whoami" class="headerlink" title="4 whoami"></a>4 whoami</h3><ul>
<li><code>whoami</code>    <ul>
<li>显示当前登录用户名</li>
</ul>
</li>
</ul>
<h3 id="5-last"><a href="#5-last" class="headerlink" title="5 last"></a>5 last</h3><ul>
<li><code>last</code><ul>
<li>查看系统的所有登录信息</li>
<li><code>last</code> 命令默认读取 <code>/var/log/wtmp</code> 日志，这是一个二进制文件</li>
</ul>
</li>
</ul>
<h3 id="6-lastlog"><a href="#6-lastlog" class="headerlink" title="6 lastlog"></a>6 lastlog</h3><ul>
<li><code>lastlog [-u UID]</code><ul>
<li>查看用户最后一次登录系统的信息</li>
<li><code>lastlog</code> 命令默认读取 <code>/var/log/lastlog</code> 日志，这是一个二进制文件</li>
</ul>
</li>
</ul>
<h2 id="3-2-增"><a href="#3-2-增" class="headerlink" title="3.2 增"></a>3.2 增</h2><h3 id="1-useradd（create-a-new-user-or-update-default-new-user-information）"><a href="#1-useradd（create-a-new-user-or-update-default-new-user-information）" class="headerlink" title="1 useradd（create a new user or update default new user information）"></a>1 useradd（create a new user or update default new user information）</h3><ul>
<li><code>useradd [OPTION] username</code><ul>
<li><code>OPTION</code><ul>
<li><code>-u, --uid UID</code><ul>
<li>指定Uid</li>
</ul>
</li>
<li><code>-g, --gid GROUP</code><ul>
<li>指定用户初始组（组必须存在），且不会创建默认同名组。</li>
<li>默认会创建一个与用户名相同的初始组。</li>
</ul>
</li>
<li><code>-G, --groups GROUP1[,GROUP2,...[,GROUPN]]]</code><ul>
<li>指定用户附加组</li>
</ul>
</li>
<li><code>-s, --shell SHELL</code><ul>
<li>指定SHELL，默认为 <code>/bin/bash</code></li>
</ul>
</li>
<li><code>-c, --comment COMMENT</code><ul>
<li>用户描述信息</li>
</ul>
</li>
<li><code>-d, --home-dir HOME_DIR</code><ul>
<li>指定用户家目录</li>
<li>默认的用户家目录为 <code>/home/username</code></li>
</ul>
</li>
<li><code>-M, --no-create-home</code><ul>
<li>不创建家目录</li>
</ul>
</li>
<li><code>-N, --no-user-group</code><ul>
<li>不创建与用户同名的初始组</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-passwd（update-user’s-authentication-tokens）"><a href="#2-passwd（update-user’s-authentication-tokens）" class="headerlink" title="2 passwd（update user’s authentication tokens）"></a>2 passwd（update user’s authentication tokens）</h3><ul>
<li><code>passwd [OPTION] [USER]</code><ul>
<li>修改用户密码（默认交互式）</li>
<li><code>OPTION</code><ul>
<li><code>-S</code><ul>
<li>查询用户密码状态（仅 root 可用）</li>
</ul>
</li>
<li><code>-l, --lock</code><ul>
<li>锁定用户。会在<code>/etc/shadow</code> 中指定用户的密码前添加 <code>!</code>，使密码失效（仅 root 可用）</li>
</ul>
</li>
<li><code>-u, --unlock</code><ul>
<li>解锁用户（仅 root 可用）</li>
</ul>
</li>
<li><code>--stdin</code><ul>
<li>接收标准输入（如管道）的数据作为密码（非交互式）</li>
<li><code>echo 密码 | passwd --stdin 用户</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-3-删"><a href="#3-3-删" class="headerlink" title="3.3 删"></a>3.3 删</h2><h3 id="1-userdel（delete-a-user-account-and-related-files）"><a href="#1-userdel（delete-a-user-account-and-related-files）" class="headerlink" title="1 userdel（delete a user account and related files）"></a>1 userdel（delete a user account and related files）</h3><ul>
<li><code>userdel [OPTION] USER</code><ul>
<li>删除用户<ol>
<li>实际就是从<code>/etc/passwd shadow group gshadow</code> 中删除用户信息</li>
<li>用户个人文件（家目录和邮件目录）默认会保留</li>
</ol>
</li>
<li><code>OPTION</code><ul>
<li><code>-r, --remove</code><ul>
<li>删除用户及个人文件</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-4-改"><a href="#3-4-改" class="headerlink" title="3.4 改"></a>3.4 改</h2><h3 id="1-usermod（modify-a-user-account）"><a href="#1-usermod（modify-a-user-account）" class="headerlink" title="1 usermod（modify a user account）"></a>1 usermod（modify a user account）</h3><ul>
<li><code>usermod [OPTION] [USER]</code><ul>
<li>修改用户信息</li>
<li><code>OPTION</code><ul>
<li><code>-u UID</code><ul>
<li>修改用户uid</li>
</ul>
</li>
<li><code>-g GROUP</code><ul>
<li>修改用户初始组</li>
</ul>
</li>
<li><code>-G GROUPS</code><ul>
<li>修改用户附加组</li>
</ul>
</li>
<li><code>-c COMMENT</code><ul>
<li>修改用户说明</li>
</ul>
</li>
<li><code>-s SHELL</code><ul>
<li>修改用户Shell</li>
</ul>
</li>
<li><code>-d HOME__DIR</code><ul>
<li>修改用户家目录</li>
</ul>
</li>
<li><code>-l USERNAME</code><ul>
<li>修改用户名，注意修改家目录名和邮箱名以保持同步</li>
</ul>
</li>
<li><code>-L</code><ul>
<li>临时锁定用户</li>
</ul>
</li>
<li><code>-U</code><ul>
<li>解锁用户</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-chage（change-user-password-expiry-information）"><a href="#2-chage（change-user-password-expiry-information）" class="headerlink" title="2 chage（change user password expiry information）"></a>2 chage（change user password expiry information）</h3><ul>
<li><code>chage [OPTION] [USER]</code><ul>
<li>修改用户密码信息</li>
<li><code>OPTION</code><ul>
<li><code>-l, --list</code><ul>
<li>列出用户的详细密码状态</li>
</ul>
</li>
<li><code>-d LAST_DAY</code><ul>
<li>修改密码最后更改日期</li>
<li><code>0</code><ul>
<li>用户一登陆就要修改密码</li>
</ul>
</li>
</ul>
</li>
<li><code>-m MIN_DAYS</code><ul>
<li>修改两次密码最小修改间隔</li>
</ul>
</li>
<li><code>-M MAX_DAYS</code><ul>
<li>修改密码的有效期</li>
</ul>
</li>
<li><code>-W WARM_DAYS</code><ul>
<li>修改密码到期前的警告天数</li>
</ul>
</li>
<li><code>-I DAYS</code><ul>
<li>修改密码过期后的宽限天数</li>
</ul>
</li>
<li><code>-E EXPIRE_DATE</code><ul>
<li>修改账号失效时间</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-5-用户切换"><a href="#3-5-用户切换" class="headerlink" title="3.5 用户切换"></a>3.5 用户切换</h2><h3 id="1-su"><a href="#1-su" class="headerlink" title="1 su"></a>1 su</h3><ul>
<li><code>su [OPTION] USER</code><ul>
<li>普通用户切换至其它用户需要密码，root 切换至其它用户不需要密码</li>
<li><code>OPTION</code><ul>
<li><code>-</code><ul>
<li>不加 <code>-</code> ，只有部分环境变量会变</li>
<li>加 <code>-</code>，表示完全切换用户，环境变量会随之改变</li>
</ul>
</li>
<li><code>-c command</code><ul>
<li>仅切换用户执行一次命令，执行后自动切换回来</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-sudo（execute-a-command-as-another-user）"><a href="#2-sudo（execute-a-command-as-another-user）" class="headerlink" title="2 sudo（execute a command as another user）"></a>2 sudo（execute a command as another user）</h3><h4 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li><code>sudo</code> 是一种权限管理机制</li>
<li>管理员可以授权普通用户以其它身份执行一些命令</li>
</ol>
<h4 id="2-授权方式"><a href="#2-授权方式" class="headerlink" title="2 授权方式"></a>2 授权方式</h4><ol>
<li><code>/etc/sudoers</code><ul>
<li>直接修改此配置文件</li>
</ul>
</li>
<li><code>visudo</code><ul>
<li>等效于 <code>vim /etc/sudoers</code>，有语法检查（推荐）</li>
</ul>
</li>
</ol>
<h4 id="3-配置"><a href="#3-配置" class="headerlink" title="3 配置"></a>3 配置</h4><ul>
<li><code>/etc/sudoers</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 1 语法</span><br><span class="line">授权的`用户`  主机地址=(可使用的身份 授权命令绝对路径列表</span><br><span class="line">授权的`%组` 主机地址=(可使用的身份 授权命令绝对路径列表</span><br><span class="line"># 2 例子</span><br><span class="line">root	ALL=(ALL)	ALL --- 表示root用户可以在任意主机上以任意身份执行任意命令</span><br><span class="line">an3	ALL=(ALL)	/usr/bin/cat, /usr/bin/less --- 表示an3用户可以在任意主机上以任意身份执行cat和less</span><br><span class="line">an3	ALL=(ALL)	 /usr/sbin/*, !/usr/sbin/visudo --- 表示 an3 用户可以在任意主机上以任意身份执行 /usr/sbin/ 下的所有命令，但排除 visudo 命令</span><br><span class="line">an3	ALL=(ALL)	NOPASSWD: /usr/sbin/*, !/usr/sbin/visudo --- NOPASSWD：表示在使用sudo执行命令时不需要输入密码</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="4-使用"><a href="#4-使用" class="headerlink" title="4 使用"></a>4 使用</h4><ol>
<li><code>sudo -l</code><ul>
<li>查看当前用户 sudo 可用的命令</li>
</ul>
</li>
<li><code>sudo command</code><ul>
<li>以管理员身份执行命令</li>
</ul>
</li>
</ol>
<h1 id="四-用户组管理"><a href="#四-用户组管理" class="headerlink" title="四 用户组管理"></a>四 用户组管理</h1><h2 id="4-1-groupadd（create-a-new-group）"><a href="#4-1-groupadd（create-a-new-group）" class="headerlink" title="4.1 groupadd（create a new group）"></a>4.1 groupadd（create a new group）</h2><ul>
<li><code>groupadd [OPTION] GROUP</code><ul>
<li>创建用户组</li>
<li><code>OPTION</code><ul>
<li><code>-g, --gid GID</code><ul>
<li>指定gid</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-2-groupdel（delete-a-group）"><a href="#4-2-groupdel（delete-a-group）" class="headerlink" title="4.2 groupdel（delete a group）"></a>4.2 groupdel（delete a group）</h2><ul>
<li><code>groupdel GROUP</code><ul>
<li>删除组</li>
<li>如果组是某个用户的初始组，则不能删除</li>
</ul>
</li>
</ul>
<h2 id="4-3-groupmod"><a href="#4-3-groupmod" class="headerlink" title="4.3 groupmod"></a>4.3 groupmod</h2><ul>
<li><code>groupmod [OPTION] GROUP</code><ul>
<li>修改组</li>
<li><code>-g GID</code><ul>
<li>修改gid</li>
</ul>
</li>
<li><code>-n NEW_NAME</code><ul>
<li>修改组名</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-4-gpasswd"><a href="#4-4-gpasswd" class="headerlink" title="4.4 gpasswd"></a>4.4 gpasswd</h2><ul>
<li><code>gpasswd [OPTION] GROUP</code><ul>
<li><code>-A USER</code><ul>
<li>将用户设置为组管理员</li>
</ul>
</li>
<li><code>-a, --add USER</code><ul>
<li>把用户加入组</li>
</ul>
</li>
<li><code>-d --delete USER</code><ul>
<li>把用户从组中删除</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/29/Linux-%E6%9C%8D%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/29/Linux-%E6%9C%8D%E5%8A%A1/" class="post-title-link" itemprop="url">Linux 服务</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-29 11:03:33 / 修改时间：11:07:37" itemprop="dateCreated datePublished" datetime="2020-03-29T11:03:33+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-防火墙（firewalld）"><a href="#一-防火墙（firewalld）" class="headerlink" title="一 防火墙（firewalld）"></a>一 防火墙（firewalld）</h1><h2 id="1-1-操作"><a href="#1-1-操作" class="headerlink" title="1.1 操作"></a>1.1 操作</h2><p>操作\服务名|firewalld（CentOS 7）|iptables（CentOS 6）<br>-|-<br><code>查看状态</code>|<code>systemctl status firewalld</code>|<code>/etc/init.d/iptables status</code><br><code>开启</code>|<code>systemctl start firewalld</code>|<code>/etc/init.d/iptables start</code><br><code>关闭</code>|<code>systemctl stop firewalld</code>|<code>/etc/init.d/iptables stop</code><br><code>开机启动</code>|<code>systemctl enable firewalld</code>|<code>chkconfig iptables on</code><br><code>开机不启动</code>|<code>systemctl disable firewalld</code>|<code>chkconfig iptables off</code></p>
<h2 id="1-2-配置（firewall-cmd）"><a href="#1-2-配置（firewall-cmd）" class="headerlink" title="1.2 配置（firewall-cmd）"></a>1.2 配置（firewall-cmd）</h2><ol>
<li><code>firewall-cmd --zone=public --list-ports</code><ul>
<li>查看所有已经开放的端口</li>
<li><code>--zone</code><ul>
<li>作用域</li>
</ul>
</li>
</ul>
</li>
<li><code>firewall-cmd --zone=public --query-port=端口/协议</code><ul>
<li>查看某个端口是否开放</li>
</ul>
</li>
<li><code>firewall-cmd [--permanent] --zone=public --add-port=端口/协议</code><ul>
<li>开放端口</li>
<li><code>--permanent</code><ul>
<li>永久生效，没此参数重启后失效</li>
</ul>
</li>
</ul>
</li>
<li><code>firewall-cmd [--permanent] --zone=public --remove-port=端口/协议</code><ul>
<li>删除端口</li>
</ul>
</li>
<li><code>firewall-cmd --reload</code><ul>
<li>重载防火墙规则</li>
</ul>
</li>
</ol>
<h1 id="二-远程连接服务（sshd）"><a href="#二-远程连接服务（sshd）" class="headerlink" title="二 远程连接服务（sshd）"></a>二 远程连接服务（sshd）</h1><h2 id="2-1-SSH（Secure-Shell-Protocol）"><a href="#2-1-SSH（Secure-Shell-Protocol）" class="headerlink" title="2.1 SSH（Secure Shell Protocol）"></a>2.1 SSH（Secure Shell Protocol）</h2><ol>
<li><code>SSH</code> 加密传输，安全</li>
<li><code>Telnet</code> 明文传输，不安全</li>
<li><code>openssh</code><ul>
<li>服务端软件，ssh 协议的开源实现，CentOS默认安装</li>
</ul>
</li>
<li><code>openssl</code><ul>
<li>连接和传输过程中加密软件</li>
</ul>
</li>
</ol>
<h2 id="2-2-连接方式"><a href="#2-2-连接方式" class="headerlink" title="2.2 连接方式"></a>2.2 连接方式</h2><h3 id="1-基于密码的远程连接"><a href="#1-基于密码的远程连接" class="headerlink" title="1 基于密码的远程连接"></a>1 基于密码的远程连接</h3><ol>
<li>公钥和私钥只用来完成数据加密</li>
<li>服务器发送公钥给客户端</li>
<li>客户端使用公钥对密码加密后回传给服务器，服务器解密验证密码</li>
</ol>
<h3 id="2-基于密钥的远程连接"><a href="#2-基于密钥的远程连接" class="headerlink" title="2 基于密钥的远程连接"></a>2 基于密钥的远程连接</h3><ol>
<li>在客户端创建密钥对<ul>
<li><code>ssh-keygen -t rsa</code><ul>
<li><code>-t</code><ul>
<li>指定密钥加密类型</li>
</ul>
</li>
<li>命令会在 <code>~/.ssh/</code> 生成三个文件<ul>
<li><code>id_rsa</code><ul>
<li>私钥</li>
</ul>
</li>
<li><code>id_rsa.pub</code><ul>
<li>公钥</li>
</ul>
</li>
<li><code>known hosts</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>客户端把公钥发送给服务端<ol>
<li><code>ssh-copy-id -i 公钥路径 目标IP</code></li>
<li>手动上传</li>
</ol>
</li>
<li>服务端将公钥存在 <code>~/.ssh/authorized_keys</code> 权限 <code>600</code></li>
</ol>
<h2 id="2-3-配置文件"><a href="#2-3-配置文件" class="headerlink" title="2.3 配置文件"></a>2.3 配置文件</h2><ol>
<li><code>/etc/ssh/ssh_config</code>（客户端配置文件）</li>
<li><code>/etc/ssh/sshd_config</code>（服务端配置文件）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> 17 #Port 22 # 配置端口 默认22</span><br><span class="line"> 19 #ListenAddress 0.0.0.0 # 指定的网卡才能够接收远程访问请求，默认所有网卡都可以接收</span><br><span class="line"></span><br><span class="line"> 22 HostKey /etc/ssh/ssh_host_rsa_key # 私钥位置</span><br><span class="line"> 23 #HostKey /etc/ssh/ssh_host_dsa_key</span><br><span class="line"> 24 HostKey /etc/ssh/ssh_host_ecdsa_key</span><br><span class="line"> 25 HostKey /etc/ssh/ssh_host_ed25519_key</span><br><span class="line"></span><br><span class="line"> 32 SyslogFacility AUTHPRIV # 日志记录ssh登录信息</span><br><span class="line"> 33 #LogLevel INFO # 日志等级</span><br><span class="line"></span><br><span class="line"> 38 #PermitRootLogin yes # 是否允许root远程连接</span><br><span class="line"> 43 #PubkeyAuthentication yes # 是否开启公钥验证</span><br><span class="line"> 47 AuthorizedKeysFile  .ssh/authorized_keys # 公钥位置</span><br><span class="line"> 65 PasswordAuthentication yes # 是否允许基于密码远程连接</span><br><span class="line"> 64 #PermitEmptyPasswords no  # 是否允许空密码用户远程连接</span><br><span class="line"> 79 GSSAPIAuthentication yes # GSSAPI认证是否开启（关闭）</span><br><span class="line">116 #UseDNS yes # 是否开启反向DNS解析功能（关闭）</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="2-4-SSH-相关命令"><a href="#2-4-SSH-相关命令" class="headerlink" title="2.4 SSH 相关命令"></a>2.4 SSH 相关命令</h2><ol>
<li><code>ssh [-p port] [USER@]remote</code><ul>
<li>连接</li>
</ul>
</li>
<li><code>ssh-keygen</code><ul>
<li>用于生成密钥对</li>
</ul>
</li>
<li><code>ssh-copy-id</code><ul>
<li>用于复制公钥到服务器</li>
</ul>
</li>
</ol>
<h1 id="三-网络服务（network）"><a href="#三-网络服务（network）" class="headerlink" title="三 网络服务（network）"></a>三 网络服务（network）</h1>
      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/29/Linux-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/29/Linux-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/" class="post-title-link" itemprop="url">Linux 系统管理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-29 11:03:21 / 修改时间：11:08:13" itemprop="dateCreated datePublished" datetime="2020-03-29T11:03:21+08:00">2020-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-Systemd"><a href="#一-Systemd" class="headerlink" title="一 Systemd"></a>一 Systemd</h1><h2 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h2><ol>
<li>Systemd 是一系列工具的集合，用于取代System V初始进程</li>
<li>Systemd 可以管理所有系统资源，不同的资源统称为 Unit（单位）</li>
<li>Systemd 取代 init 成为系统中 PID 值为 1 的进程</li>
</ol>
<h2 id="1-2-命令"><a href="#1-2-命令" class="headerlink" title="1.2 命令"></a>1.2 命令</h2><h3 id="1-systemctl"><a href="#1-systemctl" class="headerlink" title="1 systemctl"></a>1 systemctl</h3><ul>
<li>Systemd 的主命令，用于管理系统</li>
</ul>
<h3 id="2-systemd-analyze"><a href="#2-systemd-analyze" class="headerlink" title="2 systemd-analyze"></a>2 systemd-analyze</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>systemd-analyze</code></td>
<td>查看启动耗时</td>
</tr>
<tr>
<td><code>systemd-analyze blame</code></td>
<td>查看每个服务的启动耗时</td>
</tr>
</tbody></table>
<h3 id="3-hostnamectl"><a href="#3-hostnamectl" class="headerlink" title="3 hostnamectl"></a>3 hostnamectl</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>hostnamectl</code></td>
<td>显示当前主机的信息</td>
</tr>
<tr>
<td><code>hostnamectl set-hostname xxx</code></td>
<td>设置主机名</td>
</tr>
</tbody></table>
<h3 id="4-localectl"><a href="#4-localectl" class="headerlink" title="4 localectl"></a>4 localectl</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>localectl</code></td>
<td>查看本地化设置</td>
</tr>
<tr>
<td><code>localectl set-locale en_US.UTF-8</code></td>
<td>设置字符集</td>
</tr>
<tr>
<td><code>localectl set-keymap us</code></td>
<td>设置键盘映射</td>
</tr>
<tr>
<td><code>localectl set-layout us</code></td>
<td>设置 x11 布局</td>
</tr>
</tbody></table>
<h3 id="5-timedatectl"><a href="#5-timedatectl" class="headerlink" title="5 timedatectl"></a>5 timedatectl</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>timedatectl</code></td>
<td>查看时间及时区信息</td>
</tr>
<tr>
<td><code>timedatectl list-timezones</code></td>
<td>显示所有可用的时区</td>
</tr>
<tr>
<td><code>timedatectl set-timezone Asia/Shanghai</code></td>
<td>设置时区</td>
</tr>
</tbody></table>
<h3 id="6-loginctl"><a href="#6-loginctl" class="headerlink" title="6 loginctl"></a>6 loginctl</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>loginctl list-sessions</code></td>
<td>显示当前所有连接会话</td>
</tr>
<tr>
<td><code>loginctl list-users</code></td>
<td>列出当前所有登录用户</td>
</tr>
<tr>
<td><code>loginctl show-user root</code></td>
<td>显示指定用户的信息</td>
</tr>
</tbody></table>
<h3 id="7-journalctl"><a href="#7-journalctl" class="headerlink" title="7 journalctl"></a>7 journalctl</h3><ol>
<li>管理所有 Unit 的启动日志</li>
<li>日志的配置文件是 <code>/etc/systemd/journald.conf</code></li>
</ol>
<h2 id="1-3-Unit"><a href="#1-3-Unit" class="headerlink" title="1.3 Unit"></a>1.3 Unit</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ul>
<li>Unit 是 Systemd 管理系统资源的基本单元，可以认为每个系统资源就是一个 Unit</li>
</ul>
<ol start="2">
<li>每一个 Unit 都有一个配置文件，告诉 Systemd 怎么启动这个 Unit </li>
<li>Systemd 默认从目录 <code>/etc/systemd/system/</code> 读取配置文件。但里面存放的大部分文件都是符号链接，指向目录 <code>/usr/lib/systemd/system/</code>，真正的配置文件存放在那个目录</li>
</ol>
<h3 id="2-分类"><a href="#2-分类" class="headerlink" title="2 分类"></a>2 分类</h3><p>类型|扩展名|说明<br>-|-<br><code>Service unit</code>|<code>.service</code>|系统服务<br><code>Target  unit</code>|<code>.target</code>|对 Unit 文件进行逻辑分组，多个 Unit 构成的一个 Target<br><code>Device unit</code>|<code>.device</code>|硬件设备<br><code>Mount unit</code>|<code>.mount</code>|文件系统挂载点，可代替<code>/etc/fstab</code><br><code>Automount  unit</code>|<code>.automount</code>|自动挂载点<br><code>Socket unit</code>|<code>.socket</code>|进程间通信的socket<br><code>Path unit</code>|<code>.path</code>|文件或路径<br><code>Scope unit</code>|<code>.scope</code>|不是由Systemd启动的外部进程<br><code>Slice unit</code>|<code>.slice</code>|进程组<br><code>Snapshot unit</code>|<code>.snapshot</code>|Systemd快照，可以切回某个快照<br><code>Swap unit</code>|<code>.swap</code>|swap 文件<br><code>Timer unit</code>|<code>.timer</code>|定时器</p>
<h3 id="3-Unit-状态"><a href="#3-Unit-状态" class="headerlink" title="3 Unit 状态"></a>3 Unit 状态</h3><h4 id="1-Loaded（下次开机启动状态）"><a href="#1-Loaded（下次开机启动状态）" class="headerlink" title="1 Loaded（下次开机启动状态）"></a>1 Loaded（下次开机启动状态）</h4><table>
<thead>
<tr>
<th>状态</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>enabled</code></td>
<td>开机启动</td>
</tr>
<tr>
<td><code>disabled</code></td>
<td>开机不启动</td>
</tr>
<tr>
<td><code>static</code></td>
<td>不能自己启动，但有可能作为依赖被其它 <code>enabled</code> 服务启动</td>
</tr>
<tr>
<td><code>mask</code></td>
<td>禁止启动</td>
</tr>
</tbody></table>
<h4 id="2-Active（当前状态）"><a href="#2-Active（当前状态）" class="headerlink" title="2 Active（当前状态）"></a>2 Active（当前状态）</h4><table>
<thead>
<tr>
<th>状态</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>active（running）</code></td>
<td>持续运行</td>
</tr>
<tr>
<td><code>active（exited）</code></td>
<td>仅执行一次就正常结束的服务</td>
</tr>
<tr>
<td><code>active（waiting）</code></td>
<td>运行中，但要等待其它事件</td>
</tr>
<tr>
<td><code>inactive</code></td>
<td>没有运行</td>
</tr>
</tbody></table>
<h3 id="4-Unit-管理"><a href="#4-Unit-管理" class="headerlink" title="4 Unit 管理"></a>4 Unit 管理</h3><h4 id="1-查"><a href="#1-查" class="headerlink" title="1 查"></a>1 查</h4><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>systemctl list-units</code></td>
<td>显示所有正在运行的 Unit</td>
</tr>
<tr>
<td><code>systemctl list-units --all</code></td>
<td>显示所有Unit，包括没有找到配置文件的或者启动失败的</td>
</tr>
<tr>
<td><code>systemctl list-units --all --state=inactive</code></td>
<td>显示所有没有运行的 Unit</td>
</tr>
<tr>
<td><code>systemctl list-units --failed</code></td>
<td>显示所有加载失败的 Unit</td>
</tr>
<tr>
<td><code>systemctl list-units --type=service</code></td>
<td>显示所有正在运行的、类型为 service 的 Unit</td>
</tr>
<tr>
<td><code>systemctl list-unit-files</code></td>
<td>显示所有配置文件</td>
</tr>
<tr>
<td><code>systemctl list-unit-files --type=service</code></td>
<td>显示指定类型的配置文件</td>
</tr>
</tbody></table>
<h4 id="2-依赖关系"><a href="#2-依赖关系" class="headerlink" title="2 依赖关系"></a>2 依赖关系</h4><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>systemctl list-dependencies name.service</code></td>
<td>显示某个 Unit 的所有依赖</td>
</tr>
<tr>
<td><code>systemctl list-dependencies -all name.service</code></td>
<td>展开显示某个 Unit 的所有依赖</td>
</tr>
</tbody></table>
<h4 id="3-常用操作（以-service-为例）"><a href="#3-常用操作（以-service-为例）" class="headerlink" title="3 常用操作（以 service 为例）"></a>3 常用操作（以 service 为例）</h4><table>
<thead>
<tr>
<th>操作\版本</th>
<th>CentOS 7</th>
<th>CentOS 6</th>
</tr>
</thead>
<tbody><tr>
<td>启动服务</td>
<td><code>systemctl start name.service</code></td>
<td><code>service name start</code></td>
</tr>
<tr>
<td>关闭服务</td>
<td><code>systemctl stop name.service</code></td>
<td><code>service name stop</code></td>
</tr>
<tr>
<td>重启服务</td>
<td><code>systemctl restart name.service</code></td>
<td><code>service name restart</code></td>
</tr>
<tr>
<td>查看服务状态</td>
<td><code>systemctl status name.service</code></td>
<td><code>service name status</code></td>
</tr>
<tr>
<td>开机启动</td>
<td><code>systemctl enable name.service</code></td>
<td><code>chkconfig name on</code></td>
</tr>
<tr>
<td>开机不启动</td>
<td><code>systemctl disable name.service</code></td>
<td><code>chkconfig name off</code></td>
</tr>
<tr>
<td>是否启动</td>
<td><code>systemctl is-active name.service</code></td>
<td></td>
</tr>
<tr>
<td>是否开机启动</td>
<td><code>systemctl is-enabled name.service</code></td>
<td></td>
</tr>
<tr>
<td>重载某个配置文件</td>
<td><code>systemctl reload name.service</code></td>
<td></td>
</tr>
<tr>
<td>重载所有修改过的配置文件</td>
<td><code>systemctl daemon-reload</code></td>
<td></td>
</tr>
<tr>
<td>杀死服务所有子进程</td>
<td><code>systemctl kill name.service</code></td>
<td></td>
</tr>
</tbody></table>
<h2 id="1-4-Target"><a href="#1-4-Target" class="headerlink" title="1.4 Target"></a>1.4 Target</h2><h3 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>启动系统时，需要启动大量的 Unit，非常不方便</li>
<li>Target 就是一个 Unit 组，包含许多相关的 Unit 。启动某个 Target 的时候，Systemd 就会启动里面所有的 Unit</li>
<li>System V 启动模式的 Runlevel 与 Target 作用类似，不同的是，RunLevel 是互斥的，不可能多个 RunLevel 同时启动，但是多个 Target 可以同时启动</li>
</ol>
<h3 id="2-运行级别-amp-Target"><a href="#2-运行级别-amp-Target" class="headerlink" title="2 运行级别 &amp; Target"></a>2 运行级别 &amp; Target</h3><p>CentOS 6|CentOS 7| 说明<br>—|—<br><code>Runlevel 0</code> | <code>runlevel0.target  -&gt;  poweroff.target</code>|关机模式，系统默认运行级别不能设置为0，否则不能正常启动<br><code>Runlevel 1</code> | <code>runlevel1.target  -&gt;  rescue.target</code>|单用户模式，root权限，用于系统维护，修改root密码等等，禁止远程登陆<br><code>Runlevel 2</code> |<code>runlevel2.target  -&gt;  multi-user.target</code>|多用户模式（没有NFS），没有网络<br><code>Runlevel 3</code> |<code>runlevel3.target  -&gt;  multi-user.target</code>|完全的多用户模式(有NFS)，登陆后进入控制台命令行模式<br><code>Runlevel 4</code> |<code>runlevel4.target  -&gt;  multi-user.target</code>|系统未使用，保留<br><code>Runlevel 5</code> |<code>runlevel5.target  -&gt;  graphical.target</code>|X11控制台，登陆后进入图形GUI模式<br><code>Runlevel 6</code> |<code>runlevel6.target  -&gt;  reboot.target</code>|重启模式，默认运行级别不能设为6，否则不能正常启动<br><code>emergency</code>|<code>emergency.target</code>|急救模式</p>
<h3 id="3-查看-修改默认运行级别"><a href="#3-查看-修改默认运行级别" class="headerlink" title="3 查看/修改默认运行级别"></a>3 查看/修改默认运行级别</h3><table>
<thead>
<tr>
<th>操作/版本</th>
<th>CentOS 6</th>
<th>CentOS 7</th>
</tr>
</thead>
<tbody><tr>
<td>查看</td>
<td><code>runlevel</code></td>
<td><code>systemctl get-default</code></td>
</tr>
<tr>
<td>修改</td>
<td><code>/etc/inittab</code></td>
<td><code>systemctl set-default name.target</code></td>
</tr>
</tbody></table>
<h3 id="4-切换运行级别"><a href="#4-切换运行级别" class="headerlink" title="4 切换运行级别"></a>4 切换运行级别</h3><table>
<thead>
<tr>
<th>CentOS 6</th>
<th>CentOS 7</th>
</tr>
</thead>
<tbody><tr>
<td><code>init 0</code></td>
<td><code>systemctl poweroff</code></td>
</tr>
<tr>
<td><code>init 1</code></td>
<td><code>systemctl  isolate rescue.target</code></td>
</tr>
<tr>
<td><code>init 2/3/4</code></td>
<td><code>systemctl  isolate  multi-user.target</code></td>
</tr>
<tr>
<td><code>init 5</code></td>
<td><code>systemctl  isolate graphical.target</code></td>
</tr>
<tr>
<td><code>init 6</code></td>
<td><code>systemctl  reboot</code></td>
</tr>
<tr>
<td>* <code>isolate</code></td>
<td></td>
</tr>
<tr>
<td>1. 切换 Target 时，默认不关闭前一个 Target 启动的进程</td>
<td></td>
</tr>
<tr>
<td>2. 加上 <code>isolate</code> 会关闭前一个 Target 里面所有不属于后一个 Target 的进程</td>
<td></td>
</tr>
</tbody></table>
<h1 id="二-启动流程"><a href="#二-启动流程" class="headerlink" title="二 启动流程"></a>二 启动流程</h1><h2 id="2-1-CentOS-6-启动流程"><a href="#2-1-CentOS-6-启动流程" class="headerlink" title="2.1 CentOS 6 启动流程"></a>2.1 CentOS 6 启动流程</h2><p>![](<a href="https://gitee.com/3noanswer/npics/raw/master/Linux/CentOS6" target="_blank" rel="noopener">https://gitee.com/3noanswer/npics/raw/master/Linux/CentOS6</a> 启动流程.png)</p>
<h3 id="1-POST（Power-On-Self-Test）"><a href="#1-POST（Power-On-Self-Test）" class="headerlink" title="1 POST（Power-On-Self-Test）"></a>1 POST（Power-On-Self-Test）</h3><ol>
<li>加电自检，是BIOS功能的一个主要部分，负责完成硬件情况的检测</li>
<li>自检后根据设置获取第一个开机引导设备，如：光驱，硬盘，网络，USB</li>
</ol>
<ul>
<li>BIOS（Basic Input Output System）<ul>
<li>它是一组固化到计算机主板一个ROM芯片上的程序，它保存着计算机最重要的基本输入输出的程序、开机后自检程序和系统自启动程序，它可从CMOS中读写系统设置的具体信息。 其主要功能是为计算机提供最底层的、最直接的硬件设置和控制</li>
</ul>
</li>
</ul>
<h3 id="2-MBR（Master-Boot-Record）"><a href="#2-MBR（Master-Boot-Record）" class="headerlink" title="2 MBR（Master Boot Record）"></a>2 MBR（Master Boot Record）</h3><ul>
<li>主引导记录，存储于磁盘的 0 柱面 0 磁道 1 扇区，大小为 512 byte<ol>
<li><code>446 byte</code><ul>
<li>BootLoader（GRUB）</li>
</ul>
</li>
<li><code>64 byte</code><ul>
<li>分区表</li>
</ul>
</li>
<li><code>2 byte</code><ul>
<li>55AA（用于MBR的有效性检查）</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="3-GRUB（GRand-Unified-Bootloader）"><a href="#3-GRUB（GRand-Unified-Bootloader）" class="headerlink" title="3 GRUB（GRand Unified Bootloader）"></a>3 GRUB（GRand Unified Bootloader）</h3><ol>
<li>是一个来自GNU项目的多操作系统启动程序，分为两个阶段<ol>
<li>第一阶段，MBR的前446 byte</li>
<li>1.5 阶段</li>
<li>第二阶段 <code>/boot/grub</code></li>
</ol>
</li>
<li><code>BootLoader</code><ul>
<li>提供菜单，允许用户选择不同的内核版本，然后将内核装载到内存的特定空间中，解压，展开，并把系统控制权移交给内核</li>
</ul>
</li>
</ol>
<h3 id="4-加载内核（Kernel）"><a href="#4-加载内核（Kernel）" class="headerlink" title="4 加载内核（Kernel）"></a>4 加载内核（Kernel）</h3><ul>
<li>Kernel 会开始侦测硬件并加载驱动程序</li>
</ul>
<h3 id="5-启动系统第一个进程-init"><a href="#5-启动系统第一个进程-init" class="headerlink" title="5 启动系统第一个进程 init"></a>5 启动系统第一个进程 init</h3><ul>
<li>init 进程控制后续各种服务的启动，init 是按照配置顺序启动服务（串行）<ul>
<li><code># chkconfig: 2345 10 90</code><ul>
<li>表示此服务可以在 Runlevel 2345 下启动，启动顺序为 10，关闭顺序为 90</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="6-获取系统运行级别"><a href="#6-获取系统运行级别" class="headerlink" title="6 获取系统运行级别"></a>6 获取系统运行级别</h3><ul>
<li>init 读取<code>/etc/inittab</code>配置文件， 获取系统默认运行级别</li>
</ul>
<h3 id="7-系统初始化"><a href="#7-系统初始化" class="headerlink" title="7 系统初始化"></a>7 系统初始化</h3><ul>
<li>init 执行 <code>/etc/rc.d/rc.sysinit</code> 脚本来进行系统初始化，准备软件执行的作业环境 (如网络、时区等)</li>
</ul>
<h3 id="8-启动服务"><a href="#8-启动服务" class="headerlink" title="8 启动服务"></a>8 启动服务</h3><ul>
<li>init 执行系统运行级别对应的脚本，如 <code>/etc/rc.d/rc3.d</code>，及 <code>/etc/rc3.d/*</code> 下所有脚本</li>
</ul>
<h3 id="9-开机自启动程序"><a href="#9-开机自启动程序" class="headerlink" title="9 开机自启动程序"></a>9 开机自启动程序</h3><ul>
<li>init 执行 <code>/etc/rc.d/rc.local</code> 脚本</li>
</ul>
<h3 id="10-登录界面"><a href="#10-登录界面" class="headerlink" title="10 登录界面"></a>10 登录界面</h3><ul>
<li>运行 mingetty 进程，进入登录界面</li>
</ul>
<h2 id="2-2-CentOS-7-启动流程"><a href="#2-2-CentOS-7-启动流程" class="headerlink" title="2.2 CentOS 7 启动流程"></a>2.2 CentOS 7 启动流程</h2><p>![](<a href="https://gitee.com/3noanswer/npics/raw/master/Linux/CentOS7" target="_blank" rel="noopener">https://gitee.com/3noanswer/npics/raw/master/Linux/CentOS7</a> 启动流程.png)</p>
<h1 id="三-进程"><a href="#三-进程" class="headerlink" title="三 进程"></a>三 进程</h1><h2 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h2><ul>
<li>进程是已启动的可执行程序的运行实例，有以下组成部分：<ol>
<li>已分配内存的地址空间；</li>
<li>安全属性，包括所有权凭据和特权；</li>
<li>程序代码的一个或多个执行线程；</li>
<li>进程状态</li>
</ol>
</li>
</ul>
<h2 id="3-2-守护进程（Daemon）"><a href="#3-2-守护进程（Daemon）" class="headerlink" title="3.2 守护进程（Daemon）"></a>3.2 守护进程（Daemon）</h2><ol>
<li>Linux服务器的主要任务就是为本地或远程用户提供各种服务</li>
<li>Linux系统上提供服务的程序通常是守护进程</li>
<li>守护进程一直在系统后台运行，时刻地监听用户的服务请求，一旦用户发出了服务请求，守护进程便为它们提供服务</li>
</ol>
<h2 id="3-3-系统初始化进程"><a href="#3-3-系统初始化进程" class="headerlink" title="3.3 系统初始化进程"></a>3.3 系统初始化进程</h2><ol>
<li>系统初始化进程是一个特殊的的守护进程，其PID为1</li>
<li>是其他守护进程的父进程或者祖先进程，系统上所有的守护进程都是由系统初始化进程进行管理的（如启动、停止等）</li>
<li>在Linux的发展历史过程中，使用过3种初始化进程<ol>
<li><code>init</code></li>
<li><code>upstart</code></li>
<li><code>systemd</code></li>
</ol>
</li>
</ol>
<h2 id="3-4-进程状态"><a href="#3-4-进程状态" class="headerlink" title="3.4 进程状态"></a>3.4 进程状态</h2><table>
<thead>
<tr>
<th>状态</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>R（运行）</code></td>
<td>进程正在运行或在运行队列中等待</td>
</tr>
<tr>
<td><code>S（休眠）</code></td>
<td>可中断睡眠状态，可以被唤醒</td>
</tr>
<tr>
<td><code>D（不可中断）</code></td>
<td>不可中断睡眠状态，通常用于 I/O 情况</td>
</tr>
<tr>
<td><code>Z（僵死）</code></td>
<td>子进程退出，父进程还在运行，但是父进程没有读到子进程的退出状态，子进程进入僵死状态</td>
</tr>
<tr>
<td><code>T（暂停）</code></td>
<td>进程收到停止信号SIGSTOP后停止运行，可以发送SIGCONT信号让进程继续运行</td>
</tr>
<tr>
<td><code>X（死亡）</code></td>
<td>该状态是返回状态，在任务列表中看不到</td>
</tr>
<tr>
<td><code>t（追踪）</code></td>
<td>当利用gdb调试某个程序，程序停留在某个断点处时，就处于跟踪状态</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>状态组合符号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>s</code></td>
<td>表示进程是控制进程</td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>表示进程运行在高优先级上</td>
</tr>
<tr>
<td><code>N</code></td>
<td>表示进程运行在低优先级上</td>
</tr>
<tr>
<td><code>L</code></td>
<td>表示进程有页面锁定在内存中</td>
</tr>
<tr>
<td><code>l</code></td>
<td>表示进程是多线程的</td>
</tr>
<tr>
<td><code>+</code></td>
<td>表示进程运行在前台</td>
</tr>
</tbody></table>
<h2 id="3-5-查看进程"><a href="#3-5-查看进程" class="headerlink" title="3.5 查看进程"></a>3.5 查看进程</h2><h3 id="1-ps"><a href="#1-ps" class="headerlink" title="1 ps"></a>1 ps</h3><h4 id="1-ps-aux"><a href="#1-ps-aux" class="headerlink" title="1 ps -aux"></a>1 ps -aux</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>user</code></td>
<td>启动进程的用户</td>
</tr>
<tr>
<td><code>PID</code></td>
<td>进程ID</td>
</tr>
<tr>
<td><code>%CPU</code></td>
<td>进程占用cpu百分比</td>
</tr>
<tr>
<td><code>%MEM</code></td>
<td>进程占用内存百分比</td>
</tr>
<tr>
<td><code>VSZ</code></td>
<td>进程占用虚拟内存大小（KB）</td>
</tr>
<tr>
<td><code>RSS</code></td>
<td>进程占用物理内存大小（KB）</td>
</tr>
<tr>
<td><code>TTY</code></td>
<td>进程启动终端</td>
</tr>
<tr>
<td><code>STAT</code></td>
<td>进程状态</td>
</tr>
<tr>
<td><code>START</code></td>
<td>进程启动时间</td>
</tr>
<tr>
<td><code>TIME</code></td>
<td>进程执行起到现在总的CPU占用时间</td>
</tr>
<tr>
<td><code>COMMAND</code></td>
<td>启动进程的命令</td>
</tr>
</tbody></table>
<h4 id="2-ps-ef"><a href="#2-ps-ef" class="headerlink" title="2 ps -ef"></a>2 ps -ef</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>UID</code></td>
<td>启动进程的用户</td>
</tr>
<tr>
<td><code>PID</code></td>
<td>进程 ID</td>
</tr>
<tr>
<td><code>PPID</code></td>
<td>父进程 ID</td>
</tr>
<tr>
<td><code>C</code></td>
<td>进程生命周期中的CPU利用率</td>
</tr>
<tr>
<td><code>STIME</code></td>
<td>进程启动时间</td>
</tr>
<tr>
<td><code>TTY</code></td>
<td>进程启动终端</td>
</tr>
<tr>
<td><code>TIME</code></td>
<td>进程执行起到现在总的CPU占用时间</td>
</tr>
<tr>
<td><code>CMD</code></td>
<td>启动进程的命令</td>
</tr>
<tr>
<td>* <code>TTY</code></td>
<td></td>
</tr>
<tr>
<td>1. <code>?</code></td>
<td></td>
</tr>
<tr>
<td>* 表示与终端无关，这种进程一般是内核态进程</td>
<td></td>
</tr>
<tr>
<td>2. <code>tty1~7</code></td>
<td></td>
</tr>
<tr>
<td>* 本地终端</td>
<td></td>
</tr>
<tr>
<td>3. <code>pts/0+</code></td>
<td></td>
</tr>
<tr>
<td>* 远程终端</td>
<td></td>
</tr>
</tbody></table>
<h4 id="3-ps-le"><a href="#3-ps-le" class="headerlink" title="3 ps -le"></a>3 ps -le</h4><ul>
<li>信息更详细</li>
</ul>
<h3 id="2-pstree"><a href="#2-pstree" class="headerlink" title="2 pstree"></a>2 pstree</h3><ul>
<li><code>pstree [OPTION] [PID | USER]</code><ul>
<li>以树形结构显示程序和进程之间的关系</li>
<li><code>OPTION</code><ul>
<li><code>-a</code><ul>
<li>显示启动每个进程对应的完整指令，包括启动进程的路径、参数等</li>
</ul>
</li>
<li><code>-c</code><ul>
<li>不使用精简法显示进程信息，即显示的进程中包含子进程和父进程</li>
</ul>
</li>
<li><code>-n</code><ul>
<li>根据进程 PID 号来排序输出，默认是以程序名排序输出的</li>
</ul>
</li>
<li><code>-p</code><ul>
<li>显示进程的 PID</li>
</ul>
</li>
<li><code>-u</code><ul>
<li>显示进程对应的用户名称</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-lsof（list-opened-files）"><a href="#3-lsof（list-opened-files）" class="headerlink" title="3 lsof（list opened files）"></a>3 lsof（list opened files）</h3><ul>
<li><code>lsof [OPTION]</code><ul>
<li>列出进程调用或打开的文件的信息</li>
<li><code>OPTION</code><ul>
<li><code>-u 用户名</code><ul>
<li>列出某个用户的进程打开的文件</li>
</ul>
</li>
<li><code>-p pid</code><ul>
<li>列出指定进程号所打开的文件</li>
</ul>
</li>
<li><code>-c 字符串</code><ul>
<li>列出以字符串开头的进程打开的文件</li>
</ul>
</li>
<li><code>-i 条件</code><ul>
<li>列出符合条件的进程</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-6-监听进程"><a href="#3-6-监听进程" class="headerlink" title="3.6 监听进程"></a>3.6 监听进程</h2><h3 id="1-top"><a href="#1-top" class="headerlink" title="1 top"></a>1 top</h3><ul>
<li><code>top [OPTION]</code><ul>
<li><code>OPTION</code><ul>
<li><code>-d 秒数</code><ul>
<li>指定每隔几秒刷新，默认3秒</li>
</ul>
</li>
<li><code>-n 次数</code><ul>
<li>指定 top 抿了执行次数</li>
</ul>
</li>
<li><code>-b</code><ul>
<li>使用批处理模式输出。</li>
<li>一般和 <code>-n</code> 选项合用，用于把 top 命令重定向到文件中</li>
</ul>
</li>
<li><code>-p PID</code><ul>
<li>仅查看的进程</li>
</ul>
</li>
<li><code>-u USER</code><ul>
<li>只监听某个用户的进程</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-top-输出窗口交互命令"><a href="#2-top-输出窗口交互命令" class="headerlink" title="2 top 输出窗口交互命令"></a>2 top 输出窗口交互命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>?, h</code></td>
<td>显示交互模式的帮助</td>
</tr>
<tr>
<td><code>空格</code></td>
<td>默认 3s 刷新一次，按空格立即刷新</td>
</tr>
<tr>
<td><code>P</code></td>
<td>按照 CPU 的使用率排序（默认）</td>
</tr>
<tr>
<td><code>M</code></td>
<td>按照内存的使用率排序</td>
</tr>
<tr>
<td><code>N</code></td>
<td>按照 PID 排序</td>
</tr>
<tr>
<td><code>T</code></td>
<td>按照 CPU 的累积运算时间排序，即按照 <code>TIME+</code> 项排序</td>
</tr>
<tr>
<td><code>q</code></td>
<td>退出 top 命令</td>
</tr>
</tbody></table>
<h3 id="3-top-输出信息"><a href="#3-top-输出信息" class="headerlink" title="3 top 输出信息"></a>3 top 输出信息</h3><h4 id="第一行（任务队列信息）"><a href="#第一行（任务队列信息）" class="headerlink" title="第一行（任务队列信息）"></a>第一行（任务队列信息）</h4><ul>
<li><code>系统当前时间，系统运行时间，登录用户数，CPU负载</code></li>
</ul>
<h4 id="第二行（进程信息）"><a href="#第二行（进程信息）" class="headerlink" title="第二行（进程信息）"></a>第二行（进程信息）</h4><ul>
<li><code>系统进程总数，运行进程数，睡眠进程数，停止进程数，僵尸进程数</code></li>
</ul>
<h4 id="第三行（CPU-信息）"><a href="#第三行（CPU-信息）" class="headerlink" title="第三行（CPU 信息）"></a>第三行（CPU 信息）</h4><table>
<thead>
<tr>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>us</code></td>
<td>用户模式占用的 CPU 百分比</td>
</tr>
<tr>
<td><code>sy</code></td>
<td>系统模式占用的 CPU 百分比</td>
</tr>
<tr>
<td><code>ni</code></td>
<td>改变过优先级的用户进程占用的 CPU 百分比</td>
</tr>
<tr>
<td><code>id</code></td>
<td>空闲 CPU 占用的 CPU 百分比</td>
</tr>
<tr>
<td><code>wa</code></td>
<td>等待输入/输出的进程占用的 CPU 百分比</td>
</tr>
<tr>
<td><code>hi</code></td>
<td>硬中断请求服务占用的 CPU 百分比</td>
</tr>
<tr>
<td><code>si</code></td>
<td>软中断请求服务占用的 CPU 百分比</td>
</tr>
<tr>
<td><code>st</code></td>
<td>虚拟时间百分比，就是当有虚拟机时，虚拟 CPU 等待实际 CPU 的时间百分比</td>
</tr>
</tbody></table>
<h4 id="第四行（物理内存信息-Mem）"><a href="#第四行（物理内存信息-Mem）" class="headerlink" title="第四行（物理内存信息 Mem）"></a>第四行（物理内存信息 Mem）</h4><table>
<thead>
<tr>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>total</code></td>
<td>物理内存的总量</td>
</tr>
<tr>
<td><code>free</code></td>
<td>空闲的物理内存数量</td>
</tr>
<tr>
<td><code>used</code></td>
<td>己经使用的物理内存数量</td>
</tr>
<tr>
<td><code>buff/cache</code></td>
<td>作为缓冲/缓存的内存数量</td>
</tr>
</tbody></table>
<h4 id="第五行（交互分区信息-Swap）"><a href="#第五行（交互分区信息-Swap）" class="headerlink" title="第五行（交互分区信息 Swap）"></a>第五行（交互分区信息 Swap）</h4><table>
<thead>
<tr>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>total</code></td>
<td>交换分区（虚拟内存）的总大小</td>
</tr>
<tr>
<td><code>free</code></td>
<td>空闲交换分区的大小</td>
</tr>
<tr>
<td><code>used</code></td>
<td>已经使用的交换分区的大小</td>
</tr>
<tr>
<td><code>avail Mem</code></td>
<td>总的可利用内存是多少</td>
</tr>
</tbody></table>
<h4 id="剩余部分（进程信息）"><a href="#剩余部分（进程信息）" class="headerlink" title="剩余部分（进程信息）"></a>剩余部分（进程信息）</h4><table>
<thead>
<tr>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>PID</code></td>
<td>进程的 ID</td>
</tr>
<tr>
<td><code>USER</code></td>
<td>进程所属的用户</td>
</tr>
<tr>
<td><code>PR</code></td>
<td>优先级，数值越小优先级越高（由内核动态调整，用户不能修改）</td>
</tr>
<tr>
<td><code>NI</code></td>
<td>优先级，数值越小优先级越高（用户可以自己调整）</td>
</tr>
<tr>
<td><code>VIRT</code></td>
<td>进程使用的虚拟内存的大小，单位为 KB</td>
</tr>
<tr>
<td><code>RES</code></td>
<td>进程使用的物理内存的大小，单位为 KB</td>
</tr>
<tr>
<td><code>SHR</code></td>
<td>共享内存大小，单位为 KB</td>
</tr>
<tr>
<td><code>S</code></td>
<td>进程状态</td>
</tr>
<tr>
<td><code>%CPU</code></td>
<td>进程占用 CPU 的百分比</td>
</tr>
<tr>
<td><code>%MEM</code></td>
<td>进程占用内存的百分比</td>
</tr>
<tr>
<td><code>TIME+</code></td>
<td>进程执行起到现在总的CPU占用时间</td>
</tr>
<tr>
<td><code>COMMAND</code></td>
<td>启动进程的命令</td>
</tr>
</tbody></table>
<h2 id="3-6-结束进程"><a href="#3-6-结束进程" class="headerlink" title="3.6 结束进程"></a>3.6 结束进程</h2><h3 id="1-kill"><a href="#1-kill" class="headerlink" title="1 kill"></a>1 kill</h3><h4 id="1-原理"><a href="#1-原理" class="headerlink" title="1 原理"></a>1 原理</h4><ul>
<li>kill 命令会向操作系统内核发送一个信号和目标进程的 PID，然后系统内核根据收到的信号类型，对指定进程进行相应的操作</li>
</ul>
<h4 id="2-语法"><a href="#2-语法" class="headerlink" title="2 语法"></a>2 语法</h4><ol>
<li><code>kill -l</code><ul>
<li>查看所有信号信息</li>
</ul>
</li>
<li><code>kill [信号编号] PID</code></li>
</ol>
<table>
<thead>
<tr>
<th>信号编号</th>
<th>信号名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>1</code></td>
<td><code>SIGHUP</code></td>
<td>重启进程</td>
</tr>
<tr>
<td><code>2</code></td>
<td><code>SIGINT</code></td>
<td>非强制性结束进程，<code>ctrl + c</code> 发出的是 <code>kill -2</code> 的信号</td>
</tr>
<tr>
<td><code>9</code></td>
<td><code>SIGKILL</code></td>
<td>强制结束进程</td>
</tr>
<tr>
<td><code>15</code></td>
<td><code>SIGTERM</code></td>
<td>正常结束进程，默认信号</td>
</tr>
<tr>
<td><code>19</code></td>
<td><code>SIGSTOP</code></td>
<td>挂起一个进程，<code>ctrl + z</code> 发出的是 <code>kill -19</code> 信号</td>
</tr>
</tbody></table>
<h3 id="2-killall"><a href="#2-killall" class="headerlink" title="2 killall"></a>2 killall</h3><ul>
<li><code>killall [OPTION] [信号编号] 进程名</code><ul>
<li><code>kill</code> 命令使用 PID 结束进程，而 <code>killall</code> 使用进程名称来结束进程</li>
<li><code>OPTION</code><ul>
<li><code>-i</code><ul>
<li>交互式，询问是否要杀死某个进程</li>
</ul>
</li>
<li><code>-I</code><ul>
<li>忽略进程名的大小写</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-pkill"><a href="#4-pkill" class="headerlink" title="4 pkill"></a>4 pkill</h3><ol>
<li><code>pkill [OPTION] [信号编号] 进程名</code><ul>
<li>用来结束进程时，用法与 <code>killall</code> 一致</li>
</ul>
</li>
<li><code>pkill [信号编号] -t 终端号</code><ul>
<li>按照终端号踢出登陆用户</li>
</ul>
</li>
</ol>
<h1 id="四-硬件信息"><a href="#四-硬件信息" class="headerlink" title="四 硬件信息"></a>四 硬件信息</h1><h2 id="4-1-CPU"><a href="#4-1-CPU" class="headerlink" title="4.1 CPU"></a>4.1 CPU</h2><h3 id="1-CPU-信息"><a href="#1-CPU-信息" class="headerlink" title="1 CPU 信息"></a>1 CPU 信息</h3><ol>
<li>cpu 路数<ul>
<li>cpu 的物理个数</li>
</ul>
</li>
<li>cpu 核数<ul>
<li>cpu 的逻辑个数</li>
</ul>
</li>
<li>core<ul>
<li>一个物理 cpu 的核心数</li>
</ul>
</li>
<li><code>核数 = 路数 * core</code></li>
</ol>
<h3 id="2-查看-CPU-信息"><a href="#2-查看-CPU-信息" class="headerlink" title="2 查看 CPU 信息"></a>2 查看 CPU 信息</h3><ol>
<li><code>/proc/cpuinfo</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 每一核cpu信息以空行分隔</span><br><span class="line">model name:     # cpu型号</span><br><span class="line">physical id:    # cpu路数，从0开始编号</span><br><span class="line">cpu cores:      # 一路cpu的核数</span><br><span class="line">processor:      # cpu核数，从0开始编号</span><br></pre></td></tr></table></figure></li>
<li><code>lscpu</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">model name:            # cpu型号</span><br><span class="line">Socket(s):             # cpu路数，从0开始编号</span><br><span class="line">Core(s) per socket:    # 一路cpu的核数</span><br><span class="line">CPU(s):                # cpu核数，从0开始编号</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="3-CPU-负载"><a href="#3-CPU-负载" class="headerlink" title="3 CPU 负载"></a>3 CPU 负载</h3><ol>
<li>负载简单说就是 cpu 的任务量，任务队列的平均长度</li>
<li>负载值 与 cpu 核数有关，负载不应该超过核的数量</li>
<li>负载信息<ul>
<li><code>1分钟平均负载 5分钟平均负载 15分钟平均负载</code></li>
</ul>
</li>
</ol>
<h3 id="4-查看-CPU-负载"><a href="#4-查看-CPU-负载" class="headerlink" title="4 查看 CPU 负载"></a>4 查看 CPU 负载</h3><ol>
<li><code>/proc/loadavg</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0.00 0.01 0.05 1/104 1445</span><br></pre></td></tr></table></figure></li>
<li><code>uptime</code><ul>
<li>显示 cpu 负载信息 <code>当前时间 系统运行时间 登录用户数 系统负载</code></li>
</ul>
</li>
<li><code>w</code><ul>
<li>显示 cpu 负载 及 登录用户信息</li>
</ul>
</li>
</ol>
<h2 id="4-2-内存"><a href="#4-2-内存" class="headerlink" title="4.2 内存"></a>4.2 内存</h2><h3 id="1-说明"><a href="#1-说明" class="headerlink" title="1 说明"></a>1 说明</h3><ol>
<li>通常 <code>空闲内存 &gt; 可用内存</code>，因为有时缓冲或缓存会空出一些内存，但是无法使用，这部分内存算在空闲内存上而不算在可用内存上<ul>
<li>空闲内存：没有使用的内存</li>
<li>可用内存：没有使用的内存中可以使用的内存</li>
</ul>
</li>
</ol>
<h3 id="2-查看内存信息"><a href="#2-查看内存信息" class="headerlink" title="2 查看内存信息"></a>2 查看内存信息</h3><ol>
<li><code>/proc/meminfo</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MemTotal:         # 总内存</span><br><span class="line">MemFree:          # 空闲内存</span><br><span class="line">MemAvailable:     # 可用内存</span><br><span class="line">Buffers:          # 缓冲</span><br><span class="line">Cached:           # 缓存</span><br><span class="line">SwapCached:       # 交换分区使用情况</span><br></pre></td></tr></table></figure></li>
<li><code>free [OPTION]</code><ul>
<li>显示内存信息</li>
<li><code>OPTION</code><ul>
<li><code>-h</code>, <code>--human</code><ul>
<li>以人类可读的方式显示信息</li>
</ul>
</li>
<li><code>-b</code>, <code>--bytes</code><ul>
<li>以 byte 为单位显示</li>
</ul>
</li>
<li><code>-k</code>, <code>--kilo</code><ul>
<li>以 kb 为单位显示，默认</li>
</ul>
</li>
<li><code>-m</code>, <code>--mega</code><ul>
<li>以 mb 为单位显示</li>
</ul>
</li>
<li><code>-g</code>, <code>--giga</code><ul>
<li>以 gb 为单位显示</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="4-3-磁盘"><a href="#4-3-磁盘" class="headerlink" title="4.3 磁盘"></a>4.3 磁盘</h2><h3 id="1-proc-mounts"><a href="#1-proc-mounts" class="headerlink" title="1 /proc/mounts"></a>1 <code>/proc/mounts</code></h3><ul>
<li>磁盘挂载信息</li>
</ul>
<h3 id="2-df"><a href="#2-df" class="headerlink" title="2 df"></a>2 df</h3><ul>
<li><code>df [OPTION] [file]</code><ul>
<li>查看磁盘信息及挂载信息</li>
<li><code>option</code><ul>
<li><code>-h</code>, <code>--human</code><ul>
<li>以人类可读的方式显示信息</li>
</ul>
</li>
<li><code>-a</code>, <code>--all</code><ul>
<li>显示所有文件系统信息</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="五-系统信息"><a href="#五-系统信息" class="headerlink" title="五 系统信息"></a>五 系统信息</h1><ol>
<li><code>/etc/reedat-release</code><ul>
<li>系统版本信息（简略）</li>
</ul>
</li>
<li><code>/etc/os-release</code><ul>
<li>系统版本信息（详细）</li>
</ul>
</li>
<li><code>uname -a</code><ul>
<li>查看系统与内核相关信息</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/anyeansan.github.io/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/anyeansan.github.io/">1</a><span class="space">&hellip;</span><a class="page-number" href="/anyeansan.github.io/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/anyeansan.github.io/page/6/">6</a><a class="extend next" rel="next" href="/anyeansan.github.io/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          秘笈
        </li>
        <li class="sidebar-nav-overview">
          安₃
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="安₃"
      src="/anyeansan.github.io/images/an3.png">
  <p class="site-author-name" itemprop="name">安₃</p>
  <div class="site-description" itemprop="description">一蓑烟雨任平生</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/anyeansan.github.io/archives/">
        
          <span class="site-state-item-count">55</span>
          <span class="site-state-item-name">书斋</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/anyeansan.github.io/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">门派</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/anyeansan.github.io/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-star-half-full"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">安₃</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/anyeansan.github.io/lib/anime.min.js"></script>
  <script src="/anyeansan.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/anyeansan.github.io/lib/velocity/velocity.ui.min.js"></script>
<script src="/anyeansan.github.io/js/utils.js"></script><script src="/anyeansan.github.io/js/motion.js"></script>
<script src="/anyeansan.github.io/js/schemes/pisces.js"></script>
<script src="/anyeansan.github.io/js/next-boot.js"></script>



  




  <script src="/anyeansan.github.io/js/local-search.js"></script>













  

  

</body>
</html>

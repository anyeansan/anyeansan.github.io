<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/anyeansan.github.io/images/an-apple-180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/anyeansan.github.io/images/an-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/anyeansan.github.io/images/an-16.png">
  <link rel="mask-icon" href="/anyeansan.github.io/images/an.svg" color="#222">
  <link rel="alternate" href="/anyeansan.github.io/atom.xml" title="安₃" type="application/atom+xml">

<link rel="stylesheet" href="/anyeansan.github.io/css/main.css">


<link rel="stylesheet" href="/anyeansan.github.io/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/anyeansan.github.io/',
    scheme: 'Gemini',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"hide","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="一蓑烟雨任平生">
<meta property="og:type" content="website">
<meta property="og:title" content="安₃">
<meta property="og:url" content="https:&#x2F;&#x2F;anyeansan.github.io&#x2F;page&#x2F;3&#x2F;">
<meta property="og:site_name" content="安₃">
<meta property="og:description" content="一蓑烟雨任平生">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://anyeansan.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>安₃</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/anyeansan.github.io/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">安₃</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">我未成名君未嫁 可能俱是不如人</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/anyeansan.github.io/" rel="section"><i class="fa fa-fw fa-home"></i>安府</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/anyeansan.github.io/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>书斋</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/anyeansan.github.io/categories/" rel="section"><i class="fa fa-fw fa-th"></i>门派</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/anyeansan" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/MySql-SQL%E8%AF%AD%E5%8F%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/MySql-SQL%E8%AF%AD%E5%8F%A5/" class="post-title-link" itemprop="url">MySql SQL语句</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 21:23:46 / 修改时间：21:30:16" itemprop="dateCreated datePublished" datetime="2020-03-30T21:23:46+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/DB/" itemprop="url" rel="index">
                    <span itemprop="name">DB</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/DB/MySql/" itemprop="url" rel="index">
                    <span itemprop="name">MySql</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-SQL（Structure-Query-Language）"><a href="#一-SQL（Structure-Query-Language）" class="headerlink" title="一 SQL（Structure Query Language）"></a>一 SQL（Structure Query Language）</h1><h2 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h2><ol>
<li>结构化查询语言，关系型数据库通用命令</li>
<li>遵循SQL92标准</li>
</ol>
<h2 id="1-2-严格模式（SQL-MODE）"><a href="#1-2-严格模式（SQL-MODE）" class="headerlink" title="1.2 严格模式（SQL_MODE）"></a>1.2 严格模式（SQL_MODE）</h2><ol>
<li><code>set sql_mode = &#39;traditional&#39;</code><ul>
<li>设置严格模式，默认</li>
</ul>
</li>
<li><code>set sql_mode = &#39;&#39;</code><ul>
<li>关闭严格模式</li>
</ul>
</li>
</ol>
<h2 id="1-3-SQL-规范"><a href="#1-3-SQL-规范" class="headerlink" title="1.3 SQL 规范"></a>1.3 SQL 规范</h2><h3 id="1-注释"><a href="#1-注释" class="headerlink" title="1 注释"></a>1 注释</h3><ul>
<li><code>--</code><ul>
<li>单行</li>
</ul>
</li>
<li><code>/* */</code><ul>
<li>多行</li>
</ul>
</li>
<li><code>#</code><ul>
<li>mysql 特有</li>
</ul>
</li>
</ul>
<h3 id="2-编码规范"><a href="#2-编码规范" class="headerlink" title="2 编码规范"></a>2 编码规范</h3><h4 id="1-库"><a href="#1-库" class="headerlink" title="1 库"></a>1 库</h4><ol>
<li>关键字 和 函数名 大写</li>
<li>库名 小写，不能以数字开头，不能使用关键字和保留字</li>
<li>必须设置字符集</li>
</ol>
<h4 id="2-表"><a href="#2-表" class="headerlink" title="2 表"></a>2 表</h4><ol>
<li>关键字 和 函数名 大写</li>
<li>表名 小写，不能以数字开头，不能使用关键字和保留字</li>
<li>选择合适的数据类型及长度</li>
<li>每个列设置 <code>NOT NULL + DEFAULT</code><ol>
<li>数值默认为 <code>0</code> 或其它有效数字</li>
<li>字符串默认为空格字符串 <code>&#39; &#39;</code> 或其它有效字符串</li>
</ol>
</li>
<li>enum 类型不要用于数值，只能用于字符串</li>
<li>每个列设置注释</li>
<li>表必须设置存储引擎和字符集</li>
<li>主键列最好是无关数值列，且自增长</li>
</ol>
<h2 id="1-4-SQL-常用分类"><a href="#1-4-SQL-常用分类" class="headerlink" title="1.4 SQL 常用分类"></a>1.4 SQL 常用分类</h2><ol>
<li>DQL（Data Query Language）<ul>
<li>数据查询语言，如 <code>select show</code></li>
</ul>
</li>
<li>DDL（Data Definition Language）<ul>
<li>数据定义语言，如 <code>create alter drop truncate</code></li>
</ul>
</li>
<li>DML（Data Manipulation Language）<ul>
<li>数据操作语言，如 <code>insert update delete</code></li>
</ul>
</li>
<li>DCL（Data Control Language）<ul>
<li>数据控制语言，如 <code>grant revoke</code></li>
</ul>
</li>
</ol>
<h1 id="二-库-操作"><a href="#二-库-操作" class="headerlink" title="二 库 操作"></a>二 库 操作</h1><h2 id="2-1-查"><a href="#2-1-查" class="headerlink" title="2.1 查"></a>2.1 查</h2><ol>
<li><code>show databases</code><ul>
<li>查看所有库</li>
</ul>
</li>
<li><code>show create database db_name</code><ul>
<li>查看建库语句</li>
</ul>
</li>
<li><code>show variables like &#39;character_set_database&#39;</code><ul>
<li>查看当前数据库字符集</li>
</ul>
</li>
<li><code>show variables like &#39;collation_database&#39;</code><ul>
<li>查看当前数据库校对集</li>
</ul>
</li>
</ol>
<h2 id="2-2-增"><a href="#2-2-增" class="headerlink" title="2.2 增"></a>2.2 增</h2><ul>
<li><code>create database [if not exists] 库名 [charset 字符集 collate 校对集]</code></li>
</ul>
<h2 id="2-3-删"><a href="#2-3-删" class="headerlink" title="2.3 删"></a>2.3 删</h2><ul>
<li><code>drop database [if exists] 库名</code></li>
</ul>
<h2 id="2-4-改"><a href="#2-4-改" class="headerlink" title="2.4 改"></a>2.4 改</h2><ul>
<li><code>alter database 库名 [charset 字符集 collate 校对集]</code><ol>
<li>库名不可修改</li>
<li>字符集和校对集可修改</li>
</ol>
</li>
</ul>
<h1 id="三-表-操作"><a href="#三-表-操作" class="headerlink" title="三 表 操作"></a>三 表 操作</h1><h2 id="3-1-指定库"><a href="#3-1-指定库" class="headerlink" title="3.1 指定库"></a>3.1 指定库</h2><ol>
<li><code>use 库名</code><ol>
<li>指定当前使用的数据库</li>
<li>表依赖于库，任何一个表都必须指定数据库<ul>
<li><code>库名.表名</code><ul>
<li>在 sql 语句中显式的指定</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li><code>select database()</code><ul>
<li>查看正在使用的数据库</li>
</ul>
</li>
</ol>
<h2 id="3-2-查"><a href="#3-2-查" class="headerlink" title="3.2 查"></a>3.2 查</h2><ol>
<li><code>show tables [from 库名]</code><ul>
<li>查看库（默认为当前库）中的所有表</li>
</ul>
</li>
<li><code>show create table 表名</code><ul>
<li>查看当前库中指定的表</li>
</ul>
</li>
<li><code>desc 表名</code><ul>
<li>查看表结构</li>
</ul>
</li>
<li><code>show columns from 表名</code><ul>
<li>查看表结构</li>
</ul>
</li>
</ol>
<h2 id="3-3-增"><a href="#3-3-增" class="headerlink" title="3.3 增"></a>3.3 增</h2><ol>
<li>.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table [if not exists] 表名(</span><br><span class="line">	列名 列属性,</span><br><span class="line">	......</span><br><span class="line">	列名 列属性</span><br><span class="line">)[表属性]</span><br></pre></td></tr></table></figure>
<ul>
<li>表属性<ol>
<li><code>charset 字符集</code></li>
<li><code>collate 校对集</code></li>
<li><code>engine 存储引擎</code></li>
</ol>
</li>
</ul>
</li>
<li><code>create table 新表名 like 旧表名</code><ul>
<li>根据已有表结构创建新表</li>
</ul>
</li>
</ol>
<h2 id="3-4-删"><a href="#3-4-删" class="headerlink" title="3.4 删"></a>3.4 删</h2><ul>
<li><code>drop table [if exists] 表名</code></li>
</ul>
<h2 id="3-5-改"><a href="#3-5-改" class="headerlink" title="3.5 改"></a>3.5 改</h2><h3 id="1-表名"><a href="#1-表名" class="headerlink" title="1 表名"></a>1 表名</h3><ol>
<li><code>rename table 表名 to 新表名</code></li>
<li><code>alter table 表名 rename 新表名</code></li>
</ol>
<h3 id="2-表属性"><a href="#2-表属性" class="headerlink" title="2 表属性"></a>2 表属性</h3><ol>
<li><code>alter table 表名 表属性</code></li>
</ol>
<h3 id="3-表结构"><a href="#3-表结构" class="headerlink" title="3 表结构"></a>3 表结构</h3><ol>
<li><code>alter table 表名 add [column] 列名 列属性 [位置]</code><ul>
<li>默认在最后新增一列</li>
<li>位置<ul>
<li><code>first</code></li>
<li><code>after 列名</code></li>
</ul>
</li>
</ul>
</li>
<li><code>alter table 表名 add [column] (列名 列属性, ...)</code><ul>
<li>新增多列</li>
</ul>
</li>
<li><code>alter table 表名 drop [column] 列名</code><ul>
<li>删除列</li>
</ul>
</li>
<li><code>alter table 表名 modify 列名 列属性</code><ul>
<li>修改列属性</li>
</ul>
</li>
<li><code>alter table 表名 change 列名 新列名 列属性</code><ul>
<li>修改列名和列属性</li>
</ul>
</li>
</ol>
<h1 id="四-数据操作-DML"><a href="#四-数据操作-DML" class="headerlink" title="四 数据操作 DML"></a>四 数据操作 DML</h1><h2 id="4-1-insert"><a href="#4-1-insert" class="headerlink" title="4.1 insert"></a>4.1 insert</h2><ol>
<li><code>insert [into] 表名(列1,列2,列3,...) values(值1,值2,值3,...)[,(值1,值2,值3,...),...]</code><ol>
<li>列与值一一对应</li>
<li>非数字值，要加引号（建议单引号）</li>
<li>自增列可以用 <code>null / default</code> 占位，默认列可以用 <code>default</code> 占位</li>
<li>如果为表的所有列插入数据，可以省略 <code>(列1,列2,列3,...)</code></li>
</ol>
</li>
<li><code>insert [into] 表名 set 列=值,...</code><ul>
<li>一次插入一条记录，值可以使用子查询</li>
</ul>
</li>
</ol>
<h2 id="4-2-update"><a href="#4-2-update" class="headerlink" title="4.2 update"></a>4.2 update</h2><ul>
<li><code>update 表名 set 列 = 值 [where条件]</code><ul>
<li>不加条件会更新所有行</li>
</ul>
</li>
</ul>
<h2 id="4-3-delete"><a href="#4-3-delete" class="headerlink" title="4.3 delete"></a>4.3 delete</h2><ol>
<li><code>delete from 表名 [where条件]</code><ul>
<li>若没有条件，表示删除所有行</li>
</ul>
</li>
<li><code>truncate [table] 表名;</code><ul>
<li>清空表</li>
</ul>
</li>
</ol>
<ul>
<li>truncate 和 delete 区别<ul>
<li>DELETE <ol>
<li>DML 操作，是逻辑性质删除，逐行删除速度慢</li>
<li>删除表中的数据，表结构还在，删除后的数据可以找回</li>
<li>自增长主键不会重置</li>
</ol>
</li>
<li>TRUNCATE <ol>
<li>DDL 操作，对表段中的数据页进行清空，速度快</li>
<li>相当于把表扔了又创建一个同样表结构的新表</li>
<li>自增长主键会重置</li>
</ol>
</li>
</ul>
</li>
</ul>
<h1 id="五-数据操作-DQL"><a href="#五-数据操作-DQL" class="headerlink" title="五 数据操作 DQL"></a>五 数据操作 DQL</h1><h2 id="5-1-语法"><a href="#5-1-语法" class="headerlink" title="5.1 语法"></a>5.1 语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select [选项] 表达式[, [选项] 表达式, ...]</span><br><span class="line">[</span><br><span class="line">	from 数据源 </span><br><span class="line">	[where 子句]</span><br><span class="line">	[group by 子句]</span><br><span class="line">	[having 子句]</span><br><span class="line">	[order by 子句]</span><br><span class="line">	[limit 子句]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="5-2-select-子句"><a href="#5-2-select-子句" class="headerlink" title="5.2 select 子句"></a>5.2 select 子句</h2><h3 id="1-选项"><a href="#1-选项" class="headerlink" title="1  选项"></a>1  选项</h3><ol>
<li><code>all</code><ul>
<li>保留所有结果（默认）</li>
</ul>
</li>
<li><code>distinct</code><ul>
<li>去除重复</li>
</ul>
</li>
<li><code>distinct row</code></li>
<li><code>top</code></li>
</ol>
<h3 id="2-表达式"><a href="#2-表达式" class="headerlink" title="2 表达式"></a>2 表达式</h3><ol>
<li>每一个表达式代表一列，可以是列名，变量，函数 …</li>
<li><code>*</code><ul>
<li>代表所有列</li>
</ul>
</li>
</ol>
<h3 id="3-别名"><a href="#3-别名" class="headerlink" title="3 别名"></a>3 别名</h3><ul>
<li><code>[as] 别名</code> <ol>
<li>表别名<ul>
<li>可用于全局</li>
</ul>
</li>
<li>列别名<ul>
<li>别名可用于 <code>having</code>，<code>order by</code>  </li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="5-2-from-子句"><a href="#5-2-from-子句" class="headerlink" title="5.2 from 子句"></a>5.2 from 子句</h2><ul>
<li>本质上只要数据类似二维表，都可以作为数据源<ol>
<li>单表数据源</li>
<li>多表数据源</li>
<li>查询语句</li>
</ol>
</li>
</ul>
<h2 id="5-4-where-子句"><a href="#5-4-where-子句" class="headerlink" title="5.4 where 子句"></a>5.4 where 子句</h2><h3 id="1-比较运算符"><a href="#1-比较运算符" class="headerlink" title="1 比较运算符"></a>1 比较运算符</h3><ul>
<li><code>&gt; &gt;= &lt; &lt;= = != ...</code></li>
</ul>
<h3 id="2-逻辑运算符"><a href="#2-逻辑运算符" class="headerlink" title="2 逻辑运算符"></a>2 逻辑运算符</h3><ul>
<li><code>and or not</code></li>
</ul>
<h3 id="3-语句"><a href="#3-语句" class="headerlink" title="3 语句"></a>3 语句</h3><ol>
<li><code>like pattern</code><ul>
<li>模糊查询</li>
<li><code>pattern</code><ul>
<li><code>%</code>：匹配任意个任意字符</li>
<li><code>_</code>：匹配一个任意字符</li>
</ul>
</li>
</ul>
</li>
<li><code>between ... and ...</code></li>
<li><code>is null</code></li>
<li><code>is not null</code></li>
<li><code>is boolean_value</code><ul>
<li>判断一个值的布尔值是否为 <code>boolean_value</code></li>
<li><code>boolean_value</code><ul>
<li><code>true</code></li>
<li><code>false</code></li>
<li><code>unknown</code></li>
</ul>
</li>
</ul>
</li>
<li><code>in()</code><ul>
<li>匹配其中任意一个值，则为 true，类似逻辑或</li>
</ul>
</li>
<li><code>any()</code><ul>
<li>必须配合比较运算符使用，代表（大于, 小于, …）其中任意一个值，则为 true</li>
</ul>
</li>
<li><code>some()</code><ul>
<li>是 <code>any()</code> 的别名</li>
</ul>
</li>
<li><code>all()</code><ul>
<li>必须配合比较运算符使用，代表（大于, 小于, …）其中所有值，则为 true</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">any()</th>
<th align="center">all()</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>&gt; &gt;=</code></td>
<td align="center">最小值</td>
<td align="center">最大值</td>
</tr>
<tr>
<td align="center"><code>&lt; &lt;=</code></td>
<td align="center">最大值</td>
<td align="center">最小值</td>
</tr>
<tr>
<td align="center"><code>=</code></td>
<td align="center">任意值</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center"><code>&lt;&gt; !=</code></td>
<td align="center">-</td>
<td align="center">任意值</td>
</tr>
</tbody></table>
<h2 id="5-5-group-by-子句"><a href="#5-5-group-by-子句" class="headerlink" title="5.5 group by 子句"></a>5.5 group by 子句</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>通常配合聚合函数使用</li>
<li>可以有多个分组列，以逗号分隔</li>
<li>select 中查询的列只能有三种<ol>
<li>分组的列</li>
<li>聚合函数的列</li>
<li>与分组列一对一的列</li>
</ol>
</li>
</ol>
<h3 id="2-group-by-原理"><a href="#2-group-by-原理" class="headerlink" title="2 group by 原理"></a>2 group by 原理</h3><ol>
<li>先按照分组列 排序、去重，形成一张虚拟表</li>
<li>虚拟表的结构：分组列与其它列的对应关系<ol>
<li>分组列一对一的列可以直接查询（即与分组列对应的列只有一行记录）</li>
<li>分组列一对多的列不能直接查询（即与分组列对应的列有多行记录）<ol>
<li>使用聚合函数将多行记录统计为一行记录</li>
<li>使用 <code>group_concat()</code> 将多行记录合并连接为一行记录</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="3-聚合函数"><a href="#3-聚合函数" class="headerlink" title="3 聚合函数"></a>3 聚合函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>max()</code></td>
<td>列最大值</td>
</tr>
<tr>
<td><code>min()</code></td>
<td>列最小值</td>
</tr>
<tr>
<td><code>count()</code></td>
<td>列记录总数</td>
</tr>
<tr>
<td><code>sum()</code></td>
<td>列和</td>
</tr>
<tr>
<td><code>avg()</code></td>
<td>列平均值</td>
</tr>
<tr>
<td><code>group_concat()</code></td>
<td>将group by产生的同一个分组中的其它列的所有值连接成一个字符串（多行记录变一行）</td>
</tr>
<tr>
<td>* <code>count()</code></td>
<td></td>
</tr>
<tr>
<td>1. <code>count(1) count(*) count(&#39;abc&#39;) ...</code></td>
<td></td>
</tr>
<tr>
<td>* 此类参数表示数数，有一行记录总数就+1，也就是说总数与记录内容无关</td>
<td></td>
</tr>
<tr>
<td>* 记录总数（包含空行）</td>
<td></td>
</tr>
<tr>
<td>2. <code>count(列名)</code></td>
<td></td>
</tr>
<tr>
<td>* 记录总数（不包含空行）</td>
<td></td>
</tr>
</tbody></table>
<h2 id="5-6-having-子句"><a href="#5-6-having-子句" class="headerlink" title="5.6 having 子句"></a>5.6 having 子句</h2><ul>
<li>having 是对其之前子句筛选出的数据进行条件过滤</li>
</ul>
<h2 id="5-7-order-by子句"><a href="#5-7-order-by子句" class="headerlink" title="5.7 order by子句"></a>5.7 order by子句</h2><table>
<thead>
<tr>
<th>语句</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>asc</code></td>
<td>升序（默认）</td>
</tr>
<tr>
<td><code>desc</code></td>
<td>降序</td>
</tr>
<tr>
<td>1. 排序依赖校对集</td>
<td></td>
</tr>
<tr>
<td>2. <code>order by 列1 asc,列2 desc...</code></td>
<td></td>
</tr>
<tr>
<td>* 多个排序条件时，前一个排序结果相同才会按照下一个条件排序</td>
<td></td>
</tr>
</tbody></table>
<h2 id="5-8-limit-子句"><a href="#5-8-limit-子句" class="headerlink" title="5.8 limit 子句"></a>5.8 limit 子句</h2><ol>
<li><code>limit [startIndex] length</code><ul>
<li>从 <code>startIndex</code> 开始，取 <code>length</code> 条数据。</li>
<li><code>startIndex</code><ul>
<li>起始索引，若省略相当于 0。</li>
<li>数据库索引从 0 开始</li>
</ul>
</li>
</ul>
</li>
<li><code>limit length offset startIndex</code></li>
</ol>
<h2 id="5-9-union-amp-union-all"><a href="#5-9-union-amp-union-all" class="headerlink" title="5.9 union &amp; union all"></a>5.9 union &amp; union all</h2><ul>
<li>合并多个查询结果集</li>
<li>一般情况下,会将 <code>in()</code> 或者 <code>OR</code> 语句 改写成 <code>UNION ALL</code> ,来提高性能</li>
</ul>
<ol>
<li><code>union</code><ul>
<li>去除重复</li>
</ul>
</li>
<li><code>union all</code><ul>
<li>保留所有</li>
</ul>
</li>
</ol>
<h2 id="5-10-查询过程"><a href="#5-10-查询过程" class="headerlink" title="5.10 查询过程"></a>5.10 查询过程</h2><ol>
<li>from<ul>
<li>确定数据源</li>
</ul>
</li>
<li>where<ol>
<li>where 是直接对表中数据进行判断，所以只能使用表中的列，且不能使用别名</li>
<li>where 从表中查询出符合条件的数据形成一个概念中的临时结果集，存入内存</li>
<li>where 保证进入内存的数据都是有效的</li>
</ol>
</li>
<li>group by<ul>
<li>按照指定列进行分组</li>
</ul>
</li>
<li>select<ul>
<li>处理表达式（函数, 别名, 运算 …），形成结果集</li>
</ul>
</li>
<li>having<ul>
<li>对结果集进行过滤</li>
</ul>
</li>
<li>order by<ul>
<li>对过滤后的结果集进行排序</li>
</ul>
</li>
<li>limit<ul>
<li>对排序后的结果集进行条目限制，形成最终结果集</li>
</ul>
</li>
</ol>
<h1 id="六-多表连接"><a href="#六-多表连接" class="headerlink" title="六 多表连接"></a>六 多表连接</h1><h2 id="6-1-语法"><a href="#6-1-语法" class="headerlink" title="6.1 语法"></a>6.1 语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">表1 </span><br><span class="line">&#123;[inner | cross] | &#123;left | right&#125; [outer]&#125;  join</span><br><span class="line">表2</span><br><span class="line">on 条件表达式</span><br><span class="line">[</span><br><span class="line">	&#123;[inner | cross] | &#123;left | right&#125; [outer]&#125;  join</span><br><span class="line">	表3</span><br><span class="line">	on 条件表达式</span><br><span class="line">	......</span><br><span class="line">]</span><br><span class="line">[where 子句]</span><br><span class="line">[group by 子句]</span><br><span class="line">[having 子句]</span><br><span class="line">[order by 子句]</span><br><span class="line">[limit 子句]</span><br></pre></td></tr></table></figure>
<ol>
<li>多表连接可以用在<ol>
<li>多表查询</li>
<li>多表更新</li>
<li>多表删除</li>
</ol>
</li>
<li><strong>自连接</strong><ul>
<li>连接的表是同一张表。</li>
</ul>
</li>
</ol>
<h2 id="6-2-内连接"><a href="#6-2-内连接" class="headerlink" title="6.2 内连接"></a>6.2 内连接</h2><h3 id="1-语法"><a href="#1-语法" class="headerlink" title="1 语法"></a>1 语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 表1 [inner | cross] join 表2 on 条件</span><br><span class="line">2 from 表1,表2 where 条件</span><br></pre></td></tr></table></figure>
<ol>
<li>查出多表中符合条件的数据，即交集</li>
<li>内连接为左外连接与右外连接的交集。</li>
<li>内连接如果没有条件，结果会形成笛卡儿积</li>
</ol>
<h3 id="2-笛卡尔积"><a href="#2-笛卡尔积" class="headerlink" title="2 笛卡尔积"></a>2 笛卡尔积</h3><ol>
<li>笛卡儿积是元素相组合，不是数学相乘</li>
<li>数学中的笛卡儿积<ul>
<li>集合A有m个元素，集合B有n个元素，则笛卡尔积共 <code>m * n</code>个元素</li>
<li>例<ul>
<li>集合 A = {a, b}，集合 B = {0, 1, 2}</li>
<li>两个集合的笛卡尔积 = {(a, 0), (a, 1), (a, 2), (b, 0), (b, 1), (b, 2)}</li>
</ul>
</li>
</ul>
</li>
<li>数据库中的笛卡儿积<ul>
<li>表 A 有 m 条数据，表 B 中有 n 条数据，则笛卡尔积结果：<ol>
<li>行（记录数）= <code>m * n</code></li>
<li>列 = <code>表A的列数 + 表B的列数</code></li>
</ol>
</li>
</ul>
</li>
</ol>
<h2 id="6-3-外连接"><a href="#6-3-外连接" class="headerlink" title="6.3 外连接"></a>6.3 外连接</h2><h3 id="1-左外连接"><a href="#1-左外连接" class="headerlink" title="1 左外连接"></a>1 左外连接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表1 left [outer] join 表2 on 条件</span><br></pre></td></tr></table></figure>
<ul>
<li>以左表为主，查出左表的全部记录和右表符合条件的记录，不符合条件的字段置为 <code>null</code></li>
</ul>
<h3 id="2-右外连接"><a href="#2-右外连接" class="headerlink" title="2 右外连接"></a>2 右外连接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表1 right [outer] join 表2 on 条件</span><br></pre></td></tr></table></figure>
<ul>
<li>以右表为主，查出右表的全部记录和左表符合条件的记录，不符合条件的字段置为 <code>null</code></li>
</ul>
<h2 id="6-4-例"><a href="#6-4-例" class="headerlink" title="6.4 例"></a>6.4 例</h2><h3 id="1-原始表-t1-amp-t2"><a href="#1-原始表-t1-amp-t2" class="headerlink" title="1 原始表 t1 &amp; t2"></a>1 原始表 t1 &amp; t2</h3><table>
<thead>
<tr>
<th>id</th>
<th>name</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>a</td>
</tr>
<tr>
<td>2</td>
<td>b</td>
</tr>
<tr>
<td>3</td>
<td>c</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>id</th>
<th>age</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>D</td>
</tr>
<tr>
<td>3</td>
<td>E</td>
</tr>
<tr>
<td>4</td>
<td>F</td>
</tr>
</tbody></table>
<h3 id="2-内连接"><a href="#2-内连接" class="headerlink" title="2 内连接"></a>2 内连接</h3><ul>
<li><code>select * from t1 inner join t2 on t1.id=t2.id;</code></li>
</ul>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>id</th>
<th>age</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>a</td>
<td>2</td>
<td>D</td>
</tr>
<tr>
<td>3</td>
<td>c</td>
<td>3</td>
<td>E</td>
</tr>
</tbody></table>
<h3 id="3-左外连接"><a href="#3-左外连接" class="headerlink" title="3 左外连接"></a>3 左外连接</h3><ul>
<li><code>select * from t1 left join t2 on t1.id=t2.id;</code></li>
</ul>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>id</th>
<th>age</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>a</td>
<td>null</td>
<td>null</td>
</tr>
<tr>
<td>2</td>
<td>b</td>
<td>2</td>
<td>D</td>
</tr>
<tr>
<td>3</td>
<td>c</td>
<td>3</td>
<td>E</td>
</tr>
</tbody></table>
<h3 id="4-右外连接"><a href="#4-右外连接" class="headerlink" title="4 右外连接"></a>4 右外连接</h3><ul>
<li><code>select * from t1 right join t2 on t1.id=t2.id;</code></li>
</ul>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>id</th>
<th>age</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>b</td>
<td>2</td>
<td>D</td>
</tr>
<tr>
<td>3</td>
<td>c</td>
<td>3</td>
<td>E</td>
</tr>
<tr>
<td>null</td>
<td>null</td>
<td>4</td>
<td>F</td>
</tr>
</tbody></table>
<h3 id="5-全连接（-full-join-mysql不支持）"><a href="#5-全连接（-full-join-mysql不支持）" class="headerlink" title="5 全连接（(full join) mysql不支持）"></a>5 全连接（(full join) mysql不支持）</h3><ul>
<li><code>select * from t1 full join t2 on t1.id=t2.id;</code></li>
</ul>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>id</th>
<th>age</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>a</td>
<td>null</td>
<td>null</td>
</tr>
<tr>
<td>2</td>
<td>b</td>
<td>2</td>
<td>D</td>
</tr>
<tr>
<td>3</td>
<td>c</td>
<td>3</td>
<td>E</td>
</tr>
<tr>
<td>null</td>
<td>null</td>
<td>4</td>
<td>F</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/MySql-%E5%B1%9E%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/MySql-%E5%B1%9E%E6%80%A7/" class="post-title-link" itemprop="url">MySql 属性</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 21:20:53 / 修改时间：21:23:14" itemprop="dateCreated datePublished" datetime="2020-03-30T21:20:53+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/DB/" itemprop="url" rel="index">
                    <span itemprop="name">DB</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/DB/MySql/" itemprop="url" rel="index">
                    <span itemprop="name">MySql</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-字符集-charset"><a href="#一-字符集-charset" class="headerlink" title="一 字符集 charset"></a>一 字符集 charset</h1><h2 id="1-1-MySQL-的-UTF-8"><a href="#1-1-MySQL-的-UTF-8" class="headerlink" title="1.1 MySQL 的 UTF-8"></a>1.1 MySQL 的 UTF-8</h2><ol>
<li>MySQL 中的 <code>utf8mb4</code> 才是真正的 <code>UTF-8</code>，而 <code>utf8</code> 是 <code>utf8mb3</code> 的别名，是 MySQL 脑残的产物</li>
<li>MySQL 表示未来会删除 <code>utf8mb3</code>，然后 <code>utf8</code> 指代 <code>utf8mb4</code>（真是个小机灵鬼）</li>
</ol>
<h2 id="1-2-字符集说明"><a href="#1-2-字符集说明" class="headerlink" title="1.2 字符集说明"></a>1.2 字符集说明</h2><ol>
<li><code>show charset</code><ul>
<li>查看数据库支持的字符集</li>
</ul>
</li>
<li><code>show variables like &#39;character%&#39;</code><ul>
<li>查看数据库默认字符集设置</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>配置</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>character_set_database</code></td>
<td>数据库默认字符集，若没设置则使用 <code>character_set_server</code></td>
</tr>
<tr>
<td><code>character_set_client</code></td>
<td>客户端字符集</td>
</tr>
<tr>
<td><code>character_set_connection</code></td>
<td>客户端连接数据库使用的字符集</td>
</tr>
<tr>
<td><code>character_set_results</code></td>
<td>数据库给客户端返回数据使用的字符集，若没设置则使用 <code>character_set_server</code></td>
</tr>
<tr>
<td><code>character_set_server</code></td>
<td>服务器字符集，建议由系统自己管理，不要人为定义</td>
</tr>
<tr>
<td><code>character_set_filesystem</code></td>
<td>用于将系统文件名转化成此字符集，默认 <code>binary</code> 不做转换（建议不改动）</td>
</tr>
<tr>
<td><code>character_set_system</code></td>
<td>数据库系统用来存储元数据的编码，通常是 <code>utf8</code>（不要改动）</td>
</tr>
<tr>
<td><code>character_sets_dir</code></td>
<td>字符集安装目录</td>
</tr>
</tbody></table>
<h2 id="1-3-乱码问题"><a href="#1-3-乱码问题" class="headerlink" title="1.3 乱码问题"></a>1.3 乱码问题</h2><h3 id="1-涉及的字符集"><a href="#1-涉及的字符集" class="headerlink" title="1 涉及的字符集"></a>1 涉及的字符集</h3><ol>
<li>数据本身字符集</li>
<li>客户端字符集 <code>character_set_client</code></li>
<li>连接字符集 <code>character_set_connection</code></li>
<li>数据库字符集 <code>character_set_database</code></li>
<li>结果字符集 <code>character_set_results</code></li>
</ol>
<h3 id="2-存"><a href="#2-存" class="headerlink" title="2 存"></a>2 存</h3><ul>
<li><code>数据字符集</code> → <code>客户端字符集</code> → <code>连接字符集</code> → <code>数据库字符集</code><ol>
<li><code>数据本身字符集 = 客户端字符集</code>，若不一致则会乱码</li>
<li>将数据从 <code>客户端字符集</code> 转为 <code>连接字符集</code>，若一致则不转换</li>
<li>将数据从 <code>连接字符集</code> 转为 <code>数据库字符集</code>，若一致则不转换</li>
<li>存数据最终是按照 <code>数据库字符集</code> 存储</li>
</ol>
</li>
<li>结论<ol>
<li>保证 <code>数据本身字符集 = 客户端字符集</code></li>
<li>连接字符集不要太小导致转换损失数据</li>
</ol>
</li>
</ul>
<h3 id="3-取"><a href="#3-取" class="headerlink" title="3 取"></a>3 取</h3><ul>
<li><code>数据库字符集</code> → <code>连接字符集</code> → <code>结果字符集</code> → <code>客户端字符集</code><ol>
<li>将数据从 <code>数据库字符集</code> 转为 <code>连接字符集</code> ，若一致则不转换</li>
<li>将数据从 <code>连接字符集</code> 转为 <code>结果字符集</code>，若一致则不转换</li>
<li>取数据最终是按照结果字符集返回给客户端</li>
<li>比较 <code>结果字符集</code> 与 <code>客户端字符集</code> 是否一致</li>
</ol>
</li>
<li>结论<ol>
<li>保证 <code>结果字符集 = 客户端字符集</code></li>
<li>连接字符集不要太小导致转换损失数据</li>
</ol>
</li>
</ul>
<h1 id="二-校对集-collation"><a href="#二-校对集-collation" class="headerlink" title="二 校对集 collation"></a>二 校对集 collation</h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><ol>
<li>校对集，就是数据的比较方式，或者排序规则</li>
<li>只有当数据产生比较的时候，校对集才会生效</li>
<li>必须在没有数据之前声明好校对集，如果有了数据再进行校对集修改，修改无效</li>
<li>校对集依赖字符集，每个字符集都对应 1 或 多个校对集<ul>
<li><code>utf8mb4</code> 默认校对集 <code>utf8mb4_general_ci</code></li>
</ul>
</li>
</ol>
<h2 id="2-2-校对集格式"><a href="#2-2-校对集格式" class="headerlink" title="2.2 校对集格式"></a>2.2 校对集格式</h2><ol>
<li><code>show collation</code><ul>
<li>查看数据库支持的校对集</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>格式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>_bin</code></td>
<td><code>binary</code>，二进制比较, 大小写敏感（适用比较特殊的数据，如拼音，日文…）</td>
</tr>
<tr>
<td><code>_ci</code></td>
<td><code>case insensitive</code>，大小写不敏感</td>
</tr>
<tr>
<td><code>_cs</code></td>
<td><code>case sensitive</code>，大小写敏感</td>
</tr>
</tbody></table>
<h1 id="三-存储引擎-engine"><a href="#三-存储引擎-engine" class="headerlink" title="三 存储引擎 engine"></a>三 存储引擎 engine</h1><h2 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h2><ol>
<li>MySQL进行存储数据的方式。</li>
<li>每一种存储引擎使用不同的存储机制，索引技巧，锁定水平，最终提供广泛且不同的功能。</li>
</ol>
<h2 id="3-2-分类"><a href="#3-2-分类" class="headerlink" title="3.2 分类"></a>3.2 分类</h2><ol>
<li><code>InnoDB</code><ul>
<li>新版 MySQL 默认存储引擎</li>
</ul>
</li>
<li><code>Myisam</code><ul>
<li>速度快，不支持事务，安全性不够</li>
</ul>
</li>
<li><code>Memory</code><ul>
<li>数据存在内存中，不存在磁盘，一关闭服务器就消失。适合临时数据</li>
</ul>
</li>
<li><code>CSV</code></li>
<li><code>Archive</code></li>
<li><code>XtraDB</code><ul>
<li><code>PerconaDB</code> 默认存储引擎</li>
</ul>
</li>
<li><code>TokuDB RocksDB MyRocks</code><ul>
<li>第三方存储引擎：共同点是压缩比较高,数据插入性能极高</li>
</ul>
</li>
</ol>
<h2 id="3-3-存储引擎操作"><a href="#3-3-存储引擎操作" class="headerlink" title="3.3 存储引擎操作"></a>3.3 存储引擎操作</h2><h3 id="1-查"><a href="#1-查" class="headerlink" title="1 查"></a>1 查</h3><ol>
<li><code>show engines</code><ul>
<li>查看支持的存储引擎</li>
</ul>
</li>
<li><code>select @@default_storage_engine</code><ul>
<li>查看默认的存储引擎</li>
</ul>
</li>
</ol>
<h3 id="2-改"><a href="#2-改" class="headerlink" title="2 改"></a>2 改</h3><ol>
<li><code>alter table 表名 engine=存储引擎</code><ul>
<li>除了修改存储引擎外，还会做碎片整理</li>
</ul>
</li>
</ol>
<h2 id="3-4-InnoDB"><a href="#3-4-InnoDB" class="headerlink" title="3.4 InnoDB"></a>3.4 InnoDB</h2><h3 id="1-特性"><a href="#1-特性" class="headerlink" title="1 特性"></a>1 特性</h3><ol>
<li>事务（Transaction）</li>
<li>行级锁（Row-level Lock）</li>
<li>多版本并发控制 MVCC（Multi-Version Concurrency Control）</li>
<li>自动故障安全恢复 ACSR（Auto Crash Safey Recovery）</li>
<li>热备份（Hot Backup）</li>
<li>外键</li>
<li>复制 Replication<ol>
<li>Group Commit</li>
<li>GTID (Global Transaction ID)</li>
<li>多线程（Multi-Threads-SQL）</li>
</ol>
</li>
</ol>
<h3 id="2-物理存储结构"><a href="#2-物理存储结构" class="headerlink" title="2 物理存储结构"></a>2 物理存储结构</h3><h4 id="1-共享表空间"><a href="#1-共享表空间" class="headerlink" title="1 共享表空间"></a>1 共享表空间</h4><ol>
<li><code>idbdata1</code><ul>
<li>系统数据字典信息（统计信息），Undo 回滚日志等数据</li>
</ul>
</li>
<li><code>ib_logfile0~ib_logfile1</code><ul>
<li>Redo 重做日志文件，事务日志文件</li>
</ul>
</li>
<li><code>ibtmp1</code><ul>
<li>临时表空间，存储临时表（如 join union 等操作）</li>
</ul>
</li>
</ol>
<h4 id="2-独立表空间"><a href="#2-独立表空间" class="headerlink" title="2 独立表空间"></a>2 独立表空间</h4><ol>
<li><code>frm</code><ul>
<li>存储表列信息（列名，列属性）</li>
</ul>
</li>
<li><code>ibd</code><ul>
<li>存储表数据行和索引</li>
</ul>
</li>
<li><code>opt</code><ul>
<li>存储库属性</li>
</ul>
</li>
</ol>
<ul>
<li>一张 InnoDB 表 = <code>ibdata1 + frm + ibd（段、区、页）</code></li>
</ul>
<h4 id="3-表空间-Tablespace"><a href="#3-表空间-Tablespace" class="headerlink" title="3 表空间 Tablespace"></a>3 表空间 Tablespace</h4><ol>
<li>共享表空间：将所有数据存储到同一个表空间中 ，管理比较混乱</li>
<li>独立表空间：一张表一个 <code>frm</code> 存储列信息，一个 <code>ibd</code> 存储数据行和索引</li>
<li>说明<ol>
<li>共享表空间是 5.5 版本出现的管理模式</li>
<li>5.6 版本开始默认使用独立表空间，保留共享表空间，只用来存储：数据字典信息，undo，临时表</li>
<li>5.7 版本临时表被独立出去，共享表空间只存储：数据字典信息，undo</li>
<li>8.0 版本undo也被独立出去，共享表空间只存储：数据字典信息</li>
</ol>
</li>
</ol>
<h4 id="4-核心参数"><a href="#4-核心参数" class="headerlink" title="4 核心参数"></a>4 核心参数</h4><h5 id="1-存储引擎"><a href="#1-存储引擎" class="headerlink" title="1 存储引擎"></a>1 存储引擎</h5><ol>
<li><code>default_storage_engine=innodb</code><ul>
<li>默认存储引擎</li>
</ul>
</li>
</ol>
<h5 id="2-表空间"><a href="#2-表空间" class="headerlink" title="2 表空间"></a>2 表空间</h5><ol>
<li><code>innobd_file_pre_table=1</code><ul>
<li>表空间模式，1 独立表空间</li>
</ul>
</li>
<li><code>innodb_data_file_path=ibdata1:512M:ibdata2:512M:autoextend</code><ul>
<li>共享表空间文件个数和大小</li>
</ul>
</li>
</ol>
<h5 id="3-缓冲区"><a href="#3-缓冲区" class="headerlink" title="3 缓冲区"></a>3 缓冲区</h5><ol>
<li><code>innodb_flush_log_at_trx_commit=1</code><ul>
<li>双一标准之一</li>
<li>控制了 innodb 将 <code>log buffer</code> 中的数据写入日志文件并 flush 磁盘的时间点，取值分别为 0、1、2 三个</li>
</ul>
</li>
<li><code>Innodb_flush_method=(O_DIRECT, fdatasync)</code><ul>
<li>双一标准之一</li>
<li>控制 <code>log buffer</code> 和 <code>data buffer</code> 刷写磁盘的时候是否经过文件系统缓存 <code>OS buffer</code></li>
</ul>
</li>
<li><code>innodb_max_dirty_pages_pct=75</code><ul>
<li>脏页刷写策略</li>
</ul>
</li>
</ol>
<h5 id="4-redo-日志"><a href="#4-redo-日志" class="headerlink" title="4 redo 日志"></a>4 redo 日志</h5><ol>
<li><code>innodb_log_buffer_size</code></li>
<li><code>innodb_log_file_size</code></li>
<li><code>innodb_log_files_in_group</code></li>
</ol>
<h1 id="四-列属性"><a href="#四-列属性" class="headerlink" title="四 列属性"></a>四 列属性</h1><h2 id="4-1-数据类型"><a href="#4-1-数据类型" class="headerlink" title="4.1 数据类型"></a>4.1 数据类型</h2><h3 id="1-数值类型"><a href="#1-数值类型" class="headerlink" title="1 数值类型"></a>1 数值类型</h3><h4 id="1-整型"><a href="#1-整型" class="headerlink" title="1 整型"></a>1 整型</h4><p>类型|大小|无符号范围|有符号范围<br>-|-|-|-|-<br><strong>tinyint</strong> |1 Byte|<code>0 ~ 255</code>|<code>-128 ~ 127</code><br><code>smallint</code>|2 Byte|<code>0 ~ 65535</code>|<code>-2<sup>15</sup> ~ 2<sup>15</sup>-1</code><br><code>mediumint</code>|3 Byte|<code>0 ~ 2<sup>24</sup>-1</code><code>|&lt;code&gt;-2&lt;sup&gt;23&lt;/sup&gt; ~ 2&lt;sup&gt;23&lt;/sup&gt;-1&lt;/code&gt;
**int**|4 Byte|&lt;code&gt;0 ~ 2&lt;sup&gt;32&lt;/sup&gt;-1&lt;/code&gt;</code>|<code>-2<sup>31</sup> ~ 2<sup>31</sup>-1</code><br><code>bigint</code>|8 Byte|<code>0 ~ 2<sup>64</sup>-1</code>`|<code>-2<sup>63</sup> ~ 2<sup>63</sup>-1</code></p>
<ul>
<li><code>int(M)</code><ul>
<li><code>M</code> 与存储长度无关，只是标识显示长度，且要配合 <code>zerofill</code> 才有意义</li>
</ul>
</li>
</ul>
<h4 id="2-浮点型-amp-定点型"><a href="#2-浮点型-amp-定点型" class="headerlink" title="2 浮点型 &amp; 定点型"></a>2 浮点型 &amp; 定点型</h4><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>float</code></td>
<td>单精度 4 Byte</td>
</tr>
<tr>
<td><code>double</code></td>
<td>双精度 8 Byte</td>
</tr>
<tr>
<td><code>decimal</code></td>
<td>精确数值</td>
</tr>
<tr>
<td>1. <code>float(M,D)</code></td>
<td></td>
</tr>
<tr>
<td>* <code>M</code></td>
<td></td>
</tr>
<tr>
<td>* 精度，即总位数</td>
<td></td>
</tr>
<tr>
<td>* <code>D</code></td>
<td></td>
</tr>
<tr>
<td>* 标度，即小数点后的位数</td>
<td></td>
</tr>
<tr>
<td>* 不足用0补，超过则四舍五入</td>
<td></td>
</tr>
<tr>
<td>2. <code>decimal(M,D)</code></td>
<td></td>
</tr>
<tr>
<td>* <code>0&lt;M&lt;65</code>，<code>D&lt;M &amp;&amp; 0&lt;D&lt;30</code></td>
<td></td>
</tr>
<tr>
<td>* 默认为 <code>decimal(10, 0)</code></td>
<td></td>
</tr>
</tbody></table>
<h3 id="2-字符串类型"><a href="#2-字符串类型" class="headerlink" title="2 字符串类型"></a>2 字符串类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>char</strong></td>
<td>定长字符串</td>
</tr>
<tr>
<td><strong>varchar</strong></td>
<td>变长字符串</td>
</tr>
<tr>
<td><code>tinytext</code></td>
<td>短文本</td>
</tr>
<tr>
<td><code>text</code></td>
<td>文本</td>
</tr>
<tr>
<td><code>mediumtext</code></td>
<td>中长文本</td>
</tr>
<tr>
<td><code>longtext</code></td>
<td>长文本</td>
</tr>
</tbody></table>
<h4 id="1-char"><a href="#1-char" class="headerlink" title="1 char"></a>1 char</h4><ol>
<li>非空 char 的最大长度是 255【字节】</li>
<li>可空 char 的最大长度是 254【字节】，因为非空标记需要占用 1 个字节<ul>
<li>当允许为空时，系统会自动从整个记录中保留一个字节来存储 NULL</li>
</ul>
</li>
<li><code>char(M)</code><ol>
<li>M 为字符数，<code>0~255</code></li>
<li>char 存储时会立即分配 M 个字符长度的存储空间，未占满的空间使用<strong>空格</strong>填充</li>
</ol>
</li>
</ol>
<h4 id="2-varchar"><a href="#2-varchar" class="headerlink" title="2 varchar"></a>2 varchar</h4><ol>
<li>非空 varchar 的最大长度是 65532【字节】<ol>
<li>如果存储值小于 255 字节，则使用 1 个字节标记长度</li>
<li>如果存储值超过 255 字节，则使用 2 个字节标记长度</li>
<li>varchar是从第二个字节开始存储的</li>
</ol>
</li>
<li>可空 varchar 的最大长度是 65531【字节】</li>
<li><code>varchar(M)</code><ol>
<li>M 为字符数，<code>0 ~ 65535</code>，但由于 varcahr 最大长度是 65532 字节，所以 M 实际范围跟字符集有关，比如 utf8 一个字符占用 3 个字节，则 M 最大长度是 <code>65532 / 3</code></li>
<li>varchar 存储前会先判断长度，按需分配空间</li>
</ol>
</li>
</ol>
<h4 id="3-以-utf8-为例比较"><a href="#3-以-utf8-为例比较" class="headerlink" title="3 以 utf8 为例比较"></a>3 以 utf8 为例比较</h4><table>
<thead>
<tr>
<th>类型</th>
<th>可存字符</th>
<th>实存字符</th>
<th>实占字节</th>
<th>利用率</th>
</tr>
</thead>
<tbody><tr>
<td><code>char(M)</code></td>
<td>M</td>
<td>n</td>
<td><code>M * 3</code></td>
<td><code>n / M</code></td>
</tr>
<tr>
<td><code>varchar(M)</code></td>
<td>M</td>
<td>n</td>
<td><code>n * 3 + (1~2)</code></td>
<td><code>n * 3 / （n * 3 + (1~2)）</code></td>
</tr>
</tbody></table>
<h3 id="3-枚举-enum"><a href="#3-枚举-enum" class="headerlink" title="3 枚举 enum"></a>3 枚举 enum</h3><ul>
<li><code>enum(value1, value2, value3, ...)</code><ol>
<li>建表时在字段上定义枚举列表，按照定义顺序索引值从 1 开始编号<ul>
<li>空字符串 <code>&quot;&quot;</code> 索引为 0，<code>null</code> 索引为 <code>null</code></li>
</ul>
</li>
<li>插入数据时（单选），可以使用索引值或者枚举值</li>
<li>数据库存储时存储索引，读取时再根据枚举列表将索引转为枚举值</li>
</ol>
</li>
</ul>
<h3 id="4-集合-set"><a href="#4-集合-set" class="headerlink" title="4 集合 set"></a>4 集合 set</h3><ul>
<li><code>set(value1, value2, value3, ...)</code><ol>
<li>建表时在字段上定义集合列表，集合中每个值对应一个二进制位<ul>
<li>第一个值对应 <code>1 = 1</code></li>
<li>第二个值对应 <code>10 = 2</code></li>
<li>第三个值对应 <code>100 = 4</code></li>
<li>第四个值对应 <code>1000 = 8</code></li>
<li>…</li>
<li>也就是说一个二进制数，从低位向高位依次对应集合从 1 开始的值</li>
</ul>
</li>
<li>插入数据时（多选），可以使用二进制对应的十进制数字，插入数字对应的二进制，相应位置为 1 代表插入该值，例如<ul>
<li>插入 <code>6</code>，转为二进制 <code>110</code>，即插入第二和第三个值</li>
<li>插入 <code>7</code>，转为二进制 <code>111</code>，即插入前三个值</li>
<li>插入 <code>8</code>，转为二进制 <code>1000</code>，即插入第四个值</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="5-日期类型"><a href="#5-日期类型" class="headerlink" title="5 日期类型"></a>5 日期类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>格式</th>
<th>大小</th>
<th>最小值</th>
<th>最大值</th>
<th>零值</th>
</tr>
</thead>
<tbody><tr>
<td><strong>datetime</strong></td>
<td><code>yyyy-mm-dd hh:mm:ss</code></td>
<td>8 Byte</td>
<td><code>1000-01-01 00:00:00</code></td>
<td><code>9999-12-31 23:59:59</code></td>
<td><code>0000-00-00 00:00:00</code></td>
</tr>
<tr>
<td><strong>timestamp</strong></td>
<td><code>yyyy-mm-dd hh:mm:ss</code></td>
<td>4 Byte</td>
<td><code>1970-01-01 00:00:00</code></td>
<td><code>2038-01-19 03:14:07</code></td>
<td><code>0000-00-00 00:00:00</code></td>
</tr>
<tr>
<td><code>date</code></td>
<td><code>yyyy-mm-dd</code></td>
<td>3 Byte</td>
<td><code>1000-01-01</code></td>
<td><code>9999-12-31</code></td>
<td><code>0000-00-00</code></td>
</tr>
<tr>
<td><code>time</code></td>
<td><code>hh:mm:ss</code></td>
<td>3 Byte</td>
<td><code>-838:59:59</code></td>
<td><code>838:59:59</code></td>
<td><code>00:00:00</code></td>
</tr>
<tr>
<td>1. Mysql保存日期格式使用 <code>YYYY-MM-DD HH:MM:SS</code> 的ISO 8601标准</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2. 向数据表储存日期与时间必须使用ISO格式</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3. <code>timestamp</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1. <code>yyyy-mm-dd hh:mm:ss</code> 格式的时间戳（从 <code>1970-01-01 00:00:00</code> 到指定时间的毫秒值）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2. 插入和更新时如果未指定则会插入当前时间</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3. 根据时区自动变化显示</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="6-二进制类型"><a href="#6-二进制类型" class="headerlink" title="6 二进制类型"></a>6 二进制类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>tinyblob</code></td>
<td>最大长度为255B</td>
</tr>
<tr>
<td><code>blob</code></td>
<td>最大长度为64KB</td>
</tr>
<tr>
<td><code>mediumblob</code></td>
<td>最大长度为16MB</td>
</tr>
<tr>
<td><code>longblob</code></td>
<td>最大长度为4GB</td>
</tr>
<tr>
<td>* 二进制数据类型可存储任何数据（甚至包括二进制信息），如图像、多媒体、字处理文档等</td>
<td></td>
</tr>
</tbody></table>
<h2 id="4-2-注释"><a href="#4-2-注释" class="headerlink" title="4.2 注释"></a>4.2 注释</h2><ul>
<li><code>comment &#39;注释&#39;</code><ul>
<li>用于描述字段信息</li>
</ul>
</li>
</ul>
<h2 id="4-3-unsigned"><a href="#4-3-unsigned" class="headerlink" title="4.3 unsigned"></a>4.3 unsigned</h2><ul>
<li><code>unsigned</code><ol>
<li>将数值类型声明为无符号</li>
<li>MySQL 中的数值默认都是有符号的。</li>
</ol>
</li>
</ul>
<h2 id="4-4-zerofill"><a href="#4-4-zerofill" class="headerlink" title="4.4 zerofill"></a>4.4 zerofill</h2><ul>
<li><code>zerofill</code><ol>
<li>数值类型的列位数不足时用 0 补填充</li>
<li>如果声明 <code>zerofill</code>，则会自动声明为 <code>unsigned</code></li>
</ol>
</li>
</ul>
<h2 id="4-5-自增长"><a href="#4-5-自增长" class="headerlink" title="4.5 自增长"></a>4.5 自增长</h2><h3 id="1-增"><a href="#1-增" class="headerlink" title="1 增"></a>1 增</h3><ul>
<li><code>auto_increment</code><ol>
<li>自增长需要搭配主键使用</li>
<li>自增长字段必须是数字(整型)</li>
<li>一张表最多只能有一个自增长</li>
<li>如果插入数据时字段指定为0、null或未指定值，那么插入自增长的值</li>
<li>如果插入数据时字段指定了具体值<ol>
<li>如果插入值&lt;自增值，则表的自增值不变</li>
<li>如果插入值&gt;自增值，则表的自增值会变成插入值</li>
</ol>
</li>
</ol>
</li>
</ul>
<h3 id="2-查"><a href="#2-查" class="headerlink" title="2 查"></a>2 查</h3><ol>
<li><code>show variables like &#39;auto_increment%&#39;</code><ul>
<li><code>auto_increment_increment</code><ul>
<li>初始值</li>
</ul>
</li>
<li><code>auto_increment_offset</code> <ul>
<li>种子</li>
</ul>
</li>
</ul>
</li>
<li><code>select last_insert_id()</code><ul>
<li>获取自增的最后一个值</li>
</ul>
</li>
<li><code>show create database 库名</code><ul>
<li>可以通过查看表创建语句查看下一次自增长的值</li>
</ul>
</li>
</ol>
<h3 id="3-修改自增长的值"><a href="#3-修改自增长的值" class="headerlink" title="3 修改自增长的值"></a>3 修改自增长的值</h3><ul>
<li><code>alter table 表名 auto_increment = 值</code><ul>
<li>只能比当前自增长的最大值大，不能小(小不生效)</li>
</ul>
</li>
</ul>
<h3 id="4-删除自增长"><a href="#4-删除自增长" class="headerlink" title="4 删除自增长"></a>4 删除自增长</h3><ul>
<li>修改列属性为没有 <code>auto_increment</code> 即删除。</li>
</ul>
<h2 id="4-6-约束"><a href="#4-6-约束" class="headerlink" title="4.6 约束"></a>4.6 约束</h2><h3 id="1-主键约束-primary-key"><a href="#1-主键约束-primary-key" class="headerlink" title="1 主键约束 primary key"></a>1 主键约束 <code>primary key</code></h3><h4 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>主键约束列唯一，非null</li>
<li>一张表只能有一个主键</li>
</ol>
<h4 id="2-增"><a href="#2-增" class="headerlink" title="2 增"></a>2 增</h4><ol>
<li><code>列名 primaray key</code><ul>
<li>建表时为当前列添加主键</li>
</ul>
</li>
<li><code>primary key(列1,列2,...)</code><ul>
<li>建表时，单独一行，添加单一主键或复合主键</li>
</ul>
</li>
<li><code>alter table 表名 add [constraint 主键约束名] primary key(列1,列2,...)</code><ul>
<li>建表后，添加单一主键或复合主键</li>
</ul>
</li>
</ol>
<h4 id="3-改-删"><a href="#3-改-删" class="headerlink" title="3 改 / 删"></a>3 改 / 删</h4><ol>
<li>主键无法修改</li>
<li>删除<ol>
<li>有自增先要删除自增</li>
<li>删除主键<ol>
<li><code>alter table 表名 drop primary key</code></li>
<li><code>alter table 表名 drop constraint 主键约束名</code></li>
</ol>
</li>
</ol>
</li>
</ol>
<h4 id="4-主键冲突-（主键值已存在-Duplicate-key）"><a href="#4-主键冲突-（主键值已存在-Duplicate-key）" class="headerlink" title="4 主键冲突 （主键值已存在 Duplicate key）"></a>4 主键冲突 （主键值已存在 <code>Duplicate key</code>）</h4><ol>
<li>更新<ul>
<li><code>Insert into 表名[字段列表(包含主键)] values(值列表) on duplicate key update 字段 = 新值</code></li>
</ul>
</li>
<li>替换<ul>
<li><code>Replace into 表名 [字段列表(包含主键)] values(值列表)</code></li>
</ul>
</li>
</ol>
<h3 id="2-外键约束-foreign-key"><a href="#2-外键约束-foreign-key" class="headerlink" title="2 外键约束 foreign key"></a>2 外键约束 <code>foreign key</code></h3><h4 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>父表和子表必须使用相同的存储引擎 <code>InnoDB</code>，且禁止使用临时表</li>
<li>外键列和参照列必须具有一样的数据类型，数字的长度和是否有符号必须一致，字符长度可以不同</li>
<li>外键列和参照列必须创建索引，如果外键列不存在索引，mysql会自动创建索引。</li>
</ol>
<h4 id="2-外键约束模式"><a href="#2-外键约束模式" class="headerlink" title="2 外键约束模式"></a>2 外键约束模式</h4><h5 id="1-语法"><a href="#1-语法" class="headerlink" title="1 语法"></a>1 语法</h5><ol>
<li><code>on update 模式</code></li>
<li><code>on delete 模式</code></li>
</ol>
<h5 id="2-模式"><a href="#2-模式" class="headerlink" title="2 模式"></a>2 模式</h5><ol>
<li><code>restrict</code><ul>
<li>严格模式（默认）</li>
<li>如果子表中有关联的记录，则父表不能 <code>update/delete</code></li>
</ul>
</li>
<li><code>no action</code><ul>
<li>标准SQL的关键字，在 MySQL 中同 <code>restrict</code></li>
</ul>
</li>
<li><code>cascade</code><ul>
<li>级联模式</li>
<li>对父表 <code>update/delete</code> 时，子表相关联的记录同步 <code>update/delete</code></li>
</ul>
</li>
<li><code>set null</code><ul>
<li>置空模式</li>
<li>对父表 <code>update/delete</code> 时，将子表外键列设为 <code>null</code>（子表的外键列不能为 <code>not null</code>）</li>
</ul>
</li>
</ol>
<h4 id="3-增"><a href="#3-增" class="headerlink" title="3 增"></a>3 增</h4><ol>
<li><code>[constraint 外键约束名] foreign key(外键字段) references 父表(主键字段) [on delete 模式 on update 模式]</code><ul>
<li>建表时添加，在所有字段后</li>
</ul>
</li>
<li><code>Alter table 表名 add [constraint 外键约束名] foreign key(外键字段) references 父表(主键字段) [on delete 模式 on update 模式]</code><ul>
<li>建表后添加</li>
</ul>
</li>
</ol>
<h4 id="4-改-删"><a href="#4-改-删" class="headerlink" title="4 改 / 删"></a>4 改 / 删</h4><ol>
<li>外键不能修改</li>
<li>删除<ul>
<li><code>Alter table 表名 drop foreign key 外键约束名</code></li>
</ul>
</li>
</ol>
<h3 id="3-非空约束-not-null"><a href="#3-非空约束-not-null" class="headerlink" title="3 非空约束 not null"></a>3 非空约束 <code>not null</code></h3><ol>
<li><code>null</code><ul>
<li>列允许为空（默认）</li>
</ul>
</li>
<li><code>not null</code><ul>
<li>列不能为空，必须插入值，通常配合 <code>default</code> 使用</li>
<li><code>null</code> 没有意义且所有运算一律返回 <code>null</code>，效率不高，影响索引结果</li>
</ul>
</li>
</ol>
<h3 id="4-默认约束-default"><a href="#4-默认约束-default" class="headerlink" title="4 默认约束 default"></a>4 默认约束 <code>default</code></h3><h4 id="1-增-1"><a href="#1-增-1" class="headerlink" title="1 增"></a>1 增</h4><ol>
<li><code>列名 default 值</code><ul>
<li>建表时，给当前列添加默认值</li>
</ul>
</li>
<li><code>alter table 表名 alter [column] 列 set default 值</code><ul>
<li>建表后，给指定列添加默认值</li>
</ul>
</li>
</ol>
<h4 id="2-删"><a href="#2-删" class="headerlink" title="2 删"></a>2 删</h4><ul>
<li><code>alter table 表名 alter [column] 列 drop default</code></li>
</ul>
<h4 id="3-使用"><a href="#3-使用" class="headerlink" title="3 使用"></a>3 使用</h4><ol>
<li>对应字段没有插入值，则使用默认值。</li>
<li>显式的插入 <code>default</code> 关键字，表示使用默认值</li>
</ol>
<h3 id="5-唯一约束-unique-key"><a href="#5-唯一约束-unique-key" class="headerlink" title="5 唯一约束 unique key"></a>5 唯一约束 <code>unique key</code></h3><h4 id="1-概述-2"><a href="#1-概述-2" class="headerlink" title="1 概述"></a>1 概述</h4><ol>
<li>唯一约束列唯一，可以为 <code>null</code>，且可以有多个 <code>null</code>，因为 <code>null = null</code> 返回 false</li>
<li>一张表可以有多个唯一约束 </li>
</ol>
<h4 id="2-增-1"><a href="#2-增-1" class="headerlink" title="2 增"></a>2 增</h4><ol>
<li><code>列 unique key</code><ul>
<li>建表时，为当前列添加唯一约束</li>
</ul>
</li>
<li><code>unique key(列1,列2,...)</code><ul>
<li>建表时，单独一行，为指定列添加唯一约束</li>
</ul>
</li>
<li><code>alter table 表名 add [constraint 唯一约束名] unique key(列1,列2,...)</code><ul>
<li>建表后，为指定列添加唯一约束</li>
</ul>
</li>
</ol>
<h4 id="3-删"><a href="#3-删" class="headerlink" title="3 删"></a>3 删</h4><ol>
<li><code>alter table 表名 drop [index/key] 唯一约束名</code></li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/MySql-%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/MySql-%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">MySql 安装和配置</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 21:17:52 / 修改时间：21:20:04" itemprop="dateCreated datePublished" datetime="2020-03-30T21:17:52+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/DB/" itemprop="url" rel="index">
                    <span itemprop="name">DB</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/DB/MySql/" itemprop="url" rel="index">
                    <span itemprop="name">MySql</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><h2 id="1-1-概念"><a href="#1-1-概念" class="headerlink" title="1.1 概念"></a>1.1 概念</h2><ol>
<li>DBMS（Database Management System）<ul>
<li>数据库管理系统</li>
</ul>
</li>
<li>DBA（Database Administrator）<ul>
<li>数据库管理员</li>
</ul>
</li>
</ol>
<h2 id="1-2-DBMS-分类"><a href="#1-2-DBMS-分类" class="headerlink" title="1.2 DBMS 分类"></a>1.2 DBMS 分类</h2><h3 id="1-RDBMS（Relational-Database-Management-System）"><a href="#1-RDBMS（Relational-Database-Management-System）" class="headerlink" title="1 RDBMS（Relational Database Management System）"></a>1 RDBMS（Relational Database Management System）</h3><ol>
<li><code>Oracle DB2</code></li>
<li><code>Sql-Server Mysql</code></li>
<li><code>access</code></li>
<li><code>PG MSSQL</code></li>
</ol>
<h3 id="2-NoSQL（Not-Only-SQL）"><a href="#2-NoSQL（Not-Only-SQL）" class="headerlink" title="2 NoSQL（Not Only SQL）"></a>2 NoSQL（Not Only SQL）</h3><ol>
<li><code>MongoDB</code></li>
<li><code>Redis</code></li>
<li><code>ES（Elasticsearch）</code></li>
<li><code>memcached</code></li>
</ol>
<h3 id="3-NewSQL（分布式）"><a href="#3-NewSQL（分布式）" class="headerlink" title="3 NewSQL（分布式）"></a>3 NewSQL（分布式）</h3><ul>
<li><code>TiDB Spanner AliSQL OB PolarDB</code></li>
</ul>
<h2 id="1-3-Mysql-GA版本"><a href="#1-3-Mysql-GA版本" class="headerlink" title="1.3 Mysql GA版本"></a>1.3 Mysql GA版本</h2><ol>
<li><code>5.6</code><ul>
<li><code>5.6.38</code>（2017-09-13）</li>
</ul>
</li>
<li><code>5.7</code><ul>
<li><code>5.7.20</code>（2017-09-13）</li>
</ul>
</li>
</ol>
<h1 id="二-Mysql-安装与配置"><a href="#二-Mysql-安装与配置" class="headerlink" title="二 Mysql 安装与配置"></a>二 Mysql 安装与配置</h1><h2 id="2-1-Linux"><a href="#2-1-Linux" class="headerlink" title="2.1 Linux"></a>2.1 Linux</h2><h3 id="1-下载解压"><a href="#1-下载解压" class="headerlink" title="1 下载解压"></a>1 下载解压</h3><ol>
<li>下载 <code>linux-generic</code> 通用二进制包（类似绿色版）</li>
<li>上传到 linux 并解压</li>
</ol>
<h3 id="2-卸载-mariadb"><a href="#2-卸载-mariadb" class="headerlink" title="2 卸载 mariadb"></a>2 卸载 <code>mariadb</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 rpm -qa | grep mariadb</span><br><span class="line">2 yum remove -y xxx</span><br></pre></td></tr></table></figure>
<h3 id="3-创建用户并授权，用于管理mysql"><a href="#3-创建用户并授权，用于管理mysql" class="headerlink" title="3 创建用户并授权，用于管理mysql"></a>3 创建用户并授权，用于管理mysql</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 useradd -s /sbin/nologin mysql</span><br><span class="line">2 chown -R mysql.mysql basedir</span><br><span class="line">3 chown -R mysql.mysql datadir</span><br></pre></td></tr></table></figure>

<h3 id="4-设置环境变量"><a href="#4-设置环境变量" class="headerlink" title="4 设置环境变量"></a>4 设置环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 vim /etc/profile</span><br><span class="line">2 export PATH=basedir/bin:$PATH</span><br><span class="line">3 source /etc/profile</span><br><span class="line">4 mysql -V</span><br></pre></td></tr></table></figure>

<h3 id="5-初始化"><a href="#5-初始化" class="headerlink" title="5 初始化"></a>5 初始化</h3><h4 id="1-无密码"><a href="#1-无密码" class="headerlink" title="1 无密码"></a>1 无密码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize-insecure --user=mysql --basedir=xxx --datadir=xxx</span><br></pre></td></tr></table></figure>

<h4 id="2-有密码"><a href="#2-有密码" class="headerlink" title="2 有密码"></a>2 有密码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize --user=mysql --basedir=xxx --datadir=xxx</span><br></pre></td></tr></table></figure>
<ol>
<li>可能会因为缺少 <code>libaio-devel</code> 依赖而报错</li>
<li><code>--initialize</code><ol>
<li>对密码复杂度进行定制：12位，4种</li>
<li>密码过期时间：180天</li>
<li>给root@localhost 用户设置临时密码</li>
</ol>
</li>
</ol>
<h3 id="6-配置文件"><a href="#6-配置文件" class="headerlink" title="6 配置文件"></a>6 配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;/etc/my.cnf &lt;&lt;EOF</span><br><span class="line">[mysqld] </span><br><span class="line">user=mysql</span><br><span class="line">basedir=</span><br><span class="line">datadir=</span><br><span class="line">socket=/tmp/mysql.sock</span><br><span class="line">port=3306</span><br><span class="line">server_id=6</span><br><span class="line">[mysql]</span><br><span class="line">socket=/tmp/mysql.sock</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h3 id="7-MySQL-服务"><a href="#7-MySQL-服务" class="headerlink" title="7 MySQL 服务"></a>7 MySQL 服务</h3><h4 id="1-启动方式"><a href="#1-启动方式" class="headerlink" title="1 启动方式"></a>1 启动方式</h4><h5 id="1-init"><a href="#1-init" class="headerlink" title="1 init"></a>1 <code>init</code></h5><ol>
<li>配置<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp basedir/support-files/mysql.server /etc/init.d/mysqld</span><br></pre></td></tr></table></figure></li>
<li>启动<ul>
<li><code>service mysqld start</code> 或 <code>/etc/init.d/mysqld start</code><ol>
<li>其实是调用了 <code>basedir/support-files/mysql.server</code> 脚本</li>
<li><code>mysql.server</code> 脚本<ol>
<li>读取 <code>/etc/my.cnf</code> 配置文件</li>
<li>调用 <code>basedir/bin/mysqld_safe</code> 来启动 <code>mysqld</code></li>
</ol>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h5 id="2-systemd"><a href="#2-systemd" class="headerlink" title="2 systemd"></a>2 <code>systemd</code></h5><ol>
<li>配置<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;/etc/systemd/system/mysqld.service &lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=MySQL Server</span><br><span class="line">Documentation=man:mysqld(8)</span><br><span class="line">Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.html</span><br><span class="line">After=network.target</span><br><span class="line">After=syslog.target</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">[Service]</span><br><span class="line">User=mysql</span><br><span class="line">Group=mysql</span><br><span class="line">ExecStart=basedir/bin/mysqld --defaults-file=/etc/my.cnf</span><br><span class="line">LimitNOFILE = 5000</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li>
<li>启动<ul>
<li><code>systemctl start mysqld</code><ol>
<li>其实是加载了 <code>/etc/systemd/system/mysqld.service</code></li>
<li><code>mysqd.service</code> 中 <code>ExecStart</code><ol>
<li>读取 <code>/etc/my.cnf</code> 配置文件</li>
<li>启动 <code>mysqld</code></li>
</ol>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h5 id="3-手动"><a href="#3-手动" class="headerlink" title="3 手动"></a>3 手动</h5><ol>
<li><code>mysqld_safe --skip-grant-tables --skip-networking &amp;</code><ul>
<li>维护模式启动</li>
</ul>
</li>
</ol>
<h4 id="2-初始化配置"><a href="#2-初始化配置" class="headerlink" title="2 初始化配置"></a>2 初始化配置</h4><h5 id="1-作用"><a href="#1-作用" class="headerlink" title="1 作用"></a>1 作用</h5><ol>
<li>影响数据库的启动</li>
<li>影响客户端的功能</li>
</ol>
<h5 id="2-初始化配置方式"><a href="#2-初始化配置方式" class="headerlink" title="2 初始化配置方式"></a>2 初始化配置方式</h5><ol>
<li>初始化配置文件（如 <code>etc/my.cnf</code> ）</li>
<li>命令行启动参数<ul>
<li>如果参数冲突，命令行参数会优先级高于配置文件</li>
</ul>
</li>
<li>编译安装时配置</li>
</ol>
<h5 id="3-初始化配置文件"><a href="#3-初始化配置文件" class="headerlink" title="3 初始化配置文件"></a>3 初始化配置文件</h5><h6 id="1-加载顺序"><a href="#1-加载顺序" class="headerlink" title="1 加载顺序"></a>1 加载顺序</h6><ol>
<li><code>mysqld --help --verbose | grep my.cnf</code><ol>
<li>查看配置文件加载顺序</li>
<li>默认情况下，MySQL启动时，会依序读取配置文件，如果有重复选项，会以最后一个文件设置的为准</li>
</ol>
</li>
<li><code>--defaults-file=</code><ul>
<li>如果启动时手动配置了配置文件，则默认配置文件都不读取。</li>
</ul>
</li>
</ol>
<h6 id="2-格式"><a href="#2-格式" class="headerlink" title="2 格式"></a>2 格式</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[module]</span><br><span class="line">key=value</span><br></pre></td></tr></table></figure>
<ul>
<li>module<ol>
<li>服务端<ol>
<li><code>[mysqld]</code></li>
<li><code>[mysqld_safe]</code></li>
<li><code>[server]</code><ul>
<li>包括服务端所有</li>
</ul>
</li>
</ol>
</li>
<li>客户端<ol>
<li><code>[mysql]</code></li>
<li><code>[mysqladmin]</code></li>
<li><code>[mysqldump]</code></li>
<li><code>[client]</code><ul>
<li>包括客户端所有</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
</ul>
<h6 id="3-样板"><a href="#3-样板" class="headerlink" title="3 样板"></a>3 样板</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># -----------------服务端配置-------------------------</span><br><span class="line">[mysqld]</span><br><span class="line"># 管理用户</span><br><span class="line">user=mysql</span><br><span class="line"># 软件安装目录</span><br><span class="line">basedir=/app/mysql</span><br><span class="line"># 数据目录</span><br><span class="line">datadir=/data/mysql/data</span><br><span class="line"># 服务端保存 socket 文件路径</span><br><span class="line">socket=/tmp/mysql.sock</span><br><span class="line"># 端口号</span><br><span class="line">port=3306</span><br><span class="line"># 服务器id号 1~65535</span><br><span class="line">server_id=6</span><br><span class="line"># -----------------客户端配置-------------------------</span><br><span class="line">[mysql]</span><br><span class="line"># 客户端登录时寻找 socket 文件路径 </span><br><span class="line">socket=/tmp/mysql.sock</span><br></pre></td></tr></table></figure>

<h2 id="2-2-Windows"><a href="#2-2-Windows" class="headerlink" title="2.2 Windows"></a>2.2 Windows</h2><h3 id="1-配置环境变量"><a href="#1-配置环境变量" class="headerlink" title="1 配置环境变量"></a>1 配置环境变量</h3><h3 id="2-在MySql目录下创建-ini-配置文件"><a href="#2-在MySql目录下创建-ini-配置文件" class="headerlink" title="2 在MySql目录下创建 .ini 配置文件"></a>2 在MySql目录下创建 <code>.ini</code> 配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 服务端配置</span><br><span class="line">[mysqld] </span><br><span class="line">basedir =</span><br><span class="line">datadir =</span><br><span class="line">port = 3306</span><br><span class="line">character-set-server=utf8mb4 // 1</span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8mb4 // 2</span><br></pre></td></tr></table></figure>
<ul>
<li>配置1 与 配置12的结果对比<br><img src="https://gitee.com/3noanswer/npics/raw/master/SQL/%E5%88%9D%E5%A7%8B%E9%85%8D%E7%BD%AE1.png" alt=""><br><img src="https://gitee.com/3noanswer/npics/raw/master/SQL/%E5%88%9D%E5%A7%8B%E9%85%8D%E7%BD%AE2.png" alt=""></li>
</ul>
<h3 id="3-初始化"><a href="#3-初始化" class="headerlink" title="3 初始化"></a>3 初始化</h3><ol>
<li><code>mysqld --initialize --console</code><ul>
<li>随机密码，并在控制台显示密码</li>
</ul>
</li>
<li><code>mysqld --initialize-insecure</code><ul>
<li>无密码</li>
</ul>
</li>
</ol>
<h3 id="4-mysql-服务"><a href="#4-mysql-服务" class="headerlink" title="4 mysql 服务"></a>4 mysql 服务</h3><ol>
<li><code>mysqld --install</code><ul>
<li>安装服务</li>
</ul>
</li>
<li><code>net start mysql</code><ul>
<li>启动服务</li>
</ul>
</li>
<li><code>net stop mysql</code><ul>
<li>停止服务</li>
</ul>
</li>
<li><code>mysqld remove</code> / <code>sc delete mysql</code><ul>
<li>删除服务</li>
</ul>
</li>
</ol>
<h2 id="2-3-修改用户密码"><a href="#2-3-修改用户密码" class="headerlink" title="2.3 修改用户密码"></a>2.3 修改用户密码</h2><ol>
<li><code>mysqladmin -u用户名 -p[旧密码] password 新密码</code><ul>
<li>不需登录</li>
<li>旧密码可以写在命令中，也可以回车后输入</li>
</ul>
</li>
<li><code>alter user &#39;用户名&#39; @&#39;localhost&#39; identified by &#39;新密码&#39;</code><ul>
<li>需要登录</li>
</ul>
</li>
<li>忘记 root 密码<ol>
<li>关闭数据库</li>
<li>维护模式启动数据库<ul>
<li><code>mysqld_safe --skip-grant-tables --skip-networking &amp;</code></li>
</ul>
</li>
<li>登录并修改密码<ol>
<li><code>alter user &#39;root&#39; @&#39;localhost&#39; identified by &#39;新密码&#39;</code></li>
<li><code>flush privileges</code><ul>
<li>如果修改密码报错，则刷新权限</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h1 id="三-MySQL-的连接"><a href="#三-MySQL-的连接" class="headerlink" title="三 MySQL 的连接"></a>三 MySQL 的连接</h1><h2 id="3-1-C-S-模型（客户端-amp-服务端）"><a href="#3-1-C-S-模型（客户端-amp-服务端）" class="headerlink" title="3.1 C/S 模型（客户端 &amp; 服务端）"></a>3.1 C/S 模型（客户端 &amp; 服务端）</h2><ol>
<li>使用mysql，需要安装服务端</li>
<li>连接访问服务器，需要通过客户端</li>
</ol>
<h2 id="3-2-客户端"><a href="#3-2-客户端" class="headerlink" title="3.2 客户端"></a>3.2 客户端</h2><h3 id="1-MySQL自带的命令行工具-mysql-exe"><a href="#1-MySQL自带的命令行工具-mysql-exe" class="headerlink" title="1 MySQL自带的命令行工具 mysql.exe"></a>1 MySQL自带的命令行工具 <code>mysql.exe</code></h3><h4 id="1-连接方式"><a href="#1-连接方式" class="headerlink" title="1 连接方式"></a>1 连接方式</h4><ol>
<li>TCP/IP 方式（远程 本地）<ul>
<li><code>mysql -uuser -p[password] [-h Host] [-Pport]</code></li>
</ul>
</li>
<li>Socket 方式（本地）<ul>
<li><code>mysql -uuser -p[password] [-S /tmp/mysql.sock]</code></li>
</ul>
</li>
</ol>
<h4 id="2-myql-命令"><a href="#2-myql-命令" class="headerlink" title="2 myql 命令"></a>2 myql 命令</h4><ul>
<li><code>mysql [OPTION]</code><ul>
<li><code>OPTION</code><ul>
<li><code>-u</code></li>
<li><code>-p</code></li>
<li><code>-h</code></li>
<li><code>-P</code></li>
<li><code>-S</code></li>
<li><code>-e &quot;sql&quot;</code><ul>
<li>免交互执行命令（即不连接数据库）</li>
</ul>
</li>
<li><code>&lt; 脚本路径</code><ul>
<li>导入 sql 脚本</li>
</ul>
</li>
<li><code>-prompt 提示符</code><ul>
<li>定义 mysql 提示符，默认为 <code>mysql&gt;</code></li>
<li><code>\D</code>：完整日期</li>
<li><code>\d</code>：当前数据库</li>
<li><code>\h</code>：服务器名</li>
<li><code>\u</code>：当前用户</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-图形化工具（GUI）"><a href="#2-图形化工具（GUI）" class="headerlink" title="2 图形化工具（GUI）"></a>2 图形化工具（GUI）</h3><table>
<thead>
<tr>
<th align="center">软件</th>
<th align="center">windows</th>
<th align="center">mac</th>
<th align="center">linux</th>
<th align="center">功能</th>
<th align="center">免费版</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>sequelpro</code></td>
<td align="center">&nbsp;</td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">有</td>
</tr>
<tr>
<td align="center"><code>dbeaver</code></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">有</td>
</tr>
<tr>
<td align="center"><code>navicat</code></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">强</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center"><code>SQLyog</code></td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">强</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center"><code>dbForge</code></td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">强</td>
<td align="center">有</td>
</tr>
<tr>
<td align="center"><code>heidisql</code></td>
<td align="center">√</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">有</td>
</tr>
<tr>
<td align="center">* 免费选择跨平台的 dbeaver ，不差钱选择 navicat</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="四-MySQL-体系结构"><a href="#四-MySQL-体系结构" class="headerlink" title="四 MySQL 体系结构"></a>四 MySQL 体系结构</h1><h2 id="4-1-mysql-实例"><a href="#4-1-mysql-实例" class="headerlink" title="4.1 mysql 实例"></a>4.1 mysql 实例</h2><ol>
<li><code>mysqld</code>（老板）</li>
<li><code>master thread</code>（经理）</li>
<li><code>other thread</code>（员工）</li>
<li><code>预分配内存</code>（办公区）</li>
</ol>
<h2 id="4-2-mysqld-程序结构"><a href="#4-2-mysqld-程序结构" class="headerlink" title="4.2 mysqld 程序结构"></a>4.2 mysqld 程序结构</h2><h3 id="1-连接层"><a href="#1-连接层" class="headerlink" title="1 连接层"></a>1 连接层</h3><ol>
<li>提供连接协议：TCP/IP 、SOCKET</li>
<li>提供验证：用户、密码、IP、Port、SOCKET …</li>
<li>提供专用连接线程：接收用户SQL，返回结果<ul>
<li><code>show processlist</code><ul>
<li>查看连接线程</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="2-SQL-层"><a href="#2-SQL-层" class="headerlink" title="2 SQL 层"></a>2 SQL 层</h3><ol>
<li>接收上层传送的SQL语句</li>
<li>语法验证模块：验证语句语法,是否满足SQL_MODE</li>
<li>语义检查：判断SQL语句的类型（DQL、DML …）</li>
<li>权限检查：用户对库表有没有权限</li>
<li>解析器：语句执行前进行预处理，生成解析树(执行计划)，说白了就是生成多种执行方案</li>
<li>优化器：根据解析器得出的多种执行计划，进行判断，选择最优的执行计划<ul>
<li>代价模型：资源（CPU IO MEM）的耗损评估性能好坏</li>
</ul>
</li>
<li>执行器：根据最优执行计划，执行SQL语句，产生执行结果（在磁盘上）</li>
<li>提供查询缓存（默认没开启）：会使用redis tair替代查询缓存功能</li>
<li>提供日志记录（默认没开启）：二进制日志 <code>binlog</code> 、审计日志、通用日志 …</li>
</ol>
<h3 id="3-存储引擎层"><a href="#3-存储引擎层" class="headerlink" title="3 存储引擎层"></a>3 存储引擎层</h3><ol>
<li>根据SQL层执行的结果，从磁盘上拿数据</li>
<li>将16进制的磁盘数据，返回给 SQL 层结构化成表</li>
<li>由连接层的专用线程返回给用户</li>
</ol>
<h2 id="4-3-MySQL-逻辑存储结构"><a href="#4-3-MySQL-逻辑存储结构" class="headerlink" title="4.3 MySQL 逻辑存储结构"></a>4.3 MySQL 逻辑存储结构</h2><ol>
<li>库（database）<ol>
<li>库名</li>
<li>库属性（字符集，校对集(排序规则)）</li>
</ol>
</li>
<li>表（table）<ol>
<li>表名</li>
<li>表属性（存储引擎，字符集，校对集(排序规则)）</li>
</ol>
</li>
<li>列（column）/ 字段（field） <ol>
<li>列名</li>
<li>列属性（数据类型，约束，…）</li>
</ol>
</li>
<li>行（row）/ 记录（record）</li>
</ol>
<h2 id="4-4-MySQL-物理存储结构"><a href="#4-4-MySQL-物理存储结构" class="headerlink" title="4.4 MySQL 物理存储结构"></a>4.4 MySQL 物理存储结构</h2><ol>
<li>库（目录）</li>
<li>表<ol>
<li><code>MyISAM</code><ul>
<li><code>.frm</code> ：存储表结构（列名，列属性）</li>
<li><code>.MYD</code> ：存储数据记录</li>
<li><code>.MYI</code> ：存储索引</li>
</ul>
</li>
<li><code>InnoDB</code><ul>
<li><code>.frm</code> ：存储表结构（列名，列属性）</li>
<li><code>.ibd</code> ：存储数据记录和索引</li>
<li><code>.opt</code> ：存储库属性</li>
<li><code>ibdata1</code> ：数据字段信息</li>
</ul>
</li>
</ol>
</li>
<li>InnoDB，一般情况下（非分区表）<ol>
<li>段：一个表就是一个段，一个段由多个区构成</li>
<li>区：一个区由64个连续的页构造，1M 大小（ <code>64*16=1024</code> ）</li>
<li>页：一个页大小为 16 kb</li>
</ol>
</li>
</ol>
<h1 id="五-用户-amp-权限"><a href="#五-用户-amp-权限" class="headerlink" title="五 用户 &amp; 权限"></a>五 用户 &amp; 权限</h1><h2 id="5-1-用户"><a href="#5-1-用户" class="headerlink" title="5.1 用户"></a>5.1 用户</h2><h3 id="1-用户定义"><a href="#1-用户定义" class="headerlink" title="1 用户定义"></a>1 用户定义</h3><ul>
<li><code>user@&#39;Host&#39;</code><ul>
<li><code>Host</code>（白名单）<ul>
<li><code>localhost</code></li>
<li><code>127.0.0.1</code></li>
<li><code>%</code><ul>
<li>任意网段</li>
</ul>
</li>
<li><code>10.0.0.%</code><ul>
<li><code>10.0.0.0~10.0.0.255</code></li>
</ul>
</li>
<li><code>10.0.0.5%</code><ul>
<li><code>10.0.0.50~10.0.0.59</code></li>
</ul>
</li>
<li><code>10.0.0.0/255.255.255.0</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-用户管理"><a href="#2-用户管理" class="headerlink" title="2 用户管理"></a>2 用户管理</h3><h4 id="1-查询用户"><a href="#1-查询用户" class="headerlink" title="1 查询用户"></a>1 查询用户</h4><ul>
<li><code>select user,host,authentication_string from mysql.user</code><ul>
<li>查询用户名，主机，密码</li>
<li>用户信息存储在数据库 <code>mysql</code> 中 的 <code>user</code> 表</li>
</ul>
</li>
</ul>
<h4 id="2-创建用户"><a href="#2-创建用户" class="headerlink" title="2 创建用户"></a>2 创建用户</h4><ul>
<li><code>create user user@&#39;Host&#39; [identified by &#39;password&#39;]</code></li>
</ul>
<h4 id="3-删除用户"><a href="#3-删除用户" class="headerlink" title="3 删除用户"></a>3 删除用户</h4><ul>
<li><code>drop user user@&#39;Host&#39;</code> </li>
</ul>
<h2 id="5-2-权限"><a href="#5-2-权限" class="headerlink" title="5.2 权限"></a>5.2 权限</h2><h3 id="1-权限列表"><a href="#1-权限列表" class="headerlink" title="1 权限列表"></a>1 权限列表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT，INSERT，UPDATE，DELETE，CREATE，DROP，ALTER，SHOW DATABASES，CREATE USER，CREATE TEMPORARY TABLES，</span><br><span class="line">RELOAD，SHUTDOWN，PROCESS，FILE，REFERENCE，INDEX，SUPER，EXECUTE，REPLICATION，SLAVE，REPLICATION，CLIENT，</span><br><span class="line">EVENT，TRIGGER，LOCK TABLES，CREATE VIEW，SHOW VIEW，CREATE ROUTINE，ALTER ROUTINE，CREATE TABLESPACE，</span><br></pre></td></tr></table></figure>
<ol>
<li><code>ALL privileges</code><ul>
<li>所有权限</li>
</ul>
</li>
<li><code>with grant option</code><ul>
<li>可以给别的用户授权，超级管理员才具备</li>
</ul>
</li>
</ol>
<h3 id="2-权限管理"><a href="#2-权限管理" class="headerlink" title="2 权限管理"></a>2 权限管理</h3><h4 id="1-查看权限"><a href="#1-查看权限" class="headerlink" title="1 查看权限"></a>1 查看权限</h4><ul>
<li><code>show grants for user@&#39;Host&#39;</code></li>
</ul>
<h4 id="2-授权"><a href="#2-授权" class="headerlink" title="2 授权"></a>2 授权</h4><ul>
<li><code>grant 权限 on 目标 to 用户 [identified by &#39;password&#39;] [with grant option]</code><ul>
<li>权限<ol>
<li><code>ALL privileges</code></li>
<li>权限列表，以逗号分隔</li>
</ol>
</li>
<li>目标<ol>
<li><code>*.*</code><ul>
<li>所有数据库的所有表</li>
</ul>
</li>
<li><code>database.*</code><ul>
<li>指定数据库的所有表</li>
</ul>
</li>
<li><code>database.table</code><ul>
<li>指定数据库的指定表</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 id="3-回收权限"><a href="#3-回收权限" class="headerlink" title="3 回收权限"></a>3 回收权限</h4><ul>
<li><code>revoke 权限 on 目标 from user@&#39;Host&#39;</code></li>
</ul>
<h1 id="六-MySQL-内置命令"><a href="#六-MySQL-内置命令" class="headerlink" title="六 MySQL 内置命令"></a>六 MySQL 内置命令</h1><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>help</code></td>
<td>打印帮助</td>
</tr>
<tr>
<td><code>\c</code></td>
<td>放弃本条语句，类似 <code>ctrl + c</code></td>
</tr>
<tr>
<td><code>quit</code> <code>exit</code> <code>ctrl+d</code> <code>\q</code></td>
<td>退出</td>
</tr>
<tr>
<td><code>\G</code></td>
<td>竖形显示数据</td>
</tr>
<tr>
<td><code>source 脚本路径</code></td>
<td>导入SQL脚本</td>
</tr>
<tr>
<td><code>tee 路径</code></td>
<td>将输入的sql语句存储到本地</td>
</tr>
<tr>
<td><code>prompt 提示符</code></td>
<td>定义 mysql 提示符，默认为 <code>mysql&gt;</code></td>
</tr>
<tr>
<td><code>delimiter 符号</code></td>
<td>定义结束符，默认为<code>;</code></td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/Git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/Git/" class="post-title-link" itemprop="url">Git</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 21:15:07 / 修改时间：21:15:37" itemprop="dateCreated datePublished" datetime="2020-03-30T21:15:07+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/%E6%8A%80/" itemprop="url" rel="index">
                    <span itemprop="name">技</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/%E6%8A%80/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一  概述"></a>一  概述</h1><ul>
<li>开源的分布式版本控制系统</li>
</ul>
<h1 id="二-配置"><a href="#二-配置" class="headerlink" title="二 配置"></a>二 配置</h1><h2 id="2-1-作用域"><a href="#2-1-作用域" class="headerlink" title="2.1 作用域"></a>2.1 作用域</h2><ol>
<li><code>git config --local</code><ul>
<li>对当前仓库有效（默认）</li>
</ul>
</li>
<li><code>git config --global</code><ul>
<li>对当前用户所有仓库有效</li>
</ul>
</li>
<li><code>git config --system</code><ul>
<li>对系统所有登录用户有效</li>
</ul>
</li>
</ol>
<h2 id="2-2-增删改查"><a href="#2-2-增删改查" class="headerlink" title="2.2 增删改查"></a>2.2 增删改查</h2><ol>
<li><code>git config --list</code><ul>
<li>查看所有配置信息</li>
</ul>
</li>
<li><code>git config --global key value</code><ul>
<li>增加配置</li>
</ul>
</li>
<li><code>git config   --global --unset  key</code><ul>
<li>删除配置</li>
</ul>
</li>
<li><code>git config --global --replace-all key value</code><ul>
<li>修改所有匹配 key 的 value</li>
</ul>
</li>
</ol>
<h2 id="2-3-配置用户和邮箱"><a href="#2-3-配置用户和邮箱" class="headerlink" title="2.3 配置用户和邮箱"></a>2.3 配置用户和邮箱</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;Your Name&quot;</span><br><span class="line">git config --global user.email &quot;Your Email@example.com&quot;</span><br><span class="line">git config --global color.ui true # 语法高亮</span><br></pre></td></tr></table></figure>

<h1 id="三-初始化仓库"><a href="#三-初始化仓库" class="headerlink" title="三 初始化仓库"></a>三 初始化仓库</h1><h2 id="3-1-初始化"><a href="#3-1-初始化" class="headerlink" title="3.1 初始化"></a>3.1 初始化</h2><ol>
<li><code>git init</code><ul>
<li>将所在目录变成 Git 管理的仓库</li>
<li>Git 仓库中会有一个隐藏的 <code>.git</code> 目录</li>
</ul>
</li>
<li><code>git init project_name</code><ul>
<li>在所在目录下创建一个指定名称的 Git 管理的仓库目录</li>
</ul>
</li>
</ol>
<h2 id="3-2-git-目录结构"><a href="#3-2-git-目录结构" class="headerlink" title="3.2 .git 目录结构"></a>3.2 <code>.git</code> 目录结构</h2><ol>
<li><code>branchs</code><ul>
<li>分支目录</li>
</ul>
</li>
<li><code>config</code><ul>
<li>本仓库的配置文件</li>
</ul>
</li>
<li><code>HEAD</code><ul>
<li>指向当前分支</li>
</ul>
</li>
<li><code>description</code><ul>
<li>仓库的描述信息，仅供 GitWeb 程序使用</li>
</ul>
</li>
<li><code>hooks</code><ul>
<li>包含客户端或服务端的钩子脚本（hook scripts）</li>
</ul>
</li>
<li><code>info</code><ul>
<li>包含一个全局性排除（global exclude）文件， 用以放置那些不希望被记录在 <code>.gitignore</code> 文件中的忽略模式（ignored patterns）</li>
</ul>
</li>
<li><code>refs</code><ol>
<li><code>heads</code><ul>
<li>目录下每个文件代表一个本地分支，用来保存该分支最新 <code>commit_id</code></li>
</ul>
</li>
<li><code>remotes</code><ul>
<li>目录下每个目录代表一个远程仓库，远程仓库目录下每一个文件代表一个远程分支，保存远程仓库该分支的最新 <code>commit_id</code></li>
</ul>
</li>
<li><code>tags</code></li>
</ol>
</li>
<li><code>objects</code><ul>
<li>存储所有数据内容，<code>commit_id</code> 哈希值共 40 位，前 2 位作为目录名，后 38 为作为文件名</li>
</ul>
</li>
<li><code>index</code><ul>
<li>暂存区（stage）</li>
</ul>
</li>
</ol>
<h1 id="四-Git-原理"><a href="#四-Git-原理" class="headerlink" title="四 Git 原理"></a>四 Git 原理</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><ol>
<li>Git 的核心部分是一个简单的键值对数据库（key-value data store）</li>
<li>可以向 Git 仓库中插入任意类型的内容，它会返回一个唯一的键，通过该键可以在任意时刻再次取回该内容</li>
</ol>
<h2 id="4-2-存取数据"><a href="#4-2-存取数据" class="headerlink" title="4.2 存取数据"></a>4.2 存取数据</h2><h3 id="1-存"><a href="#1-存" class="headerlink" title="1 存"></a>1 存</h3><ul>
<li><code>git bash-object</code><ol>
<li>可将任意数据保存于 <code>.git/objects</code> 目录（即 对象数据库），并返回指向该数据对象的唯一的键</li>
<li>键<ul>
<li>长度为 40 个字符的校验和，这是一个 SHA-1 哈希值（将待存储的数据外加一个头部信息（header）一起做 SHA-1 校验运算而得的校验和）</li>
</ul>
</li>
<li>校验和的前 2 个字符作为<code>./git/objects/子目录名</code>，余下的 38 个字符则用作文件名</li>
</ol>
</li>
</ul>
<ol>
<li><code>git hash-object -w FILE</code><ul>
<li>存储文件数据</li>
<li><code>-w</code><ul>
<li>指示该命令不要只返回键，还要将该对象写入数据库中</li>
</ul>
</li>
</ul>
</li>
<li><code>git hash-object -w --stdin</code><ul>
<li>读取标准输入中的数据并存储</li>
</ul>
</li>
</ol>
<h3 id="2-取"><a href="#2-取" class="headerlink" title="2 取"></a>2 取</h3><ul>
<li><code>git cat-file [OPTION] commit_id</code><ul>
<li><code>OPTION</code><ul>
<li><code>-p</code><ul>
<li>查看文件内容</li>
</ul>
</li>
<li><code>-t</code><ul>
<li>查看文件类型</li>
</ul>
</li>
<li><code>-s</code><ul>
<li>查看文件大小</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-3-Git-对象"><a href="#4-3-Git-对象" class="headerlink" title="4.3 Git 对象"></a>4.3 Git 对象</h2><h3 id="1-数据对象（block-object）"><a href="#1-数据对象（block-object）" class="headerlink" title="1 数据对象（block object）"></a>1 数据对象（block object）</h3><ol>
<li>数据对象类似 Linux 中的 inode 或文件内容</li>
<li>只存储文件内容，不存储文件名</li>
</ol>
<h3 id="2-树对象（tree-object）"><a href="#2-树对象（tree-object）" class="headerlink" title="2 树对象（tree object）"></a>2 树对象（tree object）</h3><ol>
<li>树对象类似 Linux 中的目录项</li>
<li>一个树对象包含了一条或多条树对象记录（tree entry），每条记录含有一个指向数据对象或者子树对象的 SHA-1 指针，以及相应的模式、类型、文件名信息</li>
</ol>
<h3 id="3-提交对象（commit-object）"><a href="#3-提交对象（commit-object）" class="headerlink" title="3 提交对象（commit object）"></a>3 提交对象（commit object）</h3><ol>
<li>一个顶层树对象，代表当前项目快照</li>
<li>可能存在的父提交对象</li>
<li>作者/提交者信息（依据你的 user.name 和 user.email 配置来设定，外加一个时间戳）</li>
<li>留空一行，最后是提交注释</li>
</ol>
<h3 id="4-标签对象（tag-object）"><a href="#4-标签对象（tag-object）" class="headerlink" title="4 标签对象（tag object）"></a>4 标签对象（tag object）</h3><ol>
<li>非常类似于提交对象——它包含一个标签创建者信息、一个日期、一段注释信息，以及一个指针</li>
<li>区别在于，标签对象通常指向一个提交对象，而不是一个树对象。 它像是一个永不移动的分支引用——永远指向同一个提交对象，只不过给这个提交对象加上一个更友好的名字罢了。</li>
</ol>
<h2 id="4-4-总结"><a href="#4-4-总结" class="headerlink" title="4.4 总结"></a>4.4 总结</h2><ol>
<li>每次我们运行 <code>git add</code> 和 <code>git commit</code> 命令时，Git 所做的工作实质就是将被改写的文件保存为数据对象， 更新暂存区，记录树对象，最后创建一个指明了顶层树对象和父提交的提交对象</li>
<li>这三种主要的 Git 对象——数据对象、树对象、提交对象——最初均以单独文件的形式保存在 <code>.git/objects</code> 目录下</li>
</ol>
<h2 id="4-5"><a href="#4-5" class="headerlink" title="4.5 ?"></a>4.5 ?</h2><ul>
<li>工作区的文件分为两种<ol>
<li>未暂存（新增文件）<ol>
<li>删、改、重命名<ul>
<li>随意操作无影响，之后 <code>git add</code> 变成已暂存</li>
</ul>
</li>
</ol>
</li>
<li>已暂存<ol>
<li>改<ul>
<li>需要重新 <code>git add</code>，之后 <code>git commit</code></li>
</ul>
</li>
<li>删除<ul>
<li>需要将工作区和暂存区的都删除 <code>git rm</code>，之后 <code>git commit</code></li>
</ul>
</li>
<li>重命名<ol>
<li><code>git mv</code> 直接 <code>git commit</code></li>
<li><code>mv</code> 相当于删除和新增文件（未暂存）<ol>
<li><code>git rm</code></li>
<li><code>git add</code></li>
<li><code>git commit</code></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ul>
<h1 id="五-Git-工作流程"><a href="#五-Git-工作流程" class="headerlink" title="五 Git 工作流程"></a>五 Git 工作流程</h1><h2 id="5-1-相关概念"><a href="#5-1-相关概念" class="headerlink" title="5.1 相关概念"></a>5.1 相关概念</h2><ol>
<li><code>Workspace</code><ul>
<li>工作区，仓库中除了 <code>.git</code> 目录的其它区域</li>
</ul>
</li>
<li><code>Index / Stage</code><ul>
<li>暂存区，即 <code>.git/index</code> 文件</li>
</ul>
</li>
<li><code>Repository</code><ul>
<li>本地仓库，即 <code>.git/objects</code> 目录，HEAD指向最新放入仓库的版本</li>
</ul>
</li>
<li><code>Remote</code><ul>
<li>远程仓库</li>
</ul>
</li>
</ol>
<h2 id="5-2-文件状态"><a href="#5-2-文件状态" class="headerlink" title="5.2 文件状态"></a>5.2 文件状态</h2><ol>
<li><code>Untracked</code><ul>
<li>未追踪状态，工作区中未被 git 仓库管理的文件，没有添加到暂存区</li>
</ul>
</li>
<li><code>Staged</code><ul>
<li>暂存状态，工作区中未被 git 仓库管理的文件，添加到了暂存区</li>
</ul>
</li>
<li><code>Unmodify</code><ul>
<li>未修改状态，工作区中已被 git 仓库管理的文件，没有任何修改与 git 仓库中一致</li>
</ul>
</li>
<li><code>Modified</code><ul>
<li>已修改状态，工作区中已被 git 仓库管理的文件，有改动与 git 仓库中不一致</li>
</ul>
</li>
</ol>
<h2 id="5-3-命令"><a href="#5-3-命令" class="headerlink" title="5.3 命令"></a>5.3 命令</h2><h3 id="1-git-status"><a href="#1-git-status" class="headerlink" title="1 git status"></a>1 git status</h3><ol>
<li><code>git status</code><ul>
<li>查看仓库状态</li>
</ul>
</li>
</ol>
<h3 id="2-git-add"><a href="#2-git-add" class="headerlink" title="2 git add"></a>2 git add</h3><ol>
<li><code>git add FILE</code><ul>
<li>把文件添加到暂存区，可添加多个，用空格隔开</li>
</ul>
</li>
<li><code>git add -u</code><ul>
<li>把有改动的已经被 git 仓库管理的文件添加到暂存区</li>
</ul>
</li>
<li><code>git add .|*</code><ul>
<li>把当前目录所有有改动的文件添加到暂存区（包括新增的）</li>
</ul>
</li>
</ol>
<h3 id="3-git-rm"><a href="#3-git-rm" class="headerlink" title="3 git rm"></a>3 git rm</h3><ol>
<li><code>git rm --cache FILE</code><ul>
<li>从暂存区删除文件，即从暂存区撤回</li>
</ul>
</li>
<li><code>git rm FILE</code><ul>
<li>从暂存区和工作区同时删除文件</li>
</ul>
</li>
</ol>
<h3 id="4-git-commit"><a href="#4-git-commit" class="headerlink" title="4 git commit"></a>4 git commit</h3><ul>
<li><code>git commit [OPTION]</code><ul>
<li>将暂存区文件提交到本地仓库当前分支</li>
<li><code>OPTION</code><ul>
<li><code>-m &quot;message&quot;</code><ul>
<li>提交说明</li>
</ul>
</li>
<li><code>-a</code><ul>
<li>已经被 git 仓库管理的文件，会自动暂存并提交，即相当于 <code>git add</code></li>
</ul>
</li>
<li><code>--amend</code><ul>
<li>将暂存区中的文件提交。 </li>
<li>如果自上次提交以来还未做任何修改，即暂存区和本地仓库一致，那么快照会保持不变，所修改的只是提交信息</li>
<li>可以用来修改上一次提交信息</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-git-mv"><a href="#5-git-mv" class="headerlink" title="5 git mv"></a>5 git mv</h3><ol>
<li><code>git mv oldName newName</code><ul>
<li>将工作区和暂存区的文件同时重命名</li>
</ul>
</li>
<li><code>mv</code> 和 <code>git mv</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git mv a a.txt</span><br><span class="line">相当于</span><br><span class="line">mv a a.txt</span><br><span class="line">git rm a</span><br><span class="line">git add a.txt</span><br></pre></td></tr></table></figure>
<ol>
<li>使用 <code>mv</code> 时，相当于删除了原名称文件，创建了新名称文件</li>
<li>此时需要删除暂存区中的原名称文件，然后把新名称文件添加到暂存区</li>
</ol>
</li>
</ol>
<h3 id="6-git-diff"><a href="#6-git-diff" class="headerlink" title="6 git diff"></a>6 git diff</h3><ol>
<li><code>git diff</code><ul>
<li>比较工作区和暂存区的差异</li>
</ul>
</li>
<li><code>git diff --cached</code><ul>
<li>比较暂存区和本地仓库（最新版本HEAD）的差异</li>
</ul>
</li>
<li><code>git diff HEAD</code><ul>
<li>比较工作区和本地仓库（最新版本HEAD）的差异</li>
</ul>
</li>
<li><code>git diff commit_id</code><ul>
<li>比较工作区和本地仓库（指定 <code>commit_id</code> 的版本）的差异</li>
</ul>
</li>
<li><code>git diff --cached commit_id</code><ul>
<li>比较暂存区和本地仓库（指定 <code>commit_id</code> 的版本）的差异</li>
</ul>
</li>
<li><code>git diff commit_id commit_id</code><ul>
<li>比较本地仓库中两个 <code>commit-id</code> 版本间的差异</li>
</ul>
</li>
</ol>
<h3 id="7-git-log"><a href="#7-git-log" class="headerlink" title="7 git log"></a>7 git log</h3><ol>
<li><code>git log [OPTION]</code><ul>
<li>查看所有历史提交信息</li>
<li><code>OPTION</code><ul>
<li><code>-n</code><ul>
<li>显示最近 n 条</li>
</ul>
</li>
<li><code>-p</code><ul>
<li>显示每次提交详细的变化</li>
</ul>
</li>
<li><code>--oneline</code><ul>
<li>一行显示（显示8位哈希值和提交message）</li>
</ul>
</li>
<li><code>--decorate</code><ul>
<li>显示分支指针当前指向 </li>
</ul>
</li>
<li><code>--pretty=</code><ul>
<li>使用其他格式显示</li>
<li><code>oneline</code><ul>
<li>一行显示（显示完整哈希值和提交message）</li>
</ul>
</li>
<li><code>short</code></li>
<li><code>full</code></li>
<li><code>fuller</code></li>
<li><code>format</code></li>
<li><code>......</code></li>
</ul>
</li>
<li><code>--graph</code><ul>
<li>显示分支合并图形</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>gitk</code><ul>
<li>图形界面</li>
<li>相当于 <code>git log</code> 命令的可视化版本</li>
</ul>
</li>
</ol>
<h3 id="8-git-reflog"><a href="#8-git-reflog" class="headerlink" title="8 git reflog"></a>8 git reflog</h3><ol>
<li><code>git reflog</code><ul>
<li>记录着每一次命令及其对应id</li>
<li><code>git log</code> 只会显示 HEAD 及其之前的 <code>commit_id</code>，回溯之后，可以用此命令查询 HEAD 之后的 <code>commit_id</code></li>
</ul>
</li>
</ol>
<h3 id="9-git-reset"><a href="#9-git-reset" class="headerlink" title="9 git reset"></a>9 git reset</h3><ol>
<li><code>git reset  [OPTION] commit_id</code><ul>
<li>回溯到指定 <code>commit_id</code> 的版本</li>
<li><code>OPTION</code><ul>
<li><code>--mixed</code>（默认）<ul>
<li>保留工作区，重置暂存区和本地仓库</li>
</ul>
</li>
<li><code>--soft</code><ul>
<li>保留工作区和暂存区，重置本地仓库</li>
</ul>
</li>
<li><code>--hard</code><ul>
<li>重置工作区、暂存区和本地仓库</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>版本说明<ul>
<li><code>HEAD</code><ul>
<li>当前版本</li>
</ul>
</li>
<li><code>HEAD^</code><ul>
<li>上个版本</li>
</ul>
</li>
<li><code>HEAD^^</code><ul>
<li>上上个版本</li>
</ul>
</li>
<li><code>HEAD-100</code><ul>
<li>上100个版本</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="10-git-checkout"><a href="#10-git-checkout" class="headerlink" title="10 git checkout"></a>10 git checkout</h3><ol>
<li><code>git checkout branch_name</code><ul>
<li>切换分支</li>
</ul>
</li>
<li><code>git checkout -- FILE</code><ul>
<li>从暂存区检出文件覆盖工作区</li>
</ul>
</li>
</ol>
<h4 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h4><ol>
<li>工作区没有 <code>git add</code> 到暂存区，即暂存区没有改变<ol>
<li><code>git checkout -- FILE</code><ul>
<li>直接从暂存区检出覆盖即可</li>
</ul>
</li>
</ol>
</li>
<li>工作区 <code>git add</code> 到暂存区，修改了暂存区<ol>
<li><code>git reset HEAD FILE</code><ul>
<li>默认 <code>mixed</code> 会重置暂存区和本地仓库</li>
<li>即恢复暂存区</li>
</ul>
</li>
<li><code>git checkout -- FILE</code><ul>
<li>从暂存区检出覆盖</li>
</ul>
</li>
</ol>
</li>
</ol>
<h1 id="六-分支"><a href="#六-分支" class="headerlink" title="六 分支"></a>六 分支</h1><h2 id="6-1-分支操作"><a href="#6-1-分支操作" class="headerlink" title="6.1 分支操作"></a>6.1 分支操作</h2><h3 id="1-查看分支"><a href="#1-查看分支" class="headerlink" title="1 查看分支"></a>1 查看分支</h3><ul>
<li><code>git branch [OPTION]</code><ul>
<li>显示本地所有分支，当前分支前有 <code>*</code> 号</li>
<li><code>OPTION</code><ul>
<li><code>-r</code><ul>
<li>显示远程所有分支</li>
</ul>
</li>
<li><code>-a</code><ul>
<li>显示本地和远程所有分支</li>
</ul>
</li>
<li><code>-v</code><ul>
<li>显示本地分支及其最后一次提交</li>
</ul>
</li>
<li><code>-vv</code><ul>
<li>显示本地分支及其跟踪的远程分支</li>
</ul>
</li>
<li><code>--merged</code><ul>
<li>显示分支列表中已经合并到当前分支的分支</li>
</ul>
</li>
<li><code>--no-merged</code><ul>
<li>显示分支列表中尚未合并到当前分支的分支</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-创建分支"><a href="#2-创建分支" class="headerlink" title="2 创建分支"></a>2 创建分支</h3><ul>
<li><code>git branch branch_name</code></li>
</ul>
<h3 id="3-切换分支"><a href="#3-切换分支" class="headerlink" title="3 切换分支"></a>3 切换分支</h3><ol>
<li><code>git checkout branch_name</code> 或 <code>git switch branch_name</code>（新）<ul>
<li>切换到指定分支</li>
</ul>
</li>
<li><code>git checkout -b branch_name</code> 或 <code>git switch -c branch_name</code>（新）<ul>
<li>创建并切换到指定分支</li>
</ul>
</li>
</ol>
<h3 id="4-删除分支"><a href="#4-删除分支" class="headerlink" title="4 删除分支"></a>4 删除分支</h3><ol>
<li><code>git branch -d branch_name</code><ul>
<li>删除本地分支</li>
</ul>
</li>
<li><code>git push remote_name --delete branch_name</code><ul>
<li>删除远程分支</li>
</ul>
</li>
</ol>
<h3 id="5-合并分支"><a href="#5-合并分支" class="headerlink" title="5 合并分支"></a>5 合并分支</h3><ul>
<li><code>git merge [--no-ff] branch_name</code><ul>
<li>把指定分支合并到当前分支</li>
<li><code>--no-ff</code>（no fast forward）<ol>
<li>默认使用 <code>fast forward</code> 合并策略，其实就是将当前分支的指针指向了 <code>branch_name</code></li>
<li><code>--no-ff</code> 每次合并都会产生一个新的提交</li>
</ol>
</li>
<li>解决合并冲突<ol>
<li><code>git status</code> 查看冲突信息</li>
<li><code>vim</code> 手动修改冲突文件</li>
<li><code>git add</code></li>
<li><code>git commit</code></li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="6-2-变基（rebase）"><a href="#6-2-变基（rebase）" class="headerlink" title="6.2 变基（rebase）"></a>6.2 变基（rebase）</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>在 Git 中整合来自不同分支的修改主要有两种方法：<code>merge</code> 以及 <code>rebase</code></li>
<li>将提交到某一分支上的所有修改都移至另一分支上，就好像“重新播放”一样，这种操作就叫做 变基</li>
<li>变基可以使提交历史更为线形，简洁，而合并则是保留每一个提交历史</li>
<li><strong>如果提交存在于你的仓库之外，而别人可能基于这些提交进行开发，那么不要执行变基</strong></li>
<li><strong>只对尚未推送或分享给别人的本地修改执行变基操作清理历史， 从不对已推送至别处的提交执行变基操作</strong></li>
</ol>
<h3 id="2-变基原理"><a href="#2-变基原理" class="headerlink" title="2 变基原理"></a>2 变基原理</h3><ol>
<li>首先找到两个分支（要变基的分支 <code>dev</code> 和目标基底分支 <code>master</code>）的最近共同祖先</li>
<li>然后对比 <code>dev</code> 分支相对于该祖先的历次提交，提取相应的修改并存为临时文件</li>
<li>将 <code>dev</code> 分支指向 <code>master</code> 分支的最后一次提交</li>
<li>在 <code>master</code> 的最后一次提交，依序应用之前的临时文件，最后生成一个新的提交</li>
<li>之后将 <code>dev</code> 分支快速合并到 <code>master</code></li>
</ol>
<h3 id="3-命令"><a href="#3-命令" class="headerlink" title="3 命令"></a>3 命令</h3><h4 id="1-变基命令"><a href="#1-变基命令" class="headerlink" title="1 变基命令"></a>1 变基命令</h4><ol>
<li><code>git rebase base_branch [re_branch]</code><ul>
<li>将 <code>re_branch</code> 分支变基到 <code>base_branch</code> 分支</li>
<li><code>base_branch</code><ul>
<li>目标基底分支</li>
</ul>
</li>
<li><code>re_branch</code><ul>
<li>要变基的分支，省略则表示当前分支</li>
</ul>
</li>
</ul>
</li>
<li><code>git rebase --onto base_branch branch re_branch</code><ol>
<li>首先找出 <code>re_branch</code> 分支与 <code>branch</code> 分支的分歧之后的提交</li>
<li>然后将这些提交变基到 <code>base_branch</code> 上</li>
</ol>
</li>
</ol>
<h4 id="2-变基过程中的命令"><a href="#2-变基过程中的命令" class="headerlink" title="2 变基过程中的命令"></a>2 变基过程中的命令</h4><ol>
<li><code>git rebase --skip</code><ul>
<li>跳过当前冲突</li>
</ul>
</li>
<li><code>git rebase --abort</code><ul>
<li>退出rebase模式</li>
</ul>
</li>
<li><code>git add</code><ul>
<li>解决冲突后使用 <code>git add</code> 表示冲突已经解决</li>
</ul>
</li>
<li><code>git rebase --continue</code><ul>
<li>解决冲突并 <code>git add</code> 之后，表示继续接下来的操作</li>
</ul>
</li>
</ol>
<h3 id="4-修改提交"><a href="#4-修改提交" class="headerlink" title="4 修改提交"></a>4 修改提交</h3><h4 id="1-合并多个连续提交"><a href="#1-合并多个连续提交" class="headerlink" title="1 合并多个连续提交"></a>1 合并多个连续提交</h4><ol>
<li><code>git rebase -i commit_id</code><ul>
<li><code>commit-id</code>为所有要合的commit的前一个commit-id</li>
<li>会进入交互界面</li>
</ul>
</li>
<li>要合成的commit第一个<code>pick</code>不变（要合成到这个提交上），剩下的改为<code>s</code>，<code>pick s s s ...</code></li>
<li>进入提交信息修改界面</li>
</ol>
<h4 id="2-合并多个间隔提交"><a href="#2-合并多个间隔提交" class="headerlink" title="2 合并多个间隔提交"></a>2 合并多个间隔提交</h4><ol>
<li><code>git rebase -i commit_id</code></li>
<li>手动调整commit位置，<code>pick s s s ...</code></li>
<li><code>git rebase --continue</code><ul>
<li>进入commit信息修改页面</li>
</ul>
</li>
</ol>
<h4 id="3-修改旧提交的-message"><a href="#3-修改旧提交的-message" class="headerlink" title="3 修改旧提交的 message"></a>3 修改旧提交的 message</h4><ul>
<li><code>git rebase -i commit_id</code><ul>
<li>进入交互界面，使用相应命令</li>
<li><code>commit_id</code><ul>
<li>要修改的提交的父提交的 <code>commit_id</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="6-3-贮藏（stash）"><a href="#6-3-贮藏（stash）" class="headerlink" title="6.3 贮藏（stash）"></a>6.3 贮藏（stash）</h2><h3 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h3><ol>
<li>当需要切换分支而又不想现在提交时，可以贮藏，然后恢复</li>
<li>只能贮藏已追踪和非 <code>.gitignore</code> 的文件 </li>
</ol>
<h3 id="2-添加贮藏"><a href="#2-添加贮藏" class="headerlink" title="2 添加贮藏"></a>2 添加贮藏</h3><ul>
<li><code>git stash [push] [OPTION] [FILE]</code><ul>
<li>将工作区和暂存区的状态存储起来以备将来使用，之后将工作区和暂存区内容重置为最近一次提交后的内容</li>
<li><code>push</code><ul>
<li><code>git stash</code> 是 <code>git stash push</code> 的简写</li>
</ul>
</li>
<li><code>OPTION</code><ul>
<li><code>-m &quot;message&quot;</code><ul>
<li>添加暂存信息</li>
</ul>
</li>
<li><code>-u, --include-untracked</code><ul>
<li>将未追踪文件也贮藏</li>
</ul>
</li>
<li><code>-a, --all</code><ul>
<li>将忽略文件也贮藏</li>
</ul>
</li>
<li><code>-k, --keep-index</code><ul>
<li>表示只重置工作区，不重置暂存区</li>
<li>默认值是 <code>--no-keep-index</code></li>
</ul>
</li>
</ul>
</li>
<li><code>FILE</code><ul>
<li>只贮藏指定文件</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-查看贮藏"><a href="#3-查看贮藏" class="headerlink" title="3 查看贮藏"></a>3 查看贮藏</h3><ul>
<li><code>git stash list</code></li>
</ul>
<h3 id="4-应用贮藏（恢复）"><a href="#4-应用贮藏（恢复）" class="headerlink" title="4 应用贮藏（恢复）"></a>4 应用贮藏（恢复）</h3><ol>
<li><code>git stash apply [stash_name] [--index]</code><ul>
<li><code>stash_name</code><ul>
<li>省略表示应用最新一个贮藏，可以使用名称指定一个贮藏，如 <code>stash@{2}</code></li>
</ul>
</li>
<li><code>--index</code><ul>
<li>默认应用贮藏时，不会恢复暂存区，<code>--index</code> 表示恢复暂存区</li>
</ul>
</li>
</ul>
</li>
<li><code>git stash pop</code><ol>
<li>用法同 <code>git stash apply</code></li>
<li>区别<ol>
<li><code>git stash apply</code> 应用并保留贮藏</li>
<li><code>git stash pop</code> 应用并删除贮藏</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="5-删除贮藏"><a href="#5-删除贮藏" class="headerlink" title="5 删除贮藏"></a>5 删除贮藏</h3><ol>
<li><code>git stash drop stash_name</code><ul>
<li>删除指定储藏</li>
</ul>
</li>
<li><code>git stash clear</code><ul>
<li>删除所有储藏</li>
</ul>
</li>
</ol>
<h2 id="6-4-追踪分支"><a href="#6-4-追踪分支" class="headerlink" title="6.4 追踪分支"></a>6.4 追踪分支</h2><ol>
<li><code>git checkout -b &lt;本地分支名&gt; &lt;远程主机&gt;/&lt;远程分支名&gt;</code><ul>
<li>创建一个本地分支追踪远程主机的远程分支</li>
</ul>
</li>
<li><code>git checkout --track &lt;远程主机&gt;/&lt;远程分支名&gt;</code><ul>
<li>创建一个与远程分支同名的本地分支来追踪远程主机的远程分支</li>
</ul>
</li>
<li><code>git branch -u &lt;远程主机&gt;/&lt;远程分支名&gt;</code><ul>
<li>设置当前本地分支追踪远程主机的远程分支</li>
<li>当设置好追踪分支后，可以通过 <code>@{upstream}</code> 或 <code>@{u}</code> 快捷方式来引用它</li>
</ul>
</li>
</ol>
<h1 id="七-标签"><a href="#七-标签" class="headerlink" title="七 标签"></a>七 标签</h1><h2 id="7-1-概述"><a href="#7-1-概述" class="headerlink" title="7.1 概述"></a>7.1 概述</h2><ol>
<li>类似于别名，因为 <code>commit_id</code> 看不出提交的信息，通过打标签可以更方便识别。</li>
</ol>
<h2 id="7-2-标签分类"><a href="#7-2-标签分类" class="headerlink" title="7.2 标签分类"></a>7.2 标签分类</h2><h3 id="1-轻量标签（lightweight）"><a href="#1-轻量标签（lightweight）" class="headerlink" title="1 轻量标签（lightweight）"></a>1 轻量标签（lightweight）</h3><ol>
<li>轻量标签就是个指向特定提交对象的引用</li>
</ol>
<h3 id="2-附注标签（annotated）"><a href="#2-附注标签（annotated）" class="headerlink" title="2 附注标签（annotated）"></a>2 附注标签（annotated）</h3><ol>
<li>附注标签是存储在 Git 数据库中的一个完整对象</li>
<li>它有自身的校验和信息，包含着打标签者的名字，电子邮件地址、日期以及标签说明</li>
<li>标签允许使用 GNU Privacy Guard (GPG) 签名和验证</li>
</ol>
<h2 id="7-3-查看标签"><a href="#7-3-查看标签" class="headerlink" title="7.3 查看标签"></a>7.3 查看标签</h2><ol>
<li><code>git tag [-l Pattern]</code><ul>
<li>查看所有标签，默认按字母排序</li>
<li><code>-l Pattern</code><ul>
<li>只显示匹配的标签</li>
</ul>
</li>
</ul>
</li>
<li><code>git show tag_name</code><ul>
<li>查看指定标签信息及其对应的提交信息</li>
</ul>
</li>
</ol>
<h2 id="7-4-创建标签"><a href="#7-4-创建标签" class="headerlink" title="7.4 创建标签"></a>7.4 创建标签</h2><ol>
<li><code>git tag tag_name [commit_id]</code><ul>
<li>创建轻量标签</li>
<li>默认为当前分支 HEAD 打标签，可以指定 <code>commit_id</code></li>
</ul>
</li>
<li><code>git tag -a tag_name -m &quot;message&quot; [commit_id]</code><ul>
<li>创建附注标签，并添加标签信息</li>
</ul>
</li>
<li><code>git tag -s tag_name -m &quot;message&quot; [commit_id]</code><ul>
<li>采用GPG签名创建附注标签，必须首先安装 GPG</li>
</ul>
</li>
</ol>
<h2 id="7-5-推送标签"><a href="#7-5-推送标签" class="headerlink" title="7.5 推送标签"></a>7.5 推送标签</h2><ol>
<li><code>git push origin tag_name</code><ul>
<li>推送一个本地标签到远程仓库</li>
<li>默认情况下，<code>git push</code> 命令并不会把标签推送到远端服务器上</li>
</ul>
</li>
<li><code>git push origin --tags</code><ul>
<li>推送全部不在远程仓库的本地标签</li>
</ul>
</li>
</ol>
<h2 id="7-6-删除标签"><a href="#7-6-删除标签" class="headerlink" title="7.6 删除标签"></a>7.6 删除标签</h2><ol>
<li><code>git tag -d tag_name</code><ul>
<li>删除本地标签</li>
<li>并不会从远程仓库中移除这个标签</li>
</ul>
</li>
<li><code>git push remote_name :refs/tags/tag_name</code><ul>
<li>删除远程标签</li>
<li>将冒号前面的空值推送到远程标签名，从而高效地删除它</li>
</ul>
</li>
<li><code>git push remote_name --delete tag_name</code><ul>
<li>删除远程标签，更直观</li>
</ul>
</li>
</ol>
<h1 id="八-远程仓库"><a href="#八-远程仓库" class="headerlink" title="八 远程仓库"></a>八 远程仓库</h1><h2 id="8-1-远程仓库配置"><a href="#8-1-远程仓库配置" class="headerlink" title="8.1 远程仓库配置"></a>8.1 远程仓库配置</h2><h3 id="1-HTTPS"><a href="#1-HTTPS" class="headerlink" title="1 HTTPS"></a>1 HTTPS</h3><ul>
<li>本地与远程通讯时需要邮箱和密码验证</li>
</ul>
<h3 id="2-SSH"><a href="#2-SSH" class="headerlink" title="2 SSH"></a>2 SSH</h3><ol>
<li>查看本地 <code>~/.ssh</code> 目录下是否有公钥和私钥，若没有则创建<ol>
<li><code>id_rsa</code></li>
<li><code>id_rsa.pub</code></li>
</ol>
</li>
<li><code>ssh-keygen -t rsa -b 4096 -C &quot;comment&quot;</code><ul>
<li><code>-t</code><ul>
<li>密钥类型，默认 rsa</li>
</ul>
</li>
<li><code>-b</code><ul>
<li>密钥长度，rsa 密钥，最小要求768位，默认是2048位</li>
</ul>
</li>
<li><code>-C</code><ul>
<li>注释信息</li>
</ul>
</li>
</ul>
</li>
<li>配置 GitHub<ul>
<li><code>Title</code><ul>
<li>任意</li>
</ul>
</li>
<li><code>Key</code><ul>
<li><code>id_rsa.pub</code> 文件的内容</li>
<li>可以添加多个</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="8-2-远程仓库操作"><a href="#8-2-远程仓库操作" class="headerlink" title="8.2 远程仓库操作"></a>8.2 远程仓库操作</h2><h3 id="1-查看远程仓库"><a href="#1-查看远程仓库" class="headerlink" title="1 查看远程仓库"></a>1 查看远程仓库</h3><ol>
<li><code>git remote</code><ul>
<li>查看已经配置的远程仓库</li>
</ul>
</li>
<li><code>git remote -v</code><ul>
<li>查看已经配置的远程仓库及URL信息</li>
</ul>
</li>
<li><code>git remote show remote_name</code><ul>
<li>查看某个远程仓库的信息</li>
</ul>
</li>
</ol>
<h3 id="2-添加远程仓库"><a href="#2-添加远程仓库" class="headerlink" title="2 添加远程仓库"></a>2 添加远程仓库</h3><ul>
<li><code>git remote add ShortName URL</code><ul>
<li><code>ShortName</code><ul>
<li>远程仓库别名，通常为 <code>origin</code></li>
</ul>
</li>
<li><code>URL</code><ol>
<li><code>HTTPS</code><ul>
<li><code>https://github.com/username/repository.git</code></li>
</ul>
</li>
<li><code>SSH</code><ul>
<li><code>git@github.com:username/repository.git</code></li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="3-重命名远程仓库"><a href="#3-重命名远程仓库" class="headerlink" title="3 重命名远程仓库"></a>3 重命名远程仓库</h3><ul>
<li><code>git remote rename old_name new_name</code></li>
</ul>
<h3 id="4-删除远程仓库"><a href="#4-删除远程仓库" class="headerlink" title="4 删除远程仓库"></a>4 删除远程仓库</h3><ul>
<li><code>git remote remove remote_name</code></li>
</ul>
<h2 id="8-3-git-push"><a href="#8-3-git-push" class="headerlink" title="8.3 git push"></a>8.3 git push</h2><ul>
<li><code>git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</code><ul>
<li>将本地分支推送到远程仓库的指定分支</li>
</ul>
<ol>
<li><code>git push &lt;远程主机名&gt; &lt;本地分支名&gt;</code><ul>
<li>省略远程分支</li>
<li>表示将本地分支推送到远程同名分支，如果不存在，则创建</li>
</ul>
</li>
<li><code>git push &lt;远程主机名&gt; :&lt;远程分支名&gt;</code><ul>
<li>省略本地分支</li>
<li>相当于推送了一个空的本地分支，即删除指定的远程分支，等价于 <code>git push &lt;远程主机名&gt; --delete &lt;远程分支名&gt;</code></li>
</ul>
</li>
<li><code>git push &lt;远程主机名&gt;</code><ul>
<li>如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略</li>
<li>表示将当前分支推送到远程对应分支</li>
</ul>
</li>
<li><code>git push</code><ul>
<li>如果当前分支只与一个远程主机的存在追踪关系，则主机名可以省略</li>
</ul>
</li>
<li><code>git push -u &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</code><ul>
<li><code>-u</code><ul>
<li>如果当前分支与多个远程主机的存在追踪关系，第一次推送使用 <code>-u</code> 指定一个默认的远程主机</li>
<li>以后就可以省略</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li>推送模式<ol>
<li><code>simple</code> <ul>
<li>默认，只推送当前分支</li>
</ul>
</li>
<li><code>matching</code><ul>
<li>推送所有有对应的远程分支的本地分支</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="8-4-git-clone"><a href="#8-4-git-clone" class="headerlink" title="8.4 git clone"></a>8.4 git clone</h2><ul>
<li><code>git clone URL</code><ul>
<li>克隆到当前目录，通常会自动地创建一个跟踪 <code>origin/master</code> 的 <code>master</code> 分支</li>
<li><code>URL</code><ol>
<li><code>HTTPS</code><ul>
<li><code>https://github.com/username/repository.git</code></li>
</ul>
</li>
<li><code>SSH</code><ul>
<li><code>git@github.com:username/repository.git</code></li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="8-5-git-fetch"><a href="#8-5-git-fetch" class="headerlink" title="8.5 git fetch"></a>8.5 git fetch</h2><ol>
<li><code>git fetch &lt;远程主机名&gt;</code><ul>
<li>将远程仓库所有分支的更新取回到本地</li>
</ul>
</li>
<li><code>git fetch &lt;远程主机名&gt; &lt;远程分支名&gt;</code><ul>
<li>将远程仓库指定分支的更新取回到本地</li>
</ul>
</li>
<li><code>FETCH_HEAD</code><ul>
<li>指向使用 <code>git fetch</code> 从远程仓库取下来的指定分支的最新版本</li>
</ul>
</li>
</ol>
<h2 id="8-6-git-pull"><a href="#8-6-git-pull" class="headerlink" title="8.6 git pull"></a>8.6 git pull</h2><ol>
<li><code>git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</code><ul>
<li>取回远程主机某个分支的更新，并与本地的指定分支合并</li>
</ul>
</li>
</ol>
<h2 id="8-7-git-fetch-amp-git-pull"><a href="#8-7-git-fetch-amp-git-pull" class="headerlink" title="8.7 git fetch &amp; git pull"></a>8.7 git fetch &amp; git pull</h2><ol>
<li>三个概念<ol>
<li>本地仓库</li>
<li>远程仓库（本地的）<code>.git/refs/remotes</code></li>
<li>远程仓库（远程的）</li>
</ol>
</li>
<li><code>git fetch</code><ol>
<li>将本地的远程仓库更新到与远程的远程仓库一致</li>
<li>不会更新本地仓库 </li>
</ol>
</li>
<li><code>git pull</code><ol>
<li>将本地仓库和本地的远程仓库都更新到与远程的远程仓库一致</li>
<li>如果工作区有一些修改尚未提交到本地仓库，即工作区与本地仓库不一致，则此时禁止 <code>git pull</code></li>
</ol>
</li>
<li><code>git pull orgin master</code> = <code>git fetch orign master; git merge orgin/master</code></li>
</ol>
<h1 id="九-技"><a href="#九-技" class="headerlink" title="九 技"></a>九 技</h1><h2 id="9-1-忽略文件"><a href="#9-1-忽略文件" class="headerlink" title="9.1 忽略文件"></a>9.1 忽略文件</h2><ol>
<li>在工作区创建 <code>.gitignore</code> 文件（可以从网上查询），然后把要忽略的文件名填进去</li>
<li>忽略文件的原则：<ol>
<li>忽略操作系统自动生成的文件，比如缩略图等；</li>
<li>忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如Java编译产生的 <code>.class</code> 文件；</li>
<li>忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件</li>
</ol>
</li>
</ol>
<h2 id="9-2-git-clone-速度"><a href="#9-2-git-clone-速度" class="headerlink" title="9.2 git clone 速度"></a>9.2 git clone 速度</h2><ol>
<li>查询域名 <code>global-ssl.fastly.Net</code> 和 <code>github.com</code> 公网IP地址</li>
<li>将域名与IP映射添加到本地 hosts 文件<ul>
<li><code>/etc/hosts</code><ul>
<li>linux</li>
</ul>
</li>
<li><code>c:/windows/system32/driver/etc/hosts</code><ul>
<li>windows</li>
</ul>
</li>
</ul>
</li>
<li>刷新DNS缓存<ul>
<li><code>sudo /etc/init.d/networking restart</code><ul>
<li>linux</li>
</ul>
</li>
<li><code>ipconfig /flushdns</code><ul>
<li>windows</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="9-3-分离头指针（detached-HEAD）"><a href="#9-3-分离头指针（detached-HEAD）" class="headerlink" title="9.3 分离头指针（detached HEAD）"></a>9.3 分离头指针（detached HEAD）</h2><ol>
<li>通常，我们工作在某一个分支上，比如 master 分支。这个时候 master 指针和 HEAD 指针是一起前进的，每做一次提交，这两个指针就会一起向前挪一步。但是在某种情况下（例如 checkout 了某个具体的 commit），master 指针 和 HEAD 指针这种「绑定」的状态就被打破了，变成了分离头指针状态</li>
<li>即工作在没有分支的状态下，commit没有和任何分支相关联，此时如果切换分支，则分离头指针状态下的变更都会丢失。</li>
<li>如果想要保留分离头指针变更，就将其与某个分支绑定<ul>
<li><code>git branch 分支名 分离头指针commit_id</code></li>
</ul>
</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/CSS-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/CSS-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/" class="post-title-link" itemprop="url">CSS 响应式布局</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 21:12:49 / 修改时间：21:13:09" itemprop="dateCreated datePublished" datetime="2020-03-30T21:12:49+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-媒体查询-Media-Querie"><a href="#一-媒体查询-Media-Querie" class="headerlink" title="一 媒体查询 Media Querie"></a>一 媒体查询 <code>Media Querie</code></h1><ul>
<li>Media Queries能在不同的条件下使用不同的样式，使页面在不同在终端设备下达到不同的渲染效果</li>
</ul>
<h1 id="二-媒体类型-media"><a href="#二-媒体类型-media" class="headerlink" title="二 媒体类型 media"></a>二 媒体类型 <code>media</code></h1><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>all（默认）</td>
<td>所有媒体类型</td>
</tr>
<tr>
<td>screen</td>
<td>用于电脑屏幕，平板电脑，智能手机等</td>
</tr>
<tr>
<td>print</td>
<td>打印设备</td>
</tr>
<tr>
<td>speech</td>
<td>应用于屏幕阅读器等发声设备</td>
</tr>
</tbody></table>
<ul>
<li>多媒体支持<ul>
<li>可以用逗号分隔同时支持多个媒体设备 如 <code>screen, print</code></li>
</ul>
</li>
</ul>
<h1 id="三-使用"><a href="#三-使用" class="headerlink" title="三 使用"></a>三 使用</h1><h2 id="3-1-lt-style-gt"><a href="#3-1-lt-style-gt" class="headerlink" title="3.1  &lt;style&gt;"></a>3.1  <code>&lt;style&gt;</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style media=&quot;&quot;&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-lt-link-gt"><a href="#3-2-lt-link-gt" class="headerlink" title="3.2 &lt;link&gt;"></a>3.2 <code>&lt;link&gt;</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;&quot; href=&quot;&quot; media=&quot;&quot;&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-3-import"><a href="#3-3-import" class="headerlink" title="3.3 @import"></a>3.3 <code>@import</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// test.html</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;</span><br><span class="line">// style.css</span><br><span class="line">@import url(1.css) all;</span><br><span class="line">@import url(2.css) screen;</span><br><span class="line">@import url(3.css) print;</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<ul>
<li>通过<code>&lt;link&gt;</code>指定媒体类型需要导入不同的css文件，导致<code>&lt;link&gt;</code>语句过多</li>
<li>可以导入一个css文件，然后在此css文件中通过<code>@import</code> 引入其它css文件并指定媒体类型</li>
</ul>
<h2 id="3-4-media"><a href="#3-4-media" class="headerlink" title="3.4 @media"></a>3.4 <code>@media</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">	@media screen &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	@media print &#123;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>可以使用 <code>@media</code> 做到更细的控制，即在一个样式表中为多个媒体设备定义样式</li>
</ul>
<h1 id="四-查询条件"><a href="#四-查询条件" class="headerlink" title="四 查询条件"></a>四 查询条件</h1><ul>
<li>条件表达式需要放在括号中</li>
</ul>
<h2 id="4-1-逻辑与"><a href="#4-1-逻辑与" class="headerlink" title="4.1 逻辑与"></a>4.1 逻辑与</h2><ul>
<li><code>and</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@media screen and (max-width: 769px) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="4-2-逻辑或"><a href="#4-2-逻辑或" class="headerlink" title="4.2 逻辑或"></a>4.2 逻辑或</h2><ul>
<li><code>,</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@media screen and (orientation: landscape), screen and (max-width: 600px) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="4-3-逻辑非"><a href="#4-3-逻辑非" class="headerlink" title="4.3 逻辑非"></a>4.3 逻辑非</h2><ul>
<li><code>not</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@media not screen and (max-width: 769px) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>必须将not写在查询的最前面，表示对整个条件取反</li>
</ul>
<h2 id="4-4-only"><a href="#4-4-only" class="headerlink" title="4.4 only"></a>4.4 only</h2><ul>
<li>用来排除不支持媒体查询的浏览器<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@media only screen and (max-width: 769px) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>必须将only写在查询的最前面，表示如果浏览器支持媒体查询，就根据条件响应样式，如果不支持，就忽略</li>
</ul>
<h1 id="五-查询特性"><a href="#五-查询特性" class="headerlink" title="五 查询特性"></a>五 查询特性</h1><ul>
<li>根据查询特性筛选出使用样式的设备。</li>
</ul>
<table>
<thead>
<tr>
<th>特性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>orientation: landscape/portrait</td>
<td>横屏/竖屏</td>
</tr>
<tr>
<td>width</td>
<td>设备宽度</td>
</tr>
<tr>
<td>height</td>
<td>设备高度</td>
</tr>
<tr>
<td>min-width</td>
<td>最小宽度</td>
</tr>
<tr>
<td>max-width</td>
<td>最大宽度</td>
</tr>
<tr>
<td>min-height</td>
<td>最小高度</td>
</tr>
<tr>
<td>max-height</td>
<td>最大高度</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/CSS-%E5%B8%A7%E5%8A%A8%E7%94%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/CSS-%E5%B8%A7%E5%8A%A8%E7%94%BB/" class="post-title-link" itemprop="url">CSS 帧动画</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 21:12:06 / 修改时间：21:12:33" itemprop="dateCreated datePublished" datetime="2020-03-30T21:12:06+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li>通过定义一段动画中的关键点、关键状态来创建动画</li>
<li>过渡动画是两个状态间的变化，帧动画可以理解为帧之间的过渡动画</li>
</ol>
<h1 id="二-关键帧-keyframes"><a href="#二-关键帧-keyframes" class="headerlink" title="二 关键帧 @keyframes"></a>二 关键帧 <code>@keyframes</code></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@keyframes &lt;keyframes-name&gt; &#123;</span><br><span class="line">	from &#123;</span><br><span class="line">		margin-left: 100%;</span><br><span class="line">		width: 300%;</span><br><span class="line">	&#125;</span><br><span class="line">	to &#123;</span><br><span class="line">		margin-left: 0%;</span><br><span class="line">		width: 100%;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>使用<code>@keyframes</code> 规则定义动画名（<code>animation-name</code>）及其关键帧列表，每个<code>@keyframes</code> 规则包含多个关键帧</li>
<li>每个关键帧有一个百分比值作为名称，代表在动画进行中，在哪个阶段触发这个帧所包含的样式（顺序任意）</li>
<li><code>from</code> 相当于 <code>0%</code>，<code>to</code> 相当于 <code>100%</code></li>
<li>未设置<code>from/0%</code>与<code>to/100%</code> 时将使用元素现有样式作为起始/结束状态，可以用来从初始状态开始元素动画，最终返回初始状态。</li>
<li>动画名称或关键帧名称重复时，后者覆盖前者</li>
<li>关键帧中出现的 <code>!important</code> 关键词将会被忽略</li>
</ol>
<h1 id="三-animation"><a href="#三-animation" class="headerlink" title="三 animation"></a>三 animation</h1><h2 id="3-1-语法"><a href="#3-1-语法" class="headerlink" title="3.1 语法"></a>3.1 语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">animation-name</span><br><span class="line">animation-duration</span><br><span class="line">animation-timing-function</span><br><span class="line">animation-delay</span><br><span class="line">animation-iteration-count</span><br><span class="line">animation-direction</span><br><span class="line">animation-fill-mode</span><br><span class="line">animation-play-state</span><br></pre></td></tr></table></figure>
<ol>
<li>必须存在 <code>animation-duration</code> 属性，否则过渡时间为0没有动画效果</li>
<li>延迟时间在过渡时间之后</li>
</ol>
<h2 id="3-2-animation-name"><a href="#3-2-animation-name" class="headerlink" title="3.2 animation-name"></a>3.2 animation-name</h2><ul>
<li>指定使用的动画，可以多个用逗号隔开</li>
<li>多个动画有相同属性时，后面动画的属性优先使用</li>
</ul>
<h2 id="3-3-animation-duration"><a href="#3-3-animation-duration" class="headerlink" title="3.3 animation-duration"></a>3.3 animation-duration</h2><ul>
<li>声明动画播放的时间，即把所有帧执行一遍所需要的时间，默认为 <code>0s</code></li>
<li>使用秒和毫秒为单位</li>
<li>可以为不同动画分别设置执行视角</li>
<li>如果动画数量大于时间数量，则超出的动画从第一个时间重新循环</li>
</ul>
<h2 id="3-4-animation-timing-function"><a href="#3-4-animation-timing-function" class="headerlink" title="3.4 animation-timing-function"></a>3.4 animation-timing-function</h2><ul>
<li>定义动画速率</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ease（默认）</td>
<td>开始慢，然后快，慢下来，结束时非常慢（等于 <code>cubic-bezier(0.25,0.1,0.25,1)</code>）</td>
</tr>
<tr>
<td>linear</td>
<td>规定以相同速度开始至结束的过渡效果（等于 <code>cubic-bezier(0,0,1,1)</code>）。</td>
</tr>
<tr>
<td>ease-in</td>
<td>开始慢，结束快（等于<code>cubic-bezier(0.42,0,1,1)</code>）</td>
</tr>
<tr>
<td>ease-out</td>
<td>开始快，结束慢（等于 <code>cubic-bezier(0,0,0.58,1)</code>）</td>
</tr>
<tr>
<td>ease-in-out</td>
<td>中间快，两边慢（等于 <code>cubic-bezier(0.42,0,0.58,1)</code>）</td>
</tr>
<tr>
<td><code>cubic-bezier(n,n,n,n)</code></td>
<td>三次贝塞尔曲线，在 cubic-bezier 函数中定义自己的值</td>
</tr>
<tr>
<td>step-start</td>
<td>同 <code>steps(1, start)</code></td>
</tr>
<tr>
<td>step-end</td>
<td>同<code>steps(1,end)</code></td>
</tr>
<tr>
<td><code>steps(n, start)</code></td>
<td>设置n个时间点，第一时间点变化状态</td>
</tr>
<tr>
<td><code>steps(n, end)</code></td>
<td>设置n个时间点，第一时间点初始状态</td>
</tr>
<tr>
<td>* <code>&lt;timing-function&gt;</code> （此属性接收的值） 作用于每两个关键帧之间，而不是整个动画</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li><code>steps(n, start/end)</code><ul>
<li><code>n</code><ul>
<li>正整数，将间隔动画等分成指定数目的小间隔动画，然后根据第二个参数来决定显示效果</li>
</ul>
</li>
<li><code>start/end</code><ul>
<li>在分成的小间隔动画中判断显示效果，意思是每一阶段动画的改变时机</li>
<li>start表示从开始改变，即这一段动画的初始状态，显示的就是结束时的效果，可以理解为从下一步开始</li>
<li>end表示从结束改变，即这一段动画的初始状态，显示的是开始时的效果，可以理解为从当前步开始</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-5-animation-delay"><a href="#3-5-animation-delay" class="headerlink" title="3.5 animation-delay"></a>3.5 animation-delay</h2><ul>
<li>定义动画等待多长时间后执行</li>
</ul>
<h2 id="3-6-animation-iteration-count"><a href="#3-6-animation-iteration-count" class="headerlink" title="3.6 animation-iteration-count"></a>3.6 animation-iteration-count</h2><ul>
<li>设置动画重复执行次数</li>
<li>设置值为 <code>infinite</code> 表示无限循环</li>
<li>可同时设置元素的多个动画重复，使用逗号分隔</li>
<li>如果动画数量大于重复数量，超出动画从第一个重复次数重新循环</li>
</ul>
<h2 id="3-7-animation-direction"><a href="#3-7-animation-direction" class="headerlink" title="3.7 animation-direction"></a>3.7 animation-direction</h2><ul>
<li>控制动画运行的方向</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>normal（默认）</td>
<td>从0%到100%运行动画</td>
</tr>
<tr>
<td>reverse</td>
<td>从100%到0%运行动画</td>
</tr>
<tr>
<td>alternate</td>
<td>先从0%到100%，然后从100%到0%</td>
</tr>
<tr>
<td>alternate-reverse</td>
<td>先从100%到0%，然后从0%到100%</td>
</tr>
</tbody></table>
<h2 id="3-8-animation-play-state"><a href="#3-8-animation-play-state" class="headerlink" title="3.8 animation-play-state"></a>3.8 animation-play-state</h2><ul>
<li>可以控制动画的暂停与运行</li>
<li>恢复一个已暂停的动画，将从它暂停的地方开始，而不是从动画序列的起点开始</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>running（默认）</td>
<td>运行</td>
</tr>
<tr>
<td>paused</td>
<td>暂停</td>
</tr>
</tbody></table>
<h2 id="3-9-animation-fill-mode"><a href="#3-9-animation-fill-mode" class="headerlink" title="3.9 animation-fill-mode"></a>3.9 animation-fill-mode</h2><ul>
<li>设置CSS动画在执行之前和之后如何将样式应用于其目标</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>none（默认）</td>
<td>动画执行之前效果在初始状态，等延迟结束，起始帧才应用，动画执行之后会回到初始状态</td>
</tr>
<tr>
<td>backwards</td>
<td>动画执行之前效果就在起始帧，不会等延迟结束</td>
</tr>
<tr>
<td>forwards</td>
<td>动画执行之后停留动画的最后一帧</td>
</tr>
<tr>
<td>both</td>
<td>包含backwards与forwards规则，即动画执行之前在起始帧，不等延迟结束，动画执行之后停止在最后一帧</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/CSS-%E8%BF%87%E6%B8%A1-%E5%BB%B6%E8%BF%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/CSS-%E8%BF%87%E6%B8%A1-%E5%BB%B6%E8%BF%9F/" class="post-title-link" itemprop="url">CSS 过渡 延迟</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 21:11:36 / 修改时间：21:11:54" itemprop="dateCreated datePublished" datetime="2020-03-30T21:11:36+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li>默认情况下CSS属性的变化是瞬间完成的（其实也有时间只是毫秒级的，人眼很难感知到）</li>
<li>不是所有css属性都有过渡效果，一般来讲有中间值的属性都可以设置动画如宽度、透明度等。</li>
</ol>
<h1 id="二-transitionend"><a href="#二-transitionend" class="headerlink" title="二  transitionend"></a>二  transitionend</h1><ul>
<li>用于控制过渡结束后执行的JS<strong>事件</strong>（即过度结束触发此事件）</li>
<li>简写属性会触发多次</li>
</ul>
<h1 id="三-transition"><a href="#三-transition" class="headerlink" title="三 transition"></a>三 transition</h1><h2 id="3-1-语法"><a href="#3-1-语法" class="headerlink" title="3.1 语法"></a>3.1 语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">transition-property</span><br><span class="line">transition-timing-function</span><br><span class="line">transition-duration</span><br><span class="line">transition-delay</span><br></pre></td></tr></table></figure>
<ol>
<li>必须设置过渡时间 <code>transition-duration</code></li>
<li>延迟时间<code>transition-delay</code>在过渡时间之后</li>
</ol>
<h2 id="3-2-transition-property"><a href="#3-2-transition-property" class="headerlink" title="3.2 transition-property"></a>3.2 transition-property</h2><ul>
<li>指定应用过渡属性的名称</li>
<li>如果指定简写属性（比如 background），那么其完整版中所有可以动画的属性都会被应用过渡。</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>all（默认）</td>
<td>所有可被动画的属性都表现出过渡动画</td>
</tr>
<tr>
<td>none</td>
<td>没有过渡动画。</td>
</tr>
<tr>
<td>ident</td>
<td>属性名称，多个用逗号隔开</td>
</tr>
</tbody></table>
<h2 id="3-3-transition-duration"><a href="#3-3-transition-duration" class="headerlink" title="3.3 transition-duration"></a>3.3 transition-duration</h2><ul>
<li>以秒或毫秒为单位指定过渡动画所需的时间，默认 <code>0</code> 秒（即不出现过渡动画），不能为负</li>
</ul>
<ol>
<li>一个值时，所有属性使用同样的时间</li>
<li>多个值时，如果属性数量大于值数量，超出的属性再从第一个时间开始重复使用</li>
<li>可以为初始与变化状态设置不同的时间</li>
</ol>
<h2 id="3-4-transition-timing-function"><a href="#3-4-transition-timing-function" class="headerlink" title="3.4 transition-timing-function"></a>3.4 transition-timing-function</h2><ul>
<li>用于设置过渡效果的速度</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ease（默认）</td>
<td>开始慢，然后快，慢下来，结束时非常慢（等于 <code>cubic-bezier(0.25,0.1,0.25,1)</code>）</td>
</tr>
<tr>
<td>linear</td>
<td>规定以相同速度开始至结束的过渡效果（等于 <code>cubic-bezier(0,0,1,1)</code>）。</td>
</tr>
<tr>
<td>ease-in</td>
<td>开始慢，结束快（等于<code>cubic-bezier(0.42,0,1,1)</code>）</td>
</tr>
<tr>
<td>ease-out</td>
<td>开始快，结束慢（等于 <code>cubic-bezier(0,0,0.58,1)</code>）</td>
</tr>
<tr>
<td>ease-in-out</td>
<td>中间快，两边慢（等于 <code>cubic-bezier(0.42,0,0.58,1)</code>）</td>
</tr>
<tr>
<td><code>cubic-bezier(n,n,n,n)</code></td>
<td>三次贝塞尔曲线，在 cubic-bezier 函数中定义自己的值</td>
</tr>
<tr>
<td>step-start</td>
<td>同 <code>steps(1, start)</code></td>
</tr>
<tr>
<td>step-end</td>
<td>同<code>steps(1,end)</code></td>
</tr>
<tr>
<td><code>steps(n, start/end)</code></td>
<td>类似帧</td>
</tr>
</tbody></table>
<h2 id="3-5-transition-delay"><a href="#3-5-transition-delay" class="headerlink" title="3.5 transition-delay"></a>3.5 transition-delay</h2><ul>
<li>用于设置延迟过渡的时间（即在过渡效果开始作用之前需要等待的时间）</li>
</ul>
<ol>
<li>默认为0s即立刻开始过渡</li>
<li>值可以为负数，如<code>-3s</code>，表示直接显示在3s时的效果</li>
<li>变化属性数量大于时间数量时，后面的属性再从第一个时间开始重复使用</li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/CSS-%E5%8F%98%E5%BD%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/CSS-%E5%8F%98%E5%BD%A2/" class="post-title-link" itemprop="url">CSS 变形</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 21:10:43 / 修改时间：21:11:18" itemprop="dateCreated datePublished" datetime="2020-03-30T21:10:43+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-坐标轴"><a href="#一-坐标轴" class="headerlink" title="一 坐标轴"></a>一 坐标轴</h1><p><img src="https://gitee.com/3noanswer/npics/raw/master/UI/CSS/3d%E5%9D%90%E6%A0%87.png" alt=""></p>
<h1 id="二-变形操作-transform"><a href="#二-变形操作-transform" class="headerlink" title="二 变形操作 transform"></a>二 变形操作 <code>transform</code></h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><ol>
<li>使用 transform 规则控制元素的变形操作，包括控制移动、缩放、旋转、倾斜、3D转换等</li>
<li>变形叠加<ul>
<li>重复设置变形操作时只在原形态上操作，即第二次设置值时不是在第一次值上变化（就类似后边设置的字体大小会覆盖前边的而不是在前边设置的基础上再变化）</li>
</ul>
</li>
<li>行级元素不产生变形效果</li>
<li>可同时设置多个值，解析器会从左向右依次执行，顺序不同效果也不同</li>
</ol>
<h2 id="2-2-移动"><a href="#2-2-移动" class="headerlink" title="2.2 移动"></a>2.2 移动</h2><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>translateX(x)</td>
<td>定义x轴偏移量</td>
</tr>
<tr>
<td>translateY(y)</td>
<td>定义y轴偏移量</td>
</tr>
<tr>
<td>translateZ(z)</td>
<td>定义z轴偏移量</td>
</tr>
<tr>
<td>translate(x,y)</td>
<td>定义x，y轴偏移量</td>
</tr>
<tr>
<td>translate3d(x,y,z)</td>
<td>定义x，y，z轴偏移量</td>
</tr>
</tbody></table>
<ol>
<li>偏移量正负来决定移动方向<ul>
<li>X轴：整数向右，负数向左</li>
<li>Y轴：整数向下，负数向上</li>
<li>Z轴：正数向外、负数向里</li>
</ul>
</li>
<li>xy轴因为有宽高可以使用百分比（即偏移量为元素的百分比），z轴则不可以用百分比。</li>
</ol>
<h2 id="2-3-缩放"><a href="#2-3-缩放" class="headerlink" title="2.3 缩放"></a>2.3 缩放</h2><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>scaleX(x)</td>
<td>定义x轴的缩放</td>
</tr>
<tr>
<td>scaleY(y)</td>
<td>定义y轴的缩放</td>
</tr>
<tr>
<td>scaleZ(z)</td>
<td>定义z轴的缩放</td>
</tr>
<tr>
<td>scale(x,y)</td>
<td>定义x，y轴的缩放</td>
</tr>
<tr>
<td>scale3d(x,y,z)</td>
<td>定义x，y，z轴的缩放</td>
</tr>
</tbody></table>
<ul>
<li>缩放的值为原尺寸的倍数</li>
</ul>
<h2 id="2-4-旋转"><a href="#2-4-旋转" class="headerlink" title="2.4 旋转"></a>2.4 旋转</h2><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>rotateX(angle)</td>
<td>定义沿着 X 轴的 3D 旋转，angle：角度</td>
</tr>
<tr>
<td>rotateY(angle)</td>
<td>定义沿着 Y 轴的 3D 旋转</td>
</tr>
<tr>
<td>rotateZ(angle)</td>
<td>定义沿着 Z 轴的 3D 旋转</td>
</tr>
<tr>
<td>rotate(angle)</td>
<td>定义 2D 旋转（即沿着xy平面旋转也就是z轴，效果同rotateZ(angle)）</td>
</tr>
<tr>
<td>rotate3d(x,y,z,angle)</td>
<td>定义 3D 旋转，（x,y,z）定义一个向量</td>
</tr>
</tbody></table>
<h2 id="2-5-倾斜"><a href="#2-5-倾斜" class="headerlink" title="2.5 倾斜"></a>2.5 倾斜</h2><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>skewX(angle)</td>
<td>定义沿着 X 轴的 2D 倾斜。</td>
</tr>
<tr>
<td>skewY(angle)</td>
<td>定义沿着 Y 轴的 2D 倾斜。</td>
</tr>
<tr>
<td>skew(x-angle,y-angle)</td>
<td>定义沿着 X 和 Y 轴的 2D 倾斜。</td>
</tr>
</tbody></table>
<h1 id="三-变形基点-transform-origin"><a href="#三-变形基点-transform-origin" class="headerlink" title="三 变形基点 transform-origin"></a>三 变形基点 <code>transform-origin</code></h1><ol>
<li>使用 transform-origin 设置元素的X/Y/Z操作的基点，用于控制缩放，旋转、倾斜等操作</li>
<li>默认以元素中心为基点</li>
<li>移动不受变形基点影响</li>
</ol>
<h1 id="四-透视景深-perspective"><a href="#四-透视景深-perspective" class="headerlink" title="四 透视景深 perspective"></a>四 透视景深 <code>perspective</code></h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><ol>
<li>perspective属性用于规定观察点距离元素的距离</li>
<li>我们观察物体时，远小近大，如果足够长，尽头会在视觉上相交</li>
<li>在二维屏幕上通过物体的大小来实现3效果</li>
</ol>
<h2 id="4-2-舞台透视"><a href="#4-2-舞台透视" class="headerlink" title="4.2 舞台透视"></a>4.2 舞台透视</h2><ul>
<li><code>perspective: 100px</code></li>
<li>“perspective 规则” 用于将父级整个做为透视元素，会造成里面的每个子元素的透视是不一样的<ul>
<li>例如摆一排杯子，是使用统一透视的，每个杯子的透视不一样，造成有大有小</li>
</ul>
</li>
</ul>
<h2 id="4-3-单独透视"><a href="#4-3-单独透视" class="headerlink" title="4.3 单独透视"></a>4.3 单独透视</h2><ul>
<li><code>transform: perspective(100px)</code></li>
<li>“perspective 函数” 用于为元素设置单独透视，每个元素的透视效果是一样的。</li>
</ul>
<h1 id="五-3D透视-transform-style"><a href="#五-3D透视-transform-style" class="headerlink" title="五 3D透视 transform-style"></a>五 3D透视 <code>transform-style</code></h1><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>flat</td>
<td>2D平面舞台</td>
</tr>
<tr>
<td>preserve-3d</td>
<td>3D透视舞台</td>
</tr>
</tbody></table>
<ol>
<li>使用 transform-style 用于控制3d透视</li>
<li>应用于舞台即变形元素的父级元素</li>
<li>设置 <code>overflow:visible</code> 时 <code>preserve-3d</code> 才无效</li>
</ol>
<h1 id="六-观看视角-perspective-origin"><a href="#六-观看视角-perspective-origin" class="headerlink" title="六 观看视角 perspective-origin"></a>六 观看视角 <code>perspective-origin</code></h1><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x-axis</td>
<td>定义该视图在 x 轴上的位置。默认值：50%。可能的值：left、center、right、length、%</td>
</tr>
<tr>
<td>y-axis</td>
<td>定义该视图在 y 轴上的位置。默认值：50%。可能的值：top、center、bottom、length、%</td>
</tr>
</tbody></table>
<ol>
<li>perspective-origin用于控制视线的落点。就好像我们看车展，可以让车转，也可以我们自己转(perspective-origin)</li>
<li>需要设置 perspective 透视后才可以看到效果</li>
<li>一般设置在舞台元素上来控制子元素</li>
</ol>
<h1 id="七-隐藏背面-backface-visibility"><a href="#七-隐藏背面-backface-visibility" class="headerlink" title="七 隐藏背面 backface-visibility"></a>七 隐藏背面 <code>backface-visibility</code></h1><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>visible</td>
<td>背面可见</td>
</tr>
<tr>
<td>hidden</td>
<td>背面隐藏</td>
</tr>
</tbody></table>
<ol>
<li>使用 backface-visibility 用于控制是否可以看到元素的背面</li>
<li>一般设置在元素上而不是舞台元素上</li>
<li>如果设置在舞台元素（父级元素）需要设置 <code>transform-style: preserve-3d</code></li>
</ol>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/CSS-%E6%A0%85%E6%A0%BC%E5%B8%83%E5%B1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/CSS-%E6%A0%85%E6%A0%BC%E5%B8%83%E5%B1%80/" class="post-title-link" itemprop="url">CSS 栅格布局</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 21:10:12 / 修改时间：21:10:35" itemprop="dateCreated datePublished" datetime="2020-03-30T21:10:12+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一 概述"></a>一 概述</h1><ol>
<li>将网页划分成一个个网格，可以任意组合不同的网格，做出各种各样的布局</li>
<li>Flex 布局是轴线布局，只能指定”项目”针对轴线的位置，可以看作是一维布局。Grid 布局则是将容器划分成”行”和”列”，产生单元格，然后指定”项目所在”的单元格，可以看作是二维布局</li>
<li>设为网格布局以后，容器子元素（项目）的float、vertical-align等设置都将失效</li>
</ol>
<h1 id="二-基本概念"><a href="#二-基本概念" class="headerlink" title="二 基本概念"></a>二 基本概念</h1><ol>
<li>栅格容器（Grid Container）：采用 grid 布局的元素</li>
<li>栅格项目（Grid Item）：栅格容器中采用网格定位的子元素</li>
<li>栅格线（Grid Line）：划分网格的线</li>
<li>栅格轨道（Grid Track）：两条相邻网格线之间的空间，即行（row）或者列（column）</li>
<li>栅格单元格（Grid Cell）：行和列的交叉区域</li>
<li>栅格区域（Grid Area）：由任意数量单元格组成的区域（必须为矩形）</li>
</ol>
<h2 id="三-声明容器"><a href="#三-声明容器" class="headerlink" title="三 声明容器"></a>三 声明容器</h2><ol>
<li><code>display: grid</code><ul>
<li>块级栅格容器</li>
</ul>
</li>
<li><code>display: inline-grid</code><ul>
<li>内联栅格容器</li>
</ul>
</li>
</ol>
<h1 id="四-容器属性"><a href="#四-容器属性" class="headerlink" title="四 容器属性"></a>四 容器属性</h1><h2 id="4-1-grid-template-rows-amp-grid-template-columns"><a href="#4-1-grid-template-rows-amp-grid-template-columns" class="headerlink" title="4.1 grid-template-rows &amp; grid-template-columns"></a>4.1 grid-template-rows &amp; grid-template-columns</h2><ol>
<li>grid-template-rows：定义每一行的高度</li>
<li>grid-template-columns：定义每一列的宽度</li>
</ol>
<h3 id="1-语法"><a href="#1-语法" class="headerlink" title="1 语法"></a>1 语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ &lt;line-names&gt;? [ &lt;track-size&gt; | &lt;track-repeat&gt; ] ]+ &lt;line-names&gt;?</span><br></pre></td></tr></table></figure>

<h3 id="2-lt-line-names-gt"><a href="#2-lt-line-names-gt" class="headerlink" title="2 &lt;line-names&gt;"></a>2 <code>&lt;line-names&gt;</code></h3><ol>
<li>相应位置上的删格线名称</li>
<li>可以省略，则名称按顺序分配为 <code>1 2 3 ...</code> </li>
<li>格式：<code>[name1 name2 ...]</code><ul>
<li>可以指定1或多个名称</li>
</ul>
</li>
</ol>
<h3 id="3-lt-track-size-gt"><a href="#3-lt-track-size-gt" class="headerlink" title="3 &lt;track-size&gt;"></a>3 <code>&lt;track-size&gt;</code></h3><table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>auto</code></td>
<td>表示由浏览器自己决定长度</td>
</tr>
<tr>
<td><code>&lt;length&gt;</code></td>
<td>长度单位</td>
</tr>
<tr>
<td><code>&lt;percentage&gt;</code></td>
<td>栅格容器宽/高的百分比</td>
</tr>
<tr>
<td><code>fr</code></td>
<td>网格剩余空间比例单位（fraction 的缩写，意为”片段”）</td>
</tr>
<tr>
<td><code>minmax(min, max)</code></td>
<td>尺寸在min和max之间，若min&gt;max，则max的值会被忽略</td>
</tr>
</tbody></table>
<h3 id="4-lt-track-repeat-gt"><a href="#4-lt-track-repeat-gt" class="headerlink" title="4 &lt;track-repeat&gt;"></a>4 <code>&lt;track-repeat&gt;</code></h3><ul>
<li><code>repeat( count, [ &lt;line-names&gt;? &lt;track-size&gt; ]+ &lt;line-names&gt;? )</code><ul>
<li>count：重复次数<ul>
<li>如果重复次数不确定可以使用<ol>
<li>auto-fill 关键字</li>
<li>auto-fit 关键字</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-2-grid-template-areas"><a href="#4-2-grid-template-areas" class="headerlink" title="4.2 grid-template-areas"></a>4.2 grid-template-areas</h2><ul>
<li>区域的命名会影响到网格线。每个区域的起始网格线，会自动命名为<code>区域名-start</code>，终止网格线自动命名为<code>区域名-end</code></li>
</ul>
<h3 id="1-为每个单元格设置区域（假如三行三列9个单元格）"><a href="#1-为每个单元格设置区域（假如三行三列9个单元格）" class="headerlink" title="1 为每个单元格设置区域（假如三行三列9个单元格）"></a>1 为每个单元格设置区域（假如三行三列9个单元格）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grid-template-areas: &quot;a b c&quot;</span><br><span class="line">					&quot;d e f&quot;</span><br><span class="line">					&quot;g h i&quot;;</span><br></pre></td></tr></table></figure>

<h3 id="2-多个单元格合并成一个区域：区域名相同即可"><a href="#2-多个单元格合并成一个区域：区域名相同即可" class="headerlink" title="2 多个单元格合并成一个区域：区域名相同即可"></a>2 多个单元格合并成一个区域：区域名相同即可</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">grid-template-areas: &quot;a a a&quot;</span><br><span class="line">					&quot;b b b&quot;</span><br><span class="line">					&quot;c c c&quot;;</span><br><span class="line">grid-template-areas: &quot;header header header&quot;</span><br><span class="line">					&quot;main main sidebar&quot;</span><br><span class="line">					&quot;footer footer footer&quot;;</span><br></pre></td></tr></table></figure>

<h3 id="3-区域占位符（点）：表示没有用到该单元格，或者该单元格不属于任何区域"><a href="#3-区域占位符（点）：表示没有用到该单元格，或者该单元格不属于任何区域" class="headerlink" title="3 区域占位符（点）：表示没有用到该单元格，或者该单元格不属于任何区域"></a>3 区域占位符（点）：表示没有用到该单元格，或者该单元格不属于任何区域</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grid-template-areas: &quot;a . c&quot;</span><br><span class="line">					&quot;. . f&quot;</span><br><span class="line">					&quot;g h .&quot;;</span><br></pre></td></tr></table></figure>

<h2 id="4-3-grid-template"><a href="#4-3-grid-template" class="headerlink" title="4.3 grid-template"></a>4.3 grid-template</h2><ul>
<li>grid-template是grid-template-rows，grid-template-columns和grid-template-areas属性的缩写</li>
<li>推荐使用 grid 代替grid-template</li>
</ul>
<h2 id="4-4-row-gap-amp-column-gap-amp-grap"><a href="#4-4-row-gap-amp-column-gap-amp-grap" class="headerlink" title="4.4 row-gap &amp; column-gap &amp; grap"></a>4.4 row-gap &amp; column-gap &amp; grap</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>row-gap</code></td>
<td>设置行与行的间隔（行间距）</td>
</tr>
<tr>
<td><code>column-gap</code></td>
<td>设置列与列的间隔（列间距）</td>
</tr>
<tr>
<td><code>grap</code></td>
<td><code>row-gap column-gap</code></td>
</tr>
</tbody></table>
<ul>
<li>如果<code>grap</code>省略了第二个值，浏览器认为第二个值等于第一个值</li>
</ul>
<h2 id="4-5-grid-auto-flow"><a href="#4-5-grid-auto-flow" class="headerlink" title="4.5 grid-auto-flow"></a>4.5 grid-auto-flow</h2><ul>
<li>划分网格以后，容器的子元素会按照顺序，自动放置在每一个网格。</li>
</ul>
<table>
<thead>
<tr>
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>row</code>（默认）</td>
<td>先行后列</td>
</tr>
<tr>
<td><code>column</code></td>
<td>先列后行</td>
</tr>
<tr>
<td><code>row dense</code></td>
<td>先行后列，并且尽量填满空格</td>
</tr>
<tr>
<td><code>column dense</code></td>
<td>先列后行，并且尽量填满空格</td>
</tr>
</tbody></table>
<ul>
<li>尽量填满的意思是比如第2个元素太宽第一行放不下，可以先放第3,4…个</li>
</ul>
<h2 id="4-6-justify-items-amp-align-items-amp-place-items"><a href="#4-6-justify-items-amp-align-items-amp-place-items" class="headerlink" title="4.6 justify-items &amp; align-items &amp; place-items"></a>4.6 justify-items &amp; align-items &amp; place-items</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>justify-items</td>
<td>单元格中的元素在单元格中的水平对齐方式（针对所有单元格）</td>
</tr>
<tr>
<td>align-items</td>
<td>单元格中的元素的在单元格中垂直对齐方式（针对所有单元格）</td>
</tr>
<tr>
<td>place-items</td>
<td><code>align-items justify-items</code> 简写</td>
</tr>
</tbody></table>
<ul>
<li><code>place-items</code><ul>
<li>如果省略第二个值，则浏览器认为第二个值等于第一个值</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>stretch</code>（默认）</td>
<td>拉伸，占满单元格的整个宽度</td>
</tr>
<tr>
<td><code>start</code></td>
<td>对齐单元格的起始边缘</td>
</tr>
<tr>
<td><code>end</code></td>
<td>对齐单元格的结束边缘</td>
</tr>
<tr>
<td><code>center</code></td>
<td>单元格内部居中</td>
</tr>
</tbody></table>
<h2 id="4-7-justify-content-amp-align-content-amp-place-content"><a href="#4-7-justify-content-amp-align-content-amp-place-content" class="headerlink" title="4.7 justify-content &amp; align-content &amp; place-content"></a>4.7 justify-content &amp; align-content &amp; place-content</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>justify-content</td>
<td>所有单元格（整个内容区域）在容器中的水平对齐方式</td>
</tr>
<tr>
<td>align-content</td>
<td>所有单元格（整个内容区域）在容器中的垂直对齐方式</td>
</tr>
<tr>
<td>place-content</td>
<td><code>align-content justify-content</code> 简写</td>
</tr>
</tbody></table>
<ul>
<li><code>place-content</code> <ul>
<li>如果省略第二个值，则浏览器认为第二个值等于第一个值</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>stretch（默认）</td>
<td>拉伸，占满单元格的整个宽度</td>
</tr>
<tr>
<td>start</td>
<td>对齐单元格的起始边缘</td>
</tr>
<tr>
<td>end</td>
<td>对齐单元格的结束边缘</td>
</tr>
<tr>
<td>center</td>
<td>单元格内部居中</td>
</tr>
<tr>
<td>space-between</td>
<td>两端对齐，两端紧挨边框中间平均分配</td>
</tr>
<tr>
<td>space-around</td>
<td>每个项目两侧的间隔相等。所以，项目之间的间隔比项目与容器边框的间隔大一倍</td>
</tr>
<tr>
<td>space-evenly</td>
<td>项目与项目的间隔相等，项目与容器边框之间也是同样长度的间隔</td>
</tr>
</tbody></table>
<h2 id="4-8-grid-auto-columns-amp-grid-auto-rows"><a href="#4-8-grid-auto-columns-amp-grid-auto-rows" class="headerlink" title="4.8 grid-auto-columns &amp; grid-auto-rows"></a>4.8 grid-auto-columns &amp; grid-auto-rows</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>grid-auto-columns</td>
<td>浏览器自动创建的多余网格的列宽</td>
</tr>
<tr>
<td>grid-auto-rows</td>
<td>浏览器自动创建的多余网格的行高</td>
</tr>
</tbody></table>
<ul>
<li>有时，一些项目的指定位置，在现有网格的外部，比如网格只有三行，但是有一个项目在第五行，这时，浏览器会自动生成多余的网格，以便放置项目。</li>
<li>如果不指定这两个属性，浏览器完全根据单元格内容的大小，决定新增网格的列宽和行高</li>
</ul>
<h2 id="4-9-grid"><a href="#4-9-grid" class="headerlink" title="4.9 grid"></a>4.9 grid</h2><ul>
<li><code>grid-template-rows grid-template-columns grid-template-areas  grid-auto-rows grid-auto-columns grid-auto-flow</code> 六个属性的缩写</li>
</ul>
<h1 id="五-项目属性"><a href="#五-项目属性" class="headerlink" title="五 项目属性"></a>五 项目属性</h1><h2 id="5-1-grid-column-start-amp-grid-column-end-amp-grid-row-start-amp-grid-row-end"><a href="#5-1-grid-column-start-amp-grid-column-end-amp-grid-row-start-amp-grid-row-end" class="headerlink" title="5.1 grid-column-start &amp; grid-column-end &amp; grid-row-start &amp; grid-row-end"></a>5.1 grid-column-start &amp; grid-column-end &amp; grid-row-start &amp; grid-row-end</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>grid-row-start</td>
<td>行开始栅格线（上边框）</td>
</tr>
<tr>
<td>grid-row-end</td>
<td>行结束栅格线（下边框）</td>
</tr>
<tr>
<td>grid-column-start</td>
<td>列开始栅格线（左边框）</td>
</tr>
<tr>
<td>grid-column-end</td>
<td>列结束栅格线（右边框）</td>
</tr>
</tbody></table>
<h3 id="项目定位"><a href="#项目定位" class="headerlink" title="项目定位"></a>项目定位</h3><h4 id="1-根据栅格线"><a href="#1-根据栅格线" class="headerlink" title="1 根据栅格线"></a>1 根据栅格线</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grid-column-start: 1;</span><br><span class="line">grid-column-end: 3;</span><br><span class="line">grid-row-start: 2;</span><br><span class="line">grid-row-end: 4;</span><br></pre></td></tr></table></figure>

<ul>
<li>设置栅格线来定位，设置的数值可以是正数和负数</li>
</ul>
<h4 id="2-根据栅格命名"><a href="#2-根据栅格命名" class="headerlink" title="2 根据栅格命名"></a>2 根据栅格命名</h4><ol>
<li>固定命名<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grid-column-start: header-start;</span><br><span class="line">grid-column-end: header-end;</span><br></pre></td></tr></table></figure></li>
<li>自动命名<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 后边数字表示第几个</span><br><span class="line">grid-column-start: c-start 1;</span><br><span class="line">grid-column-end: c-end 3;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="3-根据偏移量"><a href="#3-根据偏移量" class="headerlink" title="3 根据偏移量"></a>3 根据偏移量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grid-row-end: span 1;</span><br><span class="line">grid-column-end: span 1;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>span</code> 可以设置移动单元格数量（即开始栅格线和结束栅格线之间有几个单元格），数值只能为正数</li>
</ul>
<h2 id="5-2-grid-column-amp-grid-row"><a href="#5-2-grid-column-amp-grid-row" class="headerlink" title="5.2 grid-column &amp; grid-row"></a>5.2 grid-column &amp; grid-row</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>grid-row</td>
<td><code>grid-row-start / grid-row-end</code></td>
</tr>
<tr>
<td>grid-column</td>
<td><code>grid-column-start / grid-column-end</code></td>
</tr>
</tbody></table>
<ol>
<li>设置起始栅格线<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grid-column: 1 / 3;</span><br><span class="line">grid-row: 1 / 2;</span><br></pre></td></tr></table></figure></li>
<li>使用span<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grid-column: 1 / span 3;</span><br><span class="line">grid-row: 1 / span 2;</span><br><span class="line">// 如果省略斜杠及后面部分，表示span值为1</span><br><span class="line">grid-row: 1;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="5-3-grid-area"><a href="#5-3-grid-area" class="headerlink" title="5.3 grid-area"></a>5.3 grid-area</h2><ol>
<li>指定项目放在哪一个区域<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grid-area: 区域名;</span><br></pre></td></tr></table></figure></li>
<li><code>grid-row-start/grid-column-start/grid-row-end/grid-column-end</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grid-area: 2/2/3/4;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="5-4-justify-self-amp-align-self-amp-place-self"><a href="#5-4-justify-self-amp-align-self-amp-place-self" class="headerlink" title="5.4 justify-self &amp; align-self &amp; place-self"></a>5.4 justify-self &amp; align-self &amp; place-self</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>justify-self</td>
<td>单元格中的元素在单元格中的水平对齐方式（针对单个单元格）</td>
</tr>
<tr>
<td>align-self</td>
<td>单元格中的元素在单元格中的垂直对齐方式（针对单个单元格）</td>
</tr>
<tr>
<td>place-self</td>
<td><code>align-self justify-self</code> 简写</td>
</tr>
</tbody></table>
<ul>
<li><code>justify-self</code> 用法同<code>justify-items</code></li>
<li><code>align-self</code> 用法同<code>align-items</code></li>
<li><code>place-selef</code> <ul>
<li>如果省略第二个值，则浏览器认为第二个值等于第一个值</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://anyeansan.github.io/anyeansan.github.io/2020/03/30/CSS-%E7%BB%A7%E6%89%BF%E5%92%8C%E5%B1%82%E5%8F%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/anyeansan.github.io/images/an3.png">
      <meta itemprop="name" content="安₃">
      <meta itemprop="description" content="一蓑烟雨任平生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="安₃">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/anyeansan.github.io/2020/03/30/CSS-%E7%BB%A7%E6%89%BF%E5%92%8C%E5%B1%82%E5%8F%A0/" class="post-title-link" itemprop="url">CSS 继承和层叠</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">✦</span>
              

              <time title="创建时间：2020-03-30 20:59:51 / 修改时间：21:10:00" itemprop="dateCreated datePublished" datetime="2020-03-30T20:59:51+08:00">2020-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">☛</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/" itemprop="url" rel="index">
                    <span itemprop="name">UI</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/anyeansan.github.io/categories/UI/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一-继承"><a href="#一-继承" class="headerlink" title="一 继承"></a>一 继承</h1><h2 id="1-1-控制继承"><a href="#1-1-控制继承" class="headerlink" title="1.1 控制继承"></a>1.1 控制继承</h2><ul>
<li>CSS 为控制继承提供了四个特殊的通用属性值。每个css属性都接收这些值</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>inherit</td>
<td>设置该值会使子元素属性和父元素相同。实际上，就是 “开启继承”.</td>
</tr>
<tr>
<td>initial</td>
<td>设置 CSS 属性为它的默认值</td>
</tr>
<tr>
<td>unset</td>
<td>如果该属性默认可继承，该值等同于 <code>inherit</code>，如果该属性是非继承属性，该值等同于 <code>initial</code></td>
</tr>
<tr>
<td>revert</td>
<td>只有很少的浏览器支持</td>
</tr>
</tbody></table>
<h2 id="1-2-元素可继承属性"><a href="#1-2-元素可继承属性" class="headerlink" title="1.2 元素可继承属性"></a>1.2 元素可继承属性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">azimuth border-collapse border-spacing caption-side color cursor</span><br><span class="line">direction elevation empty-cells font-family font-size font-style </span><br><span class="line">font-variant font-weight font letter-spacing line-height </span><br><span class="line">list-style-image list-style-position list-style-type list-style</span><br><span class="line">orphans pitch-range pitch quotes richness speak-header</span><br><span class="line">speak-numeral speak-punctuation speak speech-rate stress</span><br><span class="line">text-align text-indent text-transform visibility voice-family volume</span><br><span class="line">white-space widows word-spacing</span><br></pre></td></tr></table></figure>

<h3 id="1-文本相关属性"><a href="#1-文本相关属性" class="headerlink" title="1 文本相关属性"></a>1 文本相关属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">font-family font-size font-style </span><br><span class="line">font-variant font-weight font letter-spacing line-height</span><br><span class="line">text-align text-indent text-transform word-spacing color</span><br></pre></td></tr></table></figure>

<h3 id="2-列表相关属性"><a href="#2-列表相关属性" class="headerlink" title="2 列表相关属性"></a>2 列表相关属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list-style-image list-style-position list-style-type list-style</span><br></pre></td></tr></table></figure>

<h3 id="3-表格相关属性"><a href="#3-表格相关属性" class="headerlink" title="3 表格相关属性"></a>3 表格相关属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">border-collapse  border-spacing empty-cells</span><br></pre></td></tr></table></figure>

<h3 id="4-可见性相关属性"><a href="#4-可见性相关属性" class="headerlink" title="4 可见性相关属性"></a>4 可见性相关属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visibility</span><br></pre></td></tr></table></figure>

<h1 id="二-层叠"><a href="#二-层叠" class="headerlink" title="二 层叠"></a>二 层叠</h1><h2 id="2-1-层叠上下文-stacking-context"><a href="#2-1-层叠上下文-stacking-context" class="headerlink" title="2.1 层叠上下文 stacking context"></a>2.1 层叠上下文 <code>stacking context</code></h2><ul>
<li>层叠上下文是一个概念，跟“块状格式化上下文”（BFC）类似，可以想象成z轴上的一个层叠结界</li>
</ul>
<h3 id="1-层叠上下文特性"><a href="#1-层叠上下文特性" class="headerlink" title="1 层叠上下文特性"></a>1 层叠上下文特性</h3><ol>
<li>层叠上下文的层叠水平要比普通元素高。</li>
<li>层叠上下文可以阻断元素的混合模式</li>
<li>层叠上下文可以嵌套，内部层叠上下文及其所有子元素均受制于外部的“层叠上下文”。</li>
<li>每个层叠上下文和兄弟元素独立，也就是说，当进行层叠变化或渲染的时候，只需要考虑后代元素。</li>
<li>每个层叠上下文是自成体系的，当元素发生层叠的时候，整个元素被认为是在父层叠上下文的层叠顺序中</li>
</ol>
<h3 id="2-创建层叠上下文"><a href="#2-创建层叠上下文" class="headerlink" title="2 创建层叠上下文"></a>2 创建层叠上下文</h3><ol>
<li>页面根元素<code>&lt;html&gt;</code>天生具有层叠上下文，称为根层叠上下文。</li>
<li>定位元素（position非static）的z-index不是auto，会创建层叠上下文</li>
<li>其它css3属性创建层叠上下文<ol>
<li>元素为 flex 布局元素（即父元素 display:flex / inline-flex），同时 z-index值不是 auto。</li>
<li>元素的 opacity 值不是 1。</li>
<li>元素的 transform 值不是 none。</li>
<li>元素 mix-blend-mode 值不是 normal。</li>
<li>元素的 filter 值不是 none。</li>
<li>元素的 isolation 值是 isolate。</li>
<li>元素的 will-change 属性值为上面 2～6 的任意一个（如willchange:opacity、will-chang:transform 等）。</li>
<li>元素的-webkit-overflow-scrolling 设为 touch。</li>
</ol>
</li>
</ol>
<h2 id="2-2-层叠水平-stacking-level"><a href="#2-2-层叠水平-stacking-level" class="headerlink" title="2.2 层叠水平 stacking level"></a>2.2 层叠水平 <code>stacking level</code></h2><ul>
<li>决定了同一个层叠上下文中元素在 z 轴上的显示顺序</li>
<li>所有元素都有层叠水平，普通元素的层叠水平在其层叠上下文中有意义</li>
</ul>
<h2 id="2-3-层叠顺序-stacking-order"><a href="#2-3-层叠顺序-stacking-order" class="headerlink" title="2.3 层叠顺序 stacking order"></a>2.3 层叠顺序 <code>stacking order</code></h2><ul>
<li>就是根据层叠水平规定在z轴显示顺序的规则</li>
<li>每一个层叠顺序规则仅适用于当前层叠上下文元素的小世界</li>
</ul>
<p>![](<a href="https://gitee.com/3noanswer/npics/raw/master/UI/CSS/stacking" target="_blank" rel="noopener">https://gitee.com/3noanswer/npics/raw/master/UI/CSS/stacking</a> order.png)</p>
<ul>
<li>在同一个层叠上下文中的七层<ol>
<li>层叠上下文的背景和边框</li>
<li>层叠上下文中z-index值为负的层叠上下文元素</li>
<li>层叠上下文中块级普通元素</li>
<li>层叠上下文中浮动元素</li>
<li>层级上下文中内联普通元素</li>
<li>此层包含三种<ol>
<li>层叠上下文中不依赖z-index 的层叠上下文元素（即元素创建层叠上下文时不是用的z-index）</li>
<li>层叠上下文中z-index值为 0 的层叠上下文元素</li>
<li>层叠上下文中z-index值为 auto 的普通定位元素<ol>
<li>元素一旦成为定位元素，其z-index就会自动生效，默认为auto</li>
<li>定位元素的z-index值为数值时才是层叠上下文，所以此时是普通定位元素，并非层叠上下文</li>
</ol>
</li>
</ol>
</li>
<li>层叠上下文中z-index值为负的层叠上下文元素</li>
</ol>
</li>
</ul>
<h3 id="比较步骤"><a href="#比较步骤" class="headerlink" title="比较步骤"></a>比较步骤</h3><ol>
<li>首先查看两个元素是否在同一个层叠上下文<ol>
<li>否，则查看它们所在的层叠上下文是否在同一个层叠上下文，如果还不是，继续往上…直到两个层叠上下文在同一个层叠上下文中，最终肯定在同一个层叠上下文，因为有根层叠上下文。</li>
<li>是，则根据它们的层叠水平，在层叠顺序中找到位置。</li>
</ol>
</li>
<li>如果在层叠顺序中位置相同<ol>
<li>如果明显的层叠水平标识的，如生效的z-index，则谁大谁在上</li>
<li>如果没有明显的层叠水平标识的，则后来居上（即在 DOM 流中处于后面的元素会覆盖前面的元素）</li>
</ol>
</li>
</ol>
<h2 id="2-4-z-index"><a href="#2-4-z-index" class="headerlink" title="2.4 z-index"></a>2.4 z-index</h2><ul>
<li>设定了一个定位元素及其后代元素或 flex 项目的 z-order</li>
<li>即只能用在<ol>
<li>定位元素</li>
<li>flex 布局中的项目</li>
</ol>
</li>
</ul>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>auto</code>（默认）</td>
<td>不会创建一个新的本地堆叠上下文</td>
</tr>
<tr>
<td><code>&lt;integer&gt;</code></td>
<td>创建层叠上下文，可以为负</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <div>
      
    </div>
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/anyeansan.github.io/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/anyeansan.github.io/">1</a><a class="page-number" href="/anyeansan.github.io/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/anyeansan.github.io/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/anyeansan.github.io/page/6/">6</a><a class="extend next" rel="next" href="/anyeansan.github.io/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          秘笈
        </li>
        <li class="sidebar-nav-overview">
          安₃
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="安₃"
      src="/anyeansan.github.io/images/an3.png">
  <p class="site-author-name" itemprop="name">安₃</p>
  <div class="site-description" itemprop="description">一蓑烟雨任平生</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/anyeansan.github.io/archives/">
        
          <span class="site-state-item-count">56</span>
          <span class="site-state-item-name">书斋</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/anyeansan.github.io/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">门派</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/anyeansan.github.io/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-star-half-full"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">安₃</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/anyeansan.github.io/lib/anime.min.js"></script>
  <script src="/anyeansan.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/anyeansan.github.io/lib/velocity/velocity.ui.min.js"></script>
<script src="/anyeansan.github.io/js/utils.js"></script><script src="/anyeansan.github.io/js/motion.js"></script>
<script src="/anyeansan.github.io/js/schemes/pisces.js"></script>
<script src="/anyeansan.github.io/js/next-boot.js"></script>



  




  <script src="/anyeansan.github.io/js/local-search.js"></script>













  

  

</body>
</html>
